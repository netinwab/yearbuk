var J5=Object.defineProperty;var zg=e=>{throw TypeError(e)};var e8=(e,t,r)=>t in e?J5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $m=(e,t,r)=>e8(e,typeof t!="symbol"?t+"":t,r),zm=(e,t,r)=>t.has(e)||zg("Cannot "+r);var q=(e,t,r)=>(zm(e,t,"read from private field"),r?r.call(e):t.get(e)),st=(e,t,r)=>t.has(e)?zg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Oe=(e,t,r,n)=>(zm(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),bt=(e,t,r)=>(zm(e,t,"access private method"),r);var Hd=(e,t,r,n)=>({set _(a){Oe(e,t,a,r)},get _(){return q(e,t,n)}});function t8(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function pw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xw={exports:{}},qh={},gw={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kd=Symbol.for("react.element"),s8=Symbol.for("react.portal"),r8=Symbol.for("react.fragment"),n8=Symbol.for("react.strict_mode"),a8=Symbol.for("react.profiler"),i8=Symbol.for("react.provider"),o8=Symbol.for("react.context"),l8=Symbol.for("react.forward_ref"),c8=Symbol.for("react.suspense"),d8=Symbol.for("react.memo"),u8=Symbol.for("react.lazy"),Ug=Symbol.iterator;function h8(e){return e===null||typeof e!="object"?null:(e=Ug&&e[Ug]||e["@@iterator"],typeof e=="function"?e:null)}var bw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vw=Object.assign,ww={};function Wl(e,t,r){this.props=e,this.context=t,this.refs=ww,this.updater=r||bw}Wl.prototype.isReactComponent={};Wl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yw(){}yw.prototype=Wl.prototype;function D0(e,t,r){this.props=e,this.context=t,this.refs=ww,this.updater=r||bw}var I0=D0.prototype=new yw;I0.constructor=D0;vw(I0,Wl.prototype);I0.isPureReactComponent=!0;var Vg=Array.isArray,Nw=Object.prototype.hasOwnProperty,F0={current:null},jw={key:!0,ref:!0,__self:!0,__source:!0};function Cw(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Nw.call(t,n)&&!jw.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:kd,type:e,key:i,ref:o,props:a,_owner:F0.current}}function m8(e,t){return{$$typeof:kd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function O0(e){return typeof e=="object"&&e!==null&&e.$$typeof===kd}function f8(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Bg=/\/+/g;function Um(e,t){return typeof e=="object"&&e!==null&&e.key!=null?f8(""+e.key):t.toString(36)}function Nu(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case kd:case s8:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Um(o,0):n,Vg(a)?(r="",e!=null&&(r=e.replace(Bg,"$&/")+"/"),Nu(a,t,r,"",function(u){return u})):a!=null&&(O0(a)&&(a=m8(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Bg,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Vg(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Um(i,l);o+=Nu(i,t,r,c,a)}else if(c=h8(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Um(i,l++),o+=Nu(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Yd(e,t,r){if(e==null)return e;var n=[],a=0;return Nu(e,n,"","",function(i){return t.call(r,i,a++)}),n}function p8(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var or={current:null},ju={transition:null},x8={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:ju,ReactCurrentOwner:F0};function kw(){throw Error("act(...) is not supported in production builds of React.")}jt.Children={map:Yd,forEach:function(e,t,r){Yd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Yd(e,function(){t++}),t},toArray:function(e){return Yd(e,function(t){return t})||[]},only:function(e){if(!O0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jt.Component=Wl;jt.Fragment=r8;jt.Profiler=a8;jt.PureComponent=D0;jt.StrictMode=n8;jt.Suspense=c8;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x8;jt.act=kw;jt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=vw({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=F0.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Nw.call(t,c)&&!jw.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:kd,type:e.type,key:a,ref:i,props:n,_owner:o}};jt.createContext=function(e){return e={$$typeof:o8,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:i8,_context:e},e.Consumer=e};jt.createElement=Cw;jt.createFactory=function(e){var t=Cw.bind(null,e);return t.type=e,t};jt.createRef=function(){return{current:null}};jt.forwardRef=function(e){return{$$typeof:l8,render:e}};jt.isValidElement=O0;jt.lazy=function(e){return{$$typeof:u8,_payload:{_status:-1,_result:e},_init:p8}};jt.memo=function(e,t){return{$$typeof:d8,type:e,compare:t===void 0?null:t}};jt.startTransition=function(e){var t=ju.transition;ju.transition={};try{e()}finally{ju.transition=t}};jt.unstable_act=kw;jt.useCallback=function(e,t){return or.current.useCallback(e,t)};jt.useContext=function(e){return or.current.useContext(e)};jt.useDebugValue=function(){};jt.useDeferredValue=function(e){return or.current.useDeferredValue(e)};jt.useEffect=function(e,t){return or.current.useEffect(e,t)};jt.useId=function(){return or.current.useId()};jt.useImperativeHandle=function(e,t,r){return or.current.useImperativeHandle(e,t,r)};jt.useInsertionEffect=function(e,t){return or.current.useInsertionEffect(e,t)};jt.useLayoutEffect=function(e,t){return or.current.useLayoutEffect(e,t)};jt.useMemo=function(e,t){return or.current.useMemo(e,t)};jt.useReducer=function(e,t,r){return or.current.useReducer(e,t,r)};jt.useRef=function(e){return or.current.useRef(e)};jt.useState=function(e){return or.current.useState(e)};jt.useSyncExternalStore=function(e,t,r){return or.current.useSyncExternalStore(e,t,r)};jt.useTransition=function(){return or.current.useTransition()};jt.version="18.3.1";gw.exports=jt;var d=gw.exports;const Le=pw(d),L0=t8({__proto__:null,default:Le},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g8=d,b8=Symbol.for("react.element"),v8=Symbol.for("react.fragment"),w8=Object.prototype.hasOwnProperty,y8=g8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N8={key:!0,ref:!0,__self:!0,__source:!0};function Sw(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)w8.call(t,n)&&!N8.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:b8,type:e,key:i,ref:o,props:a,_owner:y8.current}}qh.Fragment=v8;qh.jsx=Sw;qh.jsxs=Sw;xw.exports=qh;var s=xw.exports,Pw={exports:{}},Dr={},Ew={exports:{}},Tw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,Y){var Z=E.length;E.push(Y);e:for(;0<Z;){var ne=Z-1>>>1,oe=E[ne];if(0<a(oe,Y))E[ne]=Y,E[Z]=oe,Z=ne;else break e}}function r(E){return E.length===0?null:E[0]}function n(E){if(E.length===0)return null;var Y=E[0],Z=E.pop();if(Z!==Y){E[0]=Z;e:for(var ne=0,oe=E.length,pe=oe>>>1;ne<pe;){var he=2*(ne+1)-1,B=E[he],K=he+1,re=E[K];if(0>a(B,Z))K<oe&&0>a(re,B)?(E[ne]=re,E[K]=Z,ne=K):(E[ne]=B,E[he]=Z,ne=he);else if(K<oe&&0>a(re,Z))E[ne]=re,E[K]=Z,ne=K;else break e}}return Y}function a(E,Y){var Z=E.sortIndex-Y.sortIndex;return Z!==0?Z:E.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],m=1,h=null,p=3,y=!1,N=!1,f=!1,j=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(E){for(var Y=r(u);Y!==null;){if(Y.callback===null)n(u);else if(Y.startTime<=E)n(u),Y.sortIndex=Y.expirationTime,t(c,Y);else break;Y=r(u)}}function C(E){if(f=!1,w(E),!N)if(r(c)!==null)N=!0,_(S);else{var Y=r(u);Y!==null&&V(C,Y.startTime-E)}}function S(E,Y){N=!1,f&&(f=!1,b(R),R=-1),y=!0;var Z=p;try{for(w(Y),h=r(c);h!==null&&(!(h.expirationTime>Y)||E&&!W());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,p=h.priorityLevel;var oe=ne(h.expirationTime<=Y);Y=e.unstable_now(),typeof oe=="function"?h.callback=oe:h===r(c)&&n(c),w(Y)}else n(c);h=r(c)}if(h!==null)var pe=!0;else{var he=r(u);he!==null&&V(C,he.startTime-Y),pe=!1}return pe}finally{h=null,p=Z,y=!1}}var M=!1,A=null,R=-1,z=5,$=-1;function W(){return!(e.unstable_now()-$<z)}function G(){if(A!==null){var E=e.unstable_now();$=E;var Y=!0;try{Y=A(!0,E)}finally{Y?X():(M=!1,A=null)}}else M=!1}var X;if(typeof x=="function")X=function(){x(G)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,L=P.port2;P.port1.onmessage=G,X=function(){L.postMessage(null)}}else X=function(){j(G,0)};function _(E){A=E,M||(M=!0,X())}function V(E,Y){R=j(function(){E(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){N||y||(N=!0,_(S))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(E){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var Z=p;p=Y;try{return E()}finally{p=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,Y){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var Z=p;p=E;try{return Y()}finally{p=Z}},e.unstable_scheduleCallback=function(E,Y,Z){var ne=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ne+Z:ne):Z=ne,E){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Z+oe,E={id:m++,callback:Y,priorityLevel:E,startTime:Z,expirationTime:oe,sortIndex:-1},Z>ne?(E.sortIndex=Z,t(u,E),r(c)===null&&E===r(u)&&(f?(b(R),R=-1):f=!0,V(C,Z-ne))):(E.sortIndex=oe,t(c,E),N||y||(N=!0,_(S))),E},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(E){var Y=p;return function(){var Z=p;p=Y;try{return E.apply(this,arguments)}finally{p=Z}}}})(Tw);Ew.exports=Tw;var j8=Ew.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C8=d,Rr=j8;function je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Aw=new Set,Vc={};function go(e,t){Pl(e,t),Pl(e+"Capture",t)}function Pl(e,t){for(Vc[e]=t,e=0;e<t.length;e++)Aw.add(t[e])}var ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hf=Object.prototype.hasOwnProperty,k8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qg={},Hg={};function S8(e){return Hf.call(Hg,e)?!0:Hf.call(qg,e)?!1:k8.test(e)?Hg[e]=!0:(qg[e]=!0,!1)}function P8(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function E8(e,t,r,n){if(t===null||typeof t>"u"||P8(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lr(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Us={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Us[e]=new lr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Us[t]=new lr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Us[e]=new lr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Us[e]=new lr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Us[e]=new lr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Us[e]=new lr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Us[e]=new lr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Us[e]=new lr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Us[e]=new lr(e,5,!1,e.toLowerCase(),null,!1,!1)});var $0=/[\-:]([a-z])/g;function z0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($0,z0);Us[t]=new lr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($0,z0);Us[t]=new lr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($0,z0);Us[t]=new lr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Us[e]=new lr(e,1,!1,e.toLowerCase(),null,!1,!1)});Us.xlinkHref=new lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Us[e]=new lr(e,1,!1,e.toLowerCase(),null,!0,!0)});function U0(e,t,r,n){var a=Us.hasOwnProperty(t)?Us[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(E8(t,r,a,n)&&(r=null),n||a===null?S8(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var wa=C8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wd=Symbol.for("react.element"),Fo=Symbol.for("react.portal"),Oo=Symbol.for("react.fragment"),V0=Symbol.for("react.strict_mode"),Yf=Symbol.for("react.profiler"),Rw=Symbol.for("react.provider"),Mw=Symbol.for("react.context"),B0=Symbol.for("react.forward_ref"),Wf=Symbol.for("react.suspense"),Kf=Symbol.for("react.suspense_list"),q0=Symbol.for("react.memo"),Ra=Symbol.for("react.lazy"),_w=Symbol.for("react.offscreen"),Yg=Symbol.iterator;function ic(e){return e===null||typeof e!="object"?null:(e=Yg&&e[Yg]||e["@@iterator"],typeof e=="function"?e:null)}var Xt=Object.assign,Vm;function gc(e){if(Vm===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Vm=t&&t[1]||""}return`
`+Vm+e}var Bm=!1;function qm(e,t){if(!e||Bm)return"";Bm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Bm=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?gc(e):""}function T8(e){switch(e.tag){case 5:return gc(e.type);case 16:return gc("Lazy");case 13:return gc("Suspense");case 19:return gc("SuspenseList");case 0:case 2:case 15:return e=qm(e.type,!1),e;case 11:return e=qm(e.type.render,!1),e;case 1:return e=qm(e.type,!0),e;default:return""}}function Gf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Oo:return"Fragment";case Fo:return"Portal";case Yf:return"Profiler";case V0:return"StrictMode";case Wf:return"Suspense";case Kf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mw:return(e.displayName||"Context")+".Consumer";case Rw:return(e._context.displayName||"Context")+".Provider";case B0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case q0:return t=e.displayName||null,t!==null?t:Gf(e.type)||"Memo";case Ra:t=e._payload,e=e._init;try{return Gf(e(t))}catch{}}return null}function A8(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gf(t);case 8:return t===V0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ci(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function R8(e){var t=Dw(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Kd(e){e._valueTracker||(e._valueTracker=R8(e))}function Iw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Dw(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Wu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qf(e,t){var r=t.checked;return Xt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Wg(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ci(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Fw(e,t){t=t.checked,t!=null&&U0(e,"checked",t,!1)}function Zf(e,t){Fw(e,t);var r=ci(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xf(e,t.type,r):t.hasOwnProperty("defaultValue")&&Xf(e,t.type,ci(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Kg(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Xf(e,t,r){(t!=="number"||Wu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var bc=Array.isArray;function Ko(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ci(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Jf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(je(91));return Xt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gg(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(je(92));if(bc(r)){if(1<r.length)throw Error(je(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ci(r)}}function Ow(e,t){var r=ci(t.value),n=ci(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Qg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Lw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ep(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Lw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gd,$w=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gd=Gd||document.createElement("div"),Gd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Sc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M8=["Webkit","ms","Moz","O"];Object.keys(Sc).forEach(function(e){M8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sc[t]=Sc[e]})});function zw(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Sc.hasOwnProperty(e)&&Sc[e]?(""+t).trim():t+"px"}function Uw(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=zw(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var _8=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tp(e,t){if(t){if(_8[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(je(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(je(62))}}function sp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rp=null;function H0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var np=null,Go=null,Qo=null;function Zg(e){if(e=Ed(e)){if(typeof np!="function")throw Error(je(280));var t=e.stateNode;t&&(t=Gh(t),np(e.stateNode,e.type,t))}}function Vw(e){Go?Qo?Qo.push(e):Qo=[e]:Go=e}function Bw(){if(Go){var e=Go,t=Qo;if(Qo=Go=null,Zg(e),t)for(e=0;e<t.length;e++)Zg(t[e])}}function qw(e,t){return e(t)}function Hw(){}var Hm=!1;function Yw(e,t,r){if(Hm)return e(t,r);Hm=!0;try{return qw(e,t,r)}finally{Hm=!1,(Go!==null||Qo!==null)&&(Hw(),Bw())}}function qc(e,t){var r=e.stateNode;if(r===null)return null;var n=Gh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(je(231,t,typeof r));return r}var ap=!1;if(ha)try{var oc={};Object.defineProperty(oc,"passive",{get:function(){ap=!0}}),window.addEventListener("test",oc,oc),window.removeEventListener("test",oc,oc)}catch{ap=!1}function D8(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(m){this.onError(m)}}var Pc=!1,Ku=null,Gu=!1,ip=null,I8={onError:function(e){Pc=!0,Ku=e}};function F8(e,t,r,n,a,i,o,l,c){Pc=!1,Ku=null,D8.apply(I8,arguments)}function O8(e,t,r,n,a,i,o,l,c){if(F8.apply(this,arguments),Pc){if(Pc){var u=Ku;Pc=!1,Ku=null}else throw Error(je(198));Gu||(Gu=!0,ip=u)}}function bo(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ww(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xg(e){if(bo(e)!==e)throw Error(je(188))}function L8(e){var t=e.alternate;if(!t){if(t=bo(e),t===null)throw Error(je(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Xg(a),e;if(i===n)return Xg(a),t;i=i.sibling}throw Error(je(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(je(189))}}if(r.alternate!==n)throw Error(je(190))}if(r.tag!==3)throw Error(je(188));return r.stateNode.current===r?e:t}function Kw(e){return e=L8(e),e!==null?Gw(e):null}function Gw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gw(e);if(t!==null)return t;e=e.sibling}return null}var Qw=Rr.unstable_scheduleCallback,Jg=Rr.unstable_cancelCallback,$8=Rr.unstable_shouldYield,z8=Rr.unstable_requestPaint,cs=Rr.unstable_now,U8=Rr.unstable_getCurrentPriorityLevel,Y0=Rr.unstable_ImmediatePriority,Zw=Rr.unstable_UserBlockingPriority,Qu=Rr.unstable_NormalPriority,V8=Rr.unstable_LowPriority,Xw=Rr.unstable_IdlePriority,Hh=null,zn=null;function B8(e){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(Hh,e,void 0,(e.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:Y8,q8=Math.log,H8=Math.LN2;function Y8(e){return e>>>=0,e===0?32:31-(q8(e)/H8|0)|0}var Qd=64,Zd=4194304;function vc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zu(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=vc(l):(i&=o,i!==0&&(n=vc(i)))}else o=r&~a,o!==0?n=vc(o):i!==0&&(n=vc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-xn(t),a=1<<r,n|=e[r],t&=~a;return n}function W8(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K8(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-xn(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=W8(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function op(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Jw(){var e=Qd;return Qd<<=1,!(Qd&4194240)&&(Qd=64),e}function Ym(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Sd(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xn(t),e[t]=r}function G8(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-xn(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function W0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-xn(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Lt=0;function e2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var t2,K0,s2,r2,n2,lp=!1,Xd=[],Za=null,Xa=null,Ja=null,Hc=new Map,Yc=new Map,Ia=[],Q8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e1(e,t){switch(e){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":Xa=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":Hc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yc.delete(t.pointerId)}}function lc(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ed(t),t!==null&&K0(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Z8(e,t,r,n,a){switch(t){case"focusin":return Za=lc(Za,e,t,r,n,a),!0;case"dragenter":return Xa=lc(Xa,e,t,r,n,a),!0;case"mouseover":return Ja=lc(Ja,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Hc.set(i,lc(Hc.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Yc.set(i,lc(Yc.get(i)||null,e,t,r,n,a)),!0}return!1}function a2(e){var t=Ti(e.target);if(t!==null){var r=bo(t);if(r!==null){if(t=r.tag,t===13){if(t=Ww(r),t!==null){e.blockedOn=t,n2(e.priority,function(){s2(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=cp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);rp=n,r.target.dispatchEvent(n),rp=null}else return t=Ed(r),t!==null&&K0(t),e.blockedOn=r,!1;t.shift()}return!0}function t1(e,t,r){Cu(e)&&r.delete(t)}function X8(){lp=!1,Za!==null&&Cu(Za)&&(Za=null),Xa!==null&&Cu(Xa)&&(Xa=null),Ja!==null&&Cu(Ja)&&(Ja=null),Hc.forEach(t1),Yc.forEach(t1)}function cc(e,t){e.blockedOn===t&&(e.blockedOn=null,lp||(lp=!0,Rr.unstable_scheduleCallback(Rr.unstable_NormalPriority,X8)))}function Wc(e){function t(a){return cc(a,e)}if(0<Xd.length){cc(Xd[0],e);for(var r=1;r<Xd.length;r++){var n=Xd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Za!==null&&cc(Za,e),Xa!==null&&cc(Xa,e),Ja!==null&&cc(Ja,e),Hc.forEach(t),Yc.forEach(t),r=0;r<Ia.length;r++)n=Ia[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ia.length&&(r=Ia[0],r.blockedOn===null);)a2(r),r.blockedOn===null&&Ia.shift()}var Zo=wa.ReactCurrentBatchConfig,Xu=!0;function J8(e,t,r,n){var a=Lt,i=Zo.transition;Zo.transition=null;try{Lt=1,G0(e,t,r,n)}finally{Lt=a,Zo.transition=i}}function e9(e,t,r,n){var a=Lt,i=Zo.transition;Zo.transition=null;try{Lt=4,G0(e,t,r,n)}finally{Lt=a,Zo.transition=i}}function G0(e,t,r,n){if(Xu){var a=cp(e,t,r,n);if(a===null)sf(e,t,n,Ju,r),e1(e,n);else if(Z8(a,e,t,r,n))n.stopPropagation();else if(e1(e,n),t&4&&-1<Q8.indexOf(e)){for(;a!==null;){var i=Ed(a);if(i!==null&&t2(i),i=cp(e,t,r,n),i===null&&sf(e,t,n,Ju,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else sf(e,t,n,null,r)}}var Ju=null;function cp(e,t,r,n){if(Ju=null,e=H0(n),e=Ti(e),e!==null)if(t=bo(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ww(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ju=e,null}function i2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U8()){case Y0:return 1;case Zw:return 4;case Qu:case V8:return 16;case Xw:return 536870912;default:return 16}default:return 16}}var Wa=null,Q0=null,ku=null;function o2(){if(ku)return ku;var e,t=Q0,r=t.length,n,a="value"in Wa?Wa.value:Wa.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return ku=a.slice(e,1<n?1-n:void 0)}function Su(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Jd(){return!0}function s1(){return!1}function Ir(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Jd:s1,this.isPropagationStopped=s1,this}return Xt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Jd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Jd)},persist:function(){},isPersistent:Jd}),t}var Kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Z0=Ir(Kl),Pd=Xt({},Kl,{view:0,detail:0}),t9=Ir(Pd),Wm,Km,dc,Yh=Xt({},Pd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:X0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dc&&(dc&&e.type==="mousemove"?(Wm=e.screenX-dc.screenX,Km=e.screenY-dc.screenY):Km=Wm=0,dc=e),Wm)},movementY:function(e){return"movementY"in e?e.movementY:Km}}),r1=Ir(Yh),s9=Xt({},Yh,{dataTransfer:0}),r9=Ir(s9),n9=Xt({},Pd,{relatedTarget:0}),Gm=Ir(n9),a9=Xt({},Kl,{animationName:0,elapsedTime:0,pseudoElement:0}),i9=Ir(a9),o9=Xt({},Kl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),l9=Ir(o9),c9=Xt({},Kl,{data:0}),n1=Ir(c9),d9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=h9[e])?!!t[e]:!1}function X0(){return m9}var f9=Xt({},Pd,{key:function(e){if(e.key){var t=d9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Su(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?u9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:X0,charCode:function(e){return e.type==="keypress"?Su(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Su(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),p9=Ir(f9),x9=Xt({},Yh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a1=Ir(x9),g9=Xt({},Pd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:X0}),b9=Ir(g9),v9=Xt({},Kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),w9=Ir(v9),y9=Xt({},Yh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),N9=Ir(y9),j9=[9,13,27,32],J0=ha&&"CompositionEvent"in window,Ec=null;ha&&"documentMode"in document&&(Ec=document.documentMode);var C9=ha&&"TextEvent"in window&&!Ec,l2=ha&&(!J0||Ec&&8<Ec&&11>=Ec),i1=" ",o1=!1;function c2(e,t){switch(e){case"keyup":return j9.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lo=!1;function k9(e,t){switch(e){case"compositionend":return d2(t);case"keypress":return t.which!==32?null:(o1=!0,i1);case"textInput":return e=t.data,e===i1&&o1?null:e;default:return null}}function S9(e,t){if(Lo)return e==="compositionend"||!J0&&c2(e,t)?(e=o2(),ku=Q0=Wa=null,Lo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return l2&&t.locale!=="ko"?null:t.data;default:return null}}var P9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!P9[e.type]:t==="textarea"}function u2(e,t,r,n){Vw(n),t=eh(t,"onChange"),0<t.length&&(r=new Z0("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Tc=null,Kc=null;function E9(e){N2(e,0)}function Wh(e){var t=Uo(e);if(Iw(t))return e}function T9(e,t){if(e==="change")return t}var h2=!1;if(ha){var Qm;if(ha){var Zm="oninput"in document;if(!Zm){var c1=document.createElement("div");c1.setAttribute("oninput","return;"),Zm=typeof c1.oninput=="function"}Qm=Zm}else Qm=!1;h2=Qm&&(!document.documentMode||9<document.documentMode)}function d1(){Tc&&(Tc.detachEvent("onpropertychange",m2),Kc=Tc=null)}function m2(e){if(e.propertyName==="value"&&Wh(Kc)){var t=[];u2(t,Kc,e,H0(e)),Yw(E9,t)}}function A9(e,t,r){e==="focusin"?(d1(),Tc=t,Kc=r,Tc.attachEvent("onpropertychange",m2)):e==="focusout"&&d1()}function R9(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wh(Kc)}function M9(e,t){if(e==="click")return Wh(t)}function _9(e,t){if(e==="input"||e==="change")return Wh(t)}function D9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vn=typeof Object.is=="function"?Object.is:D9;function Gc(e,t){if(vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Hf.call(t,a)||!vn(e[a],t[a]))return!1}return!0}function u1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function h1(e,t){var r=u1(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=u1(r)}}function f2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?f2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function p2(){for(var e=window,t=Wu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Wu(e.document)}return t}function ex(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function I9(e){var t=p2(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&f2(r.ownerDocument.documentElement,r)){if(n!==null&&ex(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=h1(r,i);var o=h1(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var F9=ha&&"documentMode"in document&&11>=document.documentMode,$o=null,dp=null,Ac=null,up=!1;function m1(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;up||$o==null||$o!==Wu(n)||(n=$o,"selectionStart"in n&&ex(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ac&&Gc(Ac,n)||(Ac=n,n=eh(dp,"onSelect"),0<n.length&&(t=new Z0("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=$o)))}function eu(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var zo={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},Xm={},x2={};ha&&(x2=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function Kh(e){if(Xm[e])return Xm[e];if(!zo[e])return e;var t=zo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in x2)return Xm[e]=t[r];return e}var g2=Kh("animationend"),b2=Kh("animationiteration"),v2=Kh("animationstart"),w2=Kh("transitionend"),y2=new Map,f1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bi(e,t){y2.set(e,t),go(t,[e])}for(var Jm=0;Jm<f1.length;Jm++){var ef=f1[Jm],O9=ef.toLowerCase(),L9=ef[0].toUpperCase()+ef.slice(1);bi(O9,"on"+L9)}bi(g2,"onAnimationEnd");bi(b2,"onAnimationIteration");bi(v2,"onAnimationStart");bi("dblclick","onDoubleClick");bi("focusin","onFocus");bi("focusout","onBlur");bi(w2,"onTransitionEnd");Pl("onMouseEnter",["mouseout","mouseover"]);Pl("onMouseLeave",["mouseout","mouseover"]);Pl("onPointerEnter",["pointerout","pointerover"]);Pl("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$9=new Set("cancel close invalid load scroll toggle".split(" ").concat(wc));function p1(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,O8(n,t,void 0,e),e.currentTarget=null}function N2(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;p1(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;p1(a,l,u),i=c}}}if(Gu)throw e=ip,Gu=!1,ip=null,e}function Bt(e,t){var r=t[xp];r===void 0&&(r=t[xp]=new Set);var n=e+"__bubble";r.has(n)||(j2(t,e,2,!1),r.add(n))}function tf(e,t,r){var n=0;t&&(n|=4),j2(r,e,n,t)}var tu="_reactListening"+Math.random().toString(36).slice(2);function Qc(e){if(!e[tu]){e[tu]=!0,Aw.forEach(function(r){r!=="selectionchange"&&($9.has(r)||tf(r,!1,e),tf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tu]||(t[tu]=!0,tf("selectionchange",!1,t))}}function j2(e,t,r,n){switch(i2(t)){case 1:var a=J8;break;case 4:a=e9;break;default:a=G0}r=a.bind(null,t,r,e),a=void 0,!ap||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function sf(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Ti(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Yw(function(){var u=i,m=H0(r),h=[];e:{var p=y2.get(e);if(p!==void 0){var y=Z0,N=e;switch(e){case"keypress":if(Su(r)===0)break e;case"keydown":case"keyup":y=p9;break;case"focusin":N="focus",y=Gm;break;case"focusout":N="blur",y=Gm;break;case"beforeblur":case"afterblur":y=Gm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=r1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=r9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=b9;break;case g2:case b2:case v2:y=i9;break;case w2:y=w9;break;case"scroll":y=t9;break;case"wheel":y=N9;break;case"copy":case"cut":case"paste":y=l9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=a1}var f=(t&4)!==0,j=!f&&e==="scroll",b=f?p!==null?p+"Capture":null:p;f=[];for(var x=u,w;x!==null;){w=x;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,b!==null&&(C=qc(x,b),C!=null&&f.push(Zc(x,C,w)))),j)break;x=x.return}0<f.length&&(p=new y(p,N,null,r,m),h.push({event:p,listeners:f}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",p&&r!==rp&&(N=r.relatedTarget||r.fromElement)&&(Ti(N)||N[ma]))break e;if((y||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,y?(N=r.relatedTarget||r.toElement,y=u,N=N?Ti(N):null,N!==null&&(j=bo(N),N!==j||N.tag!==5&&N.tag!==6)&&(N=null)):(y=null,N=u),y!==N)){if(f=r1,C="onMouseLeave",b="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(f=a1,C="onPointerLeave",b="onPointerEnter",x="pointer"),j=y==null?p:Uo(y),w=N==null?p:Uo(N),p=new f(C,x+"leave",y,r,m),p.target=j,p.relatedTarget=w,C=null,Ti(m)===u&&(f=new f(b,x+"enter",N,r,m),f.target=w,f.relatedTarget=j,C=f),j=C,y&&N)t:{for(f=y,b=N,x=0,w=f;w;w=Eo(w))x++;for(w=0,C=b;C;C=Eo(C))w++;for(;0<x-w;)f=Eo(f),x--;for(;0<w-x;)b=Eo(b),w--;for(;x--;){if(f===b||b!==null&&f===b.alternate)break t;f=Eo(f),b=Eo(b)}f=null}else f=null;y!==null&&x1(h,p,y,f,!1),N!==null&&j!==null&&x1(h,j,N,f,!0)}}e:{if(p=u?Uo(u):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var S=T9;else if(l1(p))if(h2)S=_9;else{S=R9;var M=A9}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=M9);if(S&&(S=S(e,u))){u2(h,S,r,m);break e}M&&M(e,p,u),e==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Xf(p,"number",p.value)}switch(M=u?Uo(u):window,e){case"focusin":(l1(M)||M.contentEditable==="true")&&($o=M,dp=u,Ac=null);break;case"focusout":Ac=dp=$o=null;break;case"mousedown":up=!0;break;case"contextmenu":case"mouseup":case"dragend":up=!1,m1(h,r,m);break;case"selectionchange":if(F9)break;case"keydown":case"keyup":m1(h,r,m)}var A;if(J0)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Lo?c2(e,r)&&(R="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(l2&&r.locale!=="ko"&&(Lo||R!=="onCompositionStart"?R==="onCompositionEnd"&&Lo&&(A=o2()):(Wa=m,Q0="value"in Wa?Wa.value:Wa.textContent,Lo=!0)),M=eh(u,R),0<M.length&&(R=new n1(R,e,null,r,m),h.push({event:R,listeners:M}),A?R.data=A:(A=d2(r),A!==null&&(R.data=A)))),(A=C9?k9(e,r):S9(e,r))&&(u=eh(u,"onBeforeInput"),0<u.length&&(m=new n1("onBeforeInput","beforeinput",null,r,m),h.push({event:m,listeners:u}),m.data=A))}N2(h,t)})}function Zc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function eh(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=qc(e,r),i!=null&&n.unshift(Zc(e,i,a)),i=qc(e,t),i!=null&&n.push(Zc(e,i,a))),e=e.return}return n}function Eo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function x1(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=qc(r,i),c!=null&&o.unshift(Zc(r,c,l))):a||(c=qc(r,i),c!=null&&o.push(Zc(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var z9=/\r\n?/g,U9=/\u0000|\uFFFD/g;function g1(e){return(typeof e=="string"?e:""+e).replace(z9,`
`).replace(U9,"")}function su(e,t,r){if(t=g1(t),g1(e)!==t&&r)throw Error(je(425))}function th(){}var hp=null,mp=null;function fp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pp=typeof setTimeout=="function"?setTimeout:void 0,V9=typeof clearTimeout=="function"?clearTimeout:void 0,b1=typeof Promise=="function"?Promise:void 0,B9=typeof queueMicrotask=="function"?queueMicrotask:typeof b1<"u"?function(e){return b1.resolve(null).then(e).catch(q9)}:pp;function q9(e){setTimeout(function(){throw e})}function rf(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Wc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Wc(t)}function ei(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function v1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Gl=Math.random().toString(36).slice(2),Dn="__reactFiber$"+Gl,Xc="__reactProps$"+Gl,ma="__reactContainer$"+Gl,xp="__reactEvents$"+Gl,H9="__reactListeners$"+Gl,Y9="__reactHandles$"+Gl;function Ti(e){var t=e[Dn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ma]||r[Dn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=v1(e);e!==null;){if(r=e[Dn])return r;e=v1(e)}return t}e=r,r=e.parentNode}return null}function Ed(e){return e=e[Dn]||e[ma],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Uo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(je(33))}function Gh(e){return e[Xc]||null}var gp=[],Vo=-1;function vi(e){return{current:e}}function Ht(e){0>Vo||(e.current=gp[Vo],gp[Vo]=null,Vo--)}function $t(e,t){Vo++,gp[Vo]=e.current,e.current=t}var di={},Ks=vi(di),br=vi(!1),Ki=di;function El(e,t){var r=e.type.contextTypes;if(!r)return di;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function vr(e){return e=e.childContextTypes,e!=null}function sh(){Ht(br),Ht(Ks)}function w1(e,t,r){if(Ks.current!==di)throw Error(je(168));$t(Ks,t),$t(br,r)}function C2(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(je(108,A8(e)||"Unknown",a));return Xt({},r,n)}function rh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||di,Ki=Ks.current,$t(Ks,e),$t(br,br.current),!0}function y1(e,t,r){var n=e.stateNode;if(!n)throw Error(je(169));r?(e=C2(e,t,Ki),n.__reactInternalMemoizedMergedChildContext=e,Ht(br),Ht(Ks),$t(Ks,e)):Ht(br),$t(br,r)}var Jn=null,Qh=!1,nf=!1;function k2(e){Jn===null?Jn=[e]:Jn.push(e)}function W9(e){Qh=!0,k2(e)}function wi(){if(!nf&&Jn!==null){nf=!0;var e=0,t=Lt;try{var r=Jn;for(Lt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Jn=null,Qh=!1}catch(a){throw Jn!==null&&(Jn=Jn.slice(e+1)),Qw(Y0,wi),a}finally{Lt=t,nf=!1}}return null}var Bo=[],qo=0,nh=null,ah=0,Vr=[],Br=0,Gi=null,ia=1,oa="";function Pi(e,t){Bo[qo++]=ah,Bo[qo++]=nh,nh=e,ah=t}function S2(e,t,r){Vr[Br++]=ia,Vr[Br++]=oa,Vr[Br++]=Gi,Gi=e;var n=ia;e=oa;var a=32-xn(n)-1;n&=~(1<<a),r+=1;var i=32-xn(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ia=1<<32-xn(t)+a|r<<a|n,oa=i+e}else ia=1<<i|r<<a|n,oa=e}function tx(e){e.return!==null&&(Pi(e,1),S2(e,1,0))}function sx(e){for(;e===nh;)nh=Bo[--qo],Bo[qo]=null,ah=Bo[--qo],Bo[qo]=null;for(;e===Gi;)Gi=Vr[--Br],Vr[Br]=null,oa=Vr[--Br],Vr[Br]=null,ia=Vr[--Br],Vr[Br]=null}var Tr=null,Er=null,Kt=!1,un=null;function P2(e,t){var r=Yr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function N1(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tr=e,Er=ei(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tr=e,Er=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Gi!==null?{id:ia,overflow:oa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Yr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Tr=e,Er=null,!0):!1;default:return!1}}function bp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vp(e){if(Kt){var t=Er;if(t){var r=t;if(!N1(e,t)){if(bp(e))throw Error(je(418));t=ei(r.nextSibling);var n=Tr;t&&N1(e,t)?P2(n,r):(e.flags=e.flags&-4097|2,Kt=!1,Tr=e)}}else{if(bp(e))throw Error(je(418));e.flags=e.flags&-4097|2,Kt=!1,Tr=e}}}function j1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tr=e}function ru(e){if(e!==Tr)return!1;if(!Kt)return j1(e),Kt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fp(e.type,e.memoizedProps)),t&&(t=Er)){if(bp(e))throw E2(),Error(je(418));for(;t;)P2(e,t),t=ei(t.nextSibling)}if(j1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Er=ei(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Er=null}}else Er=Tr?ei(e.stateNode.nextSibling):null;return!0}function E2(){for(var e=Er;e;)e=ei(e.nextSibling)}function Tl(){Er=Tr=null,Kt=!1}function rx(e){un===null?un=[e]:un.push(e)}var K9=wa.ReactCurrentBatchConfig;function uc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(je(309));var n=r.stateNode}if(!n)throw Error(je(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(je(284));if(!r._owner)throw Error(je(290,e))}return e}function nu(e,t){throw e=Object.prototype.toString.call(t),Error(je(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function C1(e){var t=e._init;return t(e._payload)}function T2(e){function t(b,x){if(e){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function r(b,x){if(!e)return null;for(;x!==null;)t(b,x),x=x.sibling;return null}function n(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function a(b,x){return b=ni(b,x),b.index=0,b.sibling=null,b}function i(b,x,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,x,w,C){return x===null||x.tag!==6?(x=hf(w,b.mode,C),x.return=b,x):(x=a(x,w),x.return=b,x)}function c(b,x,w,C){var S=w.type;return S===Oo?m(b,x,w.props.children,C,w.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ra&&C1(S)===x.type)?(C=a(x,w.props),C.ref=uc(b,x,w),C.return=b,C):(C=_u(w.type,w.key,w.props,null,b.mode,C),C.ref=uc(b,x,w),C.return=b,C)}function u(b,x,w,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=mf(w,b.mode,C),x.return=b,x):(x=a(x,w.children||[]),x.return=b,x)}function m(b,x,w,C,S){return x===null||x.tag!==7?(x=qi(w,b.mode,C,S),x.return=b,x):(x=a(x,w),x.return=b,x)}function h(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=hf(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Wd:return w=_u(x.type,x.key,x.props,null,b.mode,w),w.ref=uc(b,null,x),w.return=b,w;case Fo:return x=mf(x,b.mode,w),x.return=b,x;case Ra:var C=x._init;return h(b,C(x._payload),w)}if(bc(x)||ic(x))return x=qi(x,b.mode,w,null),x.return=b,x;nu(b,x)}return null}function p(b,x,w,C){var S=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(b,x,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Wd:return w.key===S?c(b,x,w,C):null;case Fo:return w.key===S?u(b,x,w,C):null;case Ra:return S=w._init,p(b,x,S(w._payload),C)}if(bc(w)||ic(w))return S!==null?null:m(b,x,w,C,null);nu(b,w)}return null}function y(b,x,w,C,S){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(w)||null,l(x,b,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Wd:return b=b.get(C.key===null?w:C.key)||null,c(x,b,C,S);case Fo:return b=b.get(C.key===null?w:C.key)||null,u(x,b,C,S);case Ra:var M=C._init;return y(b,x,w,M(C._payload),S)}if(bc(C)||ic(C))return b=b.get(w)||null,m(x,b,C,S,null);nu(x,C)}return null}function N(b,x,w,C){for(var S=null,M=null,A=x,R=x=0,z=null;A!==null&&R<w.length;R++){A.index>R?(z=A,A=null):z=A.sibling;var $=p(b,A,w[R],C);if($===null){A===null&&(A=z);break}e&&A&&$.alternate===null&&t(b,A),x=i($,x,R),M===null?S=$:M.sibling=$,M=$,A=z}if(R===w.length)return r(b,A),Kt&&Pi(b,R),S;if(A===null){for(;R<w.length;R++)A=h(b,w[R],C),A!==null&&(x=i(A,x,R),M===null?S=A:M.sibling=A,M=A);return Kt&&Pi(b,R),S}for(A=n(b,A);R<w.length;R++)z=y(A,b,R,w[R],C),z!==null&&(e&&z.alternate!==null&&A.delete(z.key===null?R:z.key),x=i(z,x,R),M===null?S=z:M.sibling=z,M=z);return e&&A.forEach(function(W){return t(b,W)}),Kt&&Pi(b,R),S}function f(b,x,w,C){var S=ic(w);if(typeof S!="function")throw Error(je(150));if(w=S.call(w),w==null)throw Error(je(151));for(var M=S=null,A=x,R=x=0,z=null,$=w.next();A!==null&&!$.done;R++,$=w.next()){A.index>R?(z=A,A=null):z=A.sibling;var W=p(b,A,$.value,C);if(W===null){A===null&&(A=z);break}e&&A&&W.alternate===null&&t(b,A),x=i(W,x,R),M===null?S=W:M.sibling=W,M=W,A=z}if($.done)return r(b,A),Kt&&Pi(b,R),S;if(A===null){for(;!$.done;R++,$=w.next())$=h(b,$.value,C),$!==null&&(x=i($,x,R),M===null?S=$:M.sibling=$,M=$);return Kt&&Pi(b,R),S}for(A=n(b,A);!$.done;R++,$=w.next())$=y(A,b,R,$.value,C),$!==null&&(e&&$.alternate!==null&&A.delete($.key===null?R:$.key),x=i($,x,R),M===null?S=$:M.sibling=$,M=$);return e&&A.forEach(function(G){return t(b,G)}),Kt&&Pi(b,R),S}function j(b,x,w,C){if(typeof w=="object"&&w!==null&&w.type===Oo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Wd:e:{for(var S=w.key,M=x;M!==null;){if(M.key===S){if(S=w.type,S===Oo){if(M.tag===7){r(b,M.sibling),x=a(M,w.props.children),x.return=b,b=x;break e}}else if(M.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ra&&C1(S)===M.type){r(b,M.sibling),x=a(M,w.props),x.ref=uc(b,M,w),x.return=b,b=x;break e}r(b,M);break}else t(b,M);M=M.sibling}w.type===Oo?(x=qi(w.props.children,b.mode,C,w.key),x.return=b,b=x):(C=_u(w.type,w.key,w.props,null,b.mode,C),C.ref=uc(b,x,w),C.return=b,b=C)}return o(b);case Fo:e:{for(M=w.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){r(b,x.sibling),x=a(x,w.children||[]),x.return=b,b=x;break e}else{r(b,x);break}else t(b,x);x=x.sibling}x=mf(w,b.mode,C),x.return=b,b=x}return o(b);case Ra:return M=w._init,j(b,x,M(w._payload),C)}if(bc(w))return N(b,x,w,C);if(ic(w))return f(b,x,w,C);nu(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(r(b,x.sibling),x=a(x,w),x.return=b,b=x):(r(b,x),x=hf(w,b.mode,C),x.return=b,b=x),o(b)):r(b,x)}return j}var Al=T2(!0),A2=T2(!1),ih=vi(null),oh=null,Ho=null,nx=null;function ax(){nx=Ho=oh=null}function ix(e){var t=ih.current;Ht(ih),e._currentValue=t}function wp(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Xo(e,t){oh=e,nx=Ho=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gr=!0),e.firstContext=null)}function Qr(e){var t=e._currentValue;if(nx!==e)if(e={context:e,memoizedValue:t,next:null},Ho===null){if(oh===null)throw Error(je(308));Ho=e,oh.dependencies={lanes:0,firstContext:e}}else Ho=Ho.next=e;return t}var Ai=null;function ox(e){Ai===null?Ai=[e]:Ai.push(e)}function R2(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,ox(t)):(r.next=a.next,a.next=r),t.interleaved=r,fa(e,n)}function fa(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ma=!1;function lx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ca(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ti(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Et&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,fa(e,r)}return a=n.interleaved,a===null?(t.next=t,ox(n)):(t.next=a.next,a.next=t),n.interleaved=t,fa(e,r)}function Pu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,W0(e,r)}}function k1(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function lh(e,t,r,n){var a=e.updateQueue;Ma=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=u:l.next=u,m.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,m=u=c=null,l=i;do{var p=l.lane,y=l.eventTime;if((n&p)===p){m!==null&&(m=m.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=e,f=l;switch(p=t,y=r,f.tag){case 1:if(N=f.payload,typeof N=="function"){h=N.call(y,h,p);break e}h=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=f.payload,p=typeof N=="function"?N.call(y,h,p):N,p==null)break e;h=Xt({},h,p);break e;case 2:Ma=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[l]:p.push(l))}else y={eventTime:y,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(u=m=y,c=h):m=m.next=y,o|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;p=l,l=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(m===null&&(c=h),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Zi|=o,e.lanes=o,e.memoizedState=h}}function S1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(je(191,a));a.call(n)}}}var Td={},Un=vi(Td),Jc=vi(Td),ed=vi(Td);function Ri(e){if(e===Td)throw Error(je(174));return e}function cx(e,t){switch($t(ed,t),$t(Jc,e),$t(Un,Td),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ep(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ep(t,e)}Ht(Un),$t(Un,t)}function Rl(){Ht(Un),Ht(Jc),Ht(ed)}function _2(e){Ri(ed.current);var t=Ri(Un.current),r=ep(t,e.type);t!==r&&($t(Jc,e),$t(Un,r))}function dx(e){Jc.current===e&&(Ht(Un),Ht(Jc))}var Qt=vi(0);function ch(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var af=[];function ux(){for(var e=0;e<af.length;e++)af[e]._workInProgressVersionPrimary=null;af.length=0}var Eu=wa.ReactCurrentDispatcher,of=wa.ReactCurrentBatchConfig,Qi=0,Zt=null,ws=null,Es=null,dh=!1,Rc=!1,td=0,G9=0;function Vs(){throw Error(je(321))}function hx(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!vn(e[r],t[r]))return!1;return!0}function mx(e,t,r,n,a,i){if(Qi=i,Zt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Eu.current=e===null||e.memoizedState===null?J9:eC,e=r(n,a),Rc){i=0;do{if(Rc=!1,td=0,25<=i)throw Error(je(301));i+=1,Es=ws=null,t.updateQueue=null,Eu.current=tC,e=r(n,a)}while(Rc)}if(Eu.current=uh,t=ws!==null&&ws.next!==null,Qi=0,Es=ws=Zt=null,dh=!1,t)throw Error(je(300));return e}function fx(){var e=td!==0;return td=0,e}function Tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Es===null?Zt.memoizedState=Es=e:Es=Es.next=e,Es}function Zr(){if(ws===null){var e=Zt.alternate;e=e!==null?e.memoizedState:null}else e=ws.next;var t=Es===null?Zt.memoizedState:Es.next;if(t!==null)Es=t,ws=e;else{if(e===null)throw Error(je(310));ws=e,e={memoizedState:ws.memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},Es===null?Zt.memoizedState=Es=e:Es=Es.next=e}return Es}function sd(e,t){return typeof t=="function"?t(e):t}function lf(e){var t=Zr(),r=t.queue;if(r===null)throw Error(je(311));r.lastRenderedReducer=e;var n=ws,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var m=u.lane;if((Qi&m)===m)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:m,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Zt.lanes|=m,Zi|=m}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,vn(n,t.memoizedState)||(gr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Zt.lanes|=i,Zi|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function cf(e){var t=Zr(),r=t.queue;if(r===null)throw Error(je(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);vn(i,t.memoizedState)||(gr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function D2(){}function I2(e,t){var r=Zt,n=Zr(),a=t(),i=!vn(n.memoizedState,a);if(i&&(n.memoizedState=a,gr=!0),n=n.queue,px(L2.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Es!==null&&Es.memoizedState.tag&1){if(r.flags|=2048,rd(9,O2.bind(null,r,n,a,t),void 0,null),Ms===null)throw Error(je(349));Qi&30||F2(r,t,a)}return a}function F2(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Zt.updateQueue,t===null?(t={lastEffect:null,stores:null},Zt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function O2(e,t,r,n){t.value=r,t.getSnapshot=n,$2(t)&&z2(e)}function L2(e,t,r){return r(function(){$2(t)&&z2(e)})}function $2(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!vn(e,r)}catch{return!0}}function z2(e){var t=fa(e,1);t!==null&&gn(t,e,1,-1)}function P1(e){var t=Tn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sd,lastRenderedState:e},t.queue=e,e=e.dispatch=X9.bind(null,Zt,e),[t.memoizedState,e]}function rd(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Zt.updateQueue,t===null?(t={lastEffect:null,stores:null},Zt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function U2(){return Zr().memoizedState}function Tu(e,t,r,n){var a=Tn();Zt.flags|=e,a.memoizedState=rd(1|t,r,void 0,n===void 0?null:n)}function Zh(e,t,r,n){var a=Zr();n=n===void 0?null:n;var i=void 0;if(ws!==null){var o=ws.memoizedState;if(i=o.destroy,n!==null&&hx(n,o.deps)){a.memoizedState=rd(t,r,i,n);return}}Zt.flags|=e,a.memoizedState=rd(1|t,r,i,n)}function E1(e,t){return Tu(8390656,8,e,t)}function px(e,t){return Zh(2048,8,e,t)}function V2(e,t){return Zh(4,2,e,t)}function B2(e,t){return Zh(4,4,e,t)}function q2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function H2(e,t,r){return r=r!=null?r.concat([e]):null,Zh(4,4,q2.bind(null,t,e),r)}function xx(){}function Y2(e,t){var r=Zr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&hx(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function W2(e,t){var r=Zr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&hx(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function K2(e,t,r){return Qi&21?(vn(r,t)||(r=Jw(),Zt.lanes|=r,Zi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gr=!0),e.memoizedState=r)}function Q9(e,t){var r=Lt;Lt=r!==0&&4>r?r:4,e(!0);var n=of.transition;of.transition={};try{e(!1),t()}finally{Lt=r,of.transition=n}}function G2(){return Zr().memoizedState}function Z9(e,t,r){var n=ri(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Q2(e))Z2(t,r);else if(r=R2(e,t,r,n),r!==null){var a=ir();gn(r,e,n,a),X2(r,t,n)}}function X9(e,t,r){var n=ri(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Q2(e))Z2(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,vn(l,o)){var c=t.interleaved;c===null?(a.next=a,ox(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=R2(e,t,a,n),r!==null&&(a=ir(),gn(r,e,n,a),X2(r,t,n))}}function Q2(e){var t=e.alternate;return e===Zt||t!==null&&t===Zt}function Z2(e,t){Rc=dh=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function X2(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,W0(e,r)}}var uh={readContext:Qr,useCallback:Vs,useContext:Vs,useEffect:Vs,useImperativeHandle:Vs,useInsertionEffect:Vs,useLayoutEffect:Vs,useMemo:Vs,useReducer:Vs,useRef:Vs,useState:Vs,useDebugValue:Vs,useDeferredValue:Vs,useTransition:Vs,useMutableSource:Vs,useSyncExternalStore:Vs,useId:Vs,unstable_isNewReconciler:!1},J9={readContext:Qr,useCallback:function(e,t){return Tn().memoizedState=[e,t===void 0?null:t],e},useContext:Qr,useEffect:E1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Tu(4194308,4,q2.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Tu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Tu(4,2,e,t)},useMemo:function(e,t){var r=Tn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Tn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Z9.bind(null,Zt,e),[n.memoizedState,e]},useRef:function(e){var t=Tn();return e={current:e},t.memoizedState=e},useState:P1,useDebugValue:xx,useDeferredValue:function(e){return Tn().memoizedState=e},useTransition:function(){var e=P1(!1),t=e[0];return e=Q9.bind(null,e[1]),Tn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Zt,a=Tn();if(Kt){if(r===void 0)throw Error(je(407));r=r()}else{if(r=t(),Ms===null)throw Error(je(349));Qi&30||F2(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,E1(L2.bind(null,n,i,e),[e]),n.flags|=2048,rd(9,O2.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Tn(),t=Ms.identifierPrefix;if(Kt){var r=oa,n=ia;r=(n&~(1<<32-xn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=td++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=G9++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eC={readContext:Qr,useCallback:Y2,useContext:Qr,useEffect:px,useImperativeHandle:H2,useInsertionEffect:V2,useLayoutEffect:B2,useMemo:W2,useReducer:lf,useRef:U2,useState:function(){return lf(sd)},useDebugValue:xx,useDeferredValue:function(e){var t=Zr();return K2(t,ws.memoizedState,e)},useTransition:function(){var e=lf(sd)[0],t=Zr().memoizedState;return[e,t]},useMutableSource:D2,useSyncExternalStore:I2,useId:G2,unstable_isNewReconciler:!1},tC={readContext:Qr,useCallback:Y2,useContext:Qr,useEffect:px,useImperativeHandle:H2,useInsertionEffect:V2,useLayoutEffect:B2,useMemo:W2,useReducer:cf,useRef:U2,useState:function(){return cf(sd)},useDebugValue:xx,useDeferredValue:function(e){var t=Zr();return ws===null?t.memoizedState=e:K2(t,ws.memoizedState,e)},useTransition:function(){var e=cf(sd)[0],t=Zr().memoizedState;return[e,t]},useMutableSource:D2,useSyncExternalStore:I2,useId:G2,unstable_isNewReconciler:!1};function on(e,t){if(e&&e.defaultProps){t=Xt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function yp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Xt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Xh={isMounted:function(e){return(e=e._reactInternals)?bo(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ir(),a=ri(e),i=ca(n,a);i.payload=t,r!=null&&(i.callback=r),t=ti(e,i,a),t!==null&&(gn(t,e,a,n),Pu(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ir(),a=ri(e),i=ca(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=ti(e,i,a),t!==null&&(gn(t,e,a,n),Pu(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ir(),n=ri(e),a=ca(r,n);a.tag=2,t!=null&&(a.callback=t),t=ti(e,a,n),t!==null&&(gn(t,e,n,r),Pu(t,e,n))}};function T1(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Gc(r,n)||!Gc(a,i):!0}function J2(e,t,r){var n=!1,a=di,i=t.contextType;return typeof i=="object"&&i!==null?i=Qr(i):(a=vr(t)?Ki:Ks.current,n=t.contextTypes,i=(n=n!=null)?El(e,a):di),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function A1(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Xh.enqueueReplaceState(t,t.state,null)}function Np(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},lx(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Qr(i):(i=vr(t)?Ki:Ks.current,a.context=El(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(yp(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Xh.enqueueReplaceState(a,a.state,null),lh(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ml(e,t){try{var r="",n=t;do r+=T8(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function df(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function jp(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var sC=typeof WeakMap=="function"?WeakMap:Map;function ey(e,t,r){r=ca(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){mh||(mh=!0,_p=n),jp(e,t)},r}function ty(e,t,r){r=ca(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){jp(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){jp(e,t),typeof n!="function"&&(si===null?si=new Set([this]):si.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function R1(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new sC;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=xC.bind(null,e,t,r),t.then(e,e))}function M1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _1(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ca(-1,1),t.tag=2,ti(r,t,1))),r.lanes|=1),e)}var rC=wa.ReactCurrentOwner,gr=!1;function Js(e,t,r,n){t.child=e===null?A2(t,null,r,n):Al(t,e.child,r,n)}function D1(e,t,r,n,a){r=r.render;var i=t.ref;return Xo(t,a),n=mx(e,t,r,n,i,a),r=fx(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,pa(e,t,a)):(Kt&&r&&tx(t),t.flags|=1,Js(e,t,n,a),t.child)}function I1(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Cx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,sy(e,t,i,n,a)):(e=_u(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Gc,r(o,n)&&e.ref===t.ref)return pa(e,t,a)}return t.flags|=1,e=ni(i,n),e.ref=t.ref,e.return=t,t.child=e}function sy(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Gc(i,n)&&e.ref===t.ref)if(gr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(gr=!0);else return t.lanes=e.lanes,pa(e,t,a)}return Cp(e,t,r,n,a)}function ry(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(Wo,Cr),Cr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$t(Wo,Cr),Cr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,$t(Wo,Cr),Cr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,$t(Wo,Cr),Cr|=n;return Js(e,t,a,r),t.child}function ny(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Cp(e,t,r,n,a){var i=vr(r)?Ki:Ks.current;return i=El(t,i),Xo(t,a),r=mx(e,t,r,n,i,a),n=fx(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,pa(e,t,a)):(Kt&&n&&tx(t),t.flags|=1,Js(e,t,r,a),t.child)}function F1(e,t,r,n,a){if(vr(r)){var i=!0;rh(t)}else i=!1;if(Xo(t,a),t.stateNode===null)Au(e,t),J2(t,r,n),Np(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Qr(u):(u=vr(r)?Ki:Ks.current,u=El(t,u));var m=r.getDerivedStateFromProps,h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&A1(t,o,n,u),Ma=!1;var p=t.memoizedState;o.state=p,lh(t,n,o,a),c=t.memoizedState,l!==n||p!==c||br.current||Ma?(typeof m=="function"&&(yp(t,r,m,n),c=t.memoizedState),(l=Ma||T1(t,r,l,n,p,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,M2(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:on(t.type,l),o.props=u,h=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Qr(c):(c=vr(r)?Ki:Ks.current,c=El(t,c));var y=r.getDerivedStateFromProps;(m=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==c)&&A1(t,o,n,c),Ma=!1,p=t.memoizedState,o.state=p,lh(t,n,o,a);var N=t.memoizedState;l!==h||p!==N||br.current||Ma?(typeof y=="function"&&(yp(t,r,y,n),N=t.memoizedState),(u=Ma||T1(t,r,u,n,p,N,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,N,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=N),o.props=n,o.state=N,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return kp(e,t,r,n,i,a)}function kp(e,t,r,n,a,i){ny(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&y1(t,r,!1),pa(e,t,i);n=t.stateNode,rC.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Al(t,e.child,null,i),t.child=Al(t,null,l,i)):Js(e,t,l,i),t.memoizedState=n.state,a&&y1(t,r,!0),t.child}function ay(e){var t=e.stateNode;t.pendingContext?w1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&w1(e,t.context,!1),cx(e,t.containerInfo)}function O1(e,t,r,n,a){return Tl(),rx(a),t.flags|=256,Js(e,t,r,n),t.child}var Sp={dehydrated:null,treeContext:null,retryLane:0};function Pp(e){return{baseLanes:e,cachePool:null,transitions:null}}function iy(e,t,r){var n=t.pendingProps,a=Qt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),$t(Qt,a&1),e===null)return vp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=tm(o,n,0,null),e=qi(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Pp(r),t.memoizedState=Sp,e):gx(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return nC(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ni(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=ni(l,i):(i=qi(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Pp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Sp,n}return i=e.child,e=i.sibling,n=ni(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function gx(e,t){return t=tm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function au(e,t,r,n){return n!==null&&rx(n),Al(t,e.child,null,r),e=gx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nC(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=df(Error(je(422))),au(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=tm({mode:"visible",children:n.children},a,0,null),i=qi(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Al(t,e.child,null,o),t.child.memoizedState=Pp(o),t.memoizedState=Sp,i);if(!(t.mode&1))return au(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(je(419)),n=df(i,n,void 0),au(e,t,o,n)}if(l=(o&e.childLanes)!==0,gr||l){if(n=Ms,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,fa(e,a),gn(n,e,a,-1))}return jx(),n=df(Error(je(421))),au(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=gC.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Er=ei(a.nextSibling),Tr=t,Kt=!0,un=null,e!==null&&(Vr[Br++]=ia,Vr[Br++]=oa,Vr[Br++]=Gi,ia=e.id,oa=e.overflow,Gi=t),t=gx(t,n.children),t.flags|=4096,t)}function L1(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),wp(e.return,t,r)}function uf(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function oy(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Js(e,t,n.children,r),n=Qt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&L1(e,r,t);else if(e.tag===19)L1(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if($t(Qt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&ch(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),uf(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ch(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}uf(t,!0,r,null,i);break;case"together":uf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Au(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Zi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(je(153));if(t.child!==null){for(e=t.child,r=ni(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ni(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function aC(e,t,r){switch(t.tag){case 3:ay(t),Tl();break;case 5:_2(t);break;case 1:vr(t.type)&&rh(t);break;case 4:cx(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;$t(ih,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?($t(Qt,Qt.current&1),t.flags|=128,null):r&t.child.childLanes?iy(e,t,r):($t(Qt,Qt.current&1),e=pa(e,t,r),e!==null?e.sibling:null);$t(Qt,Qt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return oy(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),$t(Qt,Qt.current),n)break;return null;case 22:case 23:return t.lanes=0,ry(e,t,r)}return pa(e,t,r)}var ly,Ep,cy,dy;ly=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ep=function(){};cy=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ri(Un.current);var i=null;switch(r){case"input":a=Qf(e,a),n=Qf(e,n),i=[];break;case"select":a=Xt({},a,{value:void 0}),n=Xt({},n,{value:void 0}),i=[];break;case"textarea":a=Jf(e,a),n=Jf(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=th)}tp(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Vc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Vc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Bt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};dy=function(e,t,r,n){r!==n&&(t.flags|=4)};function hc(e,t){if(!Kt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Bs(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function iC(e,t,r){var n=t.pendingProps;switch(sx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bs(t),null;case 1:return vr(t.type)&&sh(),Bs(t),null;case 3:return n=t.stateNode,Rl(),Ht(br),Ht(Ks),ux(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ru(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,un!==null&&(Fp(un),un=null))),Ep(e,t),Bs(t),null;case 5:dx(t);var a=Ri(ed.current);if(r=t.type,e!==null&&t.stateNode!=null)cy(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(je(166));return Bs(t),null}if(e=Ri(Un.current),ru(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Dn]=t,n[Xc]=i,e=(t.mode&1)!==0,r){case"dialog":Bt("cancel",n),Bt("close",n);break;case"iframe":case"object":case"embed":Bt("load",n);break;case"video":case"audio":for(a=0;a<wc.length;a++)Bt(wc[a],n);break;case"source":Bt("error",n);break;case"img":case"image":case"link":Bt("error",n),Bt("load",n);break;case"details":Bt("toggle",n);break;case"input":Wg(n,i),Bt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Bt("invalid",n);break;case"textarea":Gg(n,i),Bt("invalid",n)}tp(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&su(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&su(n.textContent,l,e),a=["children",""+l]):Vc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Bt("scroll",n)}switch(r){case"input":Kd(n),Kg(n,i,!0);break;case"textarea":Kd(n),Qg(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=th)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Lw(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Dn]=t,e[Xc]=n,ly(e,t,!1,!1),t.stateNode=e;e:{switch(o=sp(r,n),r){case"dialog":Bt("cancel",e),Bt("close",e),a=n;break;case"iframe":case"object":case"embed":Bt("load",e),a=n;break;case"video":case"audio":for(a=0;a<wc.length;a++)Bt(wc[a],e);a=n;break;case"source":Bt("error",e),a=n;break;case"img":case"image":case"link":Bt("error",e),Bt("load",e),a=n;break;case"details":Bt("toggle",e),a=n;break;case"input":Wg(e,n),a=Qf(e,n),Bt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Xt({},n,{value:void 0}),Bt("invalid",e);break;case"textarea":Gg(e,n),a=Jf(e,n),Bt("invalid",e);break;default:a=n}tp(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Uw(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$w(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Bc(e,c):typeof c=="number"&&Bc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Vc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Bt("scroll",e):c!=null&&U0(e,i,c,o))}switch(r){case"input":Kd(e),Kg(e,n,!1);break;case"textarea":Kd(e),Qg(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ci(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Ko(e,!!n.multiple,i,!1):n.defaultValue!=null&&Ko(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=th)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bs(t),null;case 6:if(e&&t.stateNode!=null)dy(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(je(166));if(r=Ri(ed.current),Ri(Un.current),ru(t)){if(n=t.stateNode,r=t.memoizedProps,n[Dn]=t,(i=n.nodeValue!==r)&&(e=Tr,e!==null))switch(e.tag){case 3:su(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&su(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Dn]=t,t.stateNode=n}return Bs(t),null;case 13:if(Ht(Qt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Kt&&Er!==null&&t.mode&1&&!(t.flags&128))E2(),Tl(),t.flags|=98560,i=!1;else if(i=ru(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(je(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(je(317));i[Dn]=t}else Tl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bs(t),i=!1}else un!==null&&(Fp(un),un=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Qt.current&1?Cs===0&&(Cs=3):jx())),t.updateQueue!==null&&(t.flags|=4),Bs(t),null);case 4:return Rl(),Ep(e,t),e===null&&Qc(t.stateNode.containerInfo),Bs(t),null;case 10:return ix(t.type._context),Bs(t),null;case 17:return vr(t.type)&&sh(),Bs(t),null;case 19:if(Ht(Qt),i=t.memoizedState,i===null)return Bs(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)hc(i,!1);else{if(Cs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ch(e),o!==null){for(t.flags|=128,hc(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return $t(Qt,Qt.current&1|2),t.child}e=e.sibling}i.tail!==null&&cs()>_l&&(t.flags|=128,n=!0,hc(i,!1),t.lanes=4194304)}else{if(!n)if(e=ch(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),hc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Kt)return Bs(t),null}else 2*cs()-i.renderingStartTime>_l&&r!==1073741824&&(t.flags|=128,n=!0,hc(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=cs(),t.sibling=null,r=Qt.current,$t(Qt,n?r&1|2:r&1),t):(Bs(t),null);case 22:case 23:return Nx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Cr&1073741824&&(Bs(t),t.subtreeFlags&6&&(t.flags|=8192)):Bs(t),null;case 24:return null;case 25:return null}throw Error(je(156,t.tag))}function oC(e,t){switch(sx(t),t.tag){case 1:return vr(t.type)&&sh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rl(),Ht(br),Ht(Ks),ux(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dx(t),null;case 13:if(Ht(Qt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(je(340));Tl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ht(Qt),null;case 4:return Rl(),null;case 10:return ix(t.type._context),null;case 22:case 23:return Nx(),null;case 24:return null;default:return null}}var iu=!1,qs=!1,lC=typeof WeakSet=="function"?WeakSet:Set,qe=null;function Yo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ts(e,t,n)}else r.current=null}function Tp(e,t,r){try{r()}catch(n){ts(e,t,n)}}var $1=!1;function cC(e,t){if(hp=Xu,e=p2(),ex(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,m=0,h=e,p=null;t:for(;;){for(var y;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)p=h,h=y;for(;;){if(h===e)break t;if(p===r&&++u===a&&(l=o),p===i&&++m===n&&(c=o),(y=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(mp={focusedElem:e,selectionRange:r},Xu=!1,qe=t;qe!==null;)if(t=qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,qe=e;else for(;qe!==null;){t=qe;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var f=N.memoizedProps,j=N.memoizedState,b=t.stateNode,x=b.getSnapshotBeforeUpdate(t.elementType===t.type?f:on(t.type,f),j);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(je(163))}}catch(C){ts(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,qe=e;break}qe=t.return}return N=$1,$1=!1,N}function Mc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Tp(t,r,i)}a=a.next}while(a!==n)}}function Jh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ap(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function uy(e){var t=e.alternate;t!==null&&(e.alternate=null,uy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Dn],delete t[Xc],delete t[xp],delete t[H9],delete t[Y9])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hy(e){return e.tag===5||e.tag===3||e.tag===4}function z1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=th));else if(n!==4&&(e=e.child,e!==null))for(Rp(e,t,r),e=e.sibling;e!==null;)Rp(e,t,r),e=e.sibling}function Mp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Mp(e,t,r),e=e.sibling;e!==null;)Mp(e,t,r),e=e.sibling}var Fs=null,dn=!1;function ka(e,t,r){for(r=r.child;r!==null;)my(e,t,r),r=r.sibling}function my(e,t,r){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(Hh,r)}catch{}switch(r.tag){case 5:qs||Yo(r,t);case 6:var n=Fs,a=dn;Fs=null,ka(e,t,r),Fs=n,dn=a,Fs!==null&&(dn?(e=Fs,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Fs.removeChild(r.stateNode));break;case 18:Fs!==null&&(dn?(e=Fs,r=r.stateNode,e.nodeType===8?rf(e.parentNode,r):e.nodeType===1&&rf(e,r),Wc(e)):rf(Fs,r.stateNode));break;case 4:n=Fs,a=dn,Fs=r.stateNode.containerInfo,dn=!0,ka(e,t,r),Fs=n,dn=a;break;case 0:case 11:case 14:case 15:if(!qs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Tp(r,t,o),a=a.next}while(a!==n)}ka(e,t,r);break;case 1:if(!qs&&(Yo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ts(r,t,l)}ka(e,t,r);break;case 21:ka(e,t,r);break;case 22:r.mode&1?(qs=(n=qs)||r.memoizedState!==null,ka(e,t,r),qs=n):ka(e,t,r);break;default:ka(e,t,r)}}function U1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new lC),t.forEach(function(n){var a=bC.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function nn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Fs=l.stateNode,dn=!1;break e;case 3:Fs=l.stateNode.containerInfo,dn=!0;break e;case 4:Fs=l.stateNode.containerInfo,dn=!0;break e}l=l.return}if(Fs===null)throw Error(je(160));my(i,o,a),Fs=null,dn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){ts(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fy(t,e),t=t.sibling}function fy(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nn(t,e),En(e),n&4){try{Mc(3,e,e.return),Jh(3,e)}catch(f){ts(e,e.return,f)}try{Mc(5,e,e.return)}catch(f){ts(e,e.return,f)}}break;case 1:nn(t,e),En(e),n&512&&r!==null&&Yo(r,r.return);break;case 5:if(nn(t,e),En(e),n&512&&r!==null&&Yo(r,r.return),e.flags&32){var a=e.stateNode;try{Bc(a,"")}catch(f){ts(e,e.return,f)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Fw(a,i),sp(l,o);var u=sp(l,i);for(o=0;o<c.length;o+=2){var m=c[o],h=c[o+1];m==="style"?Uw(a,h):m==="dangerouslySetInnerHTML"?$w(a,h):m==="children"?Bc(a,h):U0(a,m,h,u)}switch(l){case"input":Zf(a,i);break;case"textarea":Ow(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Ko(a,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ko(a,!!i.multiple,i.defaultValue,!0):Ko(a,!!i.multiple,i.multiple?[]:"",!1))}a[Xc]=i}catch(f){ts(e,e.return,f)}}break;case 6:if(nn(t,e),En(e),n&4){if(e.stateNode===null)throw Error(je(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(f){ts(e,e.return,f)}}break;case 3:if(nn(t,e),En(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Wc(t.containerInfo)}catch(f){ts(e,e.return,f)}break;case 4:nn(t,e),En(e);break;case 13:nn(t,e),En(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(wx=cs())),n&4&&U1(e);break;case 22:if(m=r!==null&&r.memoizedState!==null,e.mode&1?(qs=(u=qs)||m,nn(t,e),qs=u):nn(t,e),En(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!m&&e.mode&1)for(qe=e,m=e.child;m!==null;){for(h=qe=m;qe!==null;){switch(p=qe,y=p.child,p.tag){case 0:case 11:case 14:case 15:Mc(4,p,p.return);break;case 1:Yo(p,p.return);var N=p.stateNode;if(typeof N.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(f){ts(n,r,f)}}break;case 5:Yo(p,p.return);break;case 22:if(p.memoizedState!==null){B1(h);continue}}y!==null?(y.return=p,qe=y):B1(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{a=h.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=zw("display",o))}catch(f){ts(e,e.return,f)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(f){ts(e,e.return,f)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:nn(t,e),En(e),n&4&&U1(e);break;case 21:break;default:nn(t,e),En(e)}}function En(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(hy(r)){var n=r;break e}r=r.return}throw Error(je(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Bc(a,""),n.flags&=-33);var i=z1(e);Mp(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=z1(e);Rp(e,l,o);break;default:throw Error(je(161))}}catch(c){ts(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dC(e,t,r){qe=e,py(e)}function py(e,t,r){for(var n=(e.mode&1)!==0;qe!==null;){var a=qe,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||iu;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||qs;l=iu;var u=qs;if(iu=o,(qs=c)&&!u)for(qe=a;qe!==null;)o=qe,c=o.child,o.tag===22&&o.memoizedState!==null?q1(a):c!==null?(c.return=o,qe=c):q1(a);for(;i!==null;)qe=i,py(i),i=i.sibling;qe=a,iu=l,qs=u}V1(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,qe=i):V1(e)}}function V1(e){for(;qe!==null;){var t=qe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qs||Jh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!qs)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:on(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&S1(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}S1(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var m=u.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&Wc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(je(163))}qs||t.flags&512&&Ap(t)}catch(p){ts(t,t.return,p)}}if(t===e){qe=null;break}if(r=t.sibling,r!==null){r.return=t.return,qe=r;break}qe=t.return}}function B1(e){for(;qe!==null;){var t=qe;if(t===e){qe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,qe=r;break}qe=t.return}}function q1(e){for(;qe!==null;){var t=qe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Jh(4,t)}catch(c){ts(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){ts(t,a,c)}}var i=t.return;try{Ap(t)}catch(c){ts(t,i,c)}break;case 5:var o=t.return;try{Ap(t)}catch(c){ts(t,o,c)}}}catch(c){ts(t,t.return,c)}if(t===e){qe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,qe=l;break}qe=t.return}}var uC=Math.ceil,hh=wa.ReactCurrentDispatcher,bx=wa.ReactCurrentOwner,Kr=wa.ReactCurrentBatchConfig,Et=0,Ms=null,ps=null,$s=0,Cr=0,Wo=vi(0),Cs=0,nd=null,Zi=0,em=0,vx=0,_c=null,pr=null,wx=0,_l=1/0,Xn=null,mh=!1,_p=null,si=null,ou=!1,Ka=null,fh=0,Dc=0,Dp=null,Ru=-1,Mu=0;function ir(){return Et&6?cs():Ru!==-1?Ru:Ru=cs()}function ri(e){return e.mode&1?Et&2&&$s!==0?$s&-$s:K9.transition!==null?(Mu===0&&(Mu=Jw()),Mu):(e=Lt,e!==0||(e=window.event,e=e===void 0?16:i2(e.type)),e):1}function gn(e,t,r,n){if(50<Dc)throw Dc=0,Dp=null,Error(je(185));Sd(e,r,n),(!(Et&2)||e!==Ms)&&(e===Ms&&(!(Et&2)&&(em|=r),Cs===4&&Fa(e,$s)),wr(e,n),r===1&&Et===0&&!(t.mode&1)&&(_l=cs()+500,Qh&&wi()))}function wr(e,t){var r=e.callbackNode;K8(e,t);var n=Zu(e,e===Ms?$s:0);if(n===0)r!==null&&Jg(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Jg(r),t===1)e.tag===0?W9(H1.bind(null,e)):k2(H1.bind(null,e)),B9(function(){!(Et&6)&&wi()}),r=null;else{switch(e2(n)){case 1:r=Y0;break;case 4:r=Zw;break;case 16:r=Qu;break;case 536870912:r=Xw;break;default:r=Qu}r=jy(r,xy.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function xy(e,t){if(Ru=-1,Mu=0,Et&6)throw Error(je(327));var r=e.callbackNode;if(Jo()&&e.callbackNode!==r)return null;var n=Zu(e,e===Ms?$s:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ph(e,n);else{t=n;var a=Et;Et|=2;var i=by();(Ms!==e||$s!==t)&&(Xn=null,_l=cs()+500,Bi(e,t));do try{fC();break}catch(l){gy(e,l)}while(!0);ax(),hh.current=i,Et=a,ps!==null?t=0:(Ms=null,$s=0,t=Cs)}if(t!==0){if(t===2&&(a=op(e),a!==0&&(n=a,t=Ip(e,a))),t===1)throw r=nd,Bi(e,0),Fa(e,n),wr(e,cs()),r;if(t===6)Fa(e,n);else{if(a=e.current.alternate,!(n&30)&&!hC(a)&&(t=ph(e,n),t===2&&(i=op(e),i!==0&&(n=i,t=Ip(e,i))),t===1))throw r=nd,Bi(e,0),Fa(e,n),wr(e,cs()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(je(345));case 2:Ei(e,pr,Xn);break;case 3:if(Fa(e,n),(n&130023424)===n&&(t=wx+500-cs(),10<t)){if(Zu(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){ir(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=pp(Ei.bind(null,e,pr,Xn),t);break}Ei(e,pr,Xn);break;case 4:if(Fa(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-xn(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=cs()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*uC(n/1960))-n,10<n){e.timeoutHandle=pp(Ei.bind(null,e,pr,Xn),n);break}Ei(e,pr,Xn);break;case 5:Ei(e,pr,Xn);break;default:throw Error(je(329))}}}return wr(e,cs()),e.callbackNode===r?xy.bind(null,e):null}function Ip(e,t){var r=_c;return e.current.memoizedState.isDehydrated&&(Bi(e,t).flags|=256),e=ph(e,t),e!==2&&(t=pr,pr=r,t!==null&&Fp(t)),e}function Fp(e){pr===null?pr=e:pr.push.apply(pr,e)}function hC(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!vn(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fa(e,t){for(t&=~vx,t&=~em,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-xn(t),n=1<<r;e[r]=-1,t&=~n}}function H1(e){if(Et&6)throw Error(je(327));Jo();var t=Zu(e,0);if(!(t&1))return wr(e,cs()),null;var r=ph(e,t);if(e.tag!==0&&r===2){var n=op(e);n!==0&&(t=n,r=Ip(e,n))}if(r===1)throw r=nd,Bi(e,0),Fa(e,t),wr(e,cs()),r;if(r===6)throw Error(je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ei(e,pr,Xn),wr(e,cs()),null}function yx(e,t){var r=Et;Et|=1;try{return e(t)}finally{Et=r,Et===0&&(_l=cs()+500,Qh&&wi())}}function Xi(e){Ka!==null&&Ka.tag===0&&!(Et&6)&&Jo();var t=Et;Et|=1;var r=Kr.transition,n=Lt;try{if(Kr.transition=null,Lt=1,e)return e()}finally{Lt=n,Kr.transition=r,Et=t,!(Et&6)&&wi()}}function Nx(){Cr=Wo.current,Ht(Wo)}function Bi(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,V9(r)),ps!==null)for(r=ps.return;r!==null;){var n=r;switch(sx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&sh();break;case 3:Rl(),Ht(br),Ht(Ks),ux();break;case 5:dx(n);break;case 4:Rl();break;case 13:Ht(Qt);break;case 19:Ht(Qt);break;case 10:ix(n.type._context);break;case 22:case 23:Nx()}r=r.return}if(Ms=e,ps=e=ni(e.current,null),$s=Cr=t,Cs=0,nd=null,vx=em=Zi=0,pr=_c=null,Ai!==null){for(t=0;t<Ai.length;t++)if(r=Ai[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Ai=null}return e}function gy(e,t){do{var r=ps;try{if(ax(),Eu.current=uh,dh){for(var n=Zt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}dh=!1}if(Qi=0,Es=ws=Zt=null,Rc=!1,td=0,bx.current=null,r===null||r.return===null){Cs=1,nd=t,ps=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=$s,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,m=l,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=M1(o);if(y!==null){y.flags&=-257,_1(y,o,l,i,t),y.mode&1&&R1(i,u,t),t=y,c=u;var N=t.updateQueue;if(N===null){var f=new Set;f.add(c),t.updateQueue=f}else N.add(c);break e}else{if(!(t&1)){R1(i,u,t),jx();break e}c=Error(je(426))}}else if(Kt&&l.mode&1){var j=M1(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),_1(j,o,l,i,t),rx(Ml(c,l));break e}}i=c=Ml(c,l),Cs!==4&&(Cs=2),_c===null?_c=[i]:_c.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=ey(i,c,t);k1(i,b);break e;case 1:l=c;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(si===null||!si.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=ty(i,l,t);k1(i,C);break e}}i=i.return}while(i!==null)}wy(r)}catch(S){t=S,ps===r&&r!==null&&(ps=r=r.return);continue}break}while(!0)}function by(){var e=hh.current;return hh.current=uh,e===null?uh:e}function jx(){(Cs===0||Cs===3||Cs===2)&&(Cs=4),Ms===null||!(Zi&268435455)&&!(em&268435455)||Fa(Ms,$s)}function ph(e,t){var r=Et;Et|=2;var n=by();(Ms!==e||$s!==t)&&(Xn=null,Bi(e,t));do try{mC();break}catch(a){gy(e,a)}while(!0);if(ax(),Et=r,hh.current=n,ps!==null)throw Error(je(261));return Ms=null,$s=0,Cs}function mC(){for(;ps!==null;)vy(ps)}function fC(){for(;ps!==null&&!$8();)vy(ps)}function vy(e){var t=Ny(e.alternate,e,Cr);e.memoizedProps=e.pendingProps,t===null?wy(e):ps=t,bx.current=null}function wy(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=oC(r,t),r!==null){r.flags&=32767,ps=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Cs=6,ps=null;return}}else if(r=iC(r,t,Cr),r!==null){ps=r;return}if(t=t.sibling,t!==null){ps=t;return}ps=t=e}while(t!==null);Cs===0&&(Cs=5)}function Ei(e,t,r){var n=Lt,a=Kr.transition;try{Kr.transition=null,Lt=1,pC(e,t,r,n)}finally{Kr.transition=a,Lt=n}return null}function pC(e,t,r,n){do Jo();while(Ka!==null);if(Et&6)throw Error(je(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(je(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(G8(e,i),e===Ms&&(ps=Ms=null,$s=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ou||(ou=!0,jy(Qu,function(){return Jo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Kr.transition,Kr.transition=null;var o=Lt;Lt=1;var l=Et;Et|=4,bx.current=null,cC(e,r),fy(r,e),I9(mp),Xu=!!hp,mp=hp=null,e.current=r,dC(r),z8(),Et=l,Lt=o,Kr.transition=i}else e.current=r;if(ou&&(ou=!1,Ka=e,fh=a),i=e.pendingLanes,i===0&&(si=null),B8(r.stateNode),wr(e,cs()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(mh)throw mh=!1,e=_p,_p=null,e;return fh&1&&e.tag!==0&&Jo(),i=e.pendingLanes,i&1?e===Dp?Dc++:(Dc=0,Dp=e):Dc=0,wi(),null}function Jo(){if(Ka!==null){var e=e2(fh),t=Kr.transition,r=Lt;try{if(Kr.transition=null,Lt=16>e?16:e,Ka===null)var n=!1;else{if(e=Ka,Ka=null,fh=0,Et&6)throw Error(je(331));var a=Et;for(Et|=4,qe=e.current;qe!==null;){var i=qe,o=i.child;if(qe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(qe=u;qe!==null;){var m=qe;switch(m.tag){case 0:case 11:case 15:Mc(8,m,i)}var h=m.child;if(h!==null)h.return=m,qe=h;else for(;qe!==null;){m=qe;var p=m.sibling,y=m.return;if(uy(m),m===u){qe=null;break}if(p!==null){p.return=y,qe=p;break}qe=y}}}var N=i.alternate;if(N!==null){var f=N.child;if(f!==null){N.child=null;do{var j=f.sibling;f.sibling=null,f=j}while(f!==null)}}qe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,qe=o;else e:for(;qe!==null;){if(i=qe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mc(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,qe=b;break e}qe=i.return}}var x=e.current;for(qe=x;qe!==null;){o=qe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,qe=w;else e:for(o=x;qe!==null;){if(l=qe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Jh(9,l)}}catch(S){ts(l,l.return,S)}if(l===o){qe=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,qe=C;break e}qe=l.return}}if(Et=a,wi(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(Hh,e)}catch{}n=!0}return n}finally{Lt=r,Kr.transition=t}}return!1}function Y1(e,t,r){t=Ml(r,t),t=ey(e,t,1),e=ti(e,t,1),t=ir(),e!==null&&(Sd(e,1,t),wr(e,t))}function ts(e,t,r){if(e.tag===3)Y1(e,e,r);else for(;t!==null;){if(t.tag===3){Y1(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(si===null||!si.has(n))){e=Ml(r,e),e=ty(t,e,1),t=ti(t,e,1),e=ir(),t!==null&&(Sd(t,1,e),wr(t,e));break}}t=t.return}}function xC(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ir(),e.pingedLanes|=e.suspendedLanes&r,Ms===e&&($s&r)===r&&(Cs===4||Cs===3&&($s&130023424)===$s&&500>cs()-wx?Bi(e,0):vx|=r),wr(e,t)}function yy(e,t){t===0&&(e.mode&1?(t=Zd,Zd<<=1,!(Zd&130023424)&&(Zd=4194304)):t=1);var r=ir();e=fa(e,t),e!==null&&(Sd(e,t,r),wr(e,r))}function gC(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),yy(e,r)}function bC(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(je(314))}n!==null&&n.delete(t),yy(e,r)}var Ny;Ny=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||br.current)gr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return gr=!1,aC(e,t,r);gr=!!(e.flags&131072)}else gr=!1,Kt&&t.flags&1048576&&S2(t,ah,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Au(e,t),e=t.pendingProps;var a=El(t,Ks.current);Xo(t,r),a=mx(null,t,n,e,a,r);var i=fx();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vr(n)?(i=!0,rh(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,lx(t),a.updater=Xh,t.stateNode=a,a._reactInternals=t,Np(t,n,e,r),t=kp(null,t,n,!0,i,r)):(t.tag=0,Kt&&i&&tx(t),Js(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Au(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=wC(n),e=on(n,e),a){case 0:t=Cp(null,t,n,e,r);break e;case 1:t=F1(null,t,n,e,r);break e;case 11:t=D1(null,t,n,e,r);break e;case 14:t=I1(null,t,n,on(n.type,e),r);break e}throw Error(je(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:on(n,a),Cp(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:on(n,a),F1(e,t,n,a,r);case 3:e:{if(ay(t),e===null)throw Error(je(387));n=t.pendingProps,i=t.memoizedState,a=i.element,M2(e,t),lh(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ml(Error(je(423)),t),t=O1(e,t,n,r,a);break e}else if(n!==a){a=Ml(Error(je(424)),t),t=O1(e,t,n,r,a);break e}else for(Er=ei(t.stateNode.containerInfo.firstChild),Tr=t,Kt=!0,un=null,r=A2(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Tl(),n===a){t=pa(e,t,r);break e}Js(e,t,n,r)}t=t.child}return t;case 5:return _2(t),e===null&&vp(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,fp(n,a)?o=null:i!==null&&fp(n,i)&&(t.flags|=32),ny(e,t),Js(e,t,o,r),t.child;case 6:return e===null&&vp(t),null;case 13:return iy(e,t,r);case 4:return cx(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Al(t,null,n,r):Js(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:on(n,a),D1(e,t,n,a,r);case 7:return Js(e,t,t.pendingProps,r),t.child;case 8:return Js(e,t,t.pendingProps.children,r),t.child;case 12:return Js(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,$t(ih,n._currentValue),n._currentValue=o,i!==null)if(vn(i.value,o)){if(i.children===a.children&&!br.current){t=pa(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ca(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var m=u.pending;m===null?c.next=c:(c.next=m.next,m.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),wp(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(je(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),wp(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Js(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Xo(t,r),a=Qr(a),n=n(a),t.flags|=1,Js(e,t,n,r),t.child;case 14:return n=t.type,a=on(n,t.pendingProps),a=on(n.type,a),I1(e,t,n,a,r);case 15:return sy(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:on(n,a),Au(e,t),t.tag=1,vr(n)?(e=!0,rh(t)):e=!1,Xo(t,r),J2(t,n,a),Np(t,n,a,r),kp(null,t,n,!0,e,r);case 19:return oy(e,t,r);case 22:return ry(e,t,r)}throw Error(je(156,t.tag))};function jy(e,t){return Qw(e,t)}function vC(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(e,t,r,n){return new vC(e,t,r,n)}function Cx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wC(e){if(typeof e=="function")return Cx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===B0)return 11;if(e===q0)return 14}return 2}function ni(e,t){var r=e.alternate;return r===null?(r=Yr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function _u(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Cx(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Oo:return qi(r.children,a,i,t);case V0:o=8,a|=8;break;case Yf:return e=Yr(12,r,t,a|2),e.elementType=Yf,e.lanes=i,e;case Wf:return e=Yr(13,r,t,a),e.elementType=Wf,e.lanes=i,e;case Kf:return e=Yr(19,r,t,a),e.elementType=Kf,e.lanes=i,e;case _w:return tm(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Rw:o=10;break e;case Mw:o=9;break e;case B0:o=11;break e;case q0:o=14;break e;case Ra:o=16,n=null;break e}throw Error(je(130,e==null?e:typeof e,""))}return t=Yr(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function qi(e,t,r,n){return e=Yr(7,e,n,t),e.lanes=r,e}function tm(e,t,r,n){return e=Yr(22,e,n,t),e.elementType=_w,e.lanes=r,e.stateNode={isHidden:!1},e}function hf(e,t,r){return e=Yr(6,e,null,t),e.lanes=r,e}function mf(e,t,r){return t=Yr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yC(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ym(0),this.expirationTimes=Ym(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ym(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function kx(e,t,r,n,a,i,o,l,c){return e=new yC(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Yr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},lx(i),e}function NC(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Cy(e){if(!e)return di;e=e._reactInternals;e:{if(bo(e)!==e||e.tag!==1)throw Error(je(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(je(171))}if(e.tag===1){var r=e.type;if(vr(r))return C2(e,r,t)}return t}function ky(e,t,r,n,a,i,o,l,c){return e=kx(r,n,!0,e,a,i,o,l,c),e.context=Cy(null),r=e.current,n=ir(),a=ri(r),i=ca(n,a),i.callback=t??null,ti(r,i,a),e.current.lanes=a,Sd(e,a,n),wr(e,n),e}function sm(e,t,r,n){var a=t.current,i=ir(),o=ri(a);return r=Cy(r),t.context===null?t.context=r:t.pendingContext=r,t=ca(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ti(a,t,o),e!==null&&(gn(e,a,o,i),Pu(e,a,o)),o}function xh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function W1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Sx(e,t){W1(e,t),(e=e.alternate)&&W1(e,t)}function jC(){return null}var Sy=typeof reportError=="function"?reportError:function(e){console.error(e)};function Px(e){this._internalRoot=e}rm.prototype.render=Px.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(je(409));sm(e,t,null,null)};rm.prototype.unmount=Px.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xi(function(){sm(null,e,null,null)}),t[ma]=null}};function rm(e){this._internalRoot=e}rm.prototype.unstable_scheduleHydration=function(e){if(e){var t=r2();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ia.length&&t!==0&&t<Ia[r].priority;r++);Ia.splice(r,0,e),r===0&&a2(e)}};function Ex(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function nm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function K1(){}function CC(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=xh(o);i.call(u)}}var o=ky(t,n,e,0,null,!1,!1,"",K1);return e._reactRootContainer=o,e[ma]=o.current,Qc(e.nodeType===8?e.parentNode:e),Xi(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=xh(c);l.call(u)}}var c=kx(e,0,!1,null,null,!1,!1,"",K1);return e._reactRootContainer=c,e[ma]=c.current,Qc(e.nodeType===8?e.parentNode:e),Xi(function(){sm(t,c,r,n)}),c}function am(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=xh(o);l.call(c)}}sm(t,o,e,a)}else o=CC(r,t,e,a,n);return xh(o)}t2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=vc(t.pendingLanes);r!==0&&(W0(t,r|1),wr(t,cs()),!(Et&6)&&(_l=cs()+500,wi()))}break;case 13:Xi(function(){var n=fa(e,1);if(n!==null){var a=ir();gn(n,e,1,a)}}),Sx(e,1)}};K0=function(e){if(e.tag===13){var t=fa(e,134217728);if(t!==null){var r=ir();gn(t,e,134217728,r)}Sx(e,134217728)}};s2=function(e){if(e.tag===13){var t=ri(e),r=fa(e,t);if(r!==null){var n=ir();gn(r,e,t,n)}Sx(e,t)}};r2=function(){return Lt};n2=function(e,t){var r=Lt;try{return Lt=e,t()}finally{Lt=r}};np=function(e,t,r){switch(t){case"input":if(Zf(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Gh(n);if(!a)throw Error(je(90));Iw(n),Zf(n,a)}}}break;case"textarea":Ow(e,r);break;case"select":t=r.value,t!=null&&Ko(e,!!r.multiple,t,!1)}};qw=yx;Hw=Xi;var kC={usingClientEntryPoint:!1,Events:[Ed,Uo,Gh,Vw,Bw,yx]},mc={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SC={bundleType:mc.bundleType,version:mc.version,rendererPackageName:mc.rendererPackageName,rendererConfig:mc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kw(e),e===null?null:e.stateNode},findFiberByHostInstance:mc.findFiberByHostInstance||jC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{Hh=lu.inject(SC),zn=lu}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kC;Dr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ex(t))throw Error(je(200));return NC(e,t,null,r)};Dr.createRoot=function(e,t){if(!Ex(e))throw Error(je(299));var r=!1,n="",a=Sy;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=kx(e,1,!1,null,null,r,!1,n,a),e[ma]=t.current,Qc(e.nodeType===8?e.parentNode:e),new Px(t)};Dr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(je(188)):(e=Object.keys(e).join(","),Error(je(268,e)));return e=Kw(t),e=e===null?null:e.stateNode,e};Dr.flushSync=function(e){return Xi(e)};Dr.hydrate=function(e,t,r){if(!nm(t))throw Error(je(200));return am(null,e,t,!0,r)};Dr.hydrateRoot=function(e,t,r){if(!Ex(e))throw Error(je(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=Sy;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=ky(t,null,e,1,r??null,a,!1,i,o),e[ma]=t.current,Qc(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new rm(t)};Dr.render=function(e,t,r){if(!nm(t))throw Error(je(200));return am(null,e,t,!1,r)};Dr.unmountComponentAtNode=function(e){if(!nm(e))throw Error(je(40));return e._reactRootContainer?(Xi(function(){am(null,null,e,!1,function(){e._reactRootContainer=null,e[ma]=null})}),!0):!1};Dr.unstable_batchedUpdates=yx;Dr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!nm(r))throw Error(je(200));if(e==null||e._reactInternals===void 0)throw Error(je(38));return am(e,t,r,!1,n)};Dr.version="18.3.1-next-f1338f8080-20240426";function Py(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Py)}catch(e){console.error(e)}}Py(),Pw.exports=Dr;var Wr=Pw.exports;const PC=pw(Wr);var Ey,G1=Wr;Ey=G1.createRoot,G1.hydrateRoot;function EC(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,n,a,i,o=[],l="",c=e.split("/");for(c[0]||c.shift();a=c.shift();)r=a[0],r==="*"?(o.push(r),l+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=a.indexOf("?",1),i=a.indexOf(".",1),o.push(a.substring(1,~n?n:~i?i:a.length)),l+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~n?"?":"")+"\\"+a.substring(i))):l+="/"+a;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var Ty={exports:{}},Ay={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dl=d;function TC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var AC=typeof Object.is=="function"?Object.is:TC,RC=Dl.useState,MC=Dl.useEffect,_C=Dl.useLayoutEffect,DC=Dl.useDebugValue;function IC(e,t){var r=t(),n=RC({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return _C(function(){a.value=r,a.getSnapshot=t,ff(a)&&i({inst:a})},[e,r,t]),MC(function(){return ff(a)&&i({inst:a}),e(function(){ff(a)&&i({inst:a})})},[e]),DC(r),r}function ff(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!AC(e,r)}catch{return!0}}function FC(e,t){return t()}var OC=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?FC:IC;Ay.useSyncExternalStore=Dl.useSyncExternalStore!==void 0?Dl.useSyncExternalStore:OC;Ty.exports=Ay;var Ry=Ty.exports;const LC=L0.useInsertionEffect,$C=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zC=$C?d.useLayoutEffect:d.useEffect,UC=LC||zC,My=e=>{const t=d.useRef([e,(...r)=>t[0](...r)]).current;return UC(()=>{t[0]=e}),t[1]},VC="popstate",Tx="pushState",Ax="replaceState",BC="hashchange",Q1=[VC,Tx,Ax,BC],qC=e=>{for(const t of Q1)addEventListener(t,e);return()=>{for(const t of Q1)removeEventListener(t,e)}},_y=(e,t)=>Ry.useSyncExternalStore(qC,e,t),HC=()=>location.search,YC=({ssrSearch:e=""}={})=>_y(HC,()=>e),Z1=()=>location.pathname,WC=({ssrPath:e}={})=>_y(Z1,e?()=>e:Z1),KC=(e,{replace:t=!1,state:r=null}={})=>history[t?Ax:Tx](r,"",e),GC=(e={})=>[WC(e),KC],X1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[X1]>"u"){for(const e of[Tx,Ax]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),n=new Event(e);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,X1,{value:!0})}const QC=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",Dy=(e="")=>e==="/"?"":e,ZC=(e,t)=>e[0]==="~"?e.slice(1):Dy(t)+e,XC=(e="",t)=>QC(J1(Dy(e)),J1(t)),J1=e=>{try{return decodeURI(e)}catch{return e}},Iy={hook:GC,searchHook:YC,parser:EC,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},Fy=d.createContext(Iy),Ql=()=>d.useContext(Fy),Oy={},Ly=d.createContext(Oy),JC=()=>d.useContext(Ly),im=e=>{const[t,r]=e.hook(e);return[XC(e.base,t),My((n,a)=>r(ZC(n,e.base),a))]},us=()=>im(Ql()),Rx=(e,t,r,n)=>{const{pattern:a,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",n),o=a.exec(r)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((h,p)=>[h,c[p]])):o.groups;let m={...c};return u&&Object.assign(m,u),m})(),...n?[l]:[]]:[!1,null]},Ad=e=>Rx(Ql().parser,e,us()[0]),ek=({children:e,...t})=>{var m,h;const r=Ql(),n=t.hook?Iy:r;let a=n;const[i,o]=((m=t.ssrPath)==null?void 0:m.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=i),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let l=d.useRef({}),c=l.current,u=c;for(let p in n){const y=p==="base"?n[p]+(t[p]||""):t[p]||n[p];c===u&&y!==u[p]&&(l.current=u={...u}),u[p]=y,(y!==n[p]||y!==a[p])&&(a=u)}return d.createElement(Fy.Provider,{value:a,children:e})},eb=({children:e,component:t},r)=>t?d.createElement(t,{params:r}):typeof e=="function"?e(r):e,tk=e=>{let t=d.useRef(Oy);const r=t.current;return t.current=Object.keys(e).length!==Object.keys(r).length||Object.entries(e).some(([n,a])=>a!==r[n])?e:r},Ut=({path:e,nest:t,match:r,...n})=>{const a=Ql(),[i]=im(a),[o,l,c]=r??Rx(a.parser,e,i,t),u=tk({...JC(),...l});if(!o)return null;const m=c?d.createElement(ek,{base:c},eb(n,u)):eb(n,u);return d.createElement(Ly.Provider,{value:u,children:m})},tb=d.forwardRef((e,t)=>{const r=Ql(),[n,a]=im(r),{to:i="",href:o=i,onClick:l,asChild:c,children:u,className:m,replace:h,state:p,...y}=e,N=My(j=>{j.ctrlKey||j.metaKey||j.altKey||j.shiftKey||j.button!==0||(l==null||l(j),j.defaultPrevented||(j.preventDefault(),a(o,e)))}),f=r.hrefs(o[0]==="~"?o.slice(1):r.base+o,r);return c&&d.isValidElement(u)?d.cloneElement(u,{onClick:N,href:f}):d.createElement("a",{...y,onClick:N,href:f,className:m!=null&&m.call?m(n===o):m,children:u,ref:t})}),$y=e=>Array.isArray(e)?e.flatMap(t=>$y(t&&t.type===d.Fragment?t.props.children:t)):[e],sk=({children:e,location:t})=>{const r=Ql(),[n]=im(r);for(const a of $y(e)){let i=0;if(d.isValidElement(a)&&(i=Rx(r.parser,a.props.path,t||n,a.props.nest))[0])return d.cloneElement(a,{match:i})}return null};var Zl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rk={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},La,_0,nw,nk=(nw=class{constructor(){st(this,La,rk);st(this,_0,!1)}setTimeoutProvider(e){Oe(this,La,e)}setTimeout(e,t){return q(this,La).setTimeout(e,t)}clearTimeout(e){q(this,La).clearTimeout(e)}setInterval(e,t){return q(this,La).setInterval(e,t)}clearInterval(e){q(this,La).clearInterval(e)}},La=new WeakMap,_0=new WeakMap,nw),Mi=new nk;function ak(e){setTimeout(e,0)}var Ji=typeof window>"u"||"Deno"in globalThis;function er(){}function ik(e,t){return typeof e=="function"?e(t):e}function Op(e){return typeof e=="number"&&e>=0&&e!==1/0}function zy(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ai(e,t){return typeof e=="function"?e(t):e}function $r(e,t){return typeof e=="function"?e(t):e}function sb(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Mx(o,t.options))return!1}else if(!ad(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function rb(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(eo(t.options.mutationKey)!==eo(i))return!1}else if(!ad(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Mx(e,t){return((t==null?void 0:t.queryKeyHashFn)||eo)(e)}function eo(e){return JSON.stringify(e,(t,r)=>Lp(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function ad(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>ad(e[r],t[r])):!1}var ok=Object.prototype.hasOwnProperty;function Uy(e,t){if(e===t)return e;const r=nb(e)&&nb(t);if(!r&&!(Lp(e)&&Lp(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let c=0;for(let u=0;u<o;u++){const m=r?u:i[u],h=e[m],p=t[m];if(h===p){l[m]=h,(r?u<a:ok.call(e,m))&&c++;continue}if(h===null||p===null||typeof h!="object"||typeof p!="object"){l[m]=p;continue}const y=Uy(h,p);l[m]=y,y===h&&c++}return a===o&&c===a?e:l}function gh(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function nb(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Lp(e){if(!ab(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!ab(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ab(e){return Object.prototype.toString.call(e)==="[object Object]"}function lk(e){return new Promise(t=>{Mi.setTimeout(t,e)})}function $p(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Uy(e,t):t}function ck(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function dk(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var _x=Symbol();function Vy(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===_x?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function By(e,t){return typeof e=="function"?e(...t):!!e}var Di,$a,pl,aw,uk=(aw=class extends Zl{constructor(){super();st(this,Di);st(this,$a);st(this,pl);Oe(this,pl,t=>{if(!Ji&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){q(this,$a)||this.setEventListener(q(this,pl))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,$a))==null||t.call(this),Oe(this,$a,void 0))}setEventListener(t){var r;Oe(this,pl,t),(r=q(this,$a))==null||r.call(this),Oe(this,$a,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){q(this,Di)!==t&&(Oe(this,Di,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof q(this,Di)=="boolean"?q(this,Di):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Di=new WeakMap,$a=new WeakMap,pl=new WeakMap,aw),Dx=new uk;function zp(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var hk=ak;function mk(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=hk;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Ns=mk(),xl,za,gl,iw,fk=(iw=class extends Zl{constructor(){super();st(this,xl,!0);st(this,za);st(this,gl);Oe(this,gl,t=>{if(!Ji&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){q(this,za)||this.setEventListener(q(this,gl))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,za))==null||t.call(this),Oe(this,za,void 0))}setEventListener(t){var r;Oe(this,gl,t),(r=q(this,za))==null||r.call(this),Oe(this,za,t(this.setOnline.bind(this)))}setOnline(t){q(this,xl)!==t&&(Oe(this,xl,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return q(this,xl)}},xl=new WeakMap,za=new WeakMap,gl=new WeakMap,iw),bh=new fk;function pk(e){return Math.min(1e3*2**e,3e4)}function qy(e){return(e??"online")==="online"?bh.isOnline():!0}var Up=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Hy(e){let t=!1,r=0,n;const a=zp(),i=()=>a.status!=="pending",o=f=>{var j;if(!i()){const b=new Up(f);p(b),(j=e.onCancel)==null||j.call(e,b)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>Dx.isFocused()&&(e.networkMode==="always"||bh.isOnline())&&e.canRun(),m=()=>qy(e.networkMode)&&e.canRun(),h=f=>{i()||(n==null||n(),a.resolve(f))},p=f=>{i()||(n==null||n(),a.reject(f))},y=()=>new Promise(f=>{var j;n=b=>{(i()||u())&&f(b)},(j=e.onPause)==null||j.call(e)}).then(()=>{var f;n=void 0,i()||(f=e.onContinue)==null||f.call(e)}),N=()=>{if(i())return;let f;const j=r===0?e.initialPromise:void 0;try{f=j??e.fn()}catch(b){f=Promise.reject(b)}Promise.resolve(f).then(h).catch(b=>{var M;if(i())return;const x=e.retry??(Ji?0:3),w=e.retryDelay??pk,C=typeof w=="function"?w(r,b):w,S=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,b);if(t||!S){p(b);return}r++,(M=e.onFail)==null||M.call(e,r,b),lk(C).then(()=>u()?void 0:y()).then(()=>{t?p(b):N()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:m,start:()=>(m()?N():y().then(N),a)}}var Ii,ow,Yy=(ow=class{constructor(){st(this,Ii)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Op(this.gcTime)&&Oe(this,Ii,Mi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ji?1/0:5*60*1e3))}clearGcTimeout(){q(this,Ii)&&(Mi.clearTimeout(q(this,Ii)),Oe(this,Ii,void 0))}},Ii=new WeakMap,ow),Fi,bl,Lr,Oi,Ps,wd,Li,ln,Zn,lw,xk=(lw=class extends Yy{constructor(t){super();st(this,ln);st(this,Fi);st(this,bl);st(this,Lr);st(this,Oi);st(this,Ps);st(this,wd);st(this,Li);Oe(this,Li,!1),Oe(this,wd,t.defaultOptions),this.setOptions(t.options),this.observers=[],Oe(this,Oi,t.client),Oe(this,Lr,q(this,Oi).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Oe(this,Fi,ib(this.options)),this.state=t.state??q(this,Fi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=q(this,Ps))==null?void 0:t.promise}setOptions(t){if(this.options={...q(this,wd),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=ib(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),Oe(this,Fi,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,Lr).remove(this)}setData(t,r){const n=$p(this.state.data,t,this.options);return bt(this,ln,Zn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){bt(this,ln,Zn).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=q(this,Ps))==null?void 0:n.promise;return(a=q(this,Ps))==null||a.cancel(t),r?r.then(er).catch(er):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,Fi))}isActive(){return this.observers.some(t=>$r(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_x||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ai(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!zy(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=q(this,Ps))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=q(this,Ps))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),q(this,Lr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(q(this,Ps)&&(q(this,Li)?q(this,Ps).cancel({revert:!0}):q(this,Ps).cancelRetry()),this.scheduleGc()),q(this,Lr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||bt(this,ln,Zn).call(this,{type:"invalidate"})}async fetch(t,r){var c,u,m,h,p,y,N,f,j,b,x,w;if(this.state.fetchStatus!=="idle"&&((c=q(this,Ps))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(q(this,Ps))return q(this,Ps).continueRetry(),q(this,Ps).promise}if(t&&this.setOptions(t),!this.options.queryFn){const C=this.observers.find(S=>S.options.queryFn);C&&this.setOptions(C.options)}const n=new AbortController,a=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(Oe(this,Li,!0),n.signal)})},i=()=>{const C=Vy(this.options,r),M=(()=>{const A={client:q(this,Oi),queryKey:this.queryKey,meta:this.meta};return a(A),A})();return Oe(this,Li,!1),this.options.persister?this.options.persister(C,M,this):C(M)},l=(()=>{const C={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:q(this,Oi),state:this.state,fetchFn:i};return a(C),C})();(u=this.options.behavior)==null||u.onFetch(l,this),Oe(this,bl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=l.fetchOptions)==null?void 0:m.meta))&&bt(this,ln,Zn).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),Oe(this,Ps,Hy({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:C=>{C instanceof Up&&C.revert&&this.setState({...q(this,bl),fetchStatus:"idle"}),n.abort()},onFail:(C,S)=>{bt(this,ln,Zn).call(this,{type:"failed",failureCount:C,error:S})},onPause:()=>{bt(this,ln,Zn).call(this,{type:"pause"})},onContinue:()=>{bt(this,ln,Zn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const C=await q(this,Ps).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(y=(p=q(this,Lr).config).onSuccess)==null||y.call(p,C,this),(f=(N=q(this,Lr).config).onSettled)==null||f.call(N,C,this.state.error,this),C}catch(C){if(C instanceof Up){if(C.silent)return q(this,Ps).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw bt(this,ln,Zn).call(this,{type:"error",error:C}),(b=(j=q(this,Lr).config).onError)==null||b.call(j,C,this),(w=(x=q(this,Lr).config).onSettled)==null||w.call(x,this.state.data,C,this),C}finally{this.scheduleGc()}}},Fi=new WeakMap,bl=new WeakMap,Lr=new WeakMap,Oi=new WeakMap,Ps=new WeakMap,wd=new WeakMap,Li=new WeakMap,ln=new WeakSet,Zn=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Wy(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Oe(this,bl,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Ns.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),q(this,Lr).notify({query:this,type:"updated",action:t})})},lw);function Wy(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qy(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ib(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ur,Ct,yd,Zs,$i,vl,ea,Ua,Nd,wl,yl,zi,Ui,Va,Nl,It,yc,Vp,Bp,qp,Hp,Yp,Wp,Kp,Ky,cw,gk=(cw=class extends Zl{constructor(t,r){super();st(this,It);st(this,ur);st(this,Ct);st(this,yd);st(this,Zs);st(this,$i);st(this,vl);st(this,ea);st(this,Ua);st(this,Nd);st(this,wl);st(this,yl);st(this,zi);st(this,Ui);st(this,Va);st(this,Nl,new Set);this.options=r,Oe(this,ur,t),Oe(this,Ua,null),Oe(this,ea,zp()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(q(this,Ct).addObserver(this),ob(q(this,Ct),this.options)?bt(this,It,yc).call(this):this.updateResult(),bt(this,It,Hp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gp(q(this,Ct),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gp(q(this,Ct),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,bt(this,It,Yp).call(this),bt(this,It,Wp).call(this),q(this,Ct).removeObserver(this)}setOptions(t){const r=this.options,n=q(this,Ct);if(this.options=q(this,ur).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof $r(this.options.enabled,q(this,Ct))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");bt(this,It,Kp).call(this),q(this,Ct).setOptions(this.options),r._defaulted&&!gh(this.options,r)&&q(this,ur).getQueryCache().notify({type:"observerOptionsUpdated",query:q(this,Ct),observer:this});const a=this.hasListeners();a&&lb(q(this,Ct),n,this.options,r)&&bt(this,It,yc).call(this),this.updateResult(),a&&(q(this,Ct)!==n||$r(this.options.enabled,q(this,Ct))!==$r(r.enabled,q(this,Ct))||ai(this.options.staleTime,q(this,Ct))!==ai(r.staleTime,q(this,Ct)))&&bt(this,It,Vp).call(this);const i=bt(this,It,Bp).call(this);a&&(q(this,Ct)!==n||$r(this.options.enabled,q(this,Ct))!==$r(r.enabled,q(this,Ct))||i!==q(this,Va))&&bt(this,It,qp).call(this,i)}getOptimisticResult(t){const r=q(this,ur).getQueryCache().build(q(this,ur),t),n=this.createResult(r,t);return vk(this,n)&&(Oe(this,Zs,n),Oe(this,vl,this.options),Oe(this,$i,q(this,Ct).state)),n}getCurrentResult(){return q(this,Zs)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&!this.options.experimental_prefetchInRender&&q(this,ea).status==="pending"&&q(this,ea).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,a))})}trackProp(t){q(this,Nl).add(t)}getCurrentQuery(){return q(this,Ct)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=q(this,ur).defaultQueryOptions(t),n=q(this,ur).getQueryCache().build(q(this,ur),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return bt(this,It,yc).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),q(this,Zs)))}createResult(t,r){var z;const n=q(this,Ct),a=this.options,i=q(this,Zs),o=q(this,$i),l=q(this,vl),u=t!==n?t.state:q(this,yd),{state:m}=t;let h={...m},p=!1,y;if(r._optimisticResults){const $=this.hasListeners(),W=!$&&ob(t,r),G=$&&lb(t,n,r,a);(W||G)&&(h={...h,...Wy(m.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:N,errorUpdatedAt:f,status:j}=h;y=h.data;let b=!1;if(r.placeholderData!==void 0&&y===void 0&&j==="pending"){let $;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?($=i.data,b=!0):$=typeof r.placeholderData=="function"?r.placeholderData((z=q(this,yl))==null?void 0:z.state.data,q(this,yl)):r.placeholderData,$!==void 0&&(j="success",y=$p(i==null?void 0:i.data,$,r),p=!0)}if(r.select&&y!==void 0&&!b)if(i&&y===(o==null?void 0:o.data)&&r.select===q(this,Nd))y=q(this,wl);else try{Oe(this,Nd,r.select),y=r.select(y),y=$p(i==null?void 0:i.data,y,r),Oe(this,wl,y),Oe(this,Ua,null)}catch($){Oe(this,Ua,$)}q(this,Ua)&&(N=q(this,Ua),y=q(this,wl),f=Date.now(),j="error");const x=h.fetchStatus==="fetching",w=j==="pending",C=j==="error",S=w&&x,M=y!==void 0,R={status:j,fetchStatus:h.fetchStatus,isPending:w,isSuccess:j==="success",isError:C,isInitialLoading:S,isLoading:S,data:y,dataUpdatedAt:h.dataUpdatedAt,error:N,errorUpdatedAt:f,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!w,isLoadingError:C&&!M,isPaused:h.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:C&&M,isStale:Ix(t,r),refetch:this.refetch,promise:q(this,ea),isEnabled:$r(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const $=X=>{R.status==="error"?X.reject(R.error):R.data!==void 0&&X.resolve(R.data)},W=()=>{const X=Oe(this,ea,R.promise=zp());$(X)},G=q(this,ea);switch(G.status){case"pending":t.queryHash===n.queryHash&&$(G);break;case"fulfilled":(R.status==="error"||R.data!==G.value)&&W();break;case"rejected":(R.status!=="error"||R.error!==G.reason)&&W();break}}return R}updateResult(){const t=q(this,Zs),r=this.createResult(q(this,Ct),this.options);if(Oe(this,$i,q(this,Ct).state),Oe(this,vl,this.options),q(this,$i).data!==void 0&&Oe(this,yl,q(this,Ct)),gh(r,t))return;Oe(this,Zs,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!q(this,Nl).size)return!0;const o=new Set(i??q(this,Nl));return this.options.throwOnError&&o.add("error"),Object.keys(q(this,Zs)).some(l=>{const c=l;return q(this,Zs)[c]!==t[c]&&o.has(c)})};bt(this,It,Ky).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&bt(this,It,Hp).call(this)}},ur=new WeakMap,Ct=new WeakMap,yd=new WeakMap,Zs=new WeakMap,$i=new WeakMap,vl=new WeakMap,ea=new WeakMap,Ua=new WeakMap,Nd=new WeakMap,wl=new WeakMap,yl=new WeakMap,zi=new WeakMap,Ui=new WeakMap,Va=new WeakMap,Nl=new WeakMap,It=new WeakSet,yc=function(t){bt(this,It,Kp).call(this);let r=q(this,Ct).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(er)),r},Vp=function(){bt(this,It,Yp).call(this);const t=ai(this.options.staleTime,q(this,Ct));if(Ji||q(this,Zs).isStale||!Op(t))return;const n=zy(q(this,Zs).dataUpdatedAt,t)+1;Oe(this,zi,Mi.setTimeout(()=>{q(this,Zs).isStale||this.updateResult()},n))},Bp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(q(this,Ct)):this.options.refetchInterval)??!1},qp=function(t){bt(this,It,Wp).call(this),Oe(this,Va,t),!(Ji||$r(this.options.enabled,q(this,Ct))===!1||!Op(q(this,Va))||q(this,Va)===0)&&Oe(this,Ui,Mi.setInterval(()=>{(this.options.refetchIntervalInBackground||Dx.isFocused())&&bt(this,It,yc).call(this)},q(this,Va)))},Hp=function(){bt(this,It,Vp).call(this),bt(this,It,qp).call(this,bt(this,It,Bp).call(this))},Yp=function(){q(this,zi)&&(Mi.clearTimeout(q(this,zi)),Oe(this,zi,void 0))},Wp=function(){q(this,Ui)&&(Mi.clearInterval(q(this,Ui)),Oe(this,Ui,void 0))},Kp=function(){const t=q(this,ur).getQueryCache().build(q(this,ur),this.options);if(t===q(this,Ct))return;const r=q(this,Ct);Oe(this,Ct,t),Oe(this,yd,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Ky=function(t){Ns.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(q(this,Zs))}),q(this,ur).getQueryCache().notify({query:q(this,Ct),type:"observerResultsUpdated"})})},cw);function bk(e,t){return $r(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ob(e,t){return bk(e,t)||e.state.data!==void 0&&Gp(e,t,t.refetchOnMount)}function Gp(e,t,r){if($r(t.enabled,e)!==!1&&ai(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Ix(e,t)}return!1}function lb(e,t,r,n){return(e!==t||$r(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Ix(e,r)}function Ix(e,t){return $r(t.enabled,e)!==!1&&e.isStaleByTime(ai(t.staleTime,e))}function vk(e,t){return!gh(e.getCurrentResult(),t)}function cb(e){return{onFetch:(t,r)=>{var m,h,p,y,N;const n=t.options,a=(p=(h=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((y=t.state.data)==null?void 0:y.pages)||[],o=((N=t.state.data)==null?void 0:N.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let f=!1;const j=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?f=!0:t.signal.addEventListener("abort",()=>{f=!0}),t.signal)})},b=Vy(t.options,t.fetchOptions),x=async(w,C,S)=>{if(f)return Promise.reject();if(C==null&&w.pages.length)return Promise.resolve(w);const A=(()=>{const W={client:t.client,queryKey:t.queryKey,pageParam:C,direction:S?"backward":"forward",meta:t.options.meta};return j(W),W})(),R=await b(A),{maxPages:z}=t.options,$=S?dk:ck;return{pages:$(w.pages,R,z),pageParams:$(w.pageParams,C,z)}};if(a&&i.length){const w=a==="backward",C=w?wk:db,S={pages:i,pageParams:o},M=C(n,S);l=await x(S,M,w)}else{const w=e??i.length;do{const C=c===0?o[0]??n.initialPageParam:db(n,l);if(c>0&&C==null)break;l=await x(l,C),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var f,j;return(j=(f=t.options).persister)==null?void 0:j.call(f,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function db(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function wk(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var jd,An,Xs,Vi,Rn,Ea,dw,yk=(dw=class extends Yy{constructor(t){super();st(this,Rn);st(this,jd);st(this,An);st(this,Xs);st(this,Vi);Oe(this,jd,t.client),this.mutationId=t.mutationId,Oe(this,Xs,t.mutationCache),Oe(this,An,[]),this.state=t.state||Gy(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){q(this,An).includes(t)||(q(this,An).push(t),this.clearGcTimeout(),q(this,Xs).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Oe(this,An,q(this,An).filter(r=>r!==t)),this.scheduleGc(),q(this,Xs).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){q(this,An).length||(this.state.status==="pending"?this.scheduleGc():q(this,Xs).remove(this))}continue(){var t;return((t=q(this,Vi))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,u,m,h,p,y,N,f,j,b,x,w,C,S,M,A,R,z;const r=()=>{bt(this,Rn,Ea).call(this,{type:"continue"})},n={client:q(this,jd),meta:this.options.meta,mutationKey:this.options.mutationKey};Oe(this,Vi,Hy({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:($,W)=>{bt(this,Rn,Ea).call(this,{type:"failed",failureCount:$,error:W})},onPause:()=>{bt(this,Rn,Ea).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,Xs).canRun(this)}));const a=this.state.status==="pending",i=!q(this,Vi).canStart();try{if(a)r();else{bt(this,Rn,Ea).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=q(this,Xs).config).onMutate)==null?void 0:l.call(o,t,this,n));const W=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,n));W!==this.state.context&&bt(this,Rn,Ea).call(this,{type:"pending",context:W,variables:t,isPaused:i})}const $=await q(this,Vi).start();return await((h=(m=q(this,Xs).config).onSuccess)==null?void 0:h.call(m,$,t,this.state.context,this,n)),await((y=(p=this.options).onSuccess)==null?void 0:y.call(p,$,t,this.state.context,n)),await((f=(N=q(this,Xs).config).onSettled)==null?void 0:f.call(N,$,null,this.state.variables,this.state.context,this,n)),await((b=(j=this.options).onSettled)==null?void 0:b.call(j,$,null,t,this.state.context,n)),bt(this,Rn,Ea).call(this,{type:"success",data:$}),$}catch($){try{throw await((w=(x=q(this,Xs).config).onError)==null?void 0:w.call(x,$,t,this.state.context,this,n)),await((S=(C=this.options).onError)==null?void 0:S.call(C,$,t,this.state.context,n)),await((A=(M=q(this,Xs).config).onSettled)==null?void 0:A.call(M,void 0,$,this.state.variables,this.state.context,this,n)),await((z=(R=this.options).onSettled)==null?void 0:z.call(R,void 0,$,t,this.state.context,n)),$}finally{bt(this,Rn,Ea).call(this,{type:"error",error:$})}}finally{q(this,Xs).runNext(this)}}},jd=new WeakMap,An=new WeakMap,Xs=new WeakMap,Vi=new WeakMap,Rn=new WeakSet,Ea=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ns.batch(()=>{q(this,An).forEach(n=>{n.onMutationUpdate(t)}),q(this,Xs).notify({mutation:this,type:"updated",action:t})})},dw);function Gy(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ta,cn,Cd,uw,Nk=(uw=class extends Zl{constructor(t={}){super();st(this,ta);st(this,cn);st(this,Cd);this.config=t,Oe(this,ta,new Set),Oe(this,cn,new Map),Oe(this,Cd,0)}build(t,r,n){const a=new yk({client:t,mutationCache:this,mutationId:++Hd(this,Cd)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){q(this,ta).add(t);const r=cu(t);if(typeof r=="string"){const n=q(this,cn).get(r);n?n.push(t):q(this,cn).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(q(this,ta).delete(t)){const r=cu(t);if(typeof r=="string"){const n=q(this,cn).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&q(this,cn).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=cu(t);if(typeof r=="string"){const n=q(this,cn).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=cu(t);if(typeof r=="string"){const a=(n=q(this,cn).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ns.batch(()=>{q(this,ta).forEach(t=>{this.notify({type:"removed",mutation:t})}),q(this,ta).clear(),q(this,cn).clear()})}getAll(){return Array.from(q(this,ta))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>rb(r,n))}findAll(t={}){return this.getAll().filter(r=>rb(t,r))}notify(t){Ns.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Ns.batch(()=>Promise.all(t.map(r=>r.continue().catch(er))))}},ta=new WeakMap,cn=new WeakMap,Cd=new WeakMap,uw);function cu(e){var t;return(t=e.options.scope)==null?void 0:t.id}var sa,Ba,hr,ra,ua,Du,Qp,hw,jk=(hw=class extends Zl{constructor(r,n){super();st(this,ua);st(this,sa);st(this,Ba);st(this,hr);st(this,ra);Oe(this,sa,r),this.setOptions(n),this.bindMethods(),bt(this,ua,Du).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=q(this,sa).defaultMutationOptions(r),gh(this.options,n)||q(this,sa).getMutationCache().notify({type:"observerOptionsUpdated",mutation:q(this,hr),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&eo(n.mutationKey)!==eo(this.options.mutationKey)?this.reset():((a=q(this,hr))==null?void 0:a.state.status)==="pending"&&q(this,hr).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=q(this,hr))==null||r.removeObserver(this)}onMutationUpdate(r){bt(this,ua,Du).call(this),bt(this,ua,Qp).call(this,r)}getCurrentResult(){return q(this,Ba)}reset(){var r;(r=q(this,hr))==null||r.removeObserver(this),Oe(this,hr,void 0),bt(this,ua,Du).call(this),bt(this,ua,Qp).call(this)}mutate(r,n){var a;return Oe(this,ra,n),(a=q(this,hr))==null||a.removeObserver(this),Oe(this,hr,q(this,sa).getMutationCache().build(q(this,sa),this.options)),q(this,hr).addObserver(this),q(this,hr).execute(r)}},sa=new WeakMap,Ba=new WeakMap,hr=new WeakMap,ra=new WeakMap,ua=new WeakSet,Du=function(){var n;const r=((n=q(this,hr))==null?void 0:n.state)??Gy();Oe(this,Ba,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Qp=function(r){Ns.batch(()=>{var n,a,i,o,l,c,u,m;if(q(this,ra)&&this.hasListeners()){const h=q(this,Ba).variables,p=q(this,Ba).context,y={client:q(this,sa),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=q(this,ra)).onSuccess)==null||a.call(n,r.data,h,p,y),(o=(i=q(this,ra)).onSettled)==null||o.call(i,r.data,null,h,p,y)):(r==null?void 0:r.type)==="error"&&((c=(l=q(this,ra)).onError)==null||c.call(l,r.error,h,p,y),(m=(u=q(this,ra)).onSettled)==null||m.call(u,void 0,r.error,h,p,y))}this.listeners.forEach(h=>{h(q(this,Ba))})})},hw),Mn,mw,Ck=(mw=class extends Zl{constructor(t={}){super();st(this,Mn);this.config=t,Oe(this,Mn,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??Mx(a,r);let o=this.get(i);return o||(o=new xk({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){q(this,Mn).has(t.queryHash)||(q(this,Mn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=q(this,Mn).get(t.queryHash);r&&(t.destroy(),r===t&&q(this,Mn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ns.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return q(this,Mn).get(t)}getAll(){return[...q(this,Mn).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>sb(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>sb(t,n)):r}notify(t){Ns.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Ns.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ns.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Mn=new WeakMap,mw),es,qa,Ha,jl,Cl,Ya,kl,Sl,fw,kk=(fw=class{constructor(e={}){st(this,es);st(this,qa);st(this,Ha);st(this,jl);st(this,Cl);st(this,Ya);st(this,kl);st(this,Sl);Oe(this,es,e.queryCache||new Ck),Oe(this,qa,e.mutationCache||new Nk),Oe(this,Ha,e.defaultOptions||{}),Oe(this,jl,new Map),Oe(this,Cl,new Map),Oe(this,Ya,0)}mount(){Hd(this,Ya)._++,q(this,Ya)===1&&(Oe(this,kl,Dx.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,es).onFocus())})),Oe(this,Sl,bh.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,es).onOnline())})))}unmount(){var e,t;Hd(this,Ya)._--,q(this,Ya)===0&&((e=q(this,kl))==null||e.call(this),Oe(this,kl,void 0),(t=q(this,Sl))==null||t.call(this),Oe(this,Sl,void 0))}isFetching(e){return q(this,es).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return q(this,qa).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=q(this,es).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=q(this,es).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ai(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return q(this,es).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=q(this,es).get(n.queryHash),i=a==null?void 0:a.state.data,o=ik(t,i);if(o!==void 0)return q(this,es).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ns.batch(()=>q(this,es).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=q(this,es).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=q(this,es);Ns.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=q(this,es);return Ns.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Ns.batch(()=>q(this,es).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(er).catch(er)}invalidateQueries(e,t={}){return Ns.batch(()=>(q(this,es).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Ns.batch(()=>q(this,es).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(er)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(er)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=q(this,es).build(this,t);return r.isStaleByTime(ai(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(er).catch(er)}fetchInfiniteQuery(e){return e.behavior=cb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(er).catch(er)}ensureInfiniteQueryData(e){return e.behavior=cb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return bh.isOnline()?q(this,qa).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,es)}getMutationCache(){return q(this,qa)}getDefaultOptions(){return q(this,Ha)}setDefaultOptions(e){Oe(this,Ha,e)}setQueryDefaults(e,t){q(this,jl).set(eo(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...q(this,jl).values()],r={};return t.forEach(n=>{ad(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){q(this,Cl).set(eo(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...q(this,Cl).values()],r={};return t.forEach(n=>{ad(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...q(this,Ha).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Mx(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===_x&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...q(this,Ha).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){q(this,es).clear(),q(this,qa).clear()}},es=new WeakMap,qa=new WeakMap,Ha=new WeakMap,jl=new WeakMap,Cl=new WeakMap,Ya=new WeakMap,kl=new WeakMap,Sl=new WeakMap,fw),Qy=d.createContext(void 0),Fx=e=>{const t=d.useContext(Qy);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Sk=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(Qy.Provider,{value:e,children:t})),Zy=d.createContext(!1),Pk=()=>d.useContext(Zy);Zy.Provider;function Ek(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Tk=d.createContext(Ek()),Ak=()=>d.useContext(Tk),Rk=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Mk=e=>{d.useEffect(()=>{e.clearReset()},[e])},_k=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||By(r,[e.error,n])),Dk=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Ik=(e,t)=>e.isLoading&&e.isFetching&&!t,Fk=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,ub=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Ok(e,t,r){var h,p,y,N,f;const n=Pk(),a=Ak(),i=Fx(),o=i.defaultQueryOptions(e);(p=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||p.call(h,o),o._optimisticResults=n?"isRestoring":"optimistic",Dk(o),Rk(o,a),Mk(a);const l=!i.getQueryCache().get(o.queryHash),[c]=d.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),m=!n&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(j=>{const b=m?c.subscribe(Ns.batchCalls(j)):er;return c.updateResult(),b},[c,m]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),d.useEffect(()=>{c.setOptions(o)},[o,c]),Fk(o,u))throw ub(o,c,a);if(_k({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((N=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||N.call(y,o,u),o.experimental_prefetchInRender&&!Ji&&Ik(u,n)){const j=l?ub(o,c,a):(f=i.getQueryCache().get(o.queryHash))==null?void 0:f.promise;j==null||j.catch(er).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Ze(e,t){return Ok(e,gk)}function nt(e,t){const r=Fx(),[n]=d.useState(()=>new jk(r,e));d.useEffect(()=>{n.setOptions(e)},[n,e]);const a=d.useSyncExternalStore(d.useCallback(o=>n.subscribe(Ns.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=d.useCallback((o,l)=>{n.mutate(o,l).catch(er)},[n]);if(a.error&&By(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}async function Xy(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function rt(e,t,r){const n=localStorage.getItem("user"),a=n?JSON.parse(n).id:null,i={};r&&(i["Content-Type"]="application/json"),a&&(i.Authorization=`Bearer ${a}`);const o=await fetch(t,{method:e,headers:i,body:r?JSON.stringify(r):void 0,credentials:"include"});return await Xy(o),o}const Lk=({on401:e})=>async({queryKey:t})=>{const r=localStorage.getItem("user"),n=r?JSON.parse(r).id:null,a={};n&&(a.Authorization=`Bearer ${n}`);const i=await fetch(t.join("/"),{credentials:"include",headers:a});return await Xy(i),await i.json()},ke=new kk({defaultOptions:{queries:{queryFn:Lk({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),$k=1,zk=1e6;let pf=0;function Uk(){return pf=(pf+1)%Number.MAX_SAFE_INTEGER,pf.toString()}const xf=new Map,hb=e=>{if(xf.has(e))return;const t=setTimeout(()=>{xf.delete(e),Ic({type:"REMOVE_TOAST",toastId:e})},zk);xf.set(e,t)},Vk=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,$k)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?hb(r):e.toasts.forEach(n=>{hb(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Iu=[];let Fu={toasts:[]};function Ic(e){Fu=Vk(Fu,e),Iu.forEach(t=>{t(Fu)})}function Bk({...e}){const t=Uk(),r=a=>Ic({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>Ic({type:"DISMISS_TOAST",toastId:t});return Ic({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function ks(){const[e,t]=d.useState(Fu);return d.useEffect(()=>(Iu.push(t),()=>{const r=Iu.indexOf(t);r>-1&&Iu.splice(r,1)}),[e]),{...e,toast:Bk,dismiss:r=>Ic({type:"DISMISS_TOAST",toastId:r})}}function We(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function mb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Jy(...e){return t=>{let r=!1;const n=e.map(a=>{const i=mb(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():mb(e[a],null)}}}}function xt(...e){return d.useCallback(Jy(...e),e)}function qk(e,t){const r=d.createContext(t),n=i=>{const{children:o,...l}=i,c=d.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=d.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function cr(e,t=[]){let r=[];function n(i,o){const l=d.createContext(o),c=r.length;r=[...r,o];const u=h=>{var b;const{scope:p,children:y,...N}=h,f=((b=p==null?void 0:p[e])==null?void 0:b[c])||l,j=d.useMemo(()=>N,Object.values(N));return s.jsx(f.Provider,{value:j,children:y})};u.displayName=i+"Provider";function m(h,p){var f;const y=((f=p==null?void 0:p[e])==null?void 0:f[c])||l,N=d.useContext(y);if(N)return N;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,m]}const a=()=>{const i=r.map(o=>d.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,Hk(a,...t)]}function Hk(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Il(e){const t=Yk(e),r=d.forwardRef((n,a)=>{const{children:i,...o}=n,l=d.Children.toArray(i),c=l.find(Wk);if(c){const u=c.props.children,m=l.map(h=>h===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:h);return s.jsx(t,{...o,ref:a,children:d.isValidElement(u)?d.cloneElement(u,void 0,m):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var e4=Il("Slot");function Yk(e){const t=d.forwardRef((r,n)=>{const{children:a,...i}=r;if(d.isValidElement(a)){const o=Gk(a),l=Kk(i,a.props);return a.type!==d.Fragment&&(l.ref=n?Jy(n,o):o),d.cloneElement(a,l)}return d.Children.count(a)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var t4=Symbol("radix.slottable");function s4(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=t4,t}function Wk(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===t4}function Kk(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function Gk(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function om(e){const t=e+"CollectionProvider",[r,n]=cr(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:j,children:b}=f,x=Le.useRef(null),w=Le.useRef(new Map).current;return s.jsx(a,{scope:j,itemMap:w,collectionRef:x,children:b})};o.displayName=t;const l=e+"CollectionSlot",c=Il(l),u=Le.forwardRef((f,j)=>{const{scope:b,children:x}=f,w=i(l,b),C=xt(j,w.collectionRef);return s.jsx(c,{ref:C,children:x})});u.displayName=l;const m=e+"CollectionItemSlot",h="data-radix-collection-item",p=Il(m),y=Le.forwardRef((f,j)=>{const{scope:b,children:x,...w}=f,C=Le.useRef(null),S=xt(j,C),M=i(m,b);return Le.useEffect(()=>(M.itemMap.set(C,{ref:C,...w}),()=>void M.itemMap.delete(C))),s.jsx(p,{[h]:"",ref:S,children:x})});y.displayName=m;function N(f){const j=i(e+"CollectionConsumer",f);return Le.useCallback(()=>{const x=j.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(j.itemMap.values()).sort((M,A)=>w.indexOf(M.ref.current)-w.indexOf(A.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:o,Slot:u,ItemSlot:y},N,n]}var Qk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xe=Qk.reduce((e,t)=>{const r=Il(`Primitive.${t}`),n=d.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function r4(e,t){e&&Wr.flushSync(()=>e.dispatchEvent(t))}function Mr(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function Zk(e,t=globalThis==null?void 0:globalThis.document){const r=Mr(e);d.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Xk="DismissableLayer",Zp="dismissableLayer.update",Jk="dismissableLayer.pointerDownOutside",e7="dismissableLayer.focusOutside",fb,n4=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Rd=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=d.useContext(n4),[m,h]=d.useState(null),p=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=d.useState({}),N=xt(t,A=>h(A)),f=Array.from(u.layers),[j]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=f.indexOf(j),x=m?f.indexOf(m):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,C=x>=b,S=s7(A=>{const R=A.target,z=[...u.branches].some($=>$.contains(R));!C||z||(a==null||a(A),o==null||o(A),A.defaultPrevented||l==null||l())},p),M=r7(A=>{const R=A.target;[...u.branches].some($=>$.contains(R))||(i==null||i(A),o==null||o(A),A.defaultPrevented||l==null||l())},p);return Zk(A=>{x===u.layers.size-1&&(n==null||n(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},p),d.useEffect(()=>{if(m)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(fb=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),pb(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=fb)}},[m,p,r,u]),d.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),pb())},[m,u]),d.useEffect(()=>{const A=()=>y({});return document.addEventListener(Zp,A),()=>document.removeEventListener(Zp,A)},[]),s.jsx(Xe.div,{...c,ref:N,style:{pointerEvents:w?C?"auto":"none":void 0,...e.style},onFocusCapture:We(e.onFocusCapture,M.onFocusCapture),onBlurCapture:We(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:We(e.onPointerDownCapture,S.onPointerDownCapture)})});Rd.displayName=Xk;var t7="DismissableLayerBranch",a4=d.forwardRef((e,t)=>{const r=d.useContext(n4),n=d.useRef(null),a=xt(t,n);return d.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Xe.div,{...e,ref:a})});a4.displayName=t7;function s7(e,t=globalThis==null?void 0:globalThis.document){const r=Mr(e),n=d.useRef(!1),a=d.useRef(()=>{});return d.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){i4(Jk,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function r7(e,t=globalThis==null?void 0:globalThis.document){const r=Mr(e),n=d.useRef(!1);return d.useEffect(()=>{const a=i=>{i.target&&!n.current&&i4(e7,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function pb(){const e=new CustomEvent(Zp);document.dispatchEvent(e)}function i4(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?r4(a,i):a.dispatchEvent(i)}var n7=Rd,a7=a4,bs=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},i7="Portal",lm=d.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=d.useState(!1);bs(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?PC.createPortal(s.jsx(Xe.div,{...n,ref:t}),o):null});lm.displayName=i7;function o7(e,t){return d.useReducer((r,n)=>t[r][n]??r,e)}var ya=e=>{const{present:t,children:r}=e,n=l7(t),a=typeof r=="function"?r({present:n.isPresent}):d.Children.only(r),i=xt(n.ref,c7(a));return typeof r=="function"||n.isPresent?d.cloneElement(a,{ref:i}):null};ya.displayName="Presence";function l7(e){const[t,r]=d.useState(),n=d.useRef(null),a=d.useRef(e),i=d.useRef("none"),o=e?"mounted":"unmounted",[l,c]=o7(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=du(n.current);i.current=l==="mounted"?u:"none"},[l]),bs(()=>{const u=n.current,m=a.current;if(m!==e){const p=i.current,y=du(u);e?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(m&&p!==y?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),bs(()=>{if(t){let u;const m=t.ownerDocument.defaultView??window,h=y=>{const f=du(n.current).includes(CSS.escape(y.animationName));if(y.target===t&&f&&(c("ANIMATION_END"),!a.current)){const j=t.style.animationFillMode;t.style.animationFillMode="forwards",u=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=j)})}},p=y=>{y.target===t&&(i.current=du(n.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{m.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function du(e){return(e==null?void 0:e.animationName)||"none"}function c7(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var d7=L0[" useInsertionEffect ".trim().toString()]||bs;function qn({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=u7({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const m=d.useRef(e!==void 0);d.useEffect(()=>{const h=m.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=l},[l,n])}const u=d.useCallback(m=>{var h;if(l){const p=h7(m)?m(e):m;p!==e&&((h=o.current)==null||h.call(o,p))}else i(m)},[l,e,i,o]);return[c,u]}function u7({defaultProp:e,onChange:t}){const[r,n]=d.useState(e),a=d.useRef(r),i=d.useRef(t);return d7(()=>{i.current=t},[t]),d.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function h7(e){return typeof e=="function"}var o4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),m7="VisuallyHidden",cm=d.forwardRef((e,t)=>s.jsx(Xe.span,{...e,ref:t,style:{...o4,...e.style}}));cm.displayName=m7;var f7=cm,Ox="ToastProvider",[Lx,p7,x7]=om("Toast"),[l4]=cr("Toast",[x7]),[g7,dm]=l4(Ox),c4=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=d.useState(null),[u,m]=d.useState(0),h=d.useRef(!1),p=d.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ox}\`. Expected non-empty \`string\`.`),s.jsx(Lx.Provider,{scope:t,children:s.jsx(g7,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:d.useCallback(()=>m(y=>y+1),[]),onToastRemove:d.useCallback(()=>m(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};c4.displayName=Ox;var d4="ToastViewport",b7=["F8"],Xp="toast.viewportPause",Jp="toast.viewportResume",u4=d.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=b7,label:a="Notifications ({hotkey})",...i}=e,o=dm(d4,r),l=p7(r),c=d.useRef(null),u=d.useRef(null),m=d.useRef(null),h=d.useRef(null),p=xt(t,h,o.onViewportChange),y=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=o.toastCount>0;d.useEffect(()=>{const j=b=>{var w;n.length!==0&&n.every(C=>b[C]||b.code===C)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[n]),d.useEffect(()=>{const j=c.current,b=h.current;if(N&&j&&b){const x=()=>{if(!o.isClosePausedRef.current){const M=new CustomEvent(Xp);b.dispatchEvent(M),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const M=new CustomEvent(Jp);b.dispatchEvent(M),o.isClosePausedRef.current=!1}},C=M=>{!j.contains(M.relatedTarget)&&w()},S=()=>{j.contains(document.activeElement)||w()};return j.addEventListener("focusin",x),j.addEventListener("focusout",C),j.addEventListener("pointermove",x),j.addEventListener("pointerleave",S),window.addEventListener("blur",x),window.addEventListener("focus",w),()=>{j.removeEventListener("focusin",x),j.removeEventListener("focusout",C),j.removeEventListener("pointermove",x),j.removeEventListener("pointerleave",S),window.removeEventListener("blur",x),window.removeEventListener("focus",w)}}},[N,o.isClosePausedRef]);const f=d.useCallback(({tabbingDirection:j})=>{const x=l().map(w=>{const C=w.ref.current,S=[C,...R7(C)];return j==="forwards"?S:S.reverse()});return(j==="forwards"?x.reverse():x).flat()},[l]);return d.useEffect(()=>{const j=h.current;if(j){const b=x=>{var S,M,A;const w=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!w){const R=document.activeElement,z=x.shiftKey;if(x.target===j&&z){(S=u.current)==null||S.focus();return}const G=f({tabbingDirection:z?"backwards":"forwards"}),X=G.findIndex(P=>P===R);gf(G.slice(X+1))?x.preventDefault():z?(M=u.current)==null||M.focus():(A=m.current)==null||A.focus()}};return j.addEventListener("keydown",b),()=>j.removeEventListener("keydown",b)}},[l,f]),s.jsxs(a7,{ref:c,role:"region","aria-label":a.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&s.jsx(e0,{ref:u,onFocusFromOutsideViewport:()=>{const j=f({tabbingDirection:"forwards"});gf(j)}}),s.jsx(Lx.Slot,{scope:r,children:s.jsx(Xe.ol,{tabIndex:-1,...i,ref:p})}),N&&s.jsx(e0,{ref:m,onFocusFromOutsideViewport:()=>{const j=f({tabbingDirection:"backwards"});gf(j)}})]})});u4.displayName=d4;var h4="ToastFocusProxy",e0=d.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=dm(h4,r);return s.jsx(cm,{tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});e0.displayName=h4;var Md="Toast",v7="toast.swipeStart",w7="toast.swipeMove",y7="toast.swipeCancel",N7="toast.swipeEnd",m4=d.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=qn({prop:n,defaultProp:a??!0,onChange:i,caller:Md});return s.jsx(ya,{present:r||l,children:s.jsx(k7,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Mr(e.onPause),onResume:Mr(e.onResume),onSwipeStart:We(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:We(e.onSwipeMove,u=>{const{x:m,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:We(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:We(e.onSwipeEnd,u=>{const{x:m,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});m4.displayName=Md;var[j7,C7]=l4(Md,{onClose(){}}),k7=d.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:m,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:y,...N}=e,f=dm(Md,r),[j,b]=d.useState(null),x=xt(t,P=>b(P)),w=d.useRef(null),C=d.useRef(null),S=a||f.duration,M=d.useRef(0),A=d.useRef(S),R=d.useRef(0),{onToastAdd:z,onToastRemove:$}=f,W=Mr(()=>{var L;(j==null?void 0:j.contains(document.activeElement))&&((L=f.viewport)==null||L.focus()),o()}),G=d.useCallback(P=>{!P||P===1/0||(window.clearTimeout(R.current),M.current=new Date().getTime(),R.current=window.setTimeout(W,P))},[W]);d.useEffect(()=>{const P=f.viewport;if(P){const L=()=>{G(A.current),u==null||u()},_=()=>{const V=new Date().getTime()-M.current;A.current=A.current-V,window.clearTimeout(R.current),c==null||c()};return P.addEventListener(Xp,_),P.addEventListener(Jp,L),()=>{P.removeEventListener(Xp,_),P.removeEventListener(Jp,L)}}},[f.viewport,S,c,u,G]),d.useEffect(()=>{i&&!f.isClosePausedRef.current&&G(S)},[i,S,f.isClosePausedRef,G]),d.useEffect(()=>(z(),()=>$()),[z,$]);const X=d.useMemo(()=>j?w4(j):null,[j]);return f.viewport?s.jsxs(s.Fragment,{children:[X&&s.jsx(S7,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:X}),s.jsx(j7,{scope:r,onClose:W,children:Wr.createPortal(s.jsx(Lx.ItemSlot,{scope:r,children:s.jsx(n7,{asChild:!0,onEscapeKeyDown:We(l,()=>{f.isFocusedToastEscapeKeyDownRef.current||W(),f.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Xe.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":f.swipeDirection,...N,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:We(e.onKeyDown,P=>{P.key==="Escape"&&(l==null||l(P.nativeEvent),P.nativeEvent.defaultPrevented||(f.isFocusedToastEscapeKeyDownRef.current=!0,W()))}),onPointerDown:We(e.onPointerDown,P=>{P.button===0&&(w.current={x:P.clientX,y:P.clientY})}),onPointerMove:We(e.onPointerMove,P=>{if(!w.current)return;const L=P.clientX-w.current.x,_=P.clientY-w.current.y,V=!!C.current,E=["left","right"].includes(f.swipeDirection),Y=["left","up"].includes(f.swipeDirection)?Math.min:Math.max,Z=E?Y(0,L):0,ne=E?0:Y(0,_),oe=P.pointerType==="touch"?10:2,pe={x:Z,y:ne},he={originalEvent:P,delta:pe};V?(C.current=pe,uu(w7,h,he,{discrete:!1})):xb(pe,f.swipeDirection,oe)?(C.current=pe,uu(v7,m,he,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(L)>oe||Math.abs(_)>oe)&&(w.current=null)}),onPointerUp:We(e.onPointerUp,P=>{const L=C.current,_=P.target;if(_.hasPointerCapture(P.pointerId)&&_.releasePointerCapture(P.pointerId),C.current=null,w.current=null,L){const V=P.currentTarget,E={originalEvent:P,delta:L};xb(L,f.swipeDirection,f.swipeThreshold)?uu(N7,y,E,{discrete:!0}):uu(y7,p,E,{discrete:!0}),V.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),f.viewport)})]}):null}),S7=e=>{const{__scopeToast:t,children:r,...n}=e,a=dm(Md,t),[i,o]=d.useState(!1),[l,c]=d.useState(!1);return T7(()=>o(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(lm,{asChild:!0,children:s.jsx(cm,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},P7="ToastTitle",f4=d.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Xe.div,{...n,ref:t})});f4.displayName=P7;var E7="ToastDescription",p4=d.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Xe.div,{...n,ref:t})});p4.displayName=E7;var x4="ToastAction",g4=d.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(v4,{altText:r,asChild:!0,children:s.jsx($x,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${x4}\`. Expected non-empty \`string\`.`),null)});g4.displayName=x4;var b4="ToastClose",$x=d.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=C7(b4,r);return s.jsx(v4,{asChild:!0,children:s.jsx(Xe.button,{type:"button",...n,ref:t,onClick:We(e.onClick,a.onClose)})})});$x.displayName=b4;var v4=d.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function w4(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),A7(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...w4(n))}}),t}function uu(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?r4(a,i):a.dispatchEvent(i)}var xb=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function T7(e=()=>{}){const t=Mr(e);bs(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function A7(e){return e.nodeType===e.ELEMENT_NODE}function R7(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function gf(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var M7=c4,y4=u4,N4=m4,j4=f4,C4=p4,k4=g4,S4=$x;function P4(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=P4(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function E4(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=P4(e))&&(n&&(n+=" "),n+=t);return n}const gb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,bb=E4,_d=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return bb(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const m=r==null?void 0:r[u],h=i==null?void 0:i[u];if(m===null)return null;const p=gb(m)||gb(h);return a[u][p]}),l=r&&Object.entries(r).reduce((u,m)=>{let[h,p]=m;return p===void 0||(u[h]=p),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,m)=>{let{class:h,className:p,...y}=m;return Object.entries(y).every(N=>{let[f,j]=N;return Array.isArray(j)?j.includes({...i,...l}[f]):{...i,...l}[f]===j})?[...u,h,p]:u},[]);return bb(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),T4=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>d.createElement("svg",{ref:c,...D7,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:T4("lucide",a),...l},[...o.map(([u,m])=>d.createElement(u,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(e,t)=>{const r=d.forwardRef(({className:n,...a},i)=>d.createElement(I7,{ref:i,iconNode:t,className:T4(`lucide-${_7(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=Se("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=Se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=Se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=Se("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=Se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=Se("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=Se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=Se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=Se("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=Se("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=Se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=Se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=Se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=Se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=Se("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=Se("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=Se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=Se("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=Se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=Se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=Se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Se("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=Se("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=Se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=Se("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=Se("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=Se("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=Se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Se("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=Se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=Se("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=Se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=Se("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=Se("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=Se("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=Se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=Se("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=Se("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=Se("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=Se("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=Se("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=Se("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=Se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=Se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=Se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=Se("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=Se("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=Se("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=Se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=Se("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=Se("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=Se("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=Se("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=Se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=Se("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=Se("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=Se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=Se("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=Se("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=Se("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=Se("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=Se("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=Se("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=Se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=Se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=Se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=Se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=Se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=Se("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=Se("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=Se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=Se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=Se("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=Se("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=Se("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=Se("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Hx="-",nS=e=>{const t=iS(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(Hx);return l[0]===""&&l.length!==1&&l.shift(),F4(l,t)||aS(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},F4=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?F4(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Hx);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Nb=/^\[(.+)\]$/,aS=e=>{if(Nb.test(e)){const t=Nb.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},iS=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return lS(Object.entries(e.classGroups),r).forEach(([i,o])=>{r0(o,n,i,t)}),n},r0=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:jb(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(oS(a)){r0(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{r0(o,jb(t,i),r,n)})})},jb=(e,t)=>{let r=e;return t.split(Hx).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},oS=e=>e.isThemeGetter,lS=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,cS=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},O4="!",dS=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,m=0,h;for(let j=0;j<l.length;j++){let b=l[j];if(u===0){if(b===a&&(n||l.slice(j,j+i)===t)){c.push(l.slice(m,j)),m=j+i;continue}if(b==="/"){h=j;continue}}b==="["?u++:b==="]"&&u--}const p=c.length===0?l:l.substring(m),y=p.startsWith(O4),N=y?p.substring(1):p,f=h&&h>m?h-m:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:N,maybePostfixModifierPosition:f}};return r?l=>r({className:l,parseClassName:o}):o},uS=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},hS=e=>({cache:cS(e.cacheSize),parseClassName:dS(e),...nS(e)}),mS=/\s+/,fS=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(mS);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:m,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:y}=r(u);let N=!!y,f=n(N?p.substring(0,y):p);if(!f){if(!N){l=u+(l.length>0?" "+l:l);continue}if(f=n(p),!f){l=u+(l.length>0?" "+l:l);continue}N=!1}const j=uS(m).join(":"),b=h?j+O4:j,x=b+f;if(i.includes(x))continue;i.push(x);const w=a(f,N);for(let C=0;C<w.length;++C){const S=w[C];i.push(b+S)}l=u+(l.length>0?" "+l:l)}return l};function pS(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=L4(t))&&(n&&(n+=" "),n+=r);return n}const L4=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=L4(e[n]))&&(r&&(r+=" "),r+=t);return r};function xS(e,...t){let r,n,a,i=o;function o(c){const u=t.reduce((m,h)=>h(m),e());return r=hS(u),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const m=fS(c,r);return a(c,m),m}return function(){return i(pS.apply(null,arguments))}}const Vt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},$4=/^\[(?:([a-z-]+):)?(.+)\]$/i,gS=/^\d+\/\d+$/,bS=new Set(["px","full","screen"]),vS=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wS=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yS=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,NS=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jS=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gn=e=>ol(e)||bS.has(e)||gS.test(e),Sa=e=>Xl(e,"length",RS),ol=e=>!!e&&!Number.isNaN(Number(e)),wf=e=>Xl(e,"number",ol),fc=e=>!!e&&Number.isInteger(Number(e)),CS=e=>e.endsWith("%")&&ol(e.slice(0,-1)),pt=e=>$4.test(e),Pa=e=>vS.test(e),kS=new Set(["length","size","percentage"]),SS=e=>Xl(e,kS,z4),PS=e=>Xl(e,"position",z4),ES=new Set(["image","url"]),TS=e=>Xl(e,ES,_S),AS=e=>Xl(e,"",MS),pc=()=>!0,Xl=(e,t,r)=>{const n=$4.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},RS=e=>wS.test(e)&&!yS.test(e),z4=()=>!1,MS=e=>NS.test(e),_S=e=>jS.test(e),DS=()=>{const e=Vt("colors"),t=Vt("spacing"),r=Vt("blur"),n=Vt("brightness"),a=Vt("borderColor"),i=Vt("borderRadius"),o=Vt("borderSpacing"),l=Vt("borderWidth"),c=Vt("contrast"),u=Vt("grayscale"),m=Vt("hueRotate"),h=Vt("invert"),p=Vt("gap"),y=Vt("gradientColorStops"),N=Vt("gradientColorStopPositions"),f=Vt("inset"),j=Vt("margin"),b=Vt("opacity"),x=Vt("padding"),w=Vt("saturate"),C=Vt("scale"),S=Vt("sepia"),M=Vt("skew"),A=Vt("space"),R=Vt("translate"),z=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],W=()=>["auto",pt,t],G=()=>[pt,t],X=()=>["",Gn,Sa],P=()=>["auto",ol,pt],L=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],_=()=>["solid","dashed","dotted","double","none"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",pt],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ne=()=>[ol,pt];return{cacheSize:500,separator:":",theme:{colors:[pc],spacing:[Gn,Sa],blur:["none","",Pa,pt],brightness:ne(),borderColor:[e],borderRadius:["none","","full",Pa,pt],borderSpacing:G(),borderWidth:X(),contrast:ne(),grayscale:Y(),hueRotate:ne(),invert:Y(),gap:G(),gradientColorStops:[e],gradientColorStopPositions:[CS,Sa],inset:W(),margin:W(),opacity:ne(),padding:G(),saturate:ne(),scale:ne(),sepia:Y(),skew:ne(),space:G(),translate:G()},classGroups:{aspect:[{aspect:["auto","square","video",pt]}],container:["container"],columns:[{columns:[Pa]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...L(),pt]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",fc,pt]}],basis:[{basis:W()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pt]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",fc,pt]}],"grid-cols":[{"grid-cols":[pc]}],"col-start-end":[{col:["auto",{span:["full",fc,pt]},pt]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[pc]}],"row-start-end":[{row:["auto",{span:[fc,pt]},pt]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...E()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...E(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...E(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pt,t]}],"min-w":[{"min-w":[pt,t,"min","max","fit"]}],"max-w":[{"max-w":[pt,t,"none","full","min","max","fit","prose",{screen:[Pa]},Pa]}],h:[{h:[pt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Pa,Sa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",wf]}],"font-family":[{font:[pc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pt]}],"line-clamp":[{"line-clamp":["none",ol,wf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gn,pt]}],"list-image":[{"list-image":["none",pt]}],"list-style-type":[{list:["none","disc","decimal",pt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[..._(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gn,Sa]}],"underline-offset":[{"underline-offset":["auto",Gn,pt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...L(),PS]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",SS]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},TS]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[..._(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:_()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",..._()]}],"outline-offset":[{"outline-offset":[Gn,pt]}],"outline-w":[{outline:[Gn,Sa]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Gn,Sa]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Pa,AS]}],"shadow-color":[{shadow:[pc]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...V(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Pa,pt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pt]}],duration:[{duration:ne()}],ease:[{ease:["linear","in","out","in-out",pt]}],delay:[{delay:ne()}],animate:[{animate:["none","spin","ping","pulse","bounce",pt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[fc,pt]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Gn,Sa,wf]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},IS=xS(DS);function $e(...e){return IS(E4(e))}let hu=null;const FS=60*60*1e3;async function U4(){if(hu&&Date.now()-hu.timestamp<FS)return hu.rate;try{const t=await(await fetch("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/usd.json")).json();if(t&&t.usd&&t.usd.ngn){const r=t.usd.ngn;return hu={rate:r,timestamp:Date.now()},r}else throw new Error("Invalid API response")}catch(e){return console.error("Failed to fetch exchange rate:",e),1650}}function OS(e,t){return e*t}const LS=M7,V4=d.forwardRef(({className:e,...t},r)=>s.jsx(y4,{ref:r,className:$e("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));V4.displayName=y4.displayName;const $S=_d("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),B4=d.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(N4,{ref:n,className:$e($S({variant:t}),e),...r}));B4.displayName=N4.displayName;const zS=d.forwardRef(({className:e,...t},r)=>s.jsx(k4,{ref:r,className:$e("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));zS.displayName=k4.displayName;const q4=d.forwardRef(({className:e,...t},r)=>s.jsx(S4,{ref:r,className:$e("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Pt,{className:"h-4 w-4"})}));q4.displayName=S4.displayName;const H4=d.forwardRef(({className:e,...t},r)=>s.jsx(j4,{ref:r,className:$e("text-sm font-semibold",e),...t}));H4.displayName=j4.displayName;const Y4=d.forwardRef(({className:e,...t},r)=>s.jsx(C4,{ref:r,className:$e("text-sm opacity-90",e),...t}));Y4.displayName=C4.displayName;function US(){const{toasts:e}=ks();return s.jsxs(LS,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(B4,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(H4,{children:r}),n&&s.jsx(Y4,{children:n})]}),a,s.jsx(q4,{})]},t)}),s.jsx(V4,{})]})}var VS=L0[" useId ".trim().toString()]||(()=>{}),BS=0;function ii(e){const[t,r]=d.useState(VS());return bs(()=>{r(n=>n??String(BS++))},[e]),t?`radix-${t}`:""}const qS=["top","right","bottom","left"],mi=Math.min,Sr=Math.max,wh=Math.round,mu=Math.floor,Vn=e=>({x:e,y:e}),HS={left:"right",right:"left",bottom:"top",top:"bottom"},YS={start:"end",end:"start"};function n0(e,t,r){return Sr(e,mi(t,r))}function xa(e,t){return typeof e=="function"?e(t):e}function ga(e){return e.split("-")[0]}function Jl(e){return e.split("-")[1]}function Yx(e){return e==="x"?"y":"x"}function Wx(e){return e==="y"?"height":"width"}const WS=new Set(["top","bottom"]);function Ln(e){return WS.has(ga(e))?"y":"x"}function Kx(e){return Yx(Ln(e))}function KS(e,t,r){r===void 0&&(r=!1);const n=Jl(e),a=Kx(e),i=Wx(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=yh(o)),[o,yh(o)]}function GS(e){const t=yh(e);return[a0(e),t,a0(t)]}function a0(e){return e.replace(/start|end/g,t=>YS[t])}const Cb=["left","right"],kb=["right","left"],QS=["top","bottom"],ZS=["bottom","top"];function XS(e,t,r){switch(e){case"top":case"bottom":return r?t?kb:Cb:t?Cb:kb;case"left":case"right":return t?QS:ZS;default:return[]}}function JS(e,t,r,n){const a=Jl(e);let i=XS(ga(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(a0)))),i}function yh(e){return e.replace(/left|right|bottom|top/g,t=>HS[t])}function eP(e){return{top:0,right:0,bottom:0,left:0,...e}}function W4(e){return typeof e!="number"?eP(e):{top:e,right:e,bottom:e,left:e}}function Nh(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function Sb(e,t,r){let{reference:n,floating:a}=e;const i=Ln(t),o=Kx(t),l=Wx(o),c=ga(t),u=i==="y",m=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2,p=n[l]/2-a[l]/2;let y;switch(c){case"top":y={x:m,y:n.y-a.height};break;case"bottom":y={x:m,y:n.y+n.height};break;case"right":y={x:n.x+n.width,y:h};break;case"left":y={x:n.x-a.width,y:h};break;default:y={x:n.x,y:n.y}}switch(Jl(t)){case"start":y[o]-=p*(r&&u?-1:1);break;case"end":y[o]+=p*(r&&u?-1:1);break}return y}const tP=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:m,y:h}=Sb(u,n,c),p=n,y={},N=0;for(let f=0;f<l.length;f++){const{name:j,fn:b}=l[f],{x,y:w,data:C,reset:S}=await b({x:m,y:h,initialPlacement:n,placement:p,strategy:a,middlewareData:y,rects:u,platform:o,elements:{reference:e,floating:t}});m=x??m,h=w??h,y={...y,[j]:{...y[j],...C}},S&&N<=50&&(N++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):S.rects),{x:m,y:h}=Sb(u,p,c)),f=-1)}return{x:m,y:h,placement:p,strategy:a,middlewareData:y}};async function od(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:h="floating",altBoundary:p=!1,padding:y=0}=xa(t,e),N=W4(y),j=l[p?h==="floating"?"reference":"floating":h],b=Nh(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(j)))==null||r?j:j.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:m,strategy:c})),x=h==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),C=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},S=Nh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:w,strategy:c}):x);return{top:(b.top-S.top+N.top)/C.y,bottom:(S.bottom-b.bottom+N.bottom)/C.y,left:(b.left-S.left+N.left)/C.x,right:(S.right-b.right+N.right)/C.x}}const sP=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:m=0}=xa(e,t)||{};if(u==null)return{};const h=W4(m),p={x:r,y:n},y=Kx(a),N=Wx(y),f=await o.getDimensions(u),j=y==="y",b=j?"top":"left",x=j?"bottom":"right",w=j?"clientHeight":"clientWidth",C=i.reference[N]+i.reference[y]-p[y]-i.floating[N],S=p[y]-i.reference[y],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let A=M?M[w]:0;(!A||!await(o.isElement==null?void 0:o.isElement(M)))&&(A=l.floating[w]||i.floating[N]);const R=C/2-S/2,z=A/2-f[N]/2-1,$=mi(h[b],z),W=mi(h[x],z),G=$,X=A-f[N]-W,P=A/2-f[N]/2+R,L=n0(G,P,X),_=!c.arrow&&Jl(a)!=null&&P!==L&&i.reference[N]/2-(P<G?$:W)-f[N]/2<0,V=_?P<G?P-G:P-X:0;return{[y]:p[y]+V,data:{[y]:L,centerOffset:P-L-V,..._&&{alignmentOffset:V}},reset:_}}}),rP=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:m=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:f=!0,...j}=xa(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const b=ga(a),x=Ln(l),w=ga(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=p||(w||!f?[yh(l)]:GS(l)),M=N!=="none";!p&&M&&S.push(...JS(l,f,N,C));const A=[l,...S],R=await od(t,j),z=[];let $=((n=i.flip)==null?void 0:n.overflows)||[];if(m&&z.push(R[b]),h){const P=KS(a,o,C);z.push(R[P[0]],R[P[1]])}if($=[...$,{placement:a,overflows:z}],!z.every(P=>P<=0)){var W,G;const P=(((W=i.flip)==null?void 0:W.index)||0)+1,L=A[P];if(L&&(!(h==="alignment"?x!==Ln(L):!1)||$.every(E=>Ln(E.placement)===x?E.overflows[0]>0:!0)))return{data:{index:P,overflows:$},reset:{placement:L}};let _=(G=$.filter(V=>V.overflows[0]<=0).sort((V,E)=>V.overflows[1]-E.overflows[1])[0])==null?void 0:G.placement;if(!_)switch(y){case"bestFit":{var X;const V=(X=$.filter(E=>{if(M){const Y=Ln(E.placement);return Y===x||Y==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(Y=>Y>0).reduce((Y,Z)=>Y+Z,0)]).sort((E,Y)=>E[1]-Y[1])[0])==null?void 0:X[0];V&&(_=V);break}case"initialPlacement":_=l;break}if(a!==_)return{reset:{placement:_}}}return{}}}};function Pb(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Eb(e){return qS.some(t=>e[t]>=0)}const nP=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=xa(e,t);switch(n){case"referenceHidden":{const i=await od(t,{...a,elementContext:"reference"}),o=Pb(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Eb(o)}}}case"escaped":{const i=await od(t,{...a,altBoundary:!0}),o=Pb(i,r.floating);return{data:{escapedOffsets:o,escaped:Eb(o)}}}default:return{}}}}},K4=new Set(["left","top"]);async function aP(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=ga(r),l=Jl(r),c=Ln(r)==="y",u=K4.has(o)?-1:1,m=i&&c?-1:1,h=xa(t,e);let{mainAxis:p,crossAxis:y,alignmentAxis:N}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof N=="number"&&(y=l==="end"?N*-1:N),c?{x:y*m,y:p*u}:{x:p*u,y:y*m}}const iP=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await aP(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},oP=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:j=>{let{x:b,y:x}=j;return{x:b,y:x}}},...c}=xa(e,t),u={x:r,y:n},m=await od(t,c),h=Ln(ga(a)),p=Yx(h);let y=u[p],N=u[h];if(i){const j=p==="y"?"top":"left",b=p==="y"?"bottom":"right",x=y+m[j],w=y-m[b];y=n0(x,y,w)}if(o){const j=h==="y"?"top":"left",b=h==="y"?"bottom":"right",x=N+m[j],w=N-m[b];N=n0(x,N,w)}const f=l.fn({...t,[p]:y,[h]:N});return{...f,data:{x:f.x-r,y:f.y-n,enabled:{[p]:i,[h]:o}}}}}},lP=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=xa(e,t),m={x:r,y:n},h=Ln(a),p=Yx(h);let y=m[p],N=m[h];const f=xa(l,t),j=typeof f=="number"?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(c){const w=p==="y"?"height":"width",C=i.reference[p]-i.floating[w]+j.mainAxis,S=i.reference[p]+i.reference[w]-j.mainAxis;y<C?y=C:y>S&&(y=S)}if(u){var b,x;const w=p==="y"?"width":"height",C=K4.has(ga(a)),S=i.reference[h]-i.floating[w]+(C&&((b=o.offset)==null?void 0:b[h])||0)+(C?0:j.crossAxis),M=i.reference[h]+i.reference[w]+(C?0:((x=o.offset)==null?void 0:x[h])||0)-(C?j.crossAxis:0);N<S?N=S:N>M&&(N=M)}return{[p]:y,[h]:N}}}},cP=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=xa(e,t),m=await od(t,u),h=ga(a),p=Jl(a),y=Ln(a)==="y",{width:N,height:f}=i.floating;let j,b;h==="top"||h==="bottom"?(j=h,b=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=h,j=p==="end"?"top":"bottom");const x=f-m.top-m.bottom,w=N-m.left-m.right,C=mi(f-m[j],x),S=mi(N-m[b],w),M=!t.middlewareData.shift;let A=C,R=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(R=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(A=x),M&&!p){const $=Sr(m.left,0),W=Sr(m.right,0),G=Sr(m.top,0),X=Sr(m.bottom,0);y?R=N-2*($!==0||W!==0?$+W:Sr(m.left,m.right)):A=f-2*(G!==0||X!==0?G+X:Sr(m.top,m.bottom))}await c({...t,availableWidth:R,availableHeight:A});const z=await o.getDimensions(l.floating);return N!==z.width||f!==z.height?{reset:{rects:!0}}:{}}}};function um(){return typeof window<"u"}function ec(e){return G4(e)?(e.nodeName||"").toLowerCase():"#document"}function Ar(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Wn(e){var t;return(t=(G4(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function G4(e){return um()?e instanceof Node||e instanceof Ar(e).Node:!1}function wn(e){return um()?e instanceof Element||e instanceof Ar(e).Element:!1}function Hn(e){return um()?e instanceof HTMLElement||e instanceof Ar(e).HTMLElement:!1}function Tb(e){return!um()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ar(e).ShadowRoot}const dP=new Set(["inline","contents"]);function Dd(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=yn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!dP.has(a)}const uP=new Set(["table","td","th"]);function hP(e){return uP.has(ec(e))}const mP=[":popover-open",":modal"];function hm(e){return mP.some(t=>{try{return e.matches(t)}catch{return!1}})}const fP=["transform","translate","scale","rotate","perspective"],pP=["transform","translate","scale","rotate","perspective","filter"],xP=["paint","layout","strict","content"];function Gx(e){const t=Qx(),r=wn(e)?yn(e):e;return fP.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||pP.some(n=>(r.willChange||"").includes(n))||xP.some(n=>(r.contain||"").includes(n))}function gP(e){let t=fi(e);for(;Hn(t)&&!Ol(t);){if(Gx(t))return t;if(hm(t))return null;t=fi(t)}return null}function Qx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const bP=new Set(["html","body","#document"]);function Ol(e){return bP.has(ec(e))}function yn(e){return Ar(e).getComputedStyle(e)}function mm(e){return wn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fi(e){if(ec(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Tb(e)&&e.host||Wn(e);return Tb(t)?t.host:t}function Q4(e){const t=fi(e);return Ol(t)?e.ownerDocument?e.ownerDocument.body:e.body:Hn(t)&&Dd(t)?t:Q4(t)}function ld(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=Q4(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=Ar(a);if(i){const l=i0(o);return t.concat(o,o.visualViewport||[],Dd(a)?a:[],l&&r?ld(l):[])}return t.concat(a,ld(a,[],r))}function i0(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Z4(e){const t=yn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Hn(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=wh(r)!==i||wh(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function Zx(e){return wn(e)?e:e.contextElement}function ll(e){const t=Zx(e);if(!Hn(t))return Vn(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=Z4(t);let o=(i?wh(r.width):r.width)/n,l=(i?wh(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const vP=Vn(0);function X4(e){const t=Ar(e);return!Qx()||!t.visualViewport?vP:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function wP(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ar(e)?!1:t}function so(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=Zx(e);let o=Vn(1);t&&(n?wn(n)&&(o=ll(n)):o=ll(e));const l=wP(i,r,n)?X4(i):Vn(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,m=a.width/o.x,h=a.height/o.y;if(i){const p=Ar(i),y=n&&wn(n)?Ar(n):n;let N=p,f=i0(N);for(;f&&n&&y!==N;){const j=ll(f),b=f.getBoundingClientRect(),x=yn(f),w=b.left+(f.clientLeft+parseFloat(x.paddingLeft))*j.x,C=b.top+(f.clientTop+parseFloat(x.paddingTop))*j.y;c*=j.x,u*=j.y,m*=j.x,h*=j.y,c+=w,u+=C,N=Ar(f),f=i0(N)}}return Nh({width:m,height:h,x:c,y:u})}function fm(e,t){const r=mm(e).scrollLeft;return t?t.left+r:so(Wn(e)).left+r}function J4(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-fm(e,r),a=r.top+t.scrollTop;return{x:n,y:a}}function yP(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=Wn(n),l=t?hm(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=Vn(1);const m=Vn(0),h=Hn(n);if((h||!h&&!i)&&((ec(n)!=="body"||Dd(o))&&(c=mm(n)),Hn(n))){const y=so(n);u=ll(n),m.x=y.x+n.clientLeft,m.y=y.y+n.clientTop}const p=o&&!h&&!i?J4(o,c):Vn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+m.x+p.x,y:r.y*u.y-c.scrollTop*u.y+m.y+p.y}}function NP(e){return Array.from(e.getClientRects())}function jP(e){const t=Wn(e),r=mm(e),n=e.ownerDocument.body,a=Sr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Sr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+fm(e);const l=-r.scrollTop;return yn(n).direction==="rtl"&&(o+=Sr(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}const Ab=25;function CP(e,t){const r=Ar(e),n=Wn(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const m=Qx();(!m||m&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}const u=fm(n);if(u<=0){const m=n.ownerDocument,h=m.body,p=getComputedStyle(h),y=m.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,N=Math.abs(n.clientWidth-h.clientWidth-y);N<=Ab&&(i-=N)}else u<=Ab&&(i+=u);return{width:i,height:o,x:l,y:c}}const kP=new Set(["absolute","fixed"]);function SP(e,t){const r=so(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=Hn(e)?ll(e):Vn(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function Rb(e,t,r){let n;if(t==="viewport")n=CP(e,r);else if(t==="document")n=jP(Wn(e));else if(wn(t))n=SP(t,r);else{const a=X4(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Nh(n)}function e3(e,t){const r=fi(e);return r===t||!wn(r)||Ol(r)?!1:yn(r).position==="fixed"||e3(r,t)}function PP(e,t){const r=t.get(e);if(r)return r;let n=ld(e,[],!1).filter(l=>wn(l)&&ec(l)!=="body"),a=null;const i=yn(e).position==="fixed";let o=i?fi(e):e;for(;wn(o)&&!Ol(o);){const l=yn(o),c=Gx(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&kP.has(a.position)||Dd(o)&&!c&&e3(e,o))?n=n.filter(m=>m!==o):a=l,o=fi(o)}return t.set(e,n),n}function EP(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?hm(t)?[]:PP(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,m)=>{const h=Rb(t,m,a);return u.top=Sr(h.top,u.top),u.right=mi(h.right,u.right),u.bottom=mi(h.bottom,u.bottom),u.left=Sr(h.left,u.left),u},Rb(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function TP(e){const{width:t,height:r}=Z4(e);return{width:t,height:r}}function AP(e,t,r){const n=Hn(t),a=Wn(t),i=r==="fixed",o=so(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Vn(0);function u(){c.x=fm(a)}if(n||!n&&!i)if((ec(t)!=="body"||Dd(a))&&(l=mm(t)),n){const y=so(t,!0,i,t);c.x=y.x+t.clientLeft,c.y=y.y+t.clientTop}else a&&u();i&&!n&&a&&u();const m=a&&!n&&!i?J4(a,l):Vn(0),h=o.left+l.scrollLeft-c.x-m.x,p=o.top+l.scrollTop-c.y-m.y;return{x:h,y:p,width:o.width,height:o.height}}function yf(e){return yn(e).position==="static"}function Mb(e,t){if(!Hn(e)||yn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Wn(e)===r&&(r=r.ownerDocument.body),r}function t3(e,t){const r=Ar(e);if(hm(e))return r;if(!Hn(e)){let a=fi(e);for(;a&&!Ol(a);){if(wn(a)&&!yf(a))return a;a=fi(a)}return r}let n=Mb(e,t);for(;n&&hP(n)&&yf(n);)n=Mb(n,t);return n&&Ol(n)&&yf(n)&&!Gx(n)?r:n||gP(e)||r}const RP=async function(e){const t=this.getOffsetParent||t3,r=this.getDimensions,n=await r(e.floating);return{reference:AP(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function MP(e){return yn(e).direction==="rtl"}const _P={convertOffsetParentRelativeRectToViewportRelativeRect:yP,getDocumentElement:Wn,getClippingRect:EP,getOffsetParent:t3,getElementRects:RP,getClientRects:NP,getDimensions:TP,getScale:ll,isElement:wn,isRTL:MP};function s3(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function DP(e,t){let r=null,n;const a=Wn(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:m,top:h,width:p,height:y}=u;if(l||t(),!p||!y)return;const N=mu(h),f=mu(a.clientWidth-(m+p)),j=mu(a.clientHeight-(h+y)),b=mu(m),w={rootMargin:-N+"px "+-f+"px "+-j+"px "+-b+"px",threshold:Sr(0,mi(1,c))||1};let C=!0;function S(M){const A=M[0].intersectionRatio;if(A!==c){if(!C)return o();A?o(!1,A):n=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!s3(u,e.getBoundingClientRect())&&o(),C=!1}try{r=new IntersectionObserver(S,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(S,w)}r.observe(e)}return o(!0),i}function IP(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Zx(e),m=a||i?[...u?ld(u):[],...ld(t)]:[];m.forEach(b=>{a&&b.addEventListener("scroll",r,{passive:!0}),i&&b.addEventListener("resize",r)});const h=u&&l?DP(u,r):null;let p=-1,y=null;o&&(y=new ResizeObserver(b=>{let[x]=b;x&&x.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=y)==null||w.observe(t)})),r()}),u&&!c&&y.observe(u),y.observe(t));let N,f=c?so(e):null;c&&j();function j(){const b=so(e);f&&!s3(f,b)&&r(),f=b,N=requestAnimationFrame(j)}return r(),()=>{var b;m.forEach(x=>{a&&x.removeEventListener("scroll",r),i&&x.removeEventListener("resize",r)}),h==null||h(),(b=y)==null||b.disconnect(),y=null,c&&cancelAnimationFrame(N)}}const FP=iP,OP=oP,LP=rP,$P=cP,zP=nP,_b=sP,UP=lP,VP=(e,t,r)=>{const n=new Map,a={platform:_P,...r},i={...a.platform,_c:n};return tP(e,t,{...a,platform:i})};var BP=typeof document<"u",qP=function(){},$u=BP?d.useLayoutEffect:qP;function jh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!jh(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!jh(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function r3(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Db(e,t){const r=r3(e);return Math.round(t*r)/r}function Nf(e){const t=d.useRef(e);return $u(()=>{t.current=e}),t}function HP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[m,h]=d.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,y]=d.useState(n);jh(p,n)||y(n);const[N,f]=d.useState(null),[j,b]=d.useState(null),x=d.useCallback(E=>{E!==M.current&&(M.current=E,f(E))},[]),w=d.useCallback(E=>{E!==A.current&&(A.current=E,b(E))},[]),C=i||N,S=o||j,M=d.useRef(null),A=d.useRef(null),R=d.useRef(m),z=c!=null,$=Nf(c),W=Nf(a),G=Nf(u),X=d.useCallback(()=>{if(!M.current||!A.current)return;const E={placement:t,strategy:r,middleware:p};W.current&&(E.platform=W.current),VP(M.current,A.current,E).then(Y=>{const Z={...Y,isPositioned:G.current!==!1};P.current&&!jh(R.current,Z)&&(R.current=Z,Wr.flushSync(()=>{h(Z)}))})},[p,t,r,W,G]);$u(()=>{u===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,h(E=>({...E,isPositioned:!1})))},[u]);const P=d.useRef(!1);$u(()=>(P.current=!0,()=>{P.current=!1}),[]),$u(()=>{if(C&&(M.current=C),S&&(A.current=S),C&&S){if($.current)return $.current(C,S,X);X()}},[C,S,X,$,z]);const L=d.useMemo(()=>({reference:M,floating:A,setReference:x,setFloating:w}),[x,w]),_=d.useMemo(()=>({reference:C,floating:S}),[C,S]),V=d.useMemo(()=>{const E={position:r,left:0,top:0};if(!_.floating)return E;const Y=Db(_.floating,m.x),Z=Db(_.floating,m.y);return l?{...E,transform:"translate("+Y+"px, "+Z+"px)",...r3(_.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Y,top:Z}},[r,l,_.floating,m.x,m.y]);return d.useMemo(()=>({...m,update:X,refs:L,elements:_,floatingStyles:V}),[m,X,L,_,V])}const YP=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?_b({element:n.current,padding:a}).fn(r):{}:n?_b({element:n,padding:a}).fn(r):{}}}},WP=(e,t)=>({...FP(e),options:[e,t]}),KP=(e,t)=>({...OP(e),options:[e,t]}),GP=(e,t)=>({...UP(e),options:[e,t]}),QP=(e,t)=>({...LP(e),options:[e,t]}),ZP=(e,t)=>({...$P(e),options:[e,t]}),XP=(e,t)=>({...zP(e),options:[e,t]}),JP=(e,t)=>({...YP(e),options:[e,t]});var eE="Arrow",n3=d.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(Xe.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});n3.displayName=eE;var tE=n3;function Id(e){const[t,r]=d.useState(void 0);return bs(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Xx="Popper",[a3,pm]=cr(Xx),[sE,i3]=a3(Xx),o3=e=>{const{__scopePopper:t,children:r}=e,[n,a]=d.useState(null);return s.jsx(sE,{scope:t,anchor:n,onAnchorChange:a,children:r})};o3.displayName=Xx;var l3="PopperAnchor",c3=d.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=i3(l3,r),o=d.useRef(null),l=xt(t,o),c=d.useRef(null);return d.useEffect(()=>{const u=c.current;c.current=(n==null?void 0:n.current)||o.current,u!==c.current&&i.onAnchorChange(c.current)}),n?null:s.jsx(Xe.div,{...a,ref:l})});c3.displayName=l3;var Jx="PopperContent",[rE,nE]=a3(Jx),d3=d.forwardRef((e,t)=>{var re,ye,Q,te,ve,we;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:m=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:y="optimized",onPlaced:N,...f}=e,j=i3(Jx,r),[b,x]=d.useState(null),w=xt(t,Ne=>x(Ne)),[C,S]=d.useState(null),M=Id(C),A=(M==null?void 0:M.width)??0,R=(M==null?void 0:M.height)??0,z=n+(i!=="center"?"-"+i:""),$=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},W=Array.isArray(u)?u:[u],G=W.length>0,X={padding:$,boundary:W.filter(iE),altBoundary:G},{refs:P,floatingStyles:L,placement:_,isPositioned:V,middlewareData:E}=HP({strategy:"fixed",placement:z,whileElementsMounted:(...Ne)=>IP(...Ne,{animationFrame:y==="always"}),elements:{reference:j.anchor},middleware:[WP({mainAxis:a+R,alignmentAxis:o}),c&&KP({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?GP():void 0,...X}),c&&QP({...X}),ZP({...X,apply:({elements:Ne,rects:ie,availableWidth:me,availableHeight:Ae})=>{const{width:at,height:lt}=ie.reference,it=Ne.floating.style;it.setProperty("--radix-popper-available-width",`${me}px`),it.setProperty("--radix-popper-available-height",`${Ae}px`),it.setProperty("--radix-popper-anchor-width",`${at}px`),it.setProperty("--radix-popper-anchor-height",`${lt}px`)}}),C&&JP({element:C,padding:l}),oE({arrowWidth:A,arrowHeight:R}),p&&XP({strategy:"referenceHidden",...X})]}),[Y,Z]=m3(_),ne=Mr(N);bs(()=>{V&&(ne==null||ne())},[V,ne]);const oe=(re=E.arrow)==null?void 0:re.x,pe=(ye=E.arrow)==null?void 0:ye.y,he=((Q=E.arrow)==null?void 0:Q.centerOffset)!==0,[B,K]=d.useState();return bs(()=>{b&&K(window.getComputedStyle(b).zIndex)},[b]),s.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:V?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:B,"--radix-popper-transform-origin":[(te=E.transformOrigin)==null?void 0:te.x,(ve=E.transformOrigin)==null?void 0:ve.y].join(" "),...((we=E.hide)==null?void 0:we.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(rE,{scope:r,placedSide:Y,onArrowChange:S,arrowX:oe,arrowY:pe,shouldHideArrow:he,children:s.jsx(Xe.div,{"data-side":Y,"data-align":Z,...f,ref:w,style:{...f.style,animation:V?void 0:"none"}})})})});d3.displayName=Jx;var u3="PopperArrow",aE={top:"bottom",right:"left",bottom:"top",left:"right"},h3=d.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=nE(u3,n),o=aE[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(tE,{...a,ref:r,style:{...a.style,display:"block"}})})});h3.displayName=u3;function iE(e){return e!==null}var oE=e=>({name:"transformOrigin",options:e,fn(t){var j,b,x;const{placement:r,rects:n,middlewareData:a}=t,o=((j=a.arrow)==null?void 0:j.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,m]=m3(r),h={start:"0%",center:"50%",end:"100%"}[m],p=(((b=a.arrow)==null?void 0:b.x)??0)+l/2,y=(((x=a.arrow)==null?void 0:x.y)??0)+c/2;let N="",f="";return u==="bottom"?(N=o?h:`${p}px`,f=`${-c}px`):u==="top"?(N=o?h:`${p}px`,f=`${n.floating.height+c}px`):u==="right"?(N=`${-c}px`,f=o?h:`${y}px`):u==="left"&&(N=`${n.floating.width+c}px`,f=o?h:`${y}px`),{data:{x:N,y:f}}}});function m3(e){const[t,r="center"]=e.split("-");return[t,r]}var lE=o3,f3=c3,p3=d3,x3=h3,[xm]=cr("Tooltip",[pm]),eg=pm(),g3="TooltipProvider",cE=700,Ib="tooltip.open",[dE,b3]=xm(g3),v3=e=>{const{__scopeTooltip:t,delayDuration:r=cE,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=d.useRef(!0),l=d.useRef(!1),c=d.useRef(0);return d.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(dE,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:d.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:d.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};v3.displayName=g3;var w3="Tooltip",[qI,gm]=xm(w3),o0="TooltipTrigger",uE=d.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=gm(o0,r),i=b3(o0,r),o=eg(r),l=d.useRef(null),c=xt(t,l,a.onTriggerChange),u=d.useRef(!1),m=d.useRef(!1),h=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(f3,{asChild:!0,...o,children:s.jsx(Xe.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:We(e.onPointerMove,p=>{p.pointerType!=="touch"&&!m.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),m.current=!0)}),onPointerLeave:We(e.onPointerLeave,()=>{a.onTriggerLeave(),m.current=!1}),onPointerDown:We(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:We(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:We(e.onBlur,a.onClose),onClick:We(e.onClick,a.onClose)})})});uE.displayName=o0;var hE="TooltipPortal",[HI,mE]=xm(hE,{forceMount:void 0}),Ll="TooltipContent",y3=d.forwardRef((e,t)=>{const r=mE(Ll,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=gm(Ll,e.__scopeTooltip);return s.jsx(ya,{present:n||o.open,children:o.disableHoverableContent?s.jsx(N3,{side:a,...i,ref:t}):s.jsx(fE,{side:a,...i,ref:t})})}),fE=d.forwardRef((e,t)=>{const r=gm(Ll,e.__scopeTooltip),n=b3(Ll,e.__scopeTooltip),a=d.useRef(null),i=xt(t,a),[o,l]=d.useState(null),{trigger:c,onClose:u}=r,m=a.current,{onPointerInTransitChange:h}=n,p=d.useCallback(()=>{l(null),h(!1)},[h]),y=d.useCallback((N,f)=>{const j=N.currentTarget,b={x:N.clientX,y:N.clientY},x=vE(b,j.getBoundingClientRect()),w=wE(b,x),C=yE(f.getBoundingClientRect()),S=jE([...w,...C]);l(S),h(!0)},[h]);return d.useEffect(()=>()=>p(),[p]),d.useEffect(()=>{if(c&&m){const N=j=>y(j,m),f=j=>y(j,c);return c.addEventListener("pointerleave",N),m.addEventListener("pointerleave",f),()=>{c.removeEventListener("pointerleave",N),m.removeEventListener("pointerleave",f)}}},[c,m,y,p]),d.useEffect(()=>{if(o){const N=f=>{const j=f.target,b={x:f.clientX,y:f.clientY},x=(c==null?void 0:c.contains(j))||(m==null?void 0:m.contains(j)),w=!NE(b,o);x?p():w&&(p(),u())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[c,m,o,u,p]),s.jsx(N3,{...e,ref:i})}),[pE,xE]=xm(w3,{isInside:!1}),gE=s4("TooltipContent"),N3=d.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=gm(Ll,r),u=eg(r),{onClose:m}=c;return d.useEffect(()=>(document.addEventListener(Ib,m),()=>document.removeEventListener(Ib,m)),[m]),d.useEffect(()=>{if(c.trigger){const h=p=>{const y=p.target;y!=null&&y.contains(c.trigger)&&m()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,m]),s.jsx(Rd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:m,children:s.jsxs(p3,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(gE,{children:n}),s.jsx(pE,{scope:r,isInside:!0,children:s.jsx(f7,{id:c.contentId,role:"tooltip",children:a||n})})]})})});y3.displayName=Ll;var j3="TooltipArrow",bE=d.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=eg(r);return xE(j3,r).isInside?null:s.jsx(x3,{...a,...n,ref:t})});bE.displayName=j3;function vE(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function wE(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function yE(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function NE(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,m=l.y,h=c.x,p=c.y;m>n!=p>n&&r<(h-u)*(n-m)/(p-m)+u&&(a=!a)}return a}function jE(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),CE(t)}function CE(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var kE=v3,C3=y3;const SE=kE,PE=d.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(C3,{ref:n,sideOffset:t,className:$e("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r}));PE.displayName=C3.displayName;const EE=d.createContext(void 0);function TE({children:e}){const[t,r]=d.useState("light");d.useEffect(()=>{const o=localStorage.getItem("app-theme");if(o)r(o),n(o);else{const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";r(c),n(c)}},[]);const n=o=>{o==="dark"?(document.documentElement.classList.add("dark"),document.body.classList.add("dark")):(document.documentElement.classList.remove("dark"),document.body.classList.remove("dark"))},i={theme:t,toggleTheme:()=>{const o=t==="light"?"dark":"light";r(o),n(o),localStorage.setItem("app-theme",o)},isDark:t==="dark"};return s.jsx(EE.Provider,{value:i,children:e})}const k3=d.createContext(void 0);function AE({children:e}){const[t,r]=d.useState("USD"),[n,a]=d.useState(1650);d.useEffect(()=>{U4().then(c=>{a(c)})},[]),d.useEffect(()=>{const c=localStorage.getItem("preferredCurrency");c&&(c==="USD"||c==="NGN")&&r(c)},[]);const i=c=>{r(c),localStorage.setItem("preferredCurrency",c)},o=c=>t==="NGN"?c*n:c,l=(c,u)=>(u||t)==="NGN"?`₦${c.toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})}`:`$${c.toFixed(2)}`;return s.jsx(k3.Provider,{value:{userCurrency:t,exchangeRate:n,setUserCurrency:i,convertPrice:o,formatPrice:l},children:e})}function yi(){const e=d.useContext(k3);if(e===void 0)throw new Error("useCurrency must be used within a CurrencyProvider");return e}const ge=d.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:$e("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ge.displayName="Card";const et=d.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:$e("flex flex-col space-y-1.5 p-6",e),...t}));et.displayName="CardHeader";const tt=d.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:$e("text-2xl font-semibold leading-none tracking-tight",e),...t}));tt.displayName="CardTitle";const Yi=d.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:$e("text-sm text-muted-foreground",e),...t}));Yi.displayName="CardDescription";const be=d.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:$e("p-6 pt-0",e),...t}));be.displayName="CardContent";const RE=d.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:$e("flex items-center p-6 pt-0",e),...t}));RE.displayName="CardFooter";function ME(){return s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:s.jsx(ge,{className:"w-full max-w-md mx-4",children:s.jsxs(be,{className:"pt-6",children:[s.jsxs("div",{className:"flex mb-4 gap-2",children:[s.jsx(id,{className:"h-8 w-8 text-red-500"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),s.jsx("p",{className:"mt-4 text-sm text-gray-600"})]})})})}const tg=_d("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),T=d.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?e4:"button";return s.jsx(o,{className:$e(tg({variant:t,size:r,className:e})),ref:i,...a})});T.displayName="Button";const xe=d.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:$e("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));xe.displayName="Input";var _E="Label",S3=d.forwardRef((e,t)=>s.jsx(Xe.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));S3.displayName=_E;var P3=S3;const DE=_d("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ue=d.forwardRef(({className:e,...t},r)=>s.jsx(P3,{ref:r,className:$e(DE(),e),...t}));ue.displayName=P3.displayName;const IE=_d("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),$l=d.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:$e(IE({variant:t}),e),...r}));$l.displayName="Alert";const FE=d.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:$e("mb-1 font-medium leading-none tracking-tight",e),...t}));FE.displayName="AlertTitle";const zl=d.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:$e("text-sm [&_p]:leading-relaxed",e),...t}));zl.displayName="AlertDescription";function Fb(){const[,e]=us(),[t,r]=d.useState(""),[n,a]=d.useState(""),[i,o]=d.useState(!1),[l,c]=d.useState(!1),[u,m]=d.useState(""),[h,p]=d.useState(!1),[y,N]=d.useState(""),[f,j]=d.useState(!1),b=()=>new Promise(w=>{if(!navigator.geolocation){w(null);return}navigator.geolocation.getCurrentPosition(C=>{w({latitude:C.coords.latitude,longitude:C.coords.longitude})},C=>{console.log("Geolocation permission denied or unavailable:",C),w(null)},{timeout:5e3,enableHighAccuracy:!1})}),x=async w=>{var C;w.preventDefault(),o(!0),m(""),p(!1),j(!1);try{const S=await b(),A=await(await rt("POST","/api/auth/login",{username:t,password:n,geolocation:S})).json();localStorage.removeItem("user"),localStorage.removeItem("superAdminToken"),localStorage.setItem("user",JSON.stringify(A.user)),A.redirectTo&&((A.user.userType==="super_admin"||A.user.role==="super_admin")&&localStorage.setItem("superAdminToken",A.user.id),e(A.redirectTo))}catch(S){const M=await((C=S.response)==null?void 0:C.text());let A;try{A=M?JSON.parse(M):{}}catch{A={}}m(A.message||"Invalid credentials. Please try again.")}finally{o(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex flex-col lg:flex-row relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"hidden lg:flex flex-1 items-center justify-center p-8 relative z-10",children:s.jsxs("div",{className:"max-w-lg animate-fade-in-up",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsxs("div",{className:"relative animate-bounce-gentle",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl flex items-center justify-center shadow-2xl transform rotate-3 hover:rotate-0 hover:scale-110 transition-all duration-500 animate-glow",children:s.jsx(rr,{className:"text-white text-4xl"})}),s.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center animate-pulse-glow",children:s.jsx(s0,{className:"text-yellow-800 w-4 h-4 animate-spin-slow"})})]})}),s.jsx("h1",{className:"text-5xl font-bold text-white mb-4 tracking-tight",children:"Waibuk"}),s.jsx("p",{className:"text-xl text-blue-100 leading-relaxed mb-8 animate-fade-in-delayed",children:"Where School Memories Live Forever"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-12",children:[s.jsxs("div",{className:"text-center animate-slide-in-left hover:scale-105 transition-transform duration-300",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-xl flex items-center justify-center mx-auto mb-3 backdrop-blur-sm border border-blue-400/30 hover:bg-blue-500/30 hover:border-blue-300/50 transition-all duration-300",children:s.jsx(Gr,{className:"text-blue-300 w-8 h-8 hover:text-blue-200 transition-colors"})}),s.jsx("h3",{className:"text-white font-semibold mb-1",children:"Digital Yearbooks"}),s.jsx("p",{className:"text-blue-200 text-sm",children:"Beautiful, interactive school memories"})]}),s.jsxs("div",{className:"text-center animate-slide-in-right hover:scale-105 transition-transform duration-300 animation-delay-200",children:[s.jsx("div",{className:"w-16 h-16 bg-purple-500/20 rounded-xl flex items-center justify-center mx-auto mb-3 backdrop-blur-sm border border-purple-400/30 hover:bg-purple-500/30 hover:border-purple-300/50 transition-all duration-300",children:s.jsx(la,{className:"text-purple-300 w-8 h-8 hover:text-purple-200 transition-colors"})}),s.jsx("h3",{className:"text-white font-semibold mb-1",children:"Alumni Network"}),s.jsx("p",{className:"text-blue-200 text-sm",children:"Connect with classmates worldwide"})]}),s.jsxs("div",{className:"text-center animate-slide-in-left hover:scale-105 transition-transform duration-300 animation-delay-400",children:[s.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-xl flex items-center justify-center mx-auto mb-3 backdrop-blur-sm border border-green-400/30 hover:bg-green-500/30 hover:border-green-300/50 transition-all duration-300",children:s.jsx($7,{className:"text-green-300 w-8 h-8 hover:text-green-200 transition-colors"})}),s.jsx("h3",{className:"text-white font-semibold mb-1",children:"Memory Discovery"}),s.jsx("p",{className:"text-blue-200 text-sm",children:"View, discover, and even upload school moments"})]}),s.jsxs("div",{className:"text-center animate-slide-in-right hover:scale-105 transition-transform duration-300 animation-delay-600",children:[s.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-xl flex items-center justify-center mx-auto mb-3 backdrop-blur-sm border border-red-400/30 hover:bg-red-500/30 hover:border-red-300/50 transition-all duration-300",children:s.jsx(On,{className:"text-red-300 w-8 h-8 hover:text-red-200 transition-colors"})}),s.jsx("h3",{className:"text-white font-semibold mb-1",children:"Safe & Secure"}),s.jsx("p",{className:"text-blue-200 text-sm",children:"Protected educational environment"})]})]}),s.jsxs("div",{className:"text-center animate-fade-in-up animation-delay-800",children:[s.jsxs("div",{className:"flex items-center justify-center mb-3",children:[s.jsxs("div",{className:"flex -space-x-2",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full border-2 border-white animate-avatar-bounce animation-delay-200"}),s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-400 to-blue-500 rounded-full border-2 border-white animate-avatar-bounce animation-delay-400"}),s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full border-2 border-white animate-avatar-bounce animation-delay-600"})]}),s.jsx(Y7,{className:"text-red-400 w-5 h-5 ml-3 animate-heartbeat"})]}),s.jsx("p",{className:"text-blue-200 text-sm animate-fade-in-delayed",children:"Trusted by schools worldwide"})]})]})}),s.jsx("div",{className:"lg:hidden flex items-center justify-center py-8 px-4 relative z-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl flex items-center justify-center shadow-2xl",children:s.jsx(rr,{className:"text-white text-2xl"})}),s.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center",children:s.jsx(s0,{className:"text-yellow-800 w-2 h-2"})})]})}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Waibuk"}),s.jsx("p",{className:"text-blue-100 text-sm",children:"Where School Memories Live Forever"})]})}),s.jsx("div",{className:"flex-1 lg:w-full lg:max-w-md bg-black/50 backdrop-blur-sm shadow-2xl flex items-center justify-center relative z-10 animate-slide-in-right backdrop-blur-lg ",children:s.jsxs("div",{className:"w-full px-6 pt-2 pb-6 sm:p-6 lg:p-8 max-w-md sm:max-w-md mx-auto",children:[s.jsxs("div",{className:"text-center mb-8 sm:mb-8 animate-fade-in-up",children:[s.jsx("h3",{className:"text-5xl sm:text-4xl font-bold text-white mb-4 tracking-wide",children:"Welcome"}),s.jsx("p",{className:"text-base sm:text-base text-blue-100/80 font-semibold tracking-wider",children:"Sign in to access your portal"})]}),s.jsxs("form",{onSubmit:x,className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ue,{htmlFor:"username",className:"block text-sm font-semibold text-white/100",children:"Username or Email"}),s.jsx(xe,{type:"text",id:"username",value:t,onChange:w=>r(w.target.value),required:!0,placeholder:"",className:"w-full h-10 sm:h-12 border-2 border-gray-200 hover:border-blue-300 focus:border-blue-500 transition-colors duration-200 rounded-lg text-sm sm:text-base bg-white/10 text-white/100","data-testid":"input-username"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ue,{htmlFor:"password",className:"block text-sm font-semibold text-white",children:"Password"}),s.jsx(xe,{type:"password",id:"password",value:n,onChange:w=>a(w.target.value),required:!0,placeholder:"",className:"w-full h-10 sm:h-12 border-2 border-gray-200 hover:border-blue-300 focus:border-blue-500 transition-colors duration-200 rounded-lg text-sm sm:text-base bg-white/10 text-white/100","data-testid":"input-password"})]}),s.jsx(T,{type:"submit",disabled:i,className:"w-full h-10 sm:h-12 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold text-sm sm:text-base shadow-lg transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none rounded-lg","data-testid":"button-sign-in",children:i?s.jsxs(s.Fragment,{children:[s.jsx(xr,{className:"mr-3 h-5 w-5 animate-spin"}),"Signing In..."]}):"Sign In to Your Portal"}),u&&s.jsx($l,{variant:"destructive",children:s.jsx(zl,{children:u})})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("p",{className:"text-sm text-white",children:["Don't have an account?"," ",s.jsx(T,{variant:"link",className:"p-0 h-auto text-blue-600 hover:text-blue-800 font-semibold",onClick:()=>e("/signup"),"data-testid":"link-signup",children:"Sign up here"})]})}),s.jsxs("div",{className:"mt-6 text-center space-x-4",children:[s.jsx("button",{className:"text-xs text-white hover:text-white",children:"Privacy Policy"}),s.jsx("span",{className:"text-gray-300",children:"•"}),s.jsx("button",{className:"text-xs text-white hover:text-white",children:"Terms of Service"})]})]})})]})}var Fd=e=>e.type==="checkbox",_i=e=>e instanceof Date,tr=e=>e==null;const E3=e=>typeof e=="object";var gs=e=>!tr(e)&&!Array.isArray(e)&&E3(e)&&!_i(e),T3=e=>gs(e)&&e.target?Fd(e.target)?e.target.checked:e.target.value:e,OE=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,A3=(e,t)=>e.has(OE(t)),LE=e=>{const t=e.constructor&&e.constructor.prototype;return gs(t)&&t.hasOwnProperty("isPrototypeOf")},sg=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function vs(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(sg&&(e instanceof Blob||n))&&(r||gs(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!LE(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=vs(e[a]));else return e;return t}var bm=e=>/^\w*$/.test(e),os=e=>e===void 0,rg=e=>Array.isArray(e)?e.filter(Boolean):[],ng=e=>rg(e.replace(/["|']|\]/g,"").split(/\.|\[/)),De=(e,t,r)=>{if(!t||!gs(e))return r;const n=(bm(t)?[t]:ng(t)).reduce((a,i)=>tr(a)?a:a[i],e);return os(n)||n===e?os(e[t])?r:e[t]:n},kr=e=>typeof e=="boolean",Ot=(e,t,r)=>{let n=-1;const a=bm(t)?[t]:ng(t),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let c=r;if(n!==o){const u=e[l];c=gs(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const Ch={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},fn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Qn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ag=Le.createContext(null);ag.displayName="HookFormContext";const vm=()=>Le.useContext(ag),$E=e=>{const{children:t,...r}=e;return Le.createElement(ag.Provider,{value:r},t)};var R3=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==fn.all&&(t._proxyFormState[o]=!n||fn.all),r&&(r[o]=!0),e[o]}});return a};const ig=typeof window<"u"?Le.useLayoutEffect:Le.useEffect;function zE(e){const t=vm(),{control:r=t.control,disabled:n,name:a,exact:i}=e||{},[o,l]=Le.useState(r._formState),c=Le.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return ig(()=>r._subscribe({name:a,formState:c.current,exact:i,callback:u=>{!n&&l({...r._formState,...u})}}),[a,n,i]),Le.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),Le.useMemo(()=>R3(o,r,c.current,!1),[o,r])}var Pr=e=>typeof e=="string",M3=(e,t,r,n,a)=>Pr(e)?(n&&t.watch.add(e),De(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),De(r,i))):(n&&(t.watchAll=!0),r),l0=e=>tr(e)||!E3(e);function aa(e,t,r=new WeakSet){if(l0(e)||l0(t))return e===t;if(_i(e)&&_i(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const l=t[i];if(_i(o)&&_i(l)||gs(o)&&gs(l)||Array.isArray(o)&&Array.isArray(l)?!aa(o,l,r):o!==l)return!1}}return!0}function UE(e){const t=vm(),{control:r=t.control,name:n,defaultValue:a,disabled:i,exact:o,compute:l}=e||{},c=Le.useRef(a),u=Le.useRef(l),m=Le.useRef(void 0);u.current=l;const h=Le.useMemo(()=>r._getWatch(n,c.current),[r,n]),[p,y]=Le.useState(u.current?u.current(h):h);return ig(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:N=>{if(!i){const f=M3(n,r._names,N.values||r._formValues,!1,c.current);if(u.current){const j=u.current(f);aa(j,m.current)||(y(j),m.current=j)}else y(f)}}}),[r,i,n,o]),Le.useEffect(()=>r._removeUnmounted()),p}function VE(e){const t=vm(),{name:r,disabled:n,control:a=t.control,shouldUnregister:i,defaultValue:o}=e,l=A3(a._names.array,r),c=Le.useMemo(()=>De(a._formValues,r,De(a._defaultValues,r,o)),[a,r,o]),u=UE({control:a,name:r,defaultValue:c,exact:!0}),m=zE({control:a,name:r,exact:!0}),h=Le.useRef(e),p=Le.useRef(void 0),y=Le.useRef(a.register(r,{...e.rules,value:u,...kr(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const N=Le.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!De(m.errors,r)},isDirty:{enumerable:!0,get:()=>!!De(m.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!De(m.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!De(m.validatingFields,r)},error:{enumerable:!0,get:()=>De(m.errors,r)}}),[m,r]),f=Le.useCallback(w=>y.current.onChange({target:{value:T3(w),name:r},type:Ch.CHANGE}),[r]),j=Le.useCallback(()=>y.current.onBlur({target:{value:De(a._formValues,r),name:r},type:Ch.BLUR}),[r,a._formValues]),b=Le.useCallback(w=>{const C=De(a._fields,r);C&&w&&(C._f.ref={focus:()=>w.focus&&w.focus(),select:()=>w.select&&w.select(),setCustomValidity:S=>w.setCustomValidity(S),reportValidity:()=>w.reportValidity()})},[a._fields,r]),x=Le.useMemo(()=>({name:r,value:u,...kr(n)||m.disabled?{disabled:m.disabled||n}:{},onChange:f,onBlur:j,ref:b}),[r,n,m.disabled,f,j,b,u]);return Le.useEffect(()=>{const w=a._options.shouldUnregister||i,C=p.current;C&&C!==r&&!l&&a.unregister(C),a.register(r,{...h.current.rules,...kr(h.current.disabled)?{disabled:h.current.disabled}:{}});const S=(M,A)=>{const R=De(a._fields,M);R&&R._f&&(R._f.mount=A)};if(S(r,!0),w){const M=vs(De(a._options.defaultValues,r,h.current.defaultValue));Ot(a._defaultValues,r,M),os(De(a._formValues,r))&&Ot(a._formValues,r,M)}return!l&&a.register(r),p.current=r,()=>{(l?w&&!a._state.action:w)?a.unregister(r):S(r,!1)}},[r,a,l,i]),Le.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),Le.useMemo(()=>({field:x,formState:m,fieldState:N}),[x,m,N])}const BE=e=>e.render(VE(e));var _3=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Fc=e=>Array.isArray(e)?e:[e],Ob=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}};function D3(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const a=e[n],i=t[n];if(a&&gs(a)&&i){const o=D3(a,i);gs(o)&&(r[n]=o)}else e[n]&&(r[n]=i)}return r}var mr=e=>gs(e)&&!Object.keys(e).length,og=e=>e.type==="file",pn=e=>typeof e=="function",kh=e=>{if(!sg)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},I3=e=>e.type==="select-multiple",lg=e=>e.type==="radio",qE=e=>lg(e)||Fd(e),jf=e=>kh(e)&&e.isConnected;function HE(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=os(e)?n++:e[t[n++]];return e}function YE(e){for(const t in e)if(e.hasOwnProperty(t)&&!os(e[t]))return!1;return!0}function hs(e,t){const r=Array.isArray(t)?t:bm(t)?[t]:ng(t),n=r.length===1?e:HE(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(gs(n)&&mr(n)||Array.isArray(n)&&YE(n))&&hs(e,r.slice(0,-1)),e}var WE=e=>{for(const t in e)if(pn(e[t]))return!0;return!1};function F3(e){return Array.isArray(e)||gs(e)&&!WE(e)}function c0(e,t={}){for(const r in e)F3(e[r])?(t[r]=Array.isArray(e[r])?[]:{},c0(e[r],t[r])):tr(e[r])||(t[r]=!0);return t}function _o(e,t,r){r||(r=c0(t));for(const n in e)F3(e[n])?os(t)||l0(r[n])?r[n]=c0(e[n],Array.isArray(e[n])?[]:{}):_o(e[n],tr(t)?{}:t[n],r[n]):r[n]=!aa(e[n],t[n]);return r}const Lb={value:!1,isValid:!1},$b={value:!0,isValid:!0};var O3=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!os(e[0].attributes.value)?os(e[0].value)||e[0].value===""?$b:{value:e[0].value,isValid:!0}:$b:Lb}return Lb},L3=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>os(e)?e:t?e===""?NaN:e&&+e:r&&Pr(e)?new Date(e):n?n(e):e;const zb={isValid:!1,value:null};var $3=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,zb):zb;function Ub(e){const t=e.ref;return og(t)?t.files:lg(t)?$3(e.refs).value:I3(t)?[...t.selectedOptions].map(({value:r})=>r):Fd(t)?O3(e.refs).value:L3(os(t.value)?e.ref.value:t.value,e)}var KE=(e,t,r,n)=>{const a={};for(const i of e){const o=De(t,i);o&&Ot(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},Sh=e=>e instanceof RegExp,xc=e=>os(e)?e:Sh(e)?e.source:gs(e)?Sh(e.value)?e.value.source:e.value:e,Vb=e=>({isOnSubmit:!e||e===fn.onSubmit,isOnBlur:e===fn.onBlur,isOnChange:e===fn.onChange,isOnAll:e===fn.all,isOnTouch:e===fn.onTouched});const Bb="AsyncFunction";var GE=e=>!!e&&!!e.validate&&!!(pn(e.validate)&&e.validate.constructor.name===Bb||gs(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Bb)),QE=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),qb=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Oc=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=De(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Oc(l,t))break}else if(gs(l)&&Oc(l,t))break}}};function Hb(e,t,r){const n=De(e,r);if(n||bm(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=De(t,i),l=De(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:r}}var ZE=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return mr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||fn.all))},XE=(e,t,r)=>!e||!t||e===t||Fc(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),JE=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,eT=(e,t)=>!rg(De(e,t)).length&&hs(e,t),tT=(e,t,r)=>{const n=Fc(De(e,r));return Ot(n,"root",t[r]),Ot(e,r,n),e};function Yb(e,t,r="validate"){if(Pr(e)||Array.isArray(e)&&e.every(Pr)||kr(e)&&!e)return{type:r,message:Pr(e)?e:"",ref:t}}var To=e=>gs(e)&&!Sh(e)?e:{value:e,message:""},Wb=async(e,t,r,n,a,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:m,min:h,max:p,pattern:y,validate:N,name:f,valueAsNumber:j,mount:b}=e._f,x=De(r,f);if(!b||t.has(f))return{};const w=l?l[0]:o,C=G=>{a&&w.reportValidity&&(w.setCustomValidity(kr(G)?"":G||""),w.reportValidity())},S={},M=lg(o),A=Fd(o),R=M||A,z=(j||og(o))&&os(o.value)&&os(x)||kh(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,$=_3.bind(null,f,n,S),W=(G,X,P,L=Qn.maxLength,_=Qn.minLength)=>{const V=G?X:P;S[f]={type:G?L:_,message:V,ref:o,...$(G?L:_,V)}};if(i?!Array.isArray(x)||!x.length:c&&(!R&&(z||tr(x))||kr(x)&&!x||A&&!O3(l).isValid||M&&!$3(l).isValid)){const{value:G,message:X}=Pr(c)?{value:!!c,message:c}:To(c);if(G&&(S[f]={type:Qn.required,message:X,ref:w,...$(Qn.required,X)},!n))return C(X),S}if(!z&&(!tr(h)||!tr(p))){let G,X;const P=To(p),L=To(h);if(!tr(x)&&!isNaN(x)){const _=o.valueAsNumber||x&&+x;tr(P.value)||(G=_>P.value),tr(L.value)||(X=_<L.value)}else{const _=o.valueAsDate||new Date(x),V=Z=>new Date(new Date().toDateString()+" "+Z),E=o.type=="time",Y=o.type=="week";Pr(P.value)&&x&&(G=E?V(x)>V(P.value):Y?x>P.value:_>new Date(P.value)),Pr(L.value)&&x&&(X=E?V(x)<V(L.value):Y?x<L.value:_<new Date(L.value))}if((G||X)&&(W(!!G,P.message,L.message,Qn.max,Qn.min),!n))return C(S[f].message),S}if((u||m)&&!z&&(Pr(x)||i&&Array.isArray(x))){const G=To(u),X=To(m),P=!tr(G.value)&&x.length>+G.value,L=!tr(X.value)&&x.length<+X.value;if((P||L)&&(W(P,G.message,X.message),!n))return C(S[f].message),S}if(y&&!z&&Pr(x)){const{value:G,message:X}=To(y);if(Sh(G)&&!x.match(G)&&(S[f]={type:Qn.pattern,message:X,ref:o,...$(Qn.pattern,X)},!n))return C(X),S}if(N){if(pn(N)){const G=await N(x,r),X=Yb(G,w);if(X&&(S[f]={...X,...$(Qn.validate,X.message)},!n))return C(X.message),S}else if(gs(N)){let G={};for(const X in N){if(!mr(G)&&!n)break;const P=Yb(await N[X](x,r),w,X);P&&(G={...P,...$(X,P.message)},C(P.message),n&&(S[f]=G))}if(!mr(G)&&(S[f]={ref:w,...G},!n))return S}}return C(!0),S};const sT={mode:fn.onSubmit,reValidateMode:fn.onChange,shouldFocusError:!0};function rT(e={}){let t={...sT,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:pn(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=gs(t.defaultValues)||gs(t.values)?vs(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:vs(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...m};const p={array:Ob(),state:Ob()},y=t.criteriaMode===fn.all,N=F=>g=>{clearTimeout(u),u=setTimeout(F,g)},f=async F=>{if(!t.disabled&&(m.isValid||h.isValid||F)){const g=t.resolver?mr((await A()).errors):await z(n,!0);g!==r.isValid&&p.state.next({isValid:g})}},j=(F,g)=>{!t.disabled&&(m.isValidating||m.validatingFields||h.isValidating||h.validatingFields)&&((F||Array.from(l.mount)).forEach(D=>{D&&(g?Ot(r.validatingFields,D,g):hs(r.validatingFields,D))}),p.state.next({validatingFields:r.validatingFields,isValidating:!mr(r.validatingFields)}))},b=(F,g=[],D,J,ce=!0,le=!0)=>{if(J&&D&&!t.disabled){if(o.action=!0,le&&Array.isArray(De(n,F))){const Re=D(De(n,F),J.argA,J.argB);ce&&Ot(n,F,Re)}if(le&&Array.isArray(De(r.errors,F))){const Re=D(De(r.errors,F),J.argA,J.argB);ce&&Ot(r.errors,F,Re),eT(r.errors,F)}if((m.touchedFields||h.touchedFields)&&le&&Array.isArray(De(r.touchedFields,F))){const Re=D(De(r.touchedFields,F),J.argA,J.argB);ce&&Ot(r.touchedFields,F,Re)}(m.dirtyFields||h.dirtyFields)&&(r.dirtyFields=_o(a,i)),p.state.next({name:F,isDirty:W(F,g),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ot(i,F,g)},x=(F,g)=>{Ot(r.errors,F,g),p.state.next({errors:r.errors})},w=F=>{r.errors=F,p.state.next({errors:r.errors,isValid:!1})},C=(F,g,D,J)=>{const ce=De(n,F);if(ce){const le=De(i,F,os(D)?De(a,F):D);os(le)||J&&J.defaultChecked||g?Ot(i,F,g?le:Ub(ce._f)):P(F,le),o.mount&&f()}},S=(F,g,D,J,ce)=>{let le=!1,Re=!1;const He={name:F};if(!t.disabled){if(!D||J){(m.isDirty||h.isDirty)&&(Re=r.isDirty,r.isDirty=He.isDirty=W(),le=Re!==He.isDirty);const Ye=aa(De(a,F),g);Re=!!De(r.dirtyFields,F),Ye?hs(r.dirtyFields,F):Ot(r.dirtyFields,F,!0),He.dirtyFields=r.dirtyFields,le=le||(m.dirtyFields||h.dirtyFields)&&Re!==!Ye}if(D){const Ye=De(r.touchedFields,F);Ye||(Ot(r.touchedFields,F,D),He.touchedFields=r.touchedFields,le=le||(m.touchedFields||h.touchedFields)&&Ye!==D)}le&&ce&&p.state.next(He)}return le?He:{}},M=(F,g,D,J)=>{const ce=De(r.errors,F),le=(m.isValid||h.isValid)&&kr(g)&&r.isValid!==g;if(t.delayError&&D?(c=N(()=>x(F,D)),c(t.delayError)):(clearTimeout(u),c=null,D?Ot(r.errors,F,D):hs(r.errors,F)),(D?!aa(ce,D):ce)||!mr(J)||le){const Re={...J,...le&&kr(g)?{isValid:g}:{},errors:r.errors,name:F};r={...r,...Re},p.state.next(Re)}},A=async F=>{j(F,!0);const g=await t.resolver(i,t.context,KE(F||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return j(F),g},R=async F=>{const{errors:g}=await A(F);if(F)for(const D of F){const J=De(g,D);J?Ot(r.errors,D,J):hs(r.errors,D)}else r.errors=g;return g},z=async(F,g,D={valid:!0})=>{for(const J in F){const ce=F[J];if(ce){const{_f:le,...Re}=ce;if(le){const He=l.array.has(le.name),Ye=ce._f&&GE(ce._f);Ye&&m.validatingFields&&j([le.name],!0);const fe=await Wb(ce,l.disabled,i,y,t.shouldUseNativeValidation&&!g,He);if(Ye&&m.validatingFields&&j([le.name]),fe[le.name]&&(D.valid=!1,g))break;!g&&(De(fe,le.name)?He?tT(r.errors,fe,le.name):Ot(r.errors,le.name,fe[le.name]):hs(r.errors,le.name))}!mr(Re)&&await z(Re,g,D)}}return D.valid},$=()=>{for(const F of l.unMount){const g=De(n,F);g&&(g._f.refs?g._f.refs.every(D=>!jf(D)):!jf(g._f.ref))&&re(F)}l.unMount=new Set},W=(F,g)=>!t.disabled&&(F&&g&&Ot(i,F,g),!aa(Z(),a)),G=(F,g,D)=>M3(F,l,{...o.mount?i:os(g)?a:Pr(F)?{[F]:g}:g},D,g),X=F=>rg(De(o.mount?i:a,F,t.shouldUnregister?De(a,F,[]):[])),P=(F,g,D={})=>{const J=De(n,F);let ce=g;if(J){const le=J._f;le&&(!le.disabled&&Ot(i,F,L3(g,le)),ce=kh(le.ref)&&tr(g)?"":g,I3(le.ref)?[...le.ref.options].forEach(Re=>Re.selected=ce.includes(Re.value)):le.refs?Fd(le.ref)?le.refs.forEach(Re=>{(!Re.defaultChecked||!Re.disabled)&&(Array.isArray(ce)?Re.checked=!!ce.find(He=>He===Re.value):Re.checked=ce===Re.value||!!ce)}):le.refs.forEach(Re=>Re.checked=Re.value===ce):og(le.ref)?le.ref.value="":(le.ref.value=ce,le.ref.type||p.state.next({name:F,values:vs(i)})))}(D.shouldDirty||D.shouldTouch)&&S(F,ce,D.shouldTouch,D.shouldDirty,!0),D.shouldValidate&&Y(F)},L=(F,g,D)=>{for(const J in g){if(!g.hasOwnProperty(J))return;const ce=g[J],le=F+"."+J,Re=De(n,le);(l.array.has(F)||gs(ce)||Re&&!Re._f)&&!_i(ce)?L(le,ce,D):P(le,ce,D)}},_=(F,g,D={})=>{const J=De(n,F),ce=l.array.has(F),le=vs(g);Ot(i,F,le),ce?(p.array.next({name:F,values:vs(i)}),(m.isDirty||m.dirtyFields||h.isDirty||h.dirtyFields)&&D.shouldDirty&&p.state.next({name:F,dirtyFields:_o(a,i),isDirty:W(F,le)})):J&&!J._f&&!tr(le)?L(F,le,D):P(F,le,D),qb(F,l)&&p.state.next({...r,name:F}),p.state.next({name:o.mount?F:void 0,values:vs(i)})},V=async F=>{o.mount=!0;const g=F.target;let D=g.name,J=!0;const ce=De(n,D),le=Ye=>{J=Number.isNaN(Ye)||_i(Ye)&&isNaN(Ye.getTime())||aa(Ye,De(i,D,Ye))},Re=Vb(t.mode),He=Vb(t.reValidateMode);if(ce){let Ye,fe;const Ue=g.type?Ub(ce._f):T3(F),ot=F.type===Ch.BLUR||F.type===Ch.FOCUS_OUT,Dt=!QE(ce._f)&&!t.resolver&&!De(r.errors,D)&&!ce._f.deps||JE(ot,De(r.touchedFields,D),r.isSubmitted,He,Re),Ft=qb(D,l,ot);Ot(i,D,Ue),ot?(!g||!g.readOnly)&&(ce._f.onBlur&&ce._f.onBlur(F),c&&c(0)):ce._f.onChange&&ce._f.onChange(F);const zt=S(D,Ue,ot),At=!mr(zt)||Ft;if(!ot&&p.state.next({name:D,type:F.type,values:vs(i)}),Dt)return(m.isValid||h.isValid)&&(t.mode==="onBlur"?ot&&f():ot||f()),At&&p.state.next({name:D,...Ft?{}:zt});if(!ot&&Ft&&p.state.next({...r}),t.resolver){const{errors:Te}=await A([D]);if(le(Ue),J){const Jt=Hb(r.errors,n,D),de=Hb(Te,n,Jt.name||D);Ye=de.error,D=de.name,fe=mr(Te)}}else j([D],!0),Ye=(await Wb(ce,l.disabled,i,y,t.shouldUseNativeValidation))[D],j([D]),le(Ue),J&&(Ye?fe=!1:(m.isValid||h.isValid)&&(fe=await z(n,!0)));J&&(ce._f.deps&&(!Array.isArray(ce._f.deps)||ce._f.deps.length>0)&&Y(ce._f.deps),M(D,fe,Ye,zt))}},E=(F,g)=>{if(De(r.errors,g)&&F.focus)return F.focus(),1},Y=async(F,g={})=>{let D,J;const ce=Fc(F);if(t.resolver){const le=await R(os(F)?F:ce);D=mr(le),J=F?!ce.some(Re=>De(le,Re)):D}else F?(J=(await Promise.all(ce.map(async le=>{const Re=De(n,le);return await z(Re&&Re._f?{[le]:Re}:Re)}))).every(Boolean),!(!J&&!r.isValid)&&f()):J=D=await z(n);return p.state.next({...!Pr(F)||(m.isValid||h.isValid)&&D!==r.isValid?{}:{name:F},...t.resolver||!F?{isValid:D}:{},errors:r.errors}),g.shouldFocus&&!J&&Oc(n,E,F?ce:l.mount),J},Z=(F,g)=>{let D={...o.mount?i:a};return g&&(D=D3(g.dirtyFields?r.dirtyFields:r.touchedFields,D)),os(F)?D:Pr(F)?De(D,F):F.map(J=>De(D,J))},ne=(F,g)=>({invalid:!!De((g||r).errors,F),isDirty:!!De((g||r).dirtyFields,F),error:De((g||r).errors,F),isValidating:!!De(r.validatingFields,F),isTouched:!!De((g||r).touchedFields,F)}),oe=F=>{F&&Fc(F).forEach(g=>hs(r.errors,g)),p.state.next({errors:F?r.errors:{}})},pe=(F,g,D)=>{const J=(De(n,F,{_f:{}})._f||{}).ref,ce=De(r.errors,F)||{},{ref:le,message:Re,type:He,...Ye}=ce;Ot(r.errors,F,{...Ye,...g,ref:J}),p.state.next({name:F,errors:r.errors,isValid:!1}),D&&D.shouldFocus&&J&&J.focus&&J.focus()},he=(F,g)=>pn(F)?p.state.subscribe({next:D=>"values"in D&&F(G(void 0,g),D)}):G(F,g,!0),B=F=>p.state.subscribe({next:g=>{XE(F.name,g.name,F.exact)&&ZE(g,F.formState||m,at,F.reRenderRoot)&&F.callback({values:{...i},...r,...g,defaultValues:a})}}).unsubscribe,K=F=>(o.mount=!0,h={...h,...F.formState},B({...F,formState:h})),re=(F,g={})=>{for(const D of F?Fc(F):l.mount)l.mount.delete(D),l.array.delete(D),g.keepValue||(hs(n,D),hs(i,D)),!g.keepError&&hs(r.errors,D),!g.keepDirty&&hs(r.dirtyFields,D),!g.keepTouched&&hs(r.touchedFields,D),!g.keepIsValidating&&hs(r.validatingFields,D),!t.shouldUnregister&&!g.keepDefaultValue&&hs(a,D);p.state.next({values:vs(i)}),p.state.next({...r,...g.keepDirty?{isDirty:W()}:{}}),!g.keepIsValid&&f()},ye=({disabled:F,name:g})=>{(kr(F)&&o.mount||F||l.disabled.has(g))&&(F?l.disabled.add(g):l.disabled.delete(g))},Q=(F,g={})=>{let D=De(n,F);const J=kr(g.disabled)||kr(t.disabled);return Ot(n,F,{...D||{},_f:{...D&&D._f?D._f:{ref:{name:F}},name:F,mount:!0,...g}}),l.mount.add(F),D?ye({disabled:kr(g.disabled)?g.disabled:t.disabled,name:F}):C(F,!0,g.value),{...J?{disabled:g.disabled||t.disabled}:{},...t.progressive?{required:!!g.required,min:xc(g.min),max:xc(g.max),minLength:xc(g.minLength),maxLength:xc(g.maxLength),pattern:xc(g.pattern)}:{},name:F,onChange:V,onBlur:V,ref:ce=>{if(ce){Q(F,g),D=De(n,F);const le=os(ce.value)&&ce.querySelectorAll&&ce.querySelectorAll("input,select,textarea")[0]||ce,Re=qE(le),He=D._f.refs||[];if(Re?He.find(Ye=>Ye===le):le===D._f.ref)return;Ot(n,F,{_f:{...D._f,...Re?{refs:[...He.filter(jf),le,...Array.isArray(De(a,F))?[{}]:[]],ref:{type:le.type,name:F}}:{ref:le}}}),C(F,!1,void 0,le)}else D=De(n,F,{}),D._f&&(D._f.mount=!1),(t.shouldUnregister||g.shouldUnregister)&&!(A3(l.array,F)&&o.action)&&l.unMount.add(F)}}},te=()=>t.shouldFocusError&&Oc(n,E,l.mount),ve=F=>{kr(F)&&(p.state.next({disabled:F}),Oc(n,(g,D)=>{const J=De(n,D);J&&(g.disabled=J._f.disabled||F,Array.isArray(J._f.refs)&&J._f.refs.forEach(ce=>{ce.disabled=J._f.disabled||F}))},0,!1))},we=(F,g)=>async D=>{let J;D&&(D.preventDefault&&D.preventDefault(),D.persist&&D.persist());let ce=vs(i);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:le,values:Re}=await A();r.errors=le,ce=vs(Re)}else await z(n);if(l.disabled.size)for(const le of l.disabled)hs(ce,le);if(hs(r.errors,"root"),mr(r.errors)){p.state.next({errors:{}});try{await F(ce,D)}catch(le){J=le}}else g&&await g({...r.errors},D),te(),setTimeout(te);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:mr(r.errors)&&!J,submitCount:r.submitCount+1,errors:r.errors}),J)throw J},Ne=(F,g={})=>{De(n,F)&&(os(g.defaultValue)?_(F,vs(De(a,F))):(_(F,g.defaultValue),Ot(a,F,vs(g.defaultValue))),g.keepTouched||hs(r.touchedFields,F),g.keepDirty||(hs(r.dirtyFields,F),r.isDirty=g.defaultValue?W(F,vs(De(a,F))):W()),g.keepError||(hs(r.errors,F),m.isValid&&f()),p.state.next({...r}))},ie=(F,g={})=>{const D=F?vs(F):a,J=vs(D),ce=mr(F),le=ce?a:J;if(g.keepDefaultValues||(a=D),!g.keepValues){if(g.keepDirtyValues){const Re=new Set([...l.mount,...Object.keys(_o(a,i))]);for(const He of Array.from(Re))De(r.dirtyFields,He)?Ot(le,He,De(i,He)):_(He,De(le,He))}else{if(sg&&os(F))for(const Re of l.mount){const He=De(n,Re);if(He&&He._f){const Ye=Array.isArray(He._f.refs)?He._f.refs[0]:He._f.ref;if(kh(Ye)){const fe=Ye.closest("form");if(fe){fe.reset();break}}}}if(g.keepFieldsRef)for(const Re of l.mount)_(Re,De(le,Re));else n={}}i=t.shouldUnregister?g.keepDefaultValues?vs(a):{}:vs(le),p.array.next({values:{...le}}),p.state.next({values:{...le}})}l={mount:g.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!m.isValid||!!g.keepIsValid||!!g.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:g.keepSubmitCount?r.submitCount:0,isDirty:ce?!1:g.keepDirty?r.isDirty:!!(g.keepDefaultValues&&!aa(F,a)),isSubmitted:g.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ce?{}:g.keepDirtyValues?g.keepDefaultValues&&i?_o(a,i):r.dirtyFields:g.keepDefaultValues&&F?_o(a,F):g.keepDirty?r.dirtyFields:{},touchedFields:g.keepTouched?r.touchedFields:{},errors:g.keepErrors?r.errors:{},isSubmitSuccessful:g.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},me=(F,g)=>ie(pn(F)?F(i):F,g),Ae=(F,g={})=>{const D=De(n,F),J=D&&D._f;if(J){const ce=J.refs?J.refs[0]:J.ref;ce.focus&&(ce.focus(),g.shouldSelect&&pn(ce.select)&&ce.select())}},at=F=>{r={...r,...F}},it={control:{register:Q,unregister:re,getFieldState:ne,handleSubmit:we,setError:pe,_subscribe:B,_runSchema:A,_focusError:te,_getWatch:G,_getDirty:W,_setValid:f,_setFieldArray:b,_setDisabledField:ye,_setErrors:w,_getFieldArray:X,_reset:ie,_resetDefaultValues:()=>pn(t.defaultValues)&&t.defaultValues().then(F=>{me(F,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:$,_disableForm:ve,_subjects:p,_proxyFormState:m,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(F){o=F},get _defaultValues(){return a},get _names(){return l},set _names(F){l=F},get _formState(){return r},get _options(){return t},set _options(F){t={...t,...F}}},subscribe:K,trigger:Y,register:Q,handleSubmit:we,watch:he,setValue:_,getValues:Z,reset:me,resetField:Ne,clearErrors:oe,unregister:re,setError:pe,setFocus:Ae,getFieldState:ne};return{...it,formControl:it}}function cl(e={}){const t=Le.useRef(void 0),r=Le.useRef(void 0),[n,a]=Le.useState({isDirty:!1,isValidating:!1,isLoading:pn(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:pn(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!pn(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=rT(e);t.current={...l,formState:n}}const i=t.current.control;return i._options=e,ig(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),Le.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Le.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),Le.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),Le.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Le.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),Le.useEffect(()=>{e.values&&!aa(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),Le.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=R3(n,i),t.current}const dl=$E,z3=d.createContext({}),fs=({...e})=>s.jsx(z3.Provider,{value:{name:e.name},children:s.jsx(BE,{...e})}),wm=()=>{const e=d.useContext(z3),t=d.useContext(U3),{getFieldState:r,formState:n}=vm(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},U3=d.createContext({}),rs=d.forwardRef(({className:e,...t},r)=>{const n=d.useId();return s.jsx(U3.Provider,{value:{id:n},children:s.jsx("div",{ref:r,className:$e("space-y-2",e),...t})})});rs.displayName="FormItem";const qt=d.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:a}=wm();return s.jsx(ue,{ref:r,className:$e(n&&"text-destructive",e),htmlFor:a,...t})});qt.displayName="FormLabel";const ns=d.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=wm();return s.jsx(e4,{ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})});ns.displayName="FormControl";const nT=d.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=wm();return s.jsx("p",{ref:r,id:n,className:$e("text-sm text-muted-foreground",e),...t})});nT.displayName="FormDescription";const as=d.forwardRef(({className:e,children:t,...r},n)=>{const{error:a,formMessageId:i}=wm(),o=a?String((a==null?void 0:a.message)??""):t;return o?s.jsx("p",{ref:n,id:i,className:$e("text-sm font-medium text-destructive",e),...r,children:o}):null});as.displayName="FormMessage";const Kb=(e,t,r)=>{if(e&&"reportValidity"in e){const n=De(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},V3=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?Kb(n.ref,r,e):n.refs&&n.refs.forEach(a=>Kb(a,r,e))}},aT=(e,t)=>{t.shouldUseNativeValidation&&V3(e,t);const r={};for(const n in e){const a=De(t.fields,n),i=Object.assign(e[n]||{},{ref:a&&a.ref});if(iT(t.names||Object.keys(e),n)){const o=Object.assign({},De(r,n));Ot(o,"root",i),Ot(r,n,o)}else Ot(r,n,i)}return r},iT=(e,t)=>e.some(r=>r.startsWith(t+"."));var oT=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(m){return m.errors.forEach(function(h){return e.push(h)})}),t){var c=r[o].types,u=c&&c[n.code];r[o]=_3(o,t,r,a,u?[].concat(u,n.message):n.message)}e.shift()}return r},ul=function(e,t,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(u){return i.shouldUseNativeValidation&&V3({},i),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:aT(oT(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},_t;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(_t||(_t={}));var Gb;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(Gb||(Gb={}));const Ke=_t.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),_a=e=>{switch(typeof e){case"undefined":return Ke.undefined;case"string":return Ke.string;case"number":return Number.isNaN(e)?Ke.nan:Ke.number;case"boolean":return Ke.boolean;case"function":return Ke.function;case"bigint":return Ke.bigint;case"symbol":return Ke.symbol;case"object":return Array.isArray(e)?Ke.array:e===null?Ke.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ke.promise:typeof Map<"u"&&e instanceof Map?Ke.map:typeof Set<"u"&&e instanceof Set?Ke.set:typeof Date<"u"&&e instanceof Date?Ke.date:Ke.object;default:return Ke.unknown}},Ce=_t.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ba extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return a(this),n}static assert(t){if(!(t instanceof ba))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,_t.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ba.create=e=>new ba(e);const d0=(e,t)=>{let r;switch(e.code){case Ce.invalid_type:e.received===Ke.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case Ce.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,_t.jsonStringifyReplacer)}`;break;case Ce.unrecognized_keys:r=`Unrecognized key(s) in object: ${_t.joinValues(e.keys,", ")}`;break;case Ce.invalid_union:r="Invalid input";break;case Ce.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${_t.joinValues(e.options)}`;break;case Ce.invalid_enum_value:r=`Invalid enum value. Expected ${_t.joinValues(e.options)}, received '${e.received}'`;break;case Ce.invalid_arguments:r="Invalid function arguments";break;case Ce.invalid_return_type:r="Invalid function return type";break;case Ce.invalid_date:r="Invalid date";break;case Ce.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:_t.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case Ce.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case Ce.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case Ce.custom:r="Invalid input";break;case Ce.invalid_intersection_types:r="Intersection results could not be merged";break;case Ce.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Ce.not_finite:r="Number must be finite";break;default:r=t.defaultError,_t.assertNever(e)}return{message:r}};let lT=d0;function cT(){return lT}const dT=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function ze(e,t){const r=cT(),n=dT({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===d0?void 0:d0].filter(a=>!!a)});e.common.issues.push(n)}class _r{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return ct;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return _r.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return ct;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const ct=Object.freeze({status:"aborted"}),jc=e=>({status:"dirty",value:e}),en=e=>({status:"valid",value:e}),Qb=e=>e.status==="aborted",Zb=e=>e.status==="dirty",Ul=e=>e.status==="valid",Ph=e=>typeof Promise<"u"&&e instanceof Promise;var Qe;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Qe||(Qe={}));class pi{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Xb=(e,t)=>{if(Ul(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ba(e.common.issues);return this._error=r,this._error}}};function yt(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class Tt{get description(){return this._def.description}_getType(t){return _a(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:_a(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new _r,ctx:{common:t.parent.common,data:t.data,parsedType:_a(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Ph(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_a(t)},a=this._parseSync({data:t,path:n.path,parent:n});return Xb(n,a)}"~validate"(t){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_a(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:r});return Ul(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>Ul(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_a(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(Ph(a)?a:Promise.resolve(a));return Xb(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:Ce.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new Bl({schema:this,typeName:dt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return oi.create(this,this._def)}nullable(){return ql.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Bn.create(this)}promise(){return Rh.create(this,this._def)}or(t){return Th.create([this,t],this._def)}and(t){return Ah.create(this,t,this._def)}transform(t){return new Bl({...yt(this._def),schema:this,typeName:dt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new h0({...yt(this._def),innerType:this,defaultValue:r,typeName:dt.ZodDefault})}brand(){return new _T({typeName:dt.ZodBranded,type:this,...yt(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new m0({...yt(this._def),innerType:this,catchValue:r,typeName:dt.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return cg.create(this,t)}readonly(){return f0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const uT=/^c[^\s-]{8,}$/i,hT=/^[0-9a-z]+$/,mT=/^[0-9A-HJKMNP-TV-Z]{26}$/i,fT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,pT=/^[a-z0-9_-]{21}$/i,xT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,gT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,bT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,vT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Cf;const wT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,yT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,NT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,jT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,CT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,kT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,B3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ST=new RegExp(`^${B3}$`);function q3(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function PT(e){return new RegExp(`^${q3(e)}$`)}function ET(e){let t=`${B3}T${q3(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function TT(e,t){return!!((t==="v4"||!t)&&wT.test(e)||(t==="v6"||!t)&&NT.test(e))}function AT(e,t){if(!xT.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function RT(e,t){return!!((t==="v4"||!t)&&yT.test(e)||(t==="v6"||!t)&&jT.test(e))}class Qa extends Tt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ke.string){const i=this._getOrReturnCtx(t);return ze(i,{code:Ce.invalid_type,expected:Ke.string,received:i.parsedType}),ct}const n=new _r;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),ze(a,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),ze(a,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?ze(a,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&ze(a,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")bT.test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"email",code:Ce.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Cf||(Cf=new RegExp(vT,"u")),Cf.test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"emoji",code:Ce.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")fT.test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"uuid",code:Ce.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")pT.test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"nanoid",code:Ce.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")uT.test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"cuid",code:Ce.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")hT.test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"cuid2",code:Ce.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")mT.test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"ulid",code:Ce.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),ze(a,{validation:"url",code:Ce.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"regex",code:Ce.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),ze(a,{code:Ce.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),ze(a,{code:Ce.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),ze(a,{code:Ce.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?ET(i).test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{code:Ce.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?ST.test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{code:Ce.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?PT(i).test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{code:Ce.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?gT.test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"duration",code:Ce.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?TT(t.data,i.version)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"ip",code:Ce.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?AT(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"jwt",code:Ce.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?RT(t.data,i.version)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"cidr",code:Ce.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?CT.test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"base64",code:Ce.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?kT.test(t.data)||(a=this._getOrReturnCtx(t,a),ze(a,{validation:"base64url",code:Ce.invalid_string,message:i.message}),n.dirty()):_t.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:Ce.invalid_string,...Qe.errToObj(n)})}_addCheck(t){return new Qa({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Qe.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Qe.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Qe.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Qe.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Qe.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Qe.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Qe.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Qe.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Qe.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Qe.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Qe.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Qe.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Qe.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Qe.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Qe.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Qe.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Qe.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Qe.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Qe.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Qe.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Qe.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Qe.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Qe.errToObj(r)})}nonempty(t){return this.min(1,Qe.errToObj(t))}trim(){return new Qa({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Qa({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Qa({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Qa.create=e=>new Qa({checks:[],typeName:dt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...yt(e)});function MT(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class cd extends Tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ke.number){const i=this._getOrReturnCtx(t);return ze(i,{code:Ce.invalid_type,expected:Ke.number,received:i.parsedType}),ct}let n;const a=new _r;for(const i of this._def.checks)i.kind==="int"?_t.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),ze(n,{code:Ce.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),ze(n,{code:Ce.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),ze(n,{code:Ce.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?MT(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),ze(n,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),ze(n,{code:Ce.not_finite,message:i.message}),a.dirty()):_t.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Qe.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Qe.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Qe.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Qe.toString(r))}setLimit(t,r,n,a){return new cd({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Qe.toString(a)}]})}_addCheck(t){return new cd({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Qe.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Qe.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Qe.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Qe.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Qe.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Qe.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Qe.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Qe.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Qe.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&_t.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}cd.create=e=>new cd({checks:[],typeName:dt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...yt(e)});class dd extends Tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ke.bigint)return this._getInvalidInput(t);let n;const a=new _r;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),ze(n,{code:Ce.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),ze(n,{code:Ce.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),ze(n,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):_t.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return ze(r,{code:Ce.invalid_type,expected:Ke.bigint,received:r.parsedType}),ct}gte(t,r){return this.setLimit("min",t,!0,Qe.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Qe.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Qe.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Qe.toString(r))}setLimit(t,r,n,a){return new dd({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Qe.toString(a)}]})}_addCheck(t){return new dd({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Qe.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Qe.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Qe.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Qe.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Qe.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}dd.create=e=>new dd({checks:[],typeName:dt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...yt(e)});class Jb extends Tt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ke.boolean){const n=this._getOrReturnCtx(t);return ze(n,{code:Ce.invalid_type,expected:Ke.boolean,received:n.parsedType}),ct}return en(t.data)}}Jb.create=e=>new Jb({typeName:dt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...yt(e)});class Eh extends Tt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ke.date){const i=this._getOrReturnCtx(t);return ze(i,{code:Ce.invalid_type,expected:Ke.date,received:i.parsedType}),ct}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return ze(i,{code:Ce.invalid_date}),ct}const n=new _r;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),ze(a,{code:Ce.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),ze(a,{code:Ce.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):_t.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Eh({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Qe.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Qe.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Eh.create=e=>new Eh({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:dt.ZodDate,...yt(e)});class ev extends Tt{_parse(t){if(this._getType(t)!==Ke.symbol){const n=this._getOrReturnCtx(t);return ze(n,{code:Ce.invalid_type,expected:Ke.symbol,received:n.parsedType}),ct}return en(t.data)}}ev.create=e=>new ev({typeName:dt.ZodSymbol,...yt(e)});class tv extends Tt{_parse(t){if(this._getType(t)!==Ke.undefined){const n=this._getOrReturnCtx(t);return ze(n,{code:Ce.invalid_type,expected:Ke.undefined,received:n.parsedType}),ct}return en(t.data)}}tv.create=e=>new tv({typeName:dt.ZodUndefined,...yt(e)});class sv extends Tt{_parse(t){if(this._getType(t)!==Ke.null){const n=this._getOrReturnCtx(t);return ze(n,{code:Ce.invalid_type,expected:Ke.null,received:n.parsedType}),ct}return en(t.data)}}sv.create=e=>new sv({typeName:dt.ZodNull,...yt(e)});class ud extends Tt{constructor(){super(...arguments),this._any=!0}_parse(t){return en(t.data)}}ud.create=e=>new ud({typeName:dt.ZodAny,...yt(e)});class rv extends Tt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return en(t.data)}}rv.create=e=>new rv({typeName:dt.ZodUnknown,...yt(e)});class xi extends Tt{_parse(t){const r=this._getOrReturnCtx(t);return ze(r,{code:Ce.invalid_type,expected:Ke.never,received:r.parsedType}),ct}}xi.create=e=>new xi({typeName:dt.ZodNever,...yt(e)});class nv extends Tt{_parse(t){if(this._getType(t)!==Ke.undefined){const n=this._getOrReturnCtx(t);return ze(n,{code:Ce.invalid_type,expected:Ke.void,received:n.parsedType}),ct}return en(t.data)}}nv.create=e=>new nv({typeName:dt.ZodVoid,...yt(e)});class Bn extends Tt{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==Ke.array)return ze(r,{code:Ce.invalid_type,expected:Ke.array,received:r.parsedType}),ct;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(ze(r,{code:o?Ce.too_big:Ce.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(ze(r,{code:Ce.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(ze(r,{code:Ce.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new pi(r,o,r.path,l)))).then(o=>_r.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new pi(r,o,r.path,l)));return _r.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new Bn({...this._def,minLength:{value:t,message:Qe.toString(r)}})}max(t,r){return new Bn({...this._def,maxLength:{value:t,message:Qe.toString(r)}})}length(t,r){return new Bn({...this._def,exactLength:{value:t,message:Qe.toString(r)}})}nonempty(t){return this.min(1,t)}}Bn.create=(e,t)=>new Bn({type:e,minLength:null,maxLength:null,exactLength:null,typeName:dt.ZodArray,...yt(t)});function Do(e){if(e instanceof ms){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=oi.create(Do(n))}return new ms({...e._def,shape:()=>t})}else return e instanceof Bn?new Bn({...e._def,type:Do(e.element)}):e instanceof oi?oi.create(Do(e.unwrap())):e instanceof ql?ql.create(Do(e.unwrap())):e instanceof ro?ro.create(e.items.map(t=>Do(t))):e}class ms extends Tt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=_t.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==Ke.object){const u=this._getOrReturnCtx(t);return ze(u,{code:Ce.invalid_type,expected:Ke.object,received:u.parsedType}),ct}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof xi&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const m=i[u],h=a.data[u];c.push({key:{status:"valid",value:u},value:m._parse(new pi(a,h,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof xi){const u=this._def.unknownKeys;if(u==="passthrough")for(const m of l)c.push({key:{status:"valid",value:m},value:{status:"valid",value:a.data[m]}});else if(u==="strict")l.length>0&&(ze(a,{code:Ce.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const m of l){const h=a.data[m];c.push({key:{status:"valid",value:m},value:u._parse(new pi(a,h,a.path,m)),alwaysSet:m in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const m of c){const h=await m.key,p=await m.value;u.push({key:h,value:p,alwaysSet:m.alwaysSet})}return u}).then(u=>_r.mergeObjectSync(n,u)):_r.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return Qe.errToObj,new ms({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:Qe.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new ms({...this._def,unknownKeys:"strip"})}passthrough(){return new ms({...this._def,unknownKeys:"passthrough"})}extend(t){return new ms({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ms({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:dt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new ms({...this._def,catchall:t})}pick(t){const r={};for(const n of _t.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new ms({...this._def,shape:()=>r})}omit(t){const r={};for(const n of _t.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new ms({...this._def,shape:()=>r})}deepPartial(){return Do(this)}partial(t){const r={};for(const n of _t.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}return new ms({...this._def,shape:()=>r})}required(t){const r={};for(const n of _t.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof oi;)i=i._def.innerType;r[n]=i}return new ms({...this._def,shape:()=>r})}keyof(){return H3(_t.objectKeys(this.shape))}}ms.create=(e,t)=>new ms({shape:()=>e,unknownKeys:"strip",catchall:xi.create(),typeName:dt.ZodObject,...yt(t)});ms.strictCreate=(e,t)=>new ms({shape:()=>e,unknownKeys:"strict",catchall:xi.create(),typeName:dt.ZodObject,...yt(t)});ms.lazycreate=(e,t)=>new ms({shape:e,unknownKeys:"strip",catchall:xi.create(),typeName:dt.ZodObject,...yt(t)});class Th extends Tt{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new ba(l.ctx.common.issues));return ze(r,{code:Ce.invalid_union,unionErrors:o}),ct}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},m=c._parseSync({data:r.data,path:r.path,parent:u});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new ba(c));return ze(r,{code:Ce.invalid_union,unionErrors:l}),ct}}get options(){return this._def.options}}Th.create=(e,t)=>new Th({options:e,typeName:dt.ZodUnion,...yt(t)});function u0(e,t){const r=_a(e),n=_a(t);if(e===t)return{valid:!0,data:e};if(r===Ke.object&&n===Ke.object){const a=_t.objectKeys(t),i=_t.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=u0(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===Ke.array&&n===Ke.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=u0(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===Ke.date&&n===Ke.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Ah extends Tt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(Qb(i)||Qb(o))return ct;const l=u0(i.value,o.value);return l.valid?((Zb(i)||Zb(o))&&r.dirty(),{status:r.value,value:l.data}):(ze(n,{code:Ce.invalid_intersection_types}),ct)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Ah.create=(e,t,r)=>new Ah({left:e,right:t,typeName:dt.ZodIntersection,...yt(r)});class ro extends Tt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ke.array)return ze(n,{code:Ce.invalid_type,expected:Ke.array,received:n.parsedType}),ct;if(n.data.length<this._def.items.length)return ze(n,{code:Ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ct;!this._def.rest&&n.data.length>this._def.items.length&&(ze(n,{code:Ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new pi(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>_r.mergeArray(r,o)):_r.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new ro({...this._def,rest:t})}}ro.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ro({items:e,typeName:dt.ZodTuple,rest:null,...yt(t)})};class av extends Tt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ke.map)return ze(n,{code:Ce.invalid_type,expected:Ke.map,received:n.parsedType}),ct;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:a._parse(new pi(n,l,n.path,[u,"key"])),value:i._parse(new pi(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,m=await c.value;if(u.status==="aborted"||m.status==="aborted")return ct;(u.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(u.value,m.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,m=c.value;if(u.status==="aborted"||m.status==="aborted")return ct;(u.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(u.value,m.value)}return{status:r.value,value:l}}}}av.create=(e,t,r)=>new av({valueType:t,keyType:e,typeName:dt.ZodMap,...yt(r)});class hd extends Tt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ke.set)return ze(n,{code:Ce.invalid_type,expected:Ke.set,received:n.parsedType}),ct;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(ze(n,{code:Ce.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(ze(n,{code:Ce.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const m of c){if(m.status==="aborted")return ct;m.status==="dirty"&&r.dirty(),u.add(m.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>i._parse(new pi(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new hd({...this._def,minSize:{value:t,message:Qe.toString(r)}})}max(t,r){return new hd({...this._def,maxSize:{value:t,message:Qe.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}hd.create=(e,t)=>new hd({valueType:e,minSize:null,maxSize:null,typeName:dt.ZodSet,...yt(t)});class iv extends Tt{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}iv.create=(e,t)=>new iv({getter:e,typeName:dt.ZodLazy,...yt(t)});class ov extends Tt{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return ze(r,{received:r.data,code:Ce.invalid_literal,expected:this._def.value}),ct}return{status:"valid",value:t.data}}get value(){return this._def.value}}ov.create=(e,t)=>new ov({value:e,typeName:dt.ZodLiteral,...yt(t)});function H3(e,t){return new Vl({values:e,typeName:dt.ZodEnum,...yt(t)})}class Vl extends Tt{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return ze(r,{expected:_t.joinValues(n),received:r.parsedType,code:Ce.invalid_type}),ct}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return ze(r,{received:r.data,code:Ce.invalid_enum_value,options:n}),ct}return en(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Vl.create(t,{...this._def,...r})}exclude(t,r=this._def){return Vl.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Vl.create=H3;class lv extends Tt{_parse(t){const r=_t.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Ke.string&&n.parsedType!==Ke.number){const a=_t.objectValues(r);return ze(n,{expected:_t.joinValues(a),received:n.parsedType,code:Ce.invalid_type}),ct}if(this._cache||(this._cache=new Set(_t.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=_t.objectValues(r);return ze(n,{received:n.data,code:Ce.invalid_enum_value,options:a}),ct}return en(t.data)}get enum(){return this._def.values}}lv.create=(e,t)=>new lv({values:e,typeName:dt.ZodNativeEnum,...yt(t)});class Rh extends Tt{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Ke.promise&&r.common.async===!1)return ze(r,{code:Ce.invalid_type,expected:Ke.promise,received:r.parsedType}),ct;const n=r.parsedType===Ke.promise?r.data:Promise.resolve(r.data);return en(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Rh.create=(e,t)=>new Rh({type:e,typeName:dt.ZodPromise,...yt(t)});class Bl extends Tt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===dt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{ze(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return ct;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?ct:c.status==="dirty"||r.value==="dirty"?jc(c.value):c});{if(r.value==="aborted")return ct;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?ct:l.status==="dirty"||r.value==="dirty"?jc(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ct:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ct:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ul(o))return ct;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Ul(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):ct);_t.assertNever(a)}}Bl.create=(e,t,r)=>new Bl({schema:e,typeName:dt.ZodEffects,effect:t,...yt(r)});Bl.createWithPreprocess=(e,t,r)=>new Bl({schema:t,effect:{type:"preprocess",transform:e},typeName:dt.ZodEffects,...yt(r)});class oi extends Tt{_parse(t){return this._getType(t)===Ke.undefined?en(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}oi.create=(e,t)=>new oi({innerType:e,typeName:dt.ZodOptional,...yt(t)});class ql extends Tt{_parse(t){return this._getType(t)===Ke.null?en(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ql.create=(e,t)=>new ql({innerType:e,typeName:dt.ZodNullable,...yt(t)});class h0 extends Tt{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===Ke.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}h0.create=(e,t)=>new h0({innerType:e,typeName:dt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...yt(t)});class m0 extends Tt{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ph(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ba(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ba(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}m0.create=(e,t)=>new m0({innerType:e,typeName:dt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...yt(t)});class cv extends Tt{_parse(t){if(this._getType(t)!==Ke.nan){const n=this._getOrReturnCtx(t);return ze(n,{code:Ce.invalid_type,expected:Ke.nan,received:n.parsedType}),ct}return{status:"valid",value:t.data}}}cv.create=e=>new cv({typeName:dt.ZodNaN,...yt(e)});class _T extends Tt{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class cg extends Tt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ct:i.status==="dirty"?(r.dirty(),jc(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?ct:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new cg({in:t,out:r,typeName:dt.ZodPipeline})}}class f0 extends Tt{_parse(t){const r=this._def.innerType._parse(t),n=a=>(Ul(a)&&(a.value=Object.freeze(a.value)),a);return Ph(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}f0.create=(e,t)=>new f0({innerType:e,typeName:dt.ZodReadonly,...yt(t)});function dv(e,t){const r=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof r=="string"?{message:r}:r}function DT(e,t={},r){return e?ud.create().superRefine((n,a)=>{const i=e(n);if(i instanceof Promise)return i.then(o=>{if(!o){const l=dv(t,n),c=l.fatal??r??!0;a.addIssue({code:"custom",...l,fatal:c})}});if(!i){const o=dv(t,n),l=o.fatal??r??!0;a.addIssue({code:"custom",...o,fatal:l})}}):ud.create()}var dt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(dt||(dt={}));const ym=(e,t={message:`Input not instance of ${e.name}`})=>DT(r=>r instanceof e,t),Wt=Qa.create;ud.create;xi.create;const Y3=Bn.create,va=ms.create;Th.create;Ah.create;ro.create;const md=Vl.create;Rh.create;oi.create;ql.create;const fd=[{code:"AD",name:"Andorra",flag:"🇦🇩",dialCode:"+376"},{code:"AE",name:"United Arab Emirates",flag:"🇦🇪",dialCode:"+971"},{code:"AF",name:"Afghanistan",flag:"🇦🇫",dialCode:"+93"},{code:"AG",name:"Antigua and Barbuda",flag:"🇦🇬",dialCode:"+1-268"},{code:"AI",name:"Anguilla",flag:"🇦🇮",dialCode:"+1-264"},{code:"AL",name:"Albania",flag:"🇦🇱",dialCode:"+355"},{code:"AM",name:"Armenia",flag:"🇦🇲",dialCode:"+374"},{code:"AO",name:"Angola",flag:"🇦🇴",dialCode:"+244"},{code:"AQ",name:"Antarctica",flag:"🇦🇶",dialCode:"+672"},{code:"AR",name:"Argentina",flag:"🇦🇷",dialCode:"+54"},{code:"AS",name:"American Samoa",flag:"🇦🇸",dialCode:"+1-684"},{code:"AT",name:"Austria",flag:"🇦🇹",dialCode:"+43"},{code:"AU",name:"Australia",flag:"🇦🇺",dialCode:"+61"},{code:"AW",name:"Aruba",flag:"🇦🇼",dialCode:"+297"},{code:"AX",name:"Åland Islands",flag:"🇦🇽",dialCode:"+358"},{code:"AZ",name:"Azerbaijan",flag:"🇦🇿",dialCode:"+994"},{code:"BA",name:"Bosnia and Herzegovina",flag:"🇧🇦",dialCode:"+387"},{code:"BB",name:"Barbados",flag:"🇧🇧",dialCode:"+1-246"},{code:"BD",name:"Bangladesh",flag:"🇧🇩",dialCode:"+880"},{code:"BE",name:"Belgium",flag:"🇧🇪",dialCode:"+32"},{code:"BF",name:"Burkina Faso",flag:"🇧🇫",dialCode:"+226"},{code:"BG",name:"Bulgaria",flag:"🇧🇬",dialCode:"+359"},{code:"BH",name:"Bahrain",flag:"🇧🇭",dialCode:"+973"},{code:"BI",name:"Burundi",flag:"🇧🇮",dialCode:"+257"},{code:"BJ",name:"Benin",flag:"🇧🇯",dialCode:"+229"},{code:"BL",name:"Saint Barthélemy",flag:"🇧🇱",dialCode:"+590"},{code:"BM",name:"Bermuda",flag:"🇧🇲",dialCode:"+1-441"},{code:"BN",name:"Brunei",flag:"🇧🇳",dialCode:"+673"},{code:"BO",name:"Bolivia",flag:"🇧🇴",dialCode:"+591"},{code:"BQ",name:"Caribbean Netherlands",flag:"🇧🇶",dialCode:"+599"},{code:"BR",name:"Brazil",flag:"🇧🇷",dialCode:"+55"},{code:"BS",name:"Bahamas",flag:"🇧🇸",dialCode:"+1-242"},{code:"BT",name:"Bhutan",flag:"🇧🇹",dialCode:"+975"},{code:"BV",name:"Bouvet Island",flag:"🇧🇻",dialCode:"+47"},{code:"BW",name:"Botswana",flag:"🇧🇼",dialCode:"+267"},{code:"BY",name:"Belarus",flag:"🇧🇾",dialCode:"+375"},{code:"BZ",name:"Belize",flag:"🇧🇿",dialCode:"+501"},{code:"CA",name:"Canada",flag:"🇨🇦",dialCode:"+1"},{code:"CC",name:"Cocos Islands",flag:"🇨🇨",dialCode:"+61"},{code:"CD",name:"DR Congo",flag:"🇨🇩",dialCode:"+243"},{code:"CF",name:"Central African Republic",flag:"🇨🇫",dialCode:"+236"},{code:"CG",name:"Republic of the Congo",flag:"🇨🇬",dialCode:"+242"},{code:"CH",name:"Switzerland",flag:"🇨🇭",dialCode:"+41"},{code:"CI",name:"Côte d'Ivoire",flag:"🇨🇮",dialCode:"+225"},{code:"CK",name:"Cook Islands",flag:"🇨🇰",dialCode:"+682"},{code:"CL",name:"Chile",flag:"🇨🇱",dialCode:"+56"},{code:"CM",name:"Cameroon",flag:"🇨🇲",dialCode:"+237"},{code:"CN",name:"China",flag:"🇨🇳",dialCode:"+86"},{code:"CO",name:"Colombia",flag:"🇨🇴",dialCode:"+57"},{code:"CR",name:"Costa Rica",flag:"🇨🇷",dialCode:"+506"},{code:"CU",name:"Cuba",flag:"🇨🇺",dialCode:"+53"},{code:"CV",name:"Cape Verde",flag:"🇨🇻",dialCode:"+238"},{code:"CW",name:"Curaçao",flag:"🇨🇼",dialCode:"+599"},{code:"CX",name:"Christmas Island",flag:"🇨🇽",dialCode:"+61"},{code:"CY",name:"Cyprus",flag:"🇨🇾",dialCode:"+357"},{code:"CZ",name:"Czech Republic",flag:"🇨🇿",dialCode:"+420"},{code:"DE",name:"Germany",flag:"🇩🇪",dialCode:"+49"},{code:"DJ",name:"Djibouti",flag:"🇩🇯",dialCode:"+253"},{code:"DK",name:"Denmark",flag:"🇩🇰",dialCode:"+45"},{code:"DM",name:"Dominica",flag:"🇩🇲",dialCode:"+1-767"},{code:"DO",name:"Dominican Republic",flag:"🇩🇴",dialCode:"+1-809"},{code:"DZ",name:"Algeria",flag:"🇩🇿",dialCode:"+213"},{code:"EC",name:"Ecuador",flag:"🇪🇨",dialCode:"+593"},{code:"EE",name:"Estonia",flag:"🇪🇪",dialCode:"+372"},{code:"EG",name:"Egypt",flag:"🇪🇬",dialCode:"+20"},{code:"EH",name:"Western Sahara",flag:"🇪🇭",dialCode:"+212"},{code:"ER",name:"Eritrea",flag:"🇪🇷",dialCode:"+291"},{code:"ES",name:"Spain",flag:"🇪🇸",dialCode:"+34"},{code:"ET",name:"Ethiopia",flag:"🇪🇹",dialCode:"+251"},{code:"FI",name:"Finland",flag:"🇫🇮",dialCode:"+358"},{code:"FJ",name:"Fiji",flag:"🇫🇯",dialCode:"+679"},{code:"FK",name:"Falkland Islands",flag:"🇫🇰",dialCode:"+500"},{code:"FM",name:"Micronesia",flag:"🇫🇲",dialCode:"+691"},{code:"FO",name:"Faroe Islands",flag:"🇫🇴",dialCode:"+298"},{code:"FR",name:"France",flag:"🇫🇷",dialCode:"+33"},{code:"GA",name:"Gabon",flag:"🇬🇦",dialCode:"+241"},{code:"GB",name:"United Kingdom",flag:"🇬🇧",dialCode:"+44"},{code:"GD",name:"Grenada",flag:"🇬🇩",dialCode:"+1-473"},{code:"GE",name:"Georgia",flag:"🇬🇪",dialCode:"+995"},{code:"GF",name:"French Guiana",flag:"🇬🇫",dialCode:"+594"},{code:"GG",name:"Guernsey",flag:"🇬🇬",dialCode:"+44"},{code:"GH",name:"Ghana",flag:"🇬🇭",dialCode:"+233"},{code:"GI",name:"Gibraltar",flag:"🇬🇮",dialCode:"+350"},{code:"GL",name:"Greenland",flag:"🇬🇱",dialCode:"+299"},{code:"GM",name:"Gambia",flag:"🇬🇲",dialCode:"+220"},{code:"GN",name:"Guinea",flag:"🇬🇳",dialCode:"+224"},{code:"GP",name:"Guadeloupe",flag:"🇬🇵",dialCode:"+590"},{code:"GQ",name:"Equatorial Guinea",flag:"🇬🇶",dialCode:"+240"},{code:"GR",name:"Greece",flag:"🇬🇷",dialCode:"+30"},{code:"GS",name:"South Georgia",flag:"🇬🇸",dialCode:"+500"},{code:"GT",name:"Guatemala",flag:"🇬🇹",dialCode:"+502"},{code:"GU",name:"Guam",flag:"🇬🇺",dialCode:"+1-671"},{code:"GW",name:"Guinea-Bissau",flag:"🇬🇼",dialCode:"+245"},{code:"GY",name:"Guyana",flag:"🇬🇾",dialCode:"+592"},{code:"HK",name:"Hong Kong",flag:"🇭🇰",dialCode:"+852"},{code:"HM",name:"Heard Island",flag:"🇭🇲",dialCode:"+672"},{code:"HN",name:"Honduras",flag:"🇭🇳",dialCode:"+504"},{code:"HR",name:"Croatia",flag:"🇭🇷",dialCode:"+385"},{code:"HT",name:"Haiti",flag:"🇭🇹",dialCode:"+509"},{code:"HU",name:"Hungary",flag:"🇭🇺",dialCode:"+36"},{code:"ID",name:"Indonesia",flag:"🇮🇩",dialCode:"+62"},{code:"IE",name:"Ireland",flag:"🇮🇪",dialCode:"+353"},{code:"IL",name:"Israel",flag:"🇮🇱",dialCode:"+972"},{code:"IM",name:"Isle of Man",flag:"🇮🇲",dialCode:"+44"},{code:"IN",name:"India",flag:"🇮🇳",dialCode:"+91"},{code:"IO",name:"British Indian Ocean Territory",flag:"🇮🇴",dialCode:"+246"},{code:"IQ",name:"Iraq",flag:"🇮🇶",dialCode:"+964"},{code:"IR",name:"Iran",flag:"🇮🇷",dialCode:"+98"},{code:"IS",name:"Iceland",flag:"🇮🇸",dialCode:"+354"},{code:"IT",name:"Italy",flag:"🇮🇹",dialCode:"+39"},{code:"JE",name:"Jersey",flag:"🇯🇪",dialCode:"+44"},{code:"JM",name:"Jamaica",flag:"🇯🇲",dialCode:"+1-876"},{code:"JO",name:"Jordan",flag:"🇯🇴",dialCode:"+962"},{code:"JP",name:"Japan",flag:"🇯🇵",dialCode:"+81"},{code:"KE",name:"Kenya",flag:"🇰🇪",dialCode:"+254"},{code:"KG",name:"Kyrgyzstan",flag:"🇰🇬",dialCode:"+996"},{code:"KH",name:"Cambodia",flag:"🇰🇭",dialCode:"+855"},{code:"KI",name:"Kiribati",flag:"🇰🇮",dialCode:"+686"},{code:"KM",name:"Comoros",flag:"🇰🇲",dialCode:"+269"},{code:"KN",name:"Saint Kitts and Nevis",flag:"🇰🇳",dialCode:"+1-869"},{code:"KP",name:"North Korea",flag:"🇰🇵",dialCode:"+850"},{code:"KR",name:"South Korea",flag:"🇰🇷",dialCode:"+82"},{code:"KW",name:"Kuwait",flag:"🇰🇼",dialCode:"+965"},{code:"KY",name:"Cayman Islands",flag:"🇰🇾",dialCode:"+1-345"},{code:"KZ",name:"Kazakhstan",flag:"🇰🇿",dialCode:"+7"},{code:"LA",name:"Laos",flag:"🇱🇦"},{code:"LB",name:"Lebanon",flag:"🇱🇧"},{code:"LC",name:"Saint Lucia",flag:"🇱🇨"},{code:"LI",name:"Liechtenstein",flag:"🇱🇮"},{code:"LK",name:"Sri Lanka",flag:"🇱🇰"},{code:"LR",name:"Liberia",flag:"🇱🇷"},{code:"LS",name:"Lesotho",flag:"🇱🇸"},{code:"LT",name:"Lithuania",flag:"🇱🇹"},{code:"LU",name:"Luxembourg",flag:"🇱🇺"},{code:"LV",name:"Latvia",flag:"🇱🇻"},{code:"LY",name:"Libya",flag:"🇱🇾"},{code:"MA",name:"Morocco",flag:"🇲🇦"},{code:"MC",name:"Monaco",flag:"🇲🇨"},{code:"MD",name:"Moldova",flag:"🇲🇩"},{code:"ME",name:"Montenegro",flag:"🇲🇪"},{code:"MF",name:"Saint Martin",flag:"🇲🇫"},{code:"MG",name:"Madagascar",flag:"🇲🇬"},{code:"MH",name:"Marshall Islands",flag:"🇲🇭"},{code:"MK",name:"North Macedonia",flag:"🇲🇰"},{code:"ML",name:"Mali",flag:"🇲🇱"},{code:"MM",name:"Myanmar",flag:"🇲🇲"},{code:"MN",name:"Mongolia",flag:"🇲🇳"},{code:"MO",name:"Macao",flag:"🇲🇴"},{code:"MP",name:"Northern Mariana Islands",flag:"🇲🇵"},{code:"MQ",name:"Martinique",flag:"🇲🇶"},{code:"MR",name:"Mauritania",flag:"🇲🇷"},{code:"MS",name:"Montserrat",flag:"🇲🇸"},{code:"MT",name:"Malta",flag:"🇲🇹"},{code:"MU",name:"Mauritius",flag:"🇲🇺"},{code:"MV",name:"Maldives",flag:"🇲🇻"},{code:"MW",name:"Malawi",flag:"🇲🇼"},{code:"MX",name:"Mexico",flag:"🇲🇽"},{code:"MY",name:"Malaysia",flag:"🇲🇾"},{code:"MZ",name:"Mozambique",flag:"🇲🇿"},{code:"NA",name:"Namibia",flag:"🇳🇦"},{code:"NC",name:"New Caledonia",flag:"🇳🇨"},{code:"NE",name:"Niger",flag:"🇳🇪"},{code:"NF",name:"Norfolk Island",flag:"🇳🇫"},{code:"NG",name:"Nigeria",flag:"🇳🇬",dialCode:"+234"},{code:"NI",name:"Nicaragua",flag:"🇳🇮"},{code:"NL",name:"Netherlands",flag:"🇳🇱"},{code:"NO",name:"Norway",flag:"🇳🇴"},{code:"NP",name:"Nepal",flag:"🇳🇵"},{code:"NR",name:"Nauru",flag:"🇳🇷"},{code:"NU",name:"Niue",flag:"🇳🇺"},{code:"NZ",name:"New Zealand",flag:"🇳🇿"},{code:"OM",name:"Oman",flag:"🇴🇲"},{code:"PA",name:"Panama",flag:"🇵🇦"},{code:"PE",name:"Peru",flag:"🇵🇪"},{code:"PF",name:"French Polynesia",flag:"🇵🇫"},{code:"PG",name:"Papua New Guinea",flag:"🇵🇬"},{code:"PH",name:"Philippines",flag:"🇵🇭"},{code:"PK",name:"Pakistan",flag:"🇵🇰"},{code:"PL",name:"Poland",flag:"🇵🇱"},{code:"PM",name:"Saint Pierre and Miquelon",flag:"🇵🇲"},{code:"PN",name:"Pitcairn Islands",flag:"🇵🇳"},{code:"PR",name:"Puerto Rico",flag:"🇵🇷"},{code:"PS",name:"Palestine",flag:"🇵🇸"},{code:"PT",name:"Portugal",flag:"🇵🇹"},{code:"PW",name:"Palau",flag:"🇵🇼"},{code:"PY",name:"Paraguay",flag:"🇵🇾"},{code:"QA",name:"Qatar",flag:"🇶🇦"},{code:"RE",name:"Réunion",flag:"🇷🇪"},{code:"RO",name:"Romania",flag:"🇷🇴"},{code:"RS",name:"Serbia",flag:"🇷🇸"},{code:"RU",name:"Russia",flag:"🇷🇺"},{code:"RW",name:"Rwanda",flag:"🇷🇼"},{code:"SA",name:"Saudi Arabia",flag:"🇸🇦"},{code:"SB",name:"Solomon Islands",flag:"🇸🇧"},{code:"SC",name:"Seychelles",flag:"🇸🇨"},{code:"SD",name:"Sudan",flag:"🇸🇩"},{code:"SE",name:"Sweden",flag:"🇸🇪"},{code:"SG",name:"Singapore",flag:"🇸🇬"},{code:"SH",name:"Saint Helena",flag:"🇸🇭"},{code:"SI",name:"Slovenia",flag:"🇸🇮"},{code:"SJ",name:"Svalbard and Jan Mayen",flag:"🇸🇯"},{code:"SK",name:"Slovakia",flag:"🇸🇰"},{code:"SL",name:"Sierra Leone",flag:"🇸🇱"},{code:"SM",name:"San Marino",flag:"🇸🇲"},{code:"SN",name:"Senegal",flag:"🇸🇳"},{code:"SO",name:"Somalia",flag:"🇸🇴"},{code:"SR",name:"Suriname",flag:"🇸🇷"},{code:"SS",name:"South Sudan",flag:"🇸🇸"},{code:"ST",name:"São Tomé and Príncipe",flag:"🇸🇹"},{code:"SV",name:"El Salvador",flag:"🇸🇻"},{code:"SX",name:"Sint Maarten",flag:"🇸🇽"},{code:"SY",name:"Syria",flag:"🇸🇾"},{code:"SZ",name:"Eswatini",flag:"🇸🇿"},{code:"TC",name:"Turks and Caicos Islands",flag:"🇹🇨"},{code:"TD",name:"Chad",flag:"🇹🇩"},{code:"TF",name:"French Southern Territories",flag:"🇹🇫"},{code:"TG",name:"Togo",flag:"🇹🇬"},{code:"TH",name:"Thailand",flag:"🇹🇭"},{code:"TJ",name:"Tajikistan",flag:"🇹🇯"},{code:"TK",name:"Tokelau",flag:"🇹🇰"},{code:"TL",name:"East Timor",flag:"🇹🇱"},{code:"TM",name:"Turkmenistan",flag:"🇹🇲"},{code:"TN",name:"Tunisia",flag:"🇹🇳"},{code:"TO",name:"Tonga",flag:"🇹🇴"},{code:"TR",name:"Turkey",flag:"🇹🇷"},{code:"TT",name:"Trinidad and Tobago",flag:"🇹🇹"},{code:"TV",name:"Tuvalu",flag:"🇹🇻"},{code:"TW",name:"Taiwan",flag:"🇹🇼"},{code:"TZ",name:"Tanzania",flag:"🇹🇿"},{code:"UA",name:"Ukraine",flag:"🇺🇦"},{code:"UG",name:"Uganda",flag:"🇺🇬"},{code:"UM",name:"U.S. Minor Outlying Islands",flag:"🇺🇲"},{code:"US",name:"United States",flag:"🇺🇸",dialCode:"+1"},{code:"UY",name:"Uruguay",flag:"🇺🇾"},{code:"UZ",name:"Uzbekistan",flag:"🇺🇿"},{code:"VA",name:"Vatican City",flag:"🇻🇦"},{code:"VC",name:"Saint Vincent and the Grenadines",flag:"🇻🇨"},{code:"VE",name:"Venezuela",flag:"🇻🇪"},{code:"VG",name:"British Virgin Islands",flag:"🇻🇬"},{code:"VI",name:"U.S. Virgin Islands",flag:"🇻🇮"},{code:"VN",name:"Vietnam",flag:"🇻🇳"},{code:"VU",name:"Vanuatu",flag:"🇻🇺"},{code:"WF",name:"Wallis and Futuna",flag:"🇼🇫"},{code:"WS",name:"Samoa",flag:"🇼🇸"},{code:"YE",name:"Yemen",flag:"🇾🇪"},{code:"YT",name:"Mayotte",flag:"🇾🇹"},{code:"ZA",name:"South Africa",flag:"🇿🇦"},{code:"ZM",name:"Zambia",flag:"🇿🇲"},{code:"ZW",name:"Zimbabwe",flag:"🇿🇼"}],uv={US:[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"DC",name:"District of Columbia"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}],CA:[{code:"AB",name:"Alberta"},{code:"BC",name:"British Columbia"},{code:"MB",name:"Manitoba"},{code:"NB",name:"New Brunswick"},{code:"NL",name:"Newfoundland and Labrador"},{code:"NS",name:"Nova Scotia"},{code:"ON",name:"Ontario"},{code:"PE",name:"Prince Edward Island"},{code:"QC",name:"Quebec"},{code:"SK",name:"Saskatchewan"},{code:"NT",name:"Northwest Territories"},{code:"NU",name:"Nunavut"},{code:"YT",name:"Yukon"}],NG:[{code:"AB",name:"Abia"},{code:"AD",name:"Adamawa"},{code:"AK",name:"Akwa Ibom"},{code:"AN",name:"Anambra"},{code:"BA",name:"Bauchi"},{code:"BY",name:"Bayelsa"},{code:"BE",name:"Benue"},{code:"BO",name:"Borno"},{code:"CR",name:"Cross River"},{code:"DE",name:"Delta"},{code:"EB",name:"Ebonyi"},{code:"ED",name:"Edo"},{code:"EK",name:"Ekiti"},{code:"EN",name:"Enugu"},{code:"FC",name:"Federal Capital Territory"},{code:"GO",name:"Gombe"},{code:"IM",name:"Imo"},{code:"JI",name:"Jigawa"},{code:"KD",name:"Kaduna"},{code:"KN",name:"Kano"},{code:"KT",name:"Katsina"},{code:"KE",name:"Kebbi"},{code:"KO",name:"Kogi"},{code:"KW",name:"Kwara"},{code:"LA",name:"Lagos"},{code:"NA",name:"Nasarawa"},{code:"NI",name:"Niger"},{code:"OG",name:"Ogun"},{code:"ON",name:"Ondo"},{code:"OS",name:"Osun"},{code:"OY",name:"Oyo"},{code:"PL",name:"Plateau"},{code:"RI",name:"Rivers"},{code:"SO",name:"Sokoto"},{code:"TA",name:"Taraba"},{code:"YO",name:"Yobe"},{code:"ZA",name:"Zamfara"}],AU:[{code:"NSW",name:"New South Wales"},{code:"QLD",name:"Queensland"},{code:"SA",name:"South Australia"},{code:"TAS",name:"Tasmania"},{code:"VIC",name:"Victoria"},{code:"WA",name:"Western Australia"},{code:"ACT",name:"Australian Capital Territory"},{code:"NT",name:"Northern Territory"}],IN:[{code:"AP",name:"Andhra Pradesh"},{code:"AR",name:"Arunachal Pradesh"},{code:"AS",name:"Assam"},{code:"BR",name:"Bihar"},{code:"CT",name:"Chhattisgarh"},{code:"GA",name:"Goa"},{code:"GJ",name:"Gujarat"},{code:"HR",name:"Haryana"},{code:"HP",name:"Himachal Pradesh"},{code:"JH",name:"Jharkhand"},{code:"KA",name:"Karnataka"},{code:"KL",name:"Kerala"},{code:"MP",name:"Madhya Pradesh"},{code:"MH",name:"Maharashtra"},{code:"MN",name:"Manipur"},{code:"ML",name:"Meghalaya"},{code:"MZ",name:"Mizoram"},{code:"NL",name:"Nagaland"},{code:"OR",name:"Odisha"},{code:"PB",name:"Punjab"},{code:"RJ",name:"Rajasthan"},{code:"SK",name:"Sikkim"},{code:"TN",name:"Tamil Nadu"},{code:"TG",name:"Telangana"},{code:"TR",name:"Tripura"},{code:"UP",name:"Uttar Pradesh"},{code:"UT",name:"Uttarakhand"},{code:"WB",name:"West Bengal"},{code:"AN",name:"Andaman and Nicobar Islands"},{code:"CH",name:"Chandigarh"},{code:"DN",name:"Dadra and Nagar Haveli"},{code:"DD",name:"Daman and Diu"},{code:"DL",name:"Delhi"},{code:"JK",name:"Jammu and Kashmir"},{code:"LA",name:"Ladakh"},{code:"LD",name:"Lakshadweep"},{code:"PY",name:"Puducherry"}]},IT=e=>fd.find(t=>t.name.toLowerCase()===e.toLowerCase()),FT=e=>{const t=IT(e);return(t==null?void 0:t.flag)||"🏴"},OT=va({userType:md(["viewer","school"]),username:Wt().min(3,"Username must be at least 3 characters"),password:Wt().min(6,"Password must be at least 6 characters"),confirmPassword:Wt().min(1,"Confirm password is required"),firstName:Wt().min(1,"First name is required"),middleName:Wt().optional(),lastName:Wt().min(1,"Last name is required"),dateOfBirth:Wt().min(1,"Date of birth is required"),email:Wt().email("Valid email is required"),countryCode:Wt().optional(),phoneNumber:Wt().optional()}).refine(e=>e.userType==="viewer"?!e.phoneNumber||e.phoneNumber===""?!1:/^\d{10}$/.test(e.phoneNumber):e.phoneNumber&&e.phoneNumber!==""?/^\d{10}$/.test(e.phoneNumber):!0,{message:"Phone number is required for viewer accounts and must be 10 digits",path:["phoneNumber"]}).refine(e=>e.password===e.confirmPassword,{message:"Passwords must match",path:["confirmPassword"]});function LT(){const[,e]=us(),[t,r]=d.useState(null),{toast:n}=ks(),[a,i]=d.useState(null),[o,l]=d.useState(""),[c,u]=d.useState(!1),m=d.useRef(null);d.useEffect(()=>{function N(f){m.current&&!m.current.contains(f.target)&&u(!1)}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]);const h=cl({resolver:ul(OT),defaultValues:{username:"",password:"",confirmPassword:"",firstName:"",middleName:"",lastName:"",dateOfBirth:"",email:"",countryCode:"",phoneNumber:""}}),p=nt({mutationFn:async N=>{const f=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!f.ok){const j=await f.json();throw new Error(j.message||"Signup failed")}return f.json()},onSuccess:N=>{localStorage.setItem("user",JSON.stringify(N.user)),n({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Account created successfully!",description:"Welcome to the E-Yearbook platform."}),N.user.userType==="viewer"?e("/viewer-dashboard"):N.user.userType==="school"&&e("/school-dashboard")},onError:N=>{n({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Signup failed",description:N.message,variant:"destructive"})}}),y=N=>{let f={...N};if(N.countryCode&&N.phoneNumber){const j=N.countryCode.replace(/^\+/,"");f.phoneNumber=`+${j}${N.phoneNumber}`}else N.phoneNumber||(f.phoneNumber="");delete f.countryCode,p.mutate(f)};return t?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsxs(ge,{className:"w-full max-w-md relative z-10 bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"text-center",children:[s.jsxs(T,{variant:"ghost",onClick:()=>r(null),className:"mb-4 text-blue-200 hover:text-white hover:bg-white/20 self-start",children:[s.jsx(_s,{className:"w-4 h-4 mr-2"}),"Back to Account Types"]}),s.jsxs("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-4",children:[t==="viewer"&&s.jsx(zs,{className:"text-white text-lg"}),t==="school"&&s.jsx(al,{className:"text-white text-lg"})]}),s.jsxs(tt,{className:"text-2xl font-bold text-white",children:["Create ",t==="viewer"?"Viewer/Alumni":"School Administrator"," Account"]}),s.jsx(Yi,{className:"text-blue-100",children:"Fill in the details below to create your account"})]}),s.jsx(be,{children:s.jsx(dl,{...h,children:s.jsxs("form",{onSubmit:h.handleSubmit(y),className:"space-y-4",children:[s.jsx(fs,{control:h.control,name:"username",render:({field:N})=>s.jsxs(rs,{children:[s.jsx(qt,{children:"Username *"}),s.jsx(ns,{children:s.jsx(xe,{placeholder:"Enter username",...N,"data-testid":"input-username"})}),s.jsx(as,{})]})}),s.jsx(fs,{control:h.control,name:"password",render:({field:N})=>s.jsxs(rs,{children:[s.jsx(qt,{children:"Password *"}),s.jsx(ns,{children:s.jsx(xe,{type:"password",placeholder:"Enter password",...N,"data-testid":"input-password"})}),s.jsx(as,{})]})}),t==="viewer"&&s.jsx(fs,{control:h.control,name:"confirmPassword",render:({field:N})=>s.jsxs(rs,{children:[s.jsx(qt,{children:"Confirm Password *"}),s.jsx(ns,{children:s.jsx(xe,{type:"password",placeholder:"Confirm password",...N,"data-testid":"input-confirm-password"})}),s.jsx(as,{})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsx(fs,{control:h.control,name:"firstName",render:({field:N})=>s.jsxs(rs,{children:[s.jsx(qt,{children:"First Name *"}),s.jsx(ns,{children:s.jsx(xe,{placeholder:"First name",...N,"data-testid":"input-first-name"})}),s.jsx(as,{})]})}),s.jsx(fs,{control:h.control,name:"lastName",render:({field:N})=>s.jsxs(rs,{children:[s.jsx(qt,{children:"Last Name *"}),s.jsx(ns,{children:s.jsx(xe,{placeholder:"Last name",...N,"data-testid":"input-last-name"})}),s.jsx(as,{})]})})]}),s.jsx(fs,{control:h.control,name:"middleName",render:({field:N})=>s.jsxs(rs,{children:[s.jsx(qt,{children:"Middle Name (Optional)"}),s.jsx(ns,{children:s.jsx(xe,{placeholder:"Middle name",...N,"data-testid":"input-middle-name"})}),s.jsx(as,{})]})}),s.jsx(fs,{control:h.control,name:"dateOfBirth",render:({field:N})=>s.jsxs(rs,{children:[s.jsx(qt,{children:"Date of Birth *"}),s.jsx(ns,{children:s.jsx(xe,{type:"date",...N,max:new Date().toISOString().split("T")[0],"data-testid":"input-date-of-birth"})}),s.jsx(as,{})]})}),s.jsx(fs,{control:h.control,name:"email",render:({field:N})=>s.jsxs(rs,{children:[s.jsx(qt,{children:"Email Address *"}),s.jsx(ns,{children:s.jsx(xe,{type:"email",placeholder:"Enter email",...N,"data-testid":"input-email"})}),s.jsx(as,{})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ue,{className:"text-sm font-medium",children:["Phone Number ",t==="viewer"?"*":"(Optional)"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("div",{className:"w-24 sm:w-32 relative",ref:m,children:[s.jsx(T,{type:"button",variant:"outline",className:"w-full justify-between h-10 px-2 sm:px-3 text-xs sm:text-sm",onClick:()=>u(!c),"data-testid":"button-country-code",children:s.jsx("span",{className:"flex items-center space-x-1",children:a?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs hidden sm:inline",children:a.flag}),s.jsx("span",{className:"text-xs",children:a.dialCode})]}):s.jsx("span",{className:"text-xs text-gray-500",children:"Code"})})}),c&&s.jsxs("div",{className:"absolute z-50 w-64 mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-gray-200",children:s.jsx(xe,{type:"text",placeholder:"Search countries...",value:o,onChange:N=>l(N.target.value),className:"w-full h-8","data-testid":"input-country-search"})}),s.jsx("div",{className:"max-h-40 overflow-y-auto",children:fd.filter(N=>N.name.toLowerCase().includes(o.toLowerCase())||N.dialCode&&N.dialCode.includes(o)).map(N=>s.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-100 flex items-center space-x-2 text-xs",onClick:()=>{var f;i(N),h.setValue("countryCode",(f=N.dialCode)==null?void 0:f.replace(/^\+/,"")),u(!1),l("")},"data-testid":`option-country-${N.code}`,children:[s.jsx("span",{children:N.flag}),s.jsx("span",{children:N.dialCode}),s.jsx("span",{className:"truncate",children:N.name})]},N.code))})]})]}),s.jsx(fs,{control:h.control,name:"phoneNumber",render:({field:N})=>s.jsxs(rs,{className:"flex-1",children:[s.jsx(ns,{children:s.jsx(xe,{placeholder:"Phone number",maxLength:10,type:"tel",...N,"data-testid":"input-phone-number"})}),s.jsx(as,{})]})})]})]}),s.jsx(T,{type:"submit",className:"w-full",disabled:p.isPending,"data-testid":"button-create-account",children:p.isPending?s.jsxs(s.Fragment,{children:[s.jsx(xr,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Account..."]}):"Create Account"})]})})})]})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsxs("div",{className:"w-full max-w-2xl space-y-8 relative z-10",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs(T,{variant:"ghost",onClick:()=>e("/"),className:"mb-6 text-blue-600 hover:text-blue-800",children:[s.jsx(_s,{className:"w-4 h-4 mr-2"}),"Back to Login"]}),s.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Create Your Account"}),s.jsx("p",{className:"text-lg text-blue-100",children:"Choose the type of account you'd like to create"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs(ge,{className:"bg-green-500/20 backdrop-blur-lg border border-green-200 shadow-2xl cursor-pointer transition-all hover:bg-white/15 hover:scale-105 hover:border-green-400 hover:shadow-green-500/50 hover:shadow-lg hover:scale-105 transition-all duration-200",onClick:()=>e("/viewer-signup"),children:[s.jsxs(et,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-green-500/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(zs,{className:"w-8 h-8 text-green-500"})}),s.jsx(tt,{className:"text-xl text-green-500",children:"Viewer/Alumni"}),s.jsx(Yi,{className:"text-sm text-green-50",children:"Browse school yearbooks and memories as a parent, alumni, or external viewer"})]}),s.jsx(be,{className:"pt-0",children:s.jsxs("ul",{className:"text-sm text-green-50 space-y-2",children:[s.jsx("li",{children:"• Browse multiple schoolss"}),s.jsx("li",{children:"• View yearbook memories"}),s.jsx("li",{children:"• Access public galleries"}),s.jsx("li",{children:"• Cross-year navigation"})]})})]}),s.jsxs(ge,{className:"bg-orange-500/20 backdrop-blur-lg border border-orange-200 shadow-2xl cursor-pointer transition-all hover:bg-orange-310 hover:scale-105 hover:border-orange-400 hover:shadow-orange-500/50 hover:shadow-lg hover:scale-105 transition-all duration-200",onClick:()=>e("/school-signup"),children:[s.jsxs(et,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-orange-100 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(al,{className:"w-8 h-8 text-orange-500"})}),s.jsx(tt,{className:"text-xl text-orange-500",children:"School Administrator"}),s.jsx(Yi,{className:"text-sm text-orange-50",children:"Register your school and manage yearbooks, and memories"})]}),s.jsx(be,{className:"pt-0",children:s.jsxs("ul",{className:"text-sm text-orange-50 space-y-2",children:[s.jsx("li",{children:"• Manage school profile"}),s.jsx("li",{children:"• Approve alumni"}),s.jsx("li",{children:"• Upload school memories"})]})})]})]})]})]})}const $n=2026,$T=16.99,hv=1800;function zT(){const[,e]=us(),{toast:t}=ks(),[r,n]=d.useState(1),[a,i]=d.useState([]),[o,l]=d.useState(null),[c,u]=d.useState(!1),[m,h]=d.useState(""),[p,y]=d.useState(null),[N,f]=d.useState(null),[j,b]=d.useState(""),[x,w]=d.useState(""),[C,S]=d.useState(!1),[M,A]=d.useState(!1),[R,z]=d.useState(null),[$,W]=d.useState(""),[G,X]=d.useState(!1),[P,L]=d.useState(!1),[_,V]=d.useState({schoolName:"",yearFounded:"",website:"",country:"",state:"",city:"",address:"",email:"",phoneNumber:"",countryCode:"",registrationNumber:"",accreditationDocument:null,adminUsername:"",adminPassword:"",confirmPassword:""}),E=d.useRef(null);d.useEffect(()=>{function Q(te){E.current&&!E.current.contains(te.target)&&X(!1)}return document.addEventListener("mousedown",Q),()=>{document.removeEventListener("mousedown",Q)}},[]);const Y=fd.filter(Q=>Q.name.toLowerCase().includes($.toLowerCase())||Q.dialCode&&Q.dialCode.includes($)),Z=(Q,te)=>{V(ve=>({...ve,[Q]:te}))},ne=Q=>{switch(h(""),Q){case 1:if(!_.schoolName||!_.yearFounded)return h("Please fill in all required fields for school information"),!1;const te=parseInt(_.yearFounded);if(te>$n)return h(`Founding year cannot be in the future (current year is ${$n})`),!1;if(te<1800)return h("Please enter a valid founding year"),!1;break;case 2:if(!p||!_.city)return h("Please fill in all required location fields"),!1;if(p&&uv[p.code]&&!N)return h("Please select a state/province"),!1;break;case 3:if(!_.email||!_.phoneNumber||!_.countryCode)return h("Please fill in all required contact information"),!1;if(_.phoneNumber&&!/^\d{10}$/.test(_.phoneNumber))return h("Phone number must be 10 digits"),!1;break;case 4:if(!_.registrationNumber)return h("Please enter the registration number"),!1;break;case 5:if(!_.adminUsername||!_.adminPassword||!_.confirmPassword)return h("Please fill in all required account setup fields"),!1;if(_.adminPassword!==_.confirmPassword)return h("Passwords do not match"),!1;break}return!0},oe=()=>{if(ne(r)&&(i(Q=>[...Q.filter(te=>te!==r),r]),r<5)){const Q=r+1;n(Q),h(""),Q===3&&p&&!R&&(z(p),Z("countryCode",p.dialCode||""))}},pe=()=>{r>1&&(n(r-1),h(""))},he=async Q=>{if(Q.preventDefault(),!!ne(5)){u(!0),h("");try{const te=new FormData;te.append("username",_.adminUsername),te.append("password",_.adminPassword),te.append("schoolName",_.schoolName),te.append("country",(p==null?void 0:p.name)||""),te.append("state",(N==null?void 0:N.name)||""),te.append("city",_.city),te.append("email",_.email);const ve=`+${_.countryCode.replace(/^\+/,"")}${_.phoneNumber}`;te.append("phoneNumber",ve),te.append("website",_.website),te.append("address",_.address),te.append("yearFounded",_.yearFounded),te.append("registrationNumber",_.registrationNumber),_.accreditationDocument&&te.append("accreditationDocument",_.accreditationDocument);const we=await fetch("/api/auth/school-register",{method:"POST",body:te}),Ne=await we.json();we.ok?(l({user:null,school:Ne.school}),t({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Registration Submitted!",description:"Your school registration has been submitted for approval."})):h(Ne.message||"Registration failed")}catch{h("Registration failed. Please try again.")}finally{u(!1)}}};d.useEffect(()=>{p&&!j&&b(p.name)},[p,j]),d.useEffect(()=>{N&&!x&&w(N.name)},[N,x]);const B=fd.filter(Q=>Q.name.toLowerCase().includes(j.toLowerCase())),K=p?uv[p.code]||[]:[],re=K.filter(Q=>Q.name.toLowerCase().includes(x.toLowerCase())),ye=()=>s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4,5].map(Q=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs sm:text-sm font-medium ${Q===r?"bg-blue-500/70 backdrop-blur-lg text-white border border-blue-400/30":a.includes(Q)?"bg-green-500/70 backdrop-blur-lg text-white border border-green-400/30":"bg-white/20 backdrop-blur-lg text-white/70 border border-white/30"}`,children:a.includes(Q)?s.jsx(js,{className:"w-3 h-3 sm:w-4 sm:h-4"}):Q}),Q<5&&s.jsx("div",{className:`w-4 sm:w-12 h-1 ${a.includes(Q)?"bg-green-500/70 backdrop-blur-lg":"bg-white/20 backdrop-blur-lg"}`})]},Q))}),s.jsxs("div",{className:"hidden sm:flex justify-between mt-2 text-xs text-white",children:[s.jsx("span",{children:"School Info"}),s.jsx("span",{children:"Location"}),s.jsx("span",{children:"Contact"}),s.jsx("span",{children:"Verification"}),s.jsx("span",{children:"Account"})]}),s.jsx("div",{className:"flex sm:hidden justify-center mt-2 text-xs text-white",children:s.jsxs("span",{children:["Step ",r," of 5"]})})]});return o?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"w-full max-w-md relative z-10",children:s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(bn,{className:"w-8 h-8 text-green-600"})}),s.jsx(tt,{className:"text-2xl text-white",children:"Registration Submitted!"}),s.jsx(Yi,{className:"text-white ",children:"Your school registration has been submitted for approval by our administrators."})]}),s.jsxs(be,{className:"space-y-4",children:[s.jsx($l,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsx(zl,{className:"text-blue-50",children:"Your request will be reviewed. You will receive an email notification in 3-5 business days."})}),s.jsx("div",{className:"text-center",children:s.jsxs(T,{onClick:()=>e("/"),variant:"outline",className:"w-full","data-testid":"button-return-home",children:[s.jsx(_s,{className:"w-4 h-4 mr-2"}),"Return to Home"]})})]})]})})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"w-full max-w-2xl relative z-10",children:s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(al,{className:"w-8 h-8 text-orange-600"})}),s.jsx(tt,{className:"text-2xl text-white",children:"School Registration"}),s.jsxs(Yi,{className:"text-white",children:["Step ",r," of 5: ",r===1?"School Information":r===2?"Location Details":r===3?"Contact Information":r===4?"Verification Documents":"Account Setup"]})]}),s.jsxs(be,{children:[s.jsx(ye,{}),m&&s.jsx($l,{className:"mb-4",variant:"destructive",children:s.jsx(zl,{children:m})}),s.jsxs("form",{onSubmit:he,children:[r===1&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"School Information"}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"School Name"}),s.jsx(ue,{className:"text-sm font-medium text-red-500",children:" *"}),s.jsx(xe,{type:"text",value:_.schoolName,onChange:Q=>Z("schoolName",Q.target.value),required:!0,placeholder:"",className:"mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-school-name"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Founding Year"}),s.jsx(ue,{className:"text-sm font-medium text-red-500",children:" *"}),s.jsx(xe,{type:"number",value:_.yearFounded,onChange:Q=>Z("yearFounded",Q.target.value),required:!0,placeholder:"",min:"1800",max:$n,className:"mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-year-founded"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"School Website (Optional)"}),s.jsx(xe,{type:"url",value:_.website,onChange:Q=>Z("website",Q.target.value),placeholder:"",className:"mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-website"})]})]}),r===2&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white border-b pb-2",children:"Location Details"}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Country"}),s.jsx(ue,{className:"text-sm font-medium text-red-500",children:" *"}),s.jsxs("div",{className:"relative mt-1",children:[s.jsxs("div",{className:"flex items-center w-full px-3 py-2 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20 rounded-md cursor-pointer hover:border-white/40",onClick:()=>S(!C),"data-testid":"select-country",children:[s.jsx(ds,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("input",{type:"text",value:j,onChange:Q=>b(Q.target.value),placeholder:"Search countries...",className:"flex-1 outline-none bg-transparent",onFocus:()=>S(!0)})]}),C&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-blue-700/100 backdrop-blur-lg border border-white/20 rounded-md shadow-lg max-h-60 overflow-auto text-white",children:B.map(Q=>s.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 hover:text-black cursor-pointer",onClick:()=>{y(Q),b(Q.name),S(!1),f(null),w(""),Z("country",Q.name)},children:Q.name},Q.code))})]})]}),p&&K.length>0&&s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"State/Province"}),s.jsx(ue,{className:"text-sm font-medium text-red-500",children:" *"}),s.jsxs("div",{className:"relative mt-1",children:[s.jsxs("div",{className:"flex items-center w-full px-3 py-2 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20 rounded-md cursor-pointer hover:border-white/40",onClick:()=>A(!M),"data-testid":"select-state",children:[s.jsx(ds,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("input",{type:"text",value:x,onChange:Q=>w(Q.target.value),placeholder:"",className:"flex-1 outline-none bg-transparent",onFocus:()=>A(!0)})]}),M&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-blue-700/100 backdrop-blur-lg border border-white/20 text-white rounded-md shadow-lg max-h-60 overflow-auto",children:re.map(Q=>s.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 hover:text-black cursor-pointer",onClick:()=>{f(Q),w(Q.name),A(!1),Z("state",Q.name)},children:Q.name},Q.code))})]})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"City"}),s.jsx(ue,{className:"text-sm font-medium text-red-500",children:" *"}),s.jsx(xe,{type:"text",value:_.city,onChange:Q=>Z("city",Q.target.value),required:!0,placeholder:"",className:"mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20 rounded-md cursor-pointer hover:border-white/40","data-testid":"input-city"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Address (Optional)"}),s.jsx(xe,{type:"text",value:_.address,onChange:Q=>Z("address",Q.target.value),placeholder:"",className:"mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20 rounded-md cursor-pointer hover:border-white/40","data-testid":"input-address"})]})]}),r===3&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white border-b pb-2",children:"Contact Information"}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"School Email"}),s.jsx(ue,{className:"text-sm font-medium text-red-500",children:" *"}),s.jsx(xe,{type:"email",value:_.email,onChange:Q=>Z("email",Q.target.value),required:!0,placeholder:"school@example.com",className:"mt-1 placeholder:text-white/50 bg-white/10 backdrop-blur-lg border border-white/20 text-white focus:border-white/40 focus:ring-white/20","data-testid":"input-email"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"School Phone Number"}),s.jsx(ue,{className:"text-sm font-medium text-red-500",children:" *"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsxs("div",{className:"relative w-32",ref:E,children:[s.jsxs(T,{type:"button",variant:"outline",onClick:()=>X(!G),className:"w-full justify-between h-10 placeholder:text-white/50 bg-white/10 backdrop-blur-lg border border-white/20 text-white focus:border-white/40 focus:ring-white/20","data-testid":"button-country-code",children:[R?R.dialCode:"Code",s.jsx(ds,{className:"h-4 w-4"})]}),G&&s.jsxs("div",{className:"absolute top-full left-0 right-0 z-50 bg-blue-700/100 text-white backdrop-blur-lg border border-white/20 border rounded-md shadow-lg max-h-60 overflow-auto",children:[s.jsx("div",{className:"p-2 border-b",children:s.jsx(xe,{type:"text",placeholder:"Search",value:$,onChange:Q=>W(Q.target.value),className:"h-8 bg-blue-400/60 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20 "})}),s.jsx("div",{className:"py-1",children:Y.map(Q=>s.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-100 hover:text-black text-sm",onClick:()=>{z(Q),Z("countryCode",Q.dialCode||""),X(!1),W("")},children:[s.jsx("span",{className:"font-medium",children:Q.dialCode})," ",Q.name]},Q.code))})]})]}),s.jsx(xe,{type:"tel",value:_.phoneNumber,onChange:Q=>Z("phoneNumber",Q.target.value.replace(/\D/g,"")),required:!0,placeholder:"XXXXXXXXXX",maxLength:10,className:"flex-1 placeholder:text-white/50 bg-white/10 backdrop-blur-lg border border-white/20 text-white focus:border-white/40 focus:ring-white/20","data-testid":"input-phone-number"})]}),s.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Ensure the phone number is correct"})]})]}),r===4&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-50 border-b pb-2",children:"Verification Information"}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-blue-50",children:"Registration Number"}),s.jsx(ue,{className:"text-sm font-medium text-red-500",children:" *"}),s.jsx(xe,{type:"text",value:_.registrationNumber,onChange:Q=>Z("registrationNumber",Q.target.value),required:!0,placeholder:"",className:"mt-1 placeholder:text-white/50 bg-white/10 backdrop-blur-lg border border-white/20 text-white focus:border-white/40 focus:ring-white/20","data-testid":"input-registration-number"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Proof of Accreditation (Optional)"}),s.jsxs("div",{className:"mt-1",children:[s.jsx("div",{className:"flex items-center justify-center w-full",children:s.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-white/10 hover:bg-gray-100 backdrop-blur-lg",children:[s.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[s.jsx(is,{className:"w-8 h-8 mb-2 text-white"}),s.jsxs("p",{className:"mb-2 text-sm text-white",children:[s.jsx("span",{className:"font-semibold text-white",children:"Click to upload"})," accreditation document"]}),s.jsx("p",{className:"text-xs text-blue-50",children:"PDF, PNG, JPG or JPEG (MAX. 10MB)"})]}),s.jsx("input",{type:"file",className:"hidden ",accept:".pdf,.png,.jpg,.jpeg",onChange:Q=>{var ve;const te=((ve=Q.target.files)==null?void 0:ve[0])||null;Z("accreditationDocument",te)},"data-testid":"input-accreditation-document"})]})}),_.accreditationDocument&&s.jsxs("p",{className:"mt-2 text-sm text-green-600",children:["Selected: ",_.accreditationDocument.name]})]})]})]}),r===5&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-50 border-b pb-2",children:"Account Setup"}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Administrator Username"}),s.jsx(ue,{className:"text-sm font-medium text-red-500",children:" *"}),s.jsx(xe,{type:"text",value:_.adminUsername,onChange:Q=>Z("adminUsername",Q.target.value),required:!0,placeholder:"",className:"mt-1 placeholder:text-white/50 bg-white/10 backdrop-blur-lg border border-white/20 text-white focus:border-white/40 focus:ring-white/20","data-testid":"input-admin-username"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Administrator Password"}),s.jsx(ue,{className:"text-sm font-medium text-red-500",children:" *"}),s.jsx(xe,{type:"password",value:_.adminPassword,onChange:Q=>Z("adminPassword",Q.target.value),required:!0,placeholder:"",className:"mt-1 placeholder:text-white/50 bg-white/10 backdrop-blur-lg border border-white/20 text-white focus:border-white/40 focus:ring-white/20","data-testid":"input-admin-password"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Confirm Password"}),s.jsx(ue,{className:"text-sm font-medium text-red-500",children:" *"}),s.jsx(xe,{type:"password",value:_.confirmPassword,onChange:Q=>Z("confirmPassword",Q.target.value),required:!0,placeholder:"",className:"mt-1 placeholder:text-white/50 bg-white/10 backdrop-blur-lg border border-white/20 text-white focus:border-white/40 focus:ring-white/20","data-testid":"input-confirm-password"})]})]}),s.jsxs("div",{className:"flex justify-between mt-8",children:[s.jsxs(T,{type:"button",variant:"outline",onClick:pe,disabled:r===1,"data-testid":"button-previous",children:[s.jsx(_s,{className:"w-4 h-4 mr-2"}),"Previous"]}),r<5?s.jsxs(T,{type:"button",onClick:oe,"data-testid":"button-next",children:["Next",s.jsx(zx,{className:"w-4 h-4 ml-2"})]}):s.jsx(T,{type:"submit",disabled:c,"data-testid":"button-submit",children:c?s.jsxs(s.Fragment,{children:[s.jsx(xr,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):"Submit Registration"})]})]}),s.jsx("div",{className:"text-center mt-6 text-white",children:s.jsxs(T,{variant:"ghost",onClick:()=>e("/"),"data-testid":"button-back-home",children:[s.jsx(_s,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})]})]})})]})}function Od(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Nm="Checkbox",[UT]=cr(Nm),[VT,dg]=UT(Nm);function BT(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:m="on",internal_do_not_use_render:h}=e,[p,y]=qn({prop:r,defaultProp:a??!1,onChange:c,caller:Nm}),[N,f]=d.useState(null),[j,b]=d.useState(null),x=d.useRef(!1),w=N?!!o||!!N.closest("form"):!0,C={checked:p,disabled:i,setChecked:y,control:N,setControl:f,name:l,form:o,value:m,hasConsumerStoppedPropagationRef:x,required:u,defaultChecked:li(a)?!1:a,isFormControl:w,bubbleInput:j,setBubbleInput:b};return s.jsx(VT,{scope:t,...C,children:qT(h)?h(C):n})}var W3="CheckboxTrigger",K3=d.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:m,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:y,bubbleInput:N}=dg(W3,e),f=xt(a,m),j=d.useRef(c);return d.useEffect(()=>{const b=i==null?void 0:i.form;if(b){const x=()=>h(j.current);return b.addEventListener("reset",x),()=>b.removeEventListener("reset",x)}},[i,h]),s.jsx(Xe.button,{type:"button",role:"checkbox","aria-checked":li(c)?"mixed":c,"aria-required":u,"data-state":J3(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:f,onKeyDown:We(t,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:We(r,b=>{h(x=>li(x)?!0:!x),N&&y&&(p.current=b.isPropagationStopped(),p.current||b.stopPropagation())})})});K3.displayName=W3;var ug=d.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:m,...h}=e;return s.jsx(BT,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:n,form:m,value:c,internal_do_not_use_render:({isFormControl:p})=>s.jsxs(s.Fragment,{children:[s.jsx(K3,{...h,ref:t,__scopeCheckbox:r}),p&&s.jsx(X3,{__scopeCheckbox:r})]})})});ug.displayName=Nm;var G3="CheckboxIndicator",Q3=d.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=dg(G3,r);return s.jsx(ya,{present:n||li(i.checked)||i.checked===!0,children:s.jsx(Xe.span,{"data-state":J3(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});Q3.displayName=G3;var Z3="CheckboxBubbleInput",X3=d.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:m,form:h,bubbleInput:p,setBubbleInput:y}=dg(Z3,e),N=xt(r,y),f=Od(i),j=Id(n);d.useEffect(()=>{const x=p;if(!x)return;const w=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(w,"checked").set,M=!a.current;if(f!==i&&S){const A=new Event("click",{bubbles:M});x.indeterminate=li(i),S.call(x,li(i)?!1:i),x.dispatchEvent(A)}},[p,f,i,a]);const b=d.useRef(li(i)?!1:i);return s.jsx(Xe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:l,disabled:c,name:u,value:m,form:h,...t,tabIndex:-1,ref:N,style:{...t.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});X3.displayName=Z3;function qT(e){return typeof e=="function"}function li(e){return e==="indeterminate"}function J3(e){return li(e)?"indeterminate":e?"checked":"unchecked"}const hg=d.forwardRef(({className:e,...t},r)=>s.jsx(ug,{ref:r,className:$e("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(Q3,{className:$e("flex items-center justify-center text-current"),children:s.jsx(js,{className:"h-4 w-4"})})}));hg.displayName=ug.displayName;function HT(){const[,e]=us(),{toast:t}=ks(),[r,n]=d.useState(1),[a,i]=d.useState([]),[o,l]=d.useState(!1),[c,u]=d.useState(!1),[m,h]=d.useState(""),[p,y]=d.useState(!1),[N,f]=d.useState(null),[j,b]=d.useState(""),[x,w]=d.useState(!1),C=d.useRef(null),[S,M]=d.useState({firstName:"",middleName:"",lastName:"",dateOfBirth:"",phoneNumber:"",countryCode:"",email:"",username:"",password:"",confirmPassword:""});d.useEffect(()=>{function P(L){C.current&&!C.current.contains(L.target)&&w(!1)}return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[]);const A=fd.filter(P=>P.name.toLowerCase().includes(j.toLowerCase())||P.dialCode&&P.dialCode.includes(j)),R=(P,L)=>{M(_=>({..._,[P]:L}))},z=P=>{switch(h(""),P){case 1:if(!S.firstName||!S.lastName)return h("First name and last name are required"),!1;if(!S.dateOfBirth)return h("Date of birth is required"),!1;if(new Date(S.dateOfBirth)>new Date)return h("Date of birth cannot be in the future"),!1;break;case 2:if(!S.email||!/\S+@\S+\.\S+/.test(S.email))return h("Valid email is required"),!1;if(!S.phoneNumber||!/^\d{10}$/.test(S.phoneNumber))return h("Phone number is required and must be 10 digits"),!1;if(!S.countryCode)return h("Country code is required for phone number"),!1;break;case 3:if(!S.username||S.username.length<3)return h("Username must be at least 3 characters"),!1;if(!S.password||S.password.length<6)return h("Password must be at least 6 characters"),!1;if(S.password!==S.confirmPassword)return h("Passwords must match"),!1;if(!p)return h("You must agree to the terms and conditions"),!1;break}return!0},$=()=>{z(r)&&(i(P=>[...P.filter(L=>L!==r),r]),r<3&&(n(r+1),h("")))},W=()=>{r>1&&(n(r-1),h(""))},G=async P=>{if(P.preventDefault(),!!z(3)){u(!0),h("");try{const L=`+${S.countryCode.replace(/^\+/,"")}${S.phoneNumber}`,_=`${S.firstName}${S.middleName?` ${S.middleName}`:""} ${S.lastName}`,V=await rt("POST","/api/auth/signup",{userType:"viewer",username:S.username,password:S.password,firstName:S.firstName,middleName:S.middleName||"",lastName:S.lastName,fullName:_,dateOfBirth:S.dateOfBirth,email:S.email,phoneNumber:L});if(V.ok)l(!0),t({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Account Created!",description:"Your viewer/alumni account has been created successfully."});else{const E=await V.json();h(E.message||"Registration failed. Please try again.")}}catch{h("Registration failed. Please try again.")}finally{u(!1)}}},X=()=>s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsx("div",{className:"flex items-center justify-between",children:[1,2,3].map(P=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-xs sm:text-sm font-medium transition-all duration-300 ${P===r?"bg-blue-600 text-white shadow-lg scale-110":a.includes(P)?"bg-green-600 text-white shadow-md":"bg-white/20 text-white border-2 border-white/30"}`,children:a.includes(P)?s.jsx(js,{className:"w-4 h-4 sm:w-5 sm:h-5"}):P}),P<3&&s.jsx("div",{className:`w-8 sm:w-16 h-1 mx-1 sm:mx-2 rounded-full transition-all duration-300 ${a.includes(P)?"bg-green-600":"bg-white/20"}`})]},P))}),s.jsxs("div",{className:"flex justify-between mt-2 sm:mt-3 text-xs sm:text-sm text-white/80 font-medium",children:[s.jsx("span",{className:"text-center",children:"Personal"}),s.jsx("span",{className:"text-center",children:"Contact"}),s.jsx("span",{className:"text-center",children:"Account"})]})]});return o?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"w-full max-w-md relative z-10",children:s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsx(be,{className:"pt-6",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(bn,{className:"h-8 w-8 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Account Created Successfully!"}),s.jsx("p",{className:"text-sm text-white/80 mt-2",children:"Your viewer/alumni account has been created. You can now log in and start exploring school yearbooks and memories."})]}),s.jsx(T,{onClick:()=>e("/"),className:"w-full bg-green-600 hover:bg-green-700","data-testid":"button-continue-login",children:"Continue to Login"})]})})})})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"w-full max-w-2xl relative z-10",children:s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"text-center",children:[s.jsxs(T,{variant:"ghost",onClick:()=>e("/signup"),className:"mb-4 text-white hover:text-white/80 self-start hover:bg-white/10","data-testid":"button-back-to-signup",children:[s.jsx(_s,{className:"w-4 h-4 mr-2"}),"Back to Account Selection"]}),s.jsx("div",{className:"w-16 h-16 bg-green-500/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(zs,{className:"w-8 h-8 text-green-500"})}),s.jsx(tt,{className:"text-2xl text-white",children:"Viewer/Alumni Registration"}),s.jsxs(Yi,{className:"text-white/80",children:["Step ",r," of 3: ",r===1?"Personal Information":r===2?"Contact Information":"Account Setup"]})]}),s.jsxs(be,{children:[s.jsx(X,{}),m&&s.jsx($l,{className:"mb-4 bg-red-500/10 border-red-500/20 backdrop-blur-lg",variant:"destructive",children:s.jsx(zl,{className:"text-red-200",children:m})}),s.jsxs("form",{onSubmit:G,children:[r===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Personal Information"}),s.jsx("p",{className:"text-sm text-white/80",children:"Tell us about yourself"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"First Name *"}),s.jsx(xe,{type:"text",value:S.firstName,onChange:P=>R("firstName",P.target.value),required:!0,placeholder:"First name",className:"mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60","data-testid":"input-first-name"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Middle Name"}),s.jsx(xe,{type:"text",value:S.middleName,onChange:P=>R("middleName",P.target.value),placeholder:"Middle name (optional)",className:"mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60","data-testid":"input-middle-name"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Last Name *"}),s.jsx(xe,{type:"text",value:S.lastName,onChange:P=>R("lastName",P.target.value),required:!0,placeholder:"Last name",className:"mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60","data-testid":"input-last-name"})]})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Date of Birth *"}),s.jsx(xe,{type:"date",value:S.dateOfBirth,onChange:P=>R("dateOfBirth",P.target.value),required:!0,max:new Date().toISOString().split("T")[0],className:"mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60","data-testid":"input-date-of-birth"})]})]}),r===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Contact Information"}),s.jsx("p",{className:"text-sm text-white/80",children:"How can we reach you?"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Phone Number"}),s.jsx(ue,{className:"text-sm font-medium text-red-500",children:" *"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsxs("div",{className:"relative w-24 sm:w-32",ref:C,children:[s.jsxs(T,{type:"button",variant:"outline",onClick:()=>w(!x),className:"w-full justify-between h-10 text-xs sm:text-sm bg-white/10 backdrop-blur-lg border border-white/20 text-white hover:bg-white/20","data-testid":"button-country-code",children:[N?N.dialCode:"Code",s.jsx(ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})]}),x&&s.jsxs("div",{className:"absolute top-full left-0 right-0 z-50 bg-blue-700/100 backdrop-blur-lg border border-white/20 rounded-md shadow-xl max-h-60 overflow-auto text-white",children:[s.jsx("div",{className:"p-2 border-b border-white/20 ",children:s.jsx(xe,{type:"text",placeholder:"Search",value:j,onChange:P=>b(P.target.value),className:"h-8 bg-white/10 backdrop-blur-lg border border-white/20 placeholder:text-white"})}),s.jsx("div",{className:"py-1",children:A.map(P=>s.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-white/20 text-sm text-white",onClick:()=>{f(P),R("countryCode",P.dialCode||""),w(!1),b("")},children:[s.jsx("span",{className:"font-medium",children:P.dialCode})," ",P.name]},P.code))})]})]}),s.jsx(xe,{type:"tel",value:S.phoneNumber,onChange:P=>R("phoneNumber",P.target.value.replace(/\D/g,"")),required:!0,placeholder:"XXXXXXXXXX",maxLength:10,className:"flex-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60","data-testid":"input-phone-number"})]}),s.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Phone number must be 10 digits"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Email Address *"}),s.jsx(xe,{type:"email",value:S.email,onChange:P=>R("email",P.target.value),required:!0,placeholder:"your.email@example.com",className:"mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60","data-testid":"input-email"})]})]}),r===3&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Account Setup"}),s.jsx("p",{className:"text-sm text-white/80",children:"Create your login credentials"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Username *"}),s.jsx(xe,{type:"text",value:S.username,onChange:P=>R("username",P.target.value),required:!0,placeholder:"Choose a unique username",className:"mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60","data-testid":"input-username"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Password *"}),s.jsx(xe,{type:"password",value:S.password,onChange:P=>R("password",P.target.value),required:!0,placeholder:"Enter password",className:"mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60","data-testid":"input-password"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Confirm Password *"}),s.jsx(xe,{type:"password",value:S.confirmPassword,onChange:P=>R("confirmPassword",P.target.value),required:!0,placeholder:"Confirm password",className:"mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60","data-testid":"input-confirm-password"})]})]}),s.jsxs("div",{className:"flex items-start space-x-2 p-4 bg-white/10 backdrop-blur-lg rounded-lg border border-white/20",children:[s.jsx(hg,{id:"terms",checked:p,onCheckedChange:P=>y(P),className:"mt-0.5","data-testid":"checkbox-terms"}),s.jsxs("div",{className:"grid gap-1.5 leading-none",children:[s.jsx("label",{htmlFor:"terms",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer text-white",children:"I agree to the terms and conditions"}),s.jsx("p",{className:"text-xs text-white/70",children:"By creating an account, you agree to our terms of service and privacy policy."})]})]})]}),s.jsxs("div",{className:"flex justify-between mt-8",children:[r>1?s.jsxs(T,{type:"button",variant:"outline",onClick:W,className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white hover:bg-white/20","data-testid":"button-previous",children:[s.jsx(_s,{className:"w-4 h-4 mr-2"}),"Previous"]}):s.jsx("div",{}),r<3?s.jsxs(T,{type:"button",onClick:$,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg","data-testid":"button-next",children:["Next",s.jsx(zx,{className:"w-4 h-4 ml-2"})]}):s.jsx(T,{type:"submit",disabled:c||!p,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-lg disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-create-account",children:c?s.jsxs(s.Fragment,{children:[s.jsx(xr,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Create Account"})]})]})]})]})})]})}function YT(){const[,e]=Ad("/verify-email/:token"),[,t]=us();return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"w-full max-w-md relative z-10",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 overflow-hidden animate-fade-in-up",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-8 text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:s.jsx(rr,{className:"text-white w-10 h-10"})}),s.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center",children:s.jsx(s0,{className:"text-yellow-800 w-3 h-3"})})]})}),s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Email Verification"})]}),s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center py-8 animate-fade-in",children:[s.jsx("div",{className:"mb-6 flex justify-center",children:s.jsx("div",{className:"w-20 h-20 bg-blue-500/20 rounded-full flex items-center justify-center backdrop-blur-sm border-2 border-blue-400/50",children:s.jsx(K7,{className:"w-12 h-12 text-blue-400","data-testid":"icon-info"})})}),s.jsx($l,{className:"bg-blue-500/20 border-blue-400/50 backdrop-blur-sm mb-6",children:s.jsx(zl,{className:"text-white text-center",children:"Email verification is currently disabled during development. All new accounts are automatically verified."})}),s.jsx("p",{className:"text-blue-200 text-sm mb-6",children:"This feature will be re-enabled when the application is deployed to production with a verified domain."}),s.jsx(T,{onClick:()=>t("/login"),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 px-8 py-6 text-lg shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300","data-testid":"button-back-to-login",children:"Go to Login"})]})})]})})]})}var kf="focusScope.autoFocusOnMount",Sf="focusScope.autoFocusOnUnmount",mv={bubbles:!1,cancelable:!0},WT="FocusScope",mg=d.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=d.useState(null),u=Mr(a),m=Mr(i),h=d.useRef(null),p=xt(t,f=>c(f)),y=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(n){let f=function(w){if(y.paused||!l)return;const C=w.target;l.contains(C)?h.current=C:Ta(h.current,{select:!0})},j=function(w){if(y.paused||!l)return;const C=w.relatedTarget;C!==null&&(l.contains(C)||Ta(h.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&Ta(l)};document.addEventListener("focusin",f),document.addEventListener("focusout",j);const x=new MutationObserver(b);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",j),x.disconnect()}}},[n,l,y.paused]),d.useEffect(()=>{if(l){pv.add(y);const f=document.activeElement;if(!l.contains(f)){const b=new CustomEvent(kf,mv);l.addEventListener(kf,u),l.dispatchEvent(b),b.defaultPrevented||(KT(JT(eN(l)),{select:!0}),document.activeElement===f&&Ta(l))}return()=>{l.removeEventListener(kf,u),setTimeout(()=>{const b=new CustomEvent(Sf,mv);l.addEventListener(Sf,m),l.dispatchEvent(b),b.defaultPrevented||Ta(f??document.body,{select:!0}),l.removeEventListener(Sf,m),pv.remove(y)},0)}}},[l,u,m,y]);const N=d.useCallback(f=>{if(!r&&!n||y.paused)return;const j=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,b=document.activeElement;if(j&&b){const x=f.currentTarget,[w,C]=GT(x);w&&C?!f.shiftKey&&b===C?(f.preventDefault(),r&&Ta(w,{select:!0})):f.shiftKey&&b===w&&(f.preventDefault(),r&&Ta(C,{select:!0})):b===x&&f.preventDefault()}},[r,n,y.paused]);return s.jsx(Xe.div,{tabIndex:-1,...o,ref:p,onKeyDown:N})});mg.displayName=WT;function KT(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Ta(n,{select:t}),document.activeElement!==r)return}function GT(e){const t=eN(e),r=fv(t,e),n=fv(t.reverse(),e);return[r,n]}function eN(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function fv(e,t){for(const r of e)if(!QT(r,{upTo:t}))return r}function QT(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ZT(e){return e instanceof HTMLInputElement&&"select"in e}function Ta(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&ZT(e)&&t&&e.select()}}var pv=XT();function XT(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=xv(e,t),e.unshift(t)},remove(t){var r;e=xv(e,t),(r=e[0])==null||r.resume()}}}function xv(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function JT(e){return e.filter(t=>t.tagName!=="A")}var Pf=0;function tN(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??gv()),document.body.insertAdjacentElement("beforeend",e[1]??gv()),Pf++,()=>{Pf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Pf--}},[])}function gv(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var In=function(){return In=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},In.apply(this,arguments)};function sN(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function eA(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var zu="right-scroll-bar-position",Uu="width-before-scroll-bar",tA="with-scroll-bars-hidden",sA="--removed-body-scroll-bar-size";function Ef(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function rA(e,t){var r=d.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var nA=typeof window<"u"?d.useLayoutEffect:d.useEffect,bv=new WeakMap;function aA(e,t){var r=rA(null,function(n){return e.forEach(function(a){return Ef(a,n)})});return nA(function(){var n=bv.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||Ef(l,null)}),i.forEach(function(l){a.has(l)||Ef(l,o)})}bv.set(r,e)},[e]),r}function iA(e){return e}function oA(e,t){t===void 0&&(t=iA);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var m=o;o=[],m.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(m){o.push(m),u()},filter:function(m){return o=o.filter(m),r}}}};return a}function lA(e){e===void 0&&(e={});var t=oA(null);return t.options=In({async:!0,ssr:!1},e),t}var rN=function(e){var t=e.sideCar,r=sN(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return d.createElement(n,In({},r))};rN.isSideCarExport=!0;function cA(e,t){return e.useMedium(t),rN}var nN=lA(),Tf=function(){},jm=d.forwardRef(function(e,t){var r=d.useRef(null),n=d.useState({onScrollCapture:Tf,onWheelCapture:Tf,onTouchMoveCapture:Tf}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,m=e.enabled,h=e.shards,p=e.sideCar,y=e.noRelative,N=e.noIsolation,f=e.inert,j=e.allowPinchZoom,b=e.as,x=b===void 0?"div":b,w=e.gapMode,C=sN(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=p,M=aA([r,t]),A=In(In({},C),a);return d.createElement(d.Fragment,null,m&&d.createElement(S,{sideCar:nN,removeScrollBar:u,shards:h,noRelative:y,noIsolation:N,inert:f,setCallbacks:i,allowPinchZoom:!!j,lockRef:r,gapMode:w}),o?d.cloneElement(d.Children.only(l),In(In({},A),{ref:M})):d.createElement(x,In({},A,{className:c,ref:M}),l))});jm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jm.classNames={fullWidth:Uu,zeroRight:zu};var dA=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function uA(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=dA();return t&&e.setAttribute("nonce",t),e}function hA(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function mA(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var fA=function(){var e=0,t=null;return{add:function(r){e==0&&(t=uA())&&(hA(t,r),mA(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},pA=function(){var e=fA();return function(t,r){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},aN=function(){var e=pA(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},xA={left:0,top:0,right:0,gap:0},Af=function(e){return parseInt(e||"",10)||0},gA=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Af(r),Af(n),Af(a)]},bA=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return xA;var t=gA(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},vA=aN(),hl="data-scroll-locked",wA=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(tA,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(hl,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zu,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Uu,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(zu," .").concat(zu,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Uu," .").concat(Uu,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(hl,`] {
    `).concat(sA,": ").concat(l,`px;
  }
`)},vv=function(){var e=parseInt(document.body.getAttribute(hl)||"0",10);return isFinite(e)?e:0},yA=function(){d.useEffect(function(){return document.body.setAttribute(hl,(vv()+1).toString()),function(){var e=vv()-1;e<=0?document.body.removeAttribute(hl):document.body.setAttribute(hl,e.toString())}},[])},NA=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;yA();var i=d.useMemo(function(){return bA(a)},[a]);return d.createElement(vA,{styles:wA(i,!t,a,r?"":"!important")})},p0=!1;if(typeof window<"u")try{var fu=Object.defineProperty({},"passive",{get:function(){return p0=!0,!0}});window.addEventListener("test",fu,fu),window.removeEventListener("test",fu,fu)}catch{p0=!1}var Ao=p0?{passive:!1}:!1,jA=function(e){return e.tagName==="TEXTAREA"},iN=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!jA(e)&&r[t]==="visible")},CA=function(e){return iN(e,"overflowY")},kA=function(e){return iN(e,"overflowX")},wv=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=oN(e,n);if(a){var i=lN(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},SA=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},PA=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},oN=function(e,t){return e==="v"?CA(t):kA(t)},lN=function(e,t){return e==="v"?SA(t):PA(t)},EA=function(e,t){return e==="h"&&t==="rtl"?-1:1},TA=function(e,t,r,n,a){var i=EA(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),u=!1,m=o>0,h=0,p=0;do{if(!l)break;var y=lN(e,l),N=y[0],f=y[1],j=y[2],b=f-j-i*N;(N||b)&&oN(e,l)&&(h+=b,p+=N);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(m&&Math.abs(h)<1||!m&&Math.abs(p)<1)&&(u=!0),u},pu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},yv=function(e){return[e.deltaX,e.deltaY]},Nv=function(e){return e&&"current"in e?e.current:e},AA=function(e,t){return e[0]===t[0]&&e[1]===t[1]},RA=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},MA=0,Ro=[];function _A(e){var t=d.useRef([]),r=d.useRef([0,0]),n=d.useRef(),a=d.useState(MA++)[0],i=d.useState(aN)[0],o=d.useRef(e);d.useEffect(function(){o.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var f=eA([e.lockRef.current],(e.shards||[]).map(Nv),!0).filter(Boolean);return f.forEach(function(j){return j.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),f.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(f,j){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!o.current.allowPinchZoom;var b=pu(f),x=r.current,w="deltaX"in f?f.deltaX:x[0]-b[0],C="deltaY"in f?f.deltaY:x[1]-b[1],S,M=f.target,A=Math.abs(w)>Math.abs(C)?"h":"v";if("touches"in f&&A==="h"&&M.type==="range")return!1;var R=wv(A,M);if(!R)return!0;if(R?S=A:(S=A==="v"?"h":"v",R=wv(A,M)),!R)return!1;if(!n.current&&"changedTouches"in f&&(w||C)&&(n.current=S),!S)return!0;var z=n.current||S;return TA(z,j,f,z==="h"?w:C)},[]),c=d.useCallback(function(f){var j=f;if(!(!Ro.length||Ro[Ro.length-1]!==i)){var b="deltaY"in j?yv(j):pu(j),x=t.current.filter(function(S){return S.name===j.type&&(S.target===j.target||j.target===S.shadowParent)&&AA(S.delta,b)})[0];if(x&&x.should){j.cancelable&&j.preventDefault();return}if(!x){var w=(o.current.shards||[]).map(Nv).filter(Boolean).filter(function(S){return S.contains(j.target)}),C=w.length>0?l(j,w[0]):!o.current.noIsolation;C&&j.cancelable&&j.preventDefault()}}},[]),u=d.useCallback(function(f,j,b,x){var w={name:f,delta:j,target:b,should:x,shadowParent:DA(b)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(C){return C!==w})},1)},[]),m=d.useCallback(function(f){r.current=pu(f),n.current=void 0},[]),h=d.useCallback(function(f){u(f.type,yv(f),f.target,l(f,e.lockRef.current))},[]),p=d.useCallback(function(f){u(f.type,pu(f),f.target,l(f,e.lockRef.current))},[]);d.useEffect(function(){return Ro.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Ao),document.addEventListener("touchmove",c,Ao),document.addEventListener("touchstart",m,Ao),function(){Ro=Ro.filter(function(f){return f!==i}),document.removeEventListener("wheel",c,Ao),document.removeEventListener("touchmove",c,Ao),document.removeEventListener("touchstart",m,Ao)}},[]);var y=e.removeScrollBar,N=e.inert;return d.createElement(d.Fragment,null,N?d.createElement(i,{styles:RA(a)}):null,y?d.createElement(NA,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function DA(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const IA=cA(nN,_A);var fg=d.forwardRef(function(e,t){return d.createElement(jm,In({},e,{ref:t,sideCar:IA}))});fg.classNames=jm.classNames;var FA=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Mo=new WeakMap,xu=new WeakMap,gu={},Rf=0,cN=function(e){return e&&(e.host||cN(e.parentNode))},OA=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=cN(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},LA=function(e,t,r,n){var a=OA(t,Array.isArray(e)?e:[e]);gu[r]||(gu[r]=new WeakMap);var i=gu[r],o=[],l=new Set,c=new Set(a),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};a.forEach(u);var m=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))m(p);else try{var y=p.getAttribute(n),N=y!==null&&y!=="false",f=(Mo.get(p)||0)+1,j=(i.get(p)||0)+1;Mo.set(p,f),i.set(p,j),o.push(p),f===1&&N&&xu.set(p,!0),j===1&&p.setAttribute(r,"true"),N||p.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return m(t),l.clear(),Rf++,function(){o.forEach(function(h){var p=Mo.get(h)-1,y=i.get(h)-1;Mo.set(h,p),i.set(h,y),p||(xu.has(h)||h.removeAttribute(n),xu.delete(h)),y||h.removeAttribute(r)}),Rf--,Rf||(Mo=new WeakMap,Mo=new WeakMap,xu=new WeakMap,gu={})}},dN=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=FA(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),LA(n,a,r,"aria-hidden")):function(){return null}},Cm="Dialog",[uN,hN]=cr(Cm),[$A,kn]=uN(Cm),mN=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=d.useRef(null),c=d.useRef(null),[u,m]=qn({prop:n,defaultProp:a??!1,onChange:i,caller:Cm});return s.jsx($A,{scope:t,triggerRef:l,contentRef:c,contentId:ii(),titleId:ii(),descriptionId:ii(),open:u,onOpenChange:m,onOpenToggle:d.useCallback(()=>m(h=>!h),[m]),modal:o,children:r})};mN.displayName=Cm;var fN="DialogTrigger",pN=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=kn(fN,r),i=xt(t,a.triggerRef);return s.jsx(Xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":gg(a.open),...n,ref:i,onClick:We(e.onClick,a.onOpenToggle)})});pN.displayName=fN;var pg="DialogPortal",[zA,xN]=uN(pg,{forceMount:void 0}),gN=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=kn(pg,t);return s.jsx(zA,{scope:t,forceMount:r,children:d.Children.map(n,o=>s.jsx(ya,{present:r||i.open,children:s.jsx(lm,{asChild:!0,container:a,children:o})}))})};gN.displayName=pg;var Mh="DialogOverlay",bN=d.forwardRef((e,t)=>{const r=xN(Mh,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=kn(Mh,e.__scopeDialog);return i.modal?s.jsx(ya,{present:n||i.open,children:s.jsx(VA,{...a,ref:t})}):null});bN.displayName=Mh;var UA=Il("DialogOverlay.RemoveScroll"),VA=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=kn(Mh,r);return s.jsx(fg,{as:UA,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Xe.div,{"data-state":gg(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),no="DialogContent",vN=d.forwardRef((e,t)=>{const r=xN(no,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=kn(no,e.__scopeDialog);return s.jsx(ya,{present:n||i.open,children:i.modal?s.jsx(BA,{...a,ref:t}):s.jsx(qA,{...a,ref:t})})});vN.displayName=no;var BA=d.forwardRef((e,t)=>{const r=kn(no,e.__scopeDialog),n=d.useRef(null),a=xt(t,r.contentRef,n);return d.useEffect(()=>{const i=n.current;if(i)return dN(i)},[]),s.jsx(wN,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:We(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:We(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:We(e.onFocusOutside,i=>i.preventDefault())})}),qA=d.forwardRef((e,t)=>{const r=kn(no,e.__scopeDialog),n=d.useRef(!1),a=d.useRef(!1);return s.jsx(wN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),wN=d.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=kn(no,r),c=d.useRef(null),u=xt(t,c);return tN(),s.jsxs(s.Fragment,{children:[s.jsx(mg,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Rd,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":gg(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(YA,{titleId:l.titleId}),s.jsx(KA,{contentRef:c,descriptionId:l.descriptionId})]})]})}),xg="DialogTitle",yN=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=kn(xg,r);return s.jsx(Xe.h2,{id:a.titleId,...n,ref:t})});yN.displayName=xg;var NN="DialogDescription",jN=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=kn(NN,r);return s.jsx(Xe.p,{id:a.descriptionId,...n,ref:t})});jN.displayName=NN;var CN="DialogClose",kN=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=kn(CN,r);return s.jsx(Xe.button,{type:"button",...n,ref:t,onClick:We(e.onClick,()=>a.onOpenChange(!1))})});kN.displayName=CN;function gg(e){return e?"open":"closed"}var SN="DialogTitleWarning",[HA,PN]=qk(SN,{contentName:no,titleName:xg,docsSlug:"dialog"}),YA=({titleId:e})=>{const t=PN(SN),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},WA="DialogDescriptionWarning",KA=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${PN(WA).contentName}}.`;return d.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},EN=mN,TN=pN,AN=gN,bg=bN,vg=vN,wg=yN,yg=jN,Ng=kN;const sr=EN,RN=TN,GA=AN,MN=d.forwardRef(({className:e,...t},r)=>s.jsx(bg,{ref:r,className:$e("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));MN.displayName=bg.displayName;const Hs=d.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(GA,{children:[s.jsx(MN,{}),s.jsxs(vg,{ref:n,className:$e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(Ng,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(Pt,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Hs.displayName=vg.displayName;const Os=({className:e,...t})=>s.jsx("div",{className:$e("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Os.displayName="DialogHeader";const Ls=d.forwardRef(({className:e,...t},r)=>s.jsx(wg,{ref:r,className:$e("text-lg font-semibold leading-none tracking-tight",e),...t}));Ls.displayName=wg.displayName;const ao=d.forwardRef(({className:e,...t},r)=>s.jsx(yg,{ref:r,className:$e("text-sm text-muted-foreground",e),...t}));ao.displayName=yg.displayName;var QA=d.createContext(void 0);function Ld(e){const t=d.useContext(QA);return e||t||"ltr"}var Mf="rovingFocusGroup.onEntryFocus",ZA={bubbles:!1,cancelable:!0},$d="RovingFocusGroup",[x0,_N,XA]=om($d),[JA,km]=cr($d,[XA]),[eR,tR]=JA($d),DN=d.forwardRef((e,t)=>s.jsx(x0.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(x0.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(sR,{...e,ref:t})})}));DN.displayName=$d;var sR=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:m=!1,...h}=e,p=d.useRef(null),y=xt(t,p),N=Ld(i),[f,j]=qn({prop:o,defaultProp:l??null,onChange:c,caller:$d}),[b,x]=d.useState(!1),w=Mr(u),C=_N(r),S=d.useRef(!1),[M,A]=d.useState(0);return d.useEffect(()=>{const R=p.current;if(R)return R.addEventListener(Mf,w),()=>R.removeEventListener(Mf,w)},[w]),s.jsx(eR,{scope:r,orientation:n,dir:N,loop:a,currentTabStopId:f,onItemFocus:d.useCallback(R=>j(R),[j]),onItemShiftTab:d.useCallback(()=>x(!0),[]),onFocusableItemAdd:d.useCallback(()=>A(R=>R+1),[]),onFocusableItemRemove:d.useCallback(()=>A(R=>R-1),[]),children:s.jsx(Xe.div,{tabIndex:b||M===0?-1:0,"data-orientation":n,...h,ref:y,style:{outline:"none",...e.style},onMouseDown:We(e.onMouseDown,()=>{S.current=!0}),onFocus:We(e.onFocus,R=>{const z=!S.current;if(R.target===R.currentTarget&&z&&!b){const $=new CustomEvent(Mf,ZA);if(R.currentTarget.dispatchEvent($),!$.defaultPrevented){const W=C().filter(_=>_.focusable),G=W.find(_=>_.active),X=W.find(_=>_.id===f),L=[G,X,...W].filter(Boolean).map(_=>_.ref.current);ON(L,m)}}S.current=!1}),onBlur:We(e.onBlur,()=>x(!1))})})}),IN="RovingFocusGroupItem",FN=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=ii(),u=i||c,m=tR(IN,r),h=m.currentTabStopId===u,p=_N(r),{onFocusableItemAdd:y,onFocusableItemRemove:N,currentTabStopId:f}=m;return d.useEffect(()=>{if(n)return y(),()=>N()},[n,y,N]),s.jsx(x0.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:s.jsx(Xe.span,{tabIndex:h?0:-1,"data-orientation":m.orientation,...l,ref:t,onMouseDown:We(e.onMouseDown,j=>{n?m.onItemFocus(u):j.preventDefault()}),onFocus:We(e.onFocus,()=>m.onItemFocus(u)),onKeyDown:We(e.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){m.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const b=aR(j,m.orientation,m.dir);if(b!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let w=p().filter(C=>C.focusable).map(C=>C.ref.current);if(b==="last")w.reverse();else if(b==="prev"||b==="next"){b==="prev"&&w.reverse();const C=w.indexOf(j.currentTarget);w=m.loop?iR(w,C+1):w.slice(C+1)}setTimeout(()=>ON(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:f!=null}):o})})});FN.displayName=IN;var rR={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function nR(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function aR(e,t,r){const n=nR(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return rR[n]}function ON(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function iR(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var LN=DN,$N=FN,jg="Radio",[oR,zN]=cr(jg),[lR,cR]=oR(jg),UN=d.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:c,form:u,...m}=e,[h,p]=d.useState(null),y=xt(t,j=>p(j)),N=d.useRef(!1),f=h?u||!!h.closest("form"):!0;return s.jsxs(lR,{scope:r,checked:a,disabled:o,children:[s.jsx(Xe.button,{type:"button",role:"radio","aria-checked":a,"data-state":HN(a),"data-disabled":o?"":void 0,disabled:o,value:l,...m,ref:y,onClick:We(e.onClick,j=>{a||c==null||c(),f&&(N.current=j.isPropagationStopped(),N.current||j.stopPropagation())})}),f&&s.jsx(qN,{control:h,bubbles:!N.current,name:n,value:l,checked:a,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});UN.displayName=jg;var VN="RadioIndicator",BN=d.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...a}=e,i=cR(VN,r);return s.jsx(ya,{present:n||i.checked,children:s.jsx(Xe.span,{"data-state":HN(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});BN.displayName=VN;var dR="RadioBubbleInput",qN=d.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=d.useRef(null),l=xt(o,i),c=Od(r),u=Id(t);return d.useEffect(()=>{const m=o.current;if(!m)return;const h=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&y){const N=new Event("click",{bubbles:n});y.call(m,r),m.dispatchEvent(N)}},[c,r,n]),s.jsx(Xe.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qN.displayName=dR;function HN(e){return e?"checked":"unchecked"}var uR=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Sm="RadioGroup",[hR]=cr(Sm,[km,zN]),YN=km(),WN=zN(),[mR,fR]=hR(Sm),KN=d.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:m=!0,onValueChange:h,...p}=e,y=YN(r),N=Ld(u),[f,j]=qn({prop:i,defaultProp:a??null,onChange:h,caller:Sm});return s.jsx(mR,{scope:r,name:n,required:o,disabled:l,value:f,onValueChange:j,children:s.jsx(LN,{asChild:!0,...y,orientation:c,dir:N,loop:m,children:s.jsx(Xe.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:N,...p,ref:t})})})});KN.displayName=Sm;var GN="RadioGroupItem",QN=d.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...a}=e,i=fR(GN,r),o=i.disabled||n,l=YN(r),c=WN(r),u=d.useRef(null),m=xt(t,u),h=i.value===a.value,p=d.useRef(!1);return d.useEffect(()=>{const y=f=>{uR.includes(f.key)&&(p.current=!0)},N=()=>p.current=!1;return document.addEventListener("keydown",y),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",y),document.removeEventListener("keyup",N)}},[]),s.jsx($N,{asChild:!0,...l,focusable:!o,active:h,children:s.jsx(UN,{disabled:o,required:i.required,checked:h,...c,...a,name:i.name,ref:m,onCheck:()=>i.onValueChange(a.value),onKeyDown:We(y=>{y.key==="Enter"&&y.preventDefault()}),onFocus:We(a.onFocus,()=>{var y;p.current&&((y=u.current)==null||y.click())})})})});QN.displayName=GN;var pR="RadioGroupIndicator",ZN=d.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,a=WN(r);return s.jsx(BN,{...a,...n,ref:t})});ZN.displayName=pR;var XN=KN,JN=QN,xR=ZN;const g0=d.forwardRef(({className:e,...t},r)=>s.jsx(XN,{className:$e("grid gap-2",e),...t,ref:r}));g0.displayName=XN.displayName;const Cc=d.forwardRef(({className:e,...t},r)=>s.jsx(JN,{ref:r,className:$e("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(xR,{className:"flex items-center justify-center",children:s.jsx(V7,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Cc.displayName=JN.displayName;function gR({isOpen:e,onClose:t,year:r,price:n,schoolId:a,userId:i,isFree:o=!1}){const[,l]=us(),{toast:c}=ks(),{convertPrice:u,formatPrice:m}=yi(),[h,p]=d.useState(null),[y,N]=d.useState(null),{data:f,isLoading:j}=Ze({queryKey:["/api/schools",a],queryFn:async()=>{const R=await fetch(`/api/schools/${a}`);if(!R.ok)throw new Error("Failed to fetch school data");return R.json()},enabled:e&&!!a}),b=(f==null?void 0:f.paystackSubaccountCode)||(f==null?void 0:f.bankAccountNumber),x=nt({mutationFn:async R=>{await rt("POST","/api/cart",R)},onMutate:async R=>{await ke.cancelQueries({queryKey:["/api/cart",i]});const z=ke.getQueryData(["/api/cart",i]),$={id:`temp-${Date.now()}`,userId:R.userId,schoolId:R.schoolId,year:R.year,price:R.price,orientation:R.orientation,uploadType:R.uploadType,addedAt:new Date};return ke.setQueryData(["/api/cart",i],(W=[])=>[...W,$]),c({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Added to cart!",description:`${r} yearbook has been configured and added to your cart.`,action:s.jsx(T,{size:"sm",onClick:()=>l("/cart"),className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white","data-testid":"toast-view-cart",children:"View Cart"})}),{previousCartItems:z,optimisticCartItem:$}},onError:(R,z,$)=>{var W;ke.setQueryData(["/api/cart",i],($==null?void 0:$.previousCartItems)||[]),(W=R.message)!=null&&W.includes("already in cart")?c({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Already in cart",description:"This yearbook is already in your cart.",variant:"destructive"}):c({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Failed to add to cart",description:"Something went wrong. Please try again.",variant:"destructive"})},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/cart",i]}),p(null),N(null),t()}}),w=async()=>{if(!b){c({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Revenue sharing required",description:"You must set up revenue sharing before purchasing school years.",variant:"destructive"});return}if(!h||!y){c({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Configuration incomplete",description:"Please select both yearbook type and orientation.",variant:"destructive"});return}const R={userId:i,schoolId:a,year:parseInt(r),price:o?"0.00":n.toString(),orientation:y,uploadType:h};x.mutate(R)},C=()=>{t(),l("/cart")},S=()=>{t(),l("/school-settings?tab=revenue")},M=()=>{p(null),N(null),t()},A=h!==null&&y!==null;return s.jsx(sr,{open:e,onOpenChange:M,children:s.jsx(Hs,{className:"max-w-xl max-h-[90vh] overflow-y-auto bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl","data-testid":"yearbook-config-dialog",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs(Os,{children:[s.jsxs(Ls,{className:"flex items-center space-x-2 text-white text-lg",children:[s.jsx(Rs,{className:"h-5 w-5"}),s.jsxs("span",{children:["Configure ",r," Yearbook"]})]}),s.jsx(ao,{className:"text-blue-50 text-sm",children:"Select your yearbook type and orientation."})]}),j?s.jsx(ge,{className:"bg-gradient-to-br from-gray-50 to-gray-100",children:s.jsx(be,{className:"p-4 text-center",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded"})]})})}):b?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-3",children:[s.jsx(ue,{className:"text-sm font-semibold text-white mb-2 block",children:"Select Yearbook Type"}),s.jsxs(g0,{value:h||"",onValueChange:R=>p(R),className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start space-x-2 p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors cursor-pointer border border-white/10","data-testid":"option-image-upload",children:[s.jsx(Cc,{value:"image",id:"image",className:"mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(ue,{htmlFor:"image",className:"flex items-center gap-1.5 text-white text-sm font-medium cursor-pointer",children:[s.jsx(da,{className:"h-4 w-4"}),"Image Upload (JPG/PNG)"]}),s.jsx("p",{className:"text-xs text-blue-100 mt-0.5",children:"Upload individual page images."})]})]}),s.jsxs("div",{className:"flex items-start space-x-2 p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors cursor-pointer border border-white/10","data-testid":"option-pdf-upload",children:[s.jsx(Cc,{value:"pdf",id:"pdf",className:"mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(ue,{htmlFor:"pdf",className:"flex items-center gap-1.5 text-white text-sm font-medium cursor-pointer",children:[s.jsx(sl,{className:"h-4 w-4"}),"PDF Upload"]}),s.jsx("p",{className:"text-xs text-blue-100 mt-0.5",children:"Upload a complete PDF file."})]})]})]})]})}),s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-3",children:[s.jsx(ue,{className:"text-sm font-semibold text-white mb-2 block",children:"Choose Page Orientation"}),s.jsxs(g0,{value:y||"",onValueChange:R=>N(R),className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start space-x-2 p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors cursor-pointer border border-white/10","data-testid":"option-landscape",children:[s.jsx(Cc,{value:"landscape",id:"landscape",className:"mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(ue,{htmlFor:"landscape",className:"flex items-center gap-1.5 text-white text-sm font-medium cursor-pointer",children:[s.jsx(rl,{className:"h-4 w-4 rotate-0"}),"Landscape"]}),s.jsx("p",{className:"text-xs text-blue-100 mt-0.5",children:"4:3 Page Format."})]})]}),s.jsxs("div",{className:"flex items-start space-x-2 p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors cursor-pointer border border-white/10","data-testid":"option-portrait",children:[s.jsx(Cc,{value:"portrait",id:"portrait",className:"mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(ue,{htmlFor:"portrait",className:"flex items-center gap-1.5 text-white text-sm font-medium cursor-pointer",children:[s.jsx(rl,{className:"h-4 w-4 rotate-90"}),"Portrait"]}),s.jsx("p",{className:"text-xs text-blue-100 mt-0.5",children:"Traditional 3:4 Page format."})]})]})]})]})}),s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsx(be,{className:"p-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-base font-semibold text-white",children:[r," Yearbook"]}),s.jsxs("p",{className:"text-xs text-blue-50",children:[h==="pdf"?"PDF":h==="image"?"Image":"Type not selected"," • ",y==="portrait"?"Portrait":y==="landscape"?"Landscape":"Not selected"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-xl font-bold ${o?"text-green-400":"text-blue-50"}`,children:o?"FREE":m(u(n))}),o&&s.jsx("p",{className:"text-xs text-green-400 font-medium",children:"First purchase"})]})]})})})]})}):s.jsx(ge,{className:"bg-gradient-to-br from-red-600/30 to-red-600/20 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsx(be,{className:"p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(vh,{className:"h-6 w-6 text-red-600 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Revenue Sharing Required"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:"You must set up revenue sharing before purchasing school years."}),s.jsx("p",{className:"text-xs text-red-600 mt-2",children:"Configure your bank account to receive 80% of yearbook sales."})]})]})})}),s.jsx("div",{className:"flex space-x-2 pt-2",children:!j&&!b?s.jsxs(T,{onClick:S,className:"flex-1 bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl","data-testid":"button-setup-revenue",children:[s.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Set Up Revenue Sharing"]}):s.jsxs(s.Fragment,{children:[s.jsx(T,{onClick:w,disabled:!A||x.isPending||j||!b,className:"flex-1 bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl hover:bg-yellow-100 hover:text-black transition-colors duration-200 ease-in-out disabled:opacity-50","data-testid":"button-confirm-add-to-cart",children:x.isPending?s.jsxs(s.Fragment,{children:[s.jsx(xs,{className:"h-4 w-4 mr-2 animate-pulse"}),"Adding..."]}):s.jsxs(s.Fragment,{children:[s.jsx(xs,{className:"h-4 w-4 mr-2"}),"Confirm and Add to Cart"]})}),s.jsxs(T,{onClick:C,variant:"outline",className:"flex-1 bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white hover:bg-white hover:text-black transition-colors duration-200 ease-in-out","data-testid":"button-view-cart",children:[s.jsx(zs,{className:"h-4 w-4 mr-2"}),"View Cart"]})]})}),!o&&s.jsx("p",{className:"text-xs text-gray-400 text-center",children:"* This is a demo. No actual payment will be processed."})]})})})}function bR(){var Te,Jt,de;const[,e]=us(),[t,r]=d.useState(null),[n,a]=d.useState(null),[i,o]=d.useState("profile"),[l,c]=d.useState("grid");d.useEffect(()=>{const Je=new URLSearchParams(window.location.search).get("tab");Je&&["years","memories","viewers","profile"].includes(Je)&&o(Je)},[]);const[u,m]=d.useState(!1),[h,p]=d.useState(""),[y,N]=d.useState(""),[f,j]=d.useState(null),[b,x]=d.useState(!1),[w,C]=d.useState(!1),[S,M]=d.useState({email:"",city:""}),[A,R]=d.useState(!1),[z,$]=d.useState(!1),[W,G]=d.useState(!1),[X,P]=d.useState(""),[L,_]=d.useState({address:"",state:""}),{toast:V}=ks(),{convertPrice:E,formatPrice:Y}=yi(),[Z,ne]=d.useState({username:"",password:"",fullName:""}),[oe,pe]=d.useState("2024");d.useEffect(()=>{const H=localStorage.getItem("user");if(!H){e("/");return}const Je=JSON.parse(H);if(Je.userType!=="school"){console.log("Non-school account detected in school dashboard, redirecting to correct dashboard"),localStorage.removeItem("user"),e("/");return}a(Je)},[e]);const he=$n,{data:B}=Ze({queryKey:["/api/schools",n==null?void 0:n.id],enabled:!!n,queryFn:async()=>{if(!(n!=null&&n.id))throw new Error("No user");const H=await fetch(`/api/schools/${n.id}`);if(!H.ok)throw new Error("Failed to fetch school");return H.json()}}),{data:K=[]}=Ze({queryKey:["/api/memories/pending",B==null?void 0:B.id],enabled:!!(B!=null&&B.id),queryFn:async()=>{if(!(B!=null&&B.id))return[];const H=await fetch(`/api/memories/school/${B.id}/pending`,{headers:{Authorization:`Bearer ${n==null?void 0:n.id}`}});if(!H.ok)throw new Error("Failed to fetch pending memories");return H.json()}}),{data:re=[]}=Ze({queryKey:["/api/alumni-requests",B==null?void 0:B.id],enabled:!!(B!=null&&B.id),queryFn:async()=>{if(!(B!=null&&B.id))return[];const H=await fetch(`/api/alumni-requests/school/${B.id}`);if(!H.ok)throw new Error("Failed to fetch alumni requests");return H.json()}}),ye=re.filter(H=>H.status==="pending"),{data:Q}=Ze({queryKey:["/api/alumni-requests/count",B==null?void 0:B.id],enabled:!!(B!=null&&B.id),queryFn:async()=>{if(!(B!=null&&B.id))return{pendingCount:0};const H=await fetch(`/api/alumni-requests/school/${B.id}/count`);if(!H.ok)throw new Error("Failed to fetch request count");return H.json()}}),te=(Q==null?void 0:Q.pendingCount)||0,{data:ve=[]}=Ze({queryKey:["/api/notifications",n==null?void 0:n.id],enabled:!!n,queryFn:async()=>{if(!(n!=null&&n.id))return[];const H=await fetch(`/api/notifications/${n.id}`);if(!H.ok)throw new Error("Failed to fetch notifications");return H.json()},refetchInterval:3e4}),we=ve.filter(H=>!H.isRead).length,Ne=nt({mutationFn:async H=>{const Je=await fetch(`/api/memories/${H}/approve`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n==null?void 0:n.id}`},body:JSON.stringify({approvedBy:n==null?void 0:n.id})});if(!Je.ok)throw new Error("Failed to approve memory");return Je.json()},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/memories/pending",B==null?void 0:B.id]}),ke.invalidateQueries({queryKey:["/api/memories/school"]}),V({title:"Memory approved successfully"})}}),ie=nt({mutationFn:async H=>{const Je=await fetch(`/api/memories/${H}`,{method:"DELETE",headers:{Authorization:`Bearer ${n==null?void 0:n.id}`}});if(!Je.ok)throw new Error("Failed to deny memory");return Je.json()},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/memories/pending",B==null?void 0:B.id]}),V({title:"Memory denied and removed"})}}),me=nt({mutationFn:async({requestId:H,reviewNotes:Je})=>{await rt("PATCH",`/api/alumni-requests/${H}/approve`,{reviewedBy:n==null?void 0:n.id,reviewNotes:Je})},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/alumni-requests",B==null?void 0:B.id]}),ke.invalidateQueries({queryKey:["/api/alumni-requests/count",B==null?void 0:B.id]}),ke.invalidateQueries({queryKey:["/api/alumni-badges/school",B==null?void 0:B.id]}),V({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Alumni request approved successfully"})}}),Ae=nt({mutationFn:async({requestId:H,reviewNotes:Je})=>{await rt("PATCH",`/api/alumni-requests/${H}/deny`,{reviewedBy:n==null?void 0:n.id,reviewNotes:Je})},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/alumni-requests",B==null?void 0:B.id]}),ke.invalidateQueries({queryKey:["/api/alumni-requests/count",B==null?void 0:B.id]}),ke.invalidateQueries({queryKey:["/api/alumni-badges/school",B==null?void 0:B.id]}),V({title:"Alumni request denied successfully"})}}),at=nt({mutationFn:async H=>{await rt("PATCH",`/api/notifications/${H}/read`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",n==null?void 0:n.id]})}}),lt=H=>{at.mutate(H)},it=nt({mutationFn:async()=>{n!=null&&n.id&&await rt("DELETE",`/api/notifications/user/${n.id}/clear-all`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",n==null?void 0:n.id]}),V({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"All notifications cleared",description:"Your notification history has been cleared."})}}),F=()=>{it.mutate()},g=H=>{if(!H)return"";const wt=new Date().getTime()-new Date(H).getTime(),Ge=Math.floor(wt/1e3),ut=Math.floor(Ge/60),Ie=Math.floor(ut/60),Rt=Math.floor(Ie/24);return Ge<60?"Just now":ut<60?`${ut} ${ut===1?"minute":"minutes"} ago`:Ie<24?`${Ie} ${Ie===1?"hour":"hours"} ago`:Rt===1?"Yesterday":Rt<30?`${Rt} days ago`:new Date(H).toLocaleDateString()},{data:D=[],isLoading:J}=Ze({queryKey:["/api/year-purchases",B==null?void 0:B.id],enabled:!!B,queryFn:async()=>{if(!(n!=null&&n.id))return[];const H=await fetch(`/api/year-purchases/school/${B==null?void 0:B.id}`);return H.ok?H.json():[]}}),ce=!B||J?[]:(()=>{const H=B==null?void 0:B.yearFounded,Je=H&&H<1980?1980:H||1980,wt=he;return Array.from({length:wt-Je+1},(Ge,ut)=>{const Ie=wt-ut;if(Ie<Je||Ie>wt)return null;const Rt=D.find(Pe=>Pe.year===Ie),Ve=!!(Rt!=null&&Rt.purchased),vt=!1;let I;return Ve?I=Ie===he?"Active":"Archived":I="Available",{year:Ie.toString(),purchased:Ve,status:I,price:$T,isFree:vt}}).filter(Boolean)})(),le=ce.filter(H=>H&&H.year.includes(h));console.log(ce);const{data:Re=[]}=Ze({queryKey:["/api/alumni-badges/school",B==null?void 0:B.id],enabled:!!(B!=null&&B.id),queryFn:async()=>{if(!(B!=null&&B.id))return[];const H=await fetch(`/api/alumni-badges/school/${B.id}`);if(!H.ok)throw new Error("Failed to fetch alumni badges");return H.json()}}),He=Re.filter(H=>H.status==="verified");nt({mutationFn:async H=>{await rt("PATCH",`/api/schools/${n==null?void 0:n.id}`,H)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/schools",n==null?void 0:n.id]}),V({title:"Profile updated successfully"}),_({address:"",state:""})},onError:()=>{V({title:"Failed to update profile",variant:"destructive"})}});const Ye=nt({mutationFn:async H=>{await rt("DELETE",`/api/alumni-badges/${H}`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/alumni-badges/school",B==null?void 0:B.id]}),V({title:"Alumni badge deleted successfully"})},onError:()=>{V({title:"Failed to delete alumni badge",variant:"destructive"})}}),fe=()=>{localStorage.removeItem("user"),e("/")},Ue=()=>{console.log("Adding viewer:",Z),ne({username:"",password:"",fullName:""}),m(!1)},ot=H=>{me.mutate({requestId:H})},Dt=H=>{Ae.mutate({requestId:H})},Ft=H=>{j(H),x(!0)},zt=H=>{P(H),C(!0)},At=H=>{e(`/yearbook-manage/${H}?school=${B==null?void 0:B.id}`)};return n?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsxs("div",{className:"relative z-10 min-h-screen bg-white/5 backdrop-blur-sm",children:[s.jsxs("header",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-2xl relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-2 left-10 w-8 h-8 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-3 right-20 w-6 h-6 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-2 left-20 w-5 h-5 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-1 right-10 w-4 h-4 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"mx-auto px-2 sm:px-4 lg:px-8 xl:px-12 2xl:px-16 relative z-10",children:s.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden",children:B!=null&&B.logo?s.jsx("img",{src:B.logo,alt:B.name,className:"w-full h-full object-cover"}):s.jsx(rr,{className:"text-white text-sm sm:text-base"})}),s.jsx("h1",{className:"ml-2 sm:ml-3 text-sm sm:text-xl font-semibold text-white truncate",children:"ADMINISTRATOR PORTAL"})]}),s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-white",children:[s.jsx("span",{className:"sm:hidden truncate max-w-20",children:B==null?void 0:B.name.split(" ")[0]}),s.jsx("span",{className:"hidden sm:inline",children:B==null?void 0:B.name})]}),s.jsx("div",{className:"relative",children:s.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>G(!W),className:"relative text-white hover:bg-white/20","data-testid":"button-notifications",children:[s.jsx(Yn,{className:"h-5 w-5"}),we>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:we})]})}),s.jsx("div",{className:"relative",children:s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>$(!z),className:"text-white hover:bg-white/20 p-2 bg-white/10 rounded-lg border border-white/20","data-testid":"button-hamburger-menu",children:s.jsx(Jr,{className:"h-5 w-5"})})})]})]})})]}),W&&s.jsxs("div",{className:"notification-dropdown fixed top-16 right-16 w-72 sm:w-80 max-w-[calc(100vw-2rem)] bg-blue-800/90 backdrop-blur-lg rounded-lg shadow-xl border border-white/20 z-[999999]",children:[s.jsx("div",{className:"p-4 border-b border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"}),s.jsxs("div",{className:"flex items-center gap-2",children:[ve.length>0&&s.jsx(T,{variant:"ghost",size:"sm",onClick:F,className:"text-white/80 hover:text-white text-xs","data-testid":"button-clear-all-notifications",children:"Clear All"}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>G(!1),"data-testid":"button-close-notifications",children:s.jsx(Pt,{className:"h-4 w-4 text-white hover:text-red-500"})})]})]})}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:ve.length===0?s.jsx("div",{className:"p-4 text-center text-white/70",children:"No notifications yet"}):ve.map(H=>s.jsx("div",{className:`p-4 border-b border-white/20 hover:bg-white/10 cursor-pointer transition-colors ${H.isRead?"":"bg-blue-500/20"}`,onClick:()=>{H.isRead||lt(H.id)},"data-testid":`notification-${H.id}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${H.isRead?"bg-gray-300":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-white",children:H.title}),s.jsx("p",{className:"text-sm text-white/80 mt-1",children:H.message}),s.jsx("p",{className:"text-xs text-white/60 mt-2",children:g(H.createdAt)})]})]})},H.id))})]}),z&&s.jsx("div",{className:"hamburger-dropdown fixed top-16 right-4 w-48 bg-blue-600/70 backdrop-blur-lg border border-white/20 rounded-lg shadow-xl z-[999999]",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{$(!1),e("/school-dashboard")},"data-testid":"menu-home",children:[s.jsx(Xr,{className:"h-4 w-4 mr-3"}),"Home"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{$(!1),e("/school-settings")},"data-testid":"menu-settings",children:[s.jsx(Rs,{className:"h-4 w-4 mr-3"}),"Settings"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{$(!1),e("/cart")},"data-testid":"menu-cart",children:[s.jsx(xs,{className:"h-4 w-4 mr-3"}),"Cart"]}),s.jsx("div",{className:"border-t border-gray-100"}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-red-500 hover:bg-red-500/40 transition-colors",onClick:()=>{$(!1),fe()},"data-testid":"menu-logout",children:[s.jsx(Cn,{className:"h-4 w-4 mr-3"}),"Logout"]})]})}),s.jsx("div",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-lg",children:s.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:s.jsxs("div",{className:"flex justify-center sm:justify-start gap-2 sm:gap-3 py-4 overflow-x-auto scrollbar-hide",children:[s.jsxs("button",{onClick:()=>o("profile"),className:`px-4 sm:px-6 py-3 text-sm font-medium rounded-xl flex items-center space-x-2 whitespace-nowrap transition-all duration-300 transform min-w-fit ${i==="profile"?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg scale-105 shadow-indigo-500/25":"bg-white/10 text-blue-100 hover:bg-white/20 hover:text-white hover:scale-102"}`,"data-testid":"tab-profile",children:[s.jsx(to,{className:"h-4 w-4 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden xs:inline",children:"Profile"})]}),s.jsxs("button",{onClick:()=>o("years"),className:`px-4 sm:px-6 py-3 text-sm font-medium rounded-xl flex items-center space-x-2 whitespace-nowrap transition-all duration-300 transform min-w-fit ${i==="years"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg scale-105 shadow-purple-500/25":"bg-white/10 text-blue-100 hover:bg-white/20 hover:text-white hover:scale-102"}`,"data-testid":"tab-years",children:[s.jsx(yr,{className:"h-4 w-4 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden xs:inline",children:"Years"})]}),s.jsxs("button",{onClick:()=>o("memories"),className:`px-4 sm:px-6 py-3 text-sm font-medium rounded-xl flex items-center space-x-2 whitespace-nowrap transition-all duration-300 transform min-w-fit relative ${i==="memories"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg scale-105 shadow-orange-500/25":"bg-white/10 text-blue-100 hover:bg-white/20 hover:text-white hover:scale-102"}`,"data-testid":"tab-memories",children:[s.jsx(_n,{className:"h-4 w-4 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden xs:inline",children:"Photos"}),K.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-pulse shadow-lg ring-2 ring-red-200 dark:ring-red-800 transition-all duration-200 ease-out","data-testid":"notification-badge-pending-memories",children:K.length})]}),s.jsxs("button",{onClick:()=>o("viewers"),className:`px-4 sm:px-6 py-3 text-sm font-medium rounded-xl flex items-center space-x-2 whitespace-nowrap transition-all duration-300 transform min-w-fit relative ${i==="viewers"?"bg-gradient-to-r from-green-500 to-teal-500 text-white shadow-lg scale-105 shadow-green-500/25":"bg-white/10 text-blue-100 hover:bg-white/20 hover:text-white hover:scale-102"}`,"data-testid":"tab-viewers",children:[s.jsx(il,{className:"h-4 w-4 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden xs:inline",children:"Alumni"}),te>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-pulse shadow-lg ring-2 ring-red-200 dark:ring-red-800 transition-all duration-200 ease-out","data-testid":"notification-badge-pending-requests",children:te})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-8",children:[i==="years"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Year Management"})}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/60 h-4 w-4"}),s.jsx(xe,{type:"text",placeholder:"Search years",value:h,onChange:H=>p(H.target.value),className:"pl-10 pr-4 py-2 w-full bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60"})]})}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20",children:[s.jsx(et,{children:s.jsxs(tt,{className:"flex items-center justify-between text-white",children:[s.jsx("span",{children:"Available Years"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"text-sm text-blue-200",children:[le.length," years available"]}),s.jsxs("div",{className:"flex items-center bg-white/10 backdrop-blur-lg border border-white/20 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>c("grid"),className:`p-1.5 rounded ${l==="grid"?"bg-white/30 shadow-sm text-blue-300":"text-white/70 hover:text-white"}`,title:"Grid View",children:s.jsx(Vx,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>c("list"),className:`p-1.5 rounded ${l==="list"?"bg-white/30 shadow-sm text-blue-300":"text-white/70 hover:text-white"}`,title:"List View",children:s.jsx(Bx,{className:"h-4 w-4"})})]})]})]})}),s.jsxs(be,{children:[J?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(xr,{className:"h-6 w-6 animate-spin text-white"}),s.jsx("span",{className:"text-white",children:"Loading purchase status..."})]})}):l==="grid"?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:le.map(H=>H&&s.jsxs("div",{className:"bg-white/5 backdrop-blur border border-white/20 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:H.year}),s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${H.status==="Active"?"bg-green-100 text-green-800":H.status==="Archived"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:H.status})]}),s.jsx("div",{className:"flex space-x-2 ",children:J?s.jsxs(T,{className:"flex-1 text-white border-gray-400 bg-gray-600/20",size:"sm",variant:"outline",disabled:!0,"data-testid":`button-loading-year-${H.year}`,children:[s.jsx(xr,{className:"h-4 w-4 mr-1 animate-spin"}),"Loading..."]}):H.purchased?s.jsxs(T,{size:"sm",variant:"outline",onClick:()=>At(H.year),className:"flex-1 text-white border-blue-400 bg-blue-600/20 hover:bg-blue-600/30 transition-colors hover:text-white","data-testid":`button-manage-year-${H.year}`,children:[s.jsx(Rs,{className:"h-4 w-4 mr-1 text-white"}),"Manage"]}):s.jsxs(T,{size:"sm",variant:"outline",onClick:()=>zt(H.year),className:"flex-1 text-white border-green-400 bg-green-600/20 hover:bg-green-600/30 transition-colors hover:text-white","data-testid":`button-buy-year-${H.year}`,children:[s.jsx(xs,{className:"h-4 w-4 mr-1"}),"Buy ",Y(E(H.price))]})})]},`year-${H.year}`))}):s.jsx("div",{className:"space-y-3",children:le.map(H=>H&&s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 backdrop-blur border border-white/20 rounded-lg hover:bg-white/10 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-xl font-bold text-white",children:H.year})}),s.jsx("div",{className:"flex items-center space-x-3",children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${H.status==="Active"?"bg-green-100 text-green-800":H.status==="Archived"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:H.status})})]}),s.jsx("div",{className:"flex-shrink-0 ",children:J?s.jsxs(T,{className:"flex-1 text-white border-gray-400 bg-gray-600/20",size:"sm",variant:"outline",disabled:!0,"data-testid":`button-loading-year-${H.year}`,children:[s.jsx(xr,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):H.purchased?s.jsxs(T,{className:"flex-1 text-white border-blue-400 bg-blue-600/20 hover:bg-blue-600/30 transition-colors hover:text-white",size:"sm",variant:"outline",onClick:()=>At(H.year),"data-testid":`button-manage-year-${H.year}`,children:[s.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Manage"]}):s.jsxs(T,{variant:"outline",className:"flex-1 text-white border-green-400 bg-green-600/20 hover:bg-green-600/30 transition-colors hover:text-white",size:"sm",onClick:()=>zt(H.year),"data-testid":`button-buy-year-${H.year}`,children:[s.jsx(xs,{className:"h-4 w-4 mr-2"}),"Buy ",Y(E(H.price))]})})]},`year-${H.year}`))}),le.length===0&&h&&s.jsx("div",{className:"text-center py-8",children:s.jsxs("p",{className:"text-white/70",children:['No years found matching "',h,'"']})})]})]})]}),i==="memories"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Photos & Memories"}),K.length>0&&s.jsxs("div",{className:"bg-orange-500/20 text-orange-200 px-3 py-1 rounded-full text-sm",children:[K.length," pending approval"]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/60 h-4 w-4"}),s.jsx(xe,{type:"text",placeholder:"Search years",value:h,onChange:H=>p(H.target.value),className:"pl-10 pr-4 py-2 w-full bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60"})]})}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20",children:[s.jsx(et,{children:s.jsxs(tt,{className:"flex items-center justify-between text-white",children:[s.jsx("span",{children:"Available Years"}),s.jsx("span",{className:"text-sm font-normal text-blue-200",children:"Storage for all years"})]})}),s.jsxs(be,{children:[J?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(xr,{className:"h-6 w-6 animate-spin text-white"}),s.jsx("span",{className:"text-white",children:"Loading years..."})]})}):s.jsx("div",{className:"space-y-3",children:le.map(H=>H?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 backdrop-blur border border-white/20 rounded-lg hover:bg-white/10",children:[s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("h3",{className:"text-lg font-medium text-white",children:["Year ",H.year||"Unknown"]}),s.jsx("p",{className:"text-sm text-blue-200",children:"Photos & memories"})]})})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"text-right",children:s.jsx("p",{className:"text-xs text-blue-200",children:"Storage"})}),s.jsxs("div",{className:"relative",children:[s.jsxs(T,{variant:"outline",onClick:()=>e(`/photos-memories-manage?year=${H.year||"unknown"}&school=${B==null?void 0:B.id}`),"data-testid":`button-manage-memories-${H.year||"unknown"}`,className:"text-sm text-white border-white bg-black/20 hover:bg-blue-300/20 transition-colors hover:text-blue-600 border-white/20",children:[s.jsx(Rs,{className:"h-4 w-4 mr-1 text-white-100"}),"Manage"]}),(()=>{const Je=K.filter(wt=>{var Ge,ut;return((Ge=wt.year)==null?void 0:Ge.toString())===((ut=H.year)==null?void 0:ut.toString())}).length;return Je>0?s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-pulse shadow-lg ring-2 ring-red-200 dark:ring-red-800 transition-all duration-200 ease-out","data-testid":`notification-badge-pending-memories-year-${H.year}`,children:Je}):null})()]})]})]},H.year||"unknown"):null).filter(Boolean)}),le.length===0&&h&&s.jsx("div",{className:"text-center py-8",children:s.jsxs("p",{className:"text-white/70",children:['No years found matching "',h,'"']})})]})]})]}),i==="viewers"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Alumni Authentication"})}),ye.length>0&&s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20",children:[s.jsx(et,{children:s.jsxs(tt,{className:"flex items-center text-white",children:[s.jsx(qr,{className:"h-5 w-5 mr-2 text-orange-500"}),"Pending Alumni Upgrade Requests (",ye.length,")"]})}),s.jsx(be,{children:s.jsx("div",{className:"space-y-3",children:ye.map(H=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-500/30 backdrop-blur-lg border border-orange-400 shadow-2xl transition-all hover:text-orange-400",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-orange-100 ",children:H.fullName}),s.jsxs("p",{className:"text-sm text-orange-100",children:["Requested on ",new Date(H.createdAt||"").toLocaleDateString()]}),s.jsxs("p",{className:"text-xs text-orange-500",children:["Status: ",H.status]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(T,{size:"sm",variant:"outline",onClick:()=>Ft(H),className:"bg-blue-500/40 backdrop-blur-lg border hover:bg-blue-500/50 text-blue-200 border-blue-200 hover:text-blue-100",children:[s.jsx(zs,{className:"h-4 w-4 mr-1"}),"View"]}),s.jsxs(T,{size:"sm",onClick:()=>ot(H.id),disabled:me.isPending,className:"bg-green-500/40 backdrop-blur-lg border hover:bg-green-500/50 text-green-400 border-green-200 hover:text-green-100",children:[s.jsx(bn,{className:"h-4 w-4 mr-1"}),"Approve"]}),s.jsxs(T,{size:"sm",variant:"outline",onClick:()=>Dt(H.id),disabled:Ae.isPending,className:"bg-red-500/40 backdrop-blur-lg border hover:bg-red-500/50 text-red-200 border-red-200 hover:text-red-100",children:[s.jsx(el,{className:"h-4 w-4 mr-1"}),"Deny"]})]})]},H.id))})})]}),u&&s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20",children:[s.jsx(et,{children:s.jsx(tt,{className:"text-white",children:"Add New Viewer Account"})}),s.jsxs(be,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ue,{htmlFor:"viewerFullName",className:"text-white",children:"Full Name"}),s.jsx(xe,{id:"viewerFullName",value:Z.fullName,onChange:H=>ne({...Z,fullName:H.target.value}),placeholder:"Viewer's full name"})]}),s.jsxs("div",{children:[s.jsx(ue,{htmlFor:"viewerUsername",className:"text-white",children:"Username"}),s.jsx(xe,{id:"viewerUsername",value:Z.username,onChange:H=>ne({...Z,username:H.target.value}),placeholder:"Login username"})]}),s.jsxs("div",{children:[s.jsx(ue,{htmlFor:"viewerPassword",className:"text-white",children:"Password"}),s.jsx(xe,{id:"viewerPassword",type:"password",value:Z.password,onChange:H=>ne({...Z,password:H.target.value}),placeholder:"Login password"})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(T,{onClick:Ue,children:"Add Viewer"}),s.jsx(T,{variant:"outline",onClick:()=>m(!1),children:"Cancel"})]})]})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20",children:[s.jsx(et,{children:s.jsxs(tt,{className:"flex items-center justify-between text-white",children:[s.jsx("span",{children:"Current Alumni Accounts"}),s.jsxs("span",{className:"text-sm text-blue-200",children:[He.length," total"]})]})}),s.jsxs(be,{children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/60 h-4 w-4"}),s.jsx(xe,{type:"text",placeholder:"Search alumni by name or year...",value:y,onChange:H=>N(H.target.value),className:"pl-10 pr-4 py-2 w-full bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60"})]})}),(()=>{if(He.length===0)return s.jsx("p",{className:"text-blue-200 text-center py-4",children:"No alumni accounts found"});const H=He.filter(Ve=>{var Be,gt,ht;const vt=y.toLowerCase(),I=((Be=Ve.fullName)==null?void 0:Be.toLowerCase())||"",Pe=((gt=Ve.graduationYear)==null?void 0:gt.toString())||"",Me=((ht=Ve.admissionYear)==null?void 0:ht.toString())||"";return I.includes(vt)||Pe.includes(vt)||Me.includes(vt)}),Je=H.filter(Ve=>Ve.graduationYear&&Ve.graduationYear!=="Did not graduate from "+Ve.school),wt=H.filter(Ve=>Ve.graduationYear&&Ve.graduationYear.startsWith("Did not graduate from")),Ge=Je.sort((Ve,vt)=>{const I=parseInt(Ve.graduationYear)||0,Pe=parseInt(vt.graduationYear)||0;return I!==Pe?Pe-I:(Ve.school||"").localeCompare(vt.school||"")}),ut=wt.sort((Ve,vt)=>(Ve.school||"").localeCompare(vt.school||"")),Ie=B==null?void 0:B.yearFounded,Rt=Ie?Ge.filter(Ve=>{const vt=parseInt(Ve.graduationYear);return!vt||vt>=Ie}):Ge;return s.jsxs("div",{className:"space-y-6",children:[Rt.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-green-600 mb-4 flex items-center",children:[s.jsx(rr,{className:"h-5 w-5 mr-2 text-green-600"}),"Graduated Alumni (",Rt.length,")"]}),s.jsx("div",{className:"space-y-2",children:Rt.map(Ve=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-500/30 backdrop-blur-lg border border-green-400 shadow-2xl transition-all hover:text-green-400 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-green-50",children:Ve.fullName}),s.jsxs("p",{className:"text-sm text-green-50",children:["Class of ",Ve.graduationYear," •",s.jsx("span",{className:`ml-1 font-medium ${Ve.status==="verified"?"text-green-200":"text-yellow-600"}`,children:Ve.status==="verified"?"Verified":"Pending"})]}),s.jsxs("p",{className:"text-xs text-green-50 mt-1",children:["Admitted: ",Ve.admissionYear]}),Ve.email&&s.jsxs("p",{className:"text-xs text-green-50 mt-1",children:["Email: ",Ve.email]}),Ve.phoneNumber&&s.jsxs("p",{className:"text-xs text-green-50 mt-1",children:["Phone: ",Ve.phoneNumber]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(T,{size:"sm",variant:"outline",onClick:()=>Ye.mutate(Ve.id),disabled:Ye.isPending,className:"text-red-600 border-red-200 hover:bg-red-50",children:Ye.isPending?s.jsx(xr,{className:"h-4 w-4 animate-spin"}):s.jsx(As,{className:"h-4 w-4"})})})]},Ve.id))})]}),ut.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(il,{className:"h-5 w-5 mr-2 text-blue-600"}),"Did Not Graduate from ",B==null?void 0:B.name," (",ut.length,")"]}),s.jsx("div",{className:"space-y-2",children:ut.map(Ve=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:Ve.fullName}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Did not graduate •",s.jsx("span",{className:`ml-1 font-medium ${Ve.status==="verified"?"text-green-600":"text-yellow-600"}`,children:Ve.status==="verified"?"Verified":"Pending"})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Admitted: ",Ve.admissionYear]}),Ve.email&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Email: ",Ve.email]}),Ve.phoneNumber&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Phone: ",Ve.phoneNumber]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(T,{size:"sm",variant:"outline",onClick:()=>Ye.mutate(Ve.id),disabled:Ye.isPending,className:"text-red-600 border-red-200 hover:bg-red-50",children:Ye.isPending?s.jsx(xr,{className:"h-4 w-4 animate-spin"}):s.jsx(As,{className:"h-4 w-4"})})})]},Ve.id))})]}),H.length===0&&y&&s.jsxs("p",{className:"text-gray-500 text-center py-4",children:['No alumni found matching "',y,'"']})]})})()]})]})]}),i==="profile"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h2",{className:"text-2xl font-bold text-white",children:"School Profile"})}),s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-xl",children:s.jsx(be,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden",children:B!=null&&B.logo?s.jsx("img",{src:B.logo.startsWith("/")?B.logo:`/${B.logo}`,alt:`${B.name} logo`,className:"w-full h-full object-cover",style:{aspectRatio:"1 / 1"},"data-testid":"img-school-logo"}):s.jsx(rr,{className:"w-12 h-12 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2","data-testid":"text-school-name",children:(B==null?void 0:B.name)||"School Name"}),s.jsx("p",{className:"text-white","data-testid":"text-school-subtitle",children:(B==null?void 0:B.address)||"Address not available"})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(ge,{className:"bg-blue-500/10 backdrop-blur-lg border border-blue-300/20 shadow-xl",children:s.jsx(be,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(yr,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-50",children:"Founded"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600","data-testid":"text-founding-year",children:(B==null?void 0:B.yearFounded)||"N/A"})]})]})})}),s.jsx(ge,{className:"bg-green-500/10 backdrop-blur-lg border border-green-300/20 shadow-xl",children:s.jsx(be,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(il,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-green-50",children:"Alumni Count"}),s.jsx("p",{className:"text-2xl font-bold text-green-600","data-testid":"text-alumni-count",children:He.length})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(ge,{className:"bg-orange-500/10 backdrop-blur-lg border border-orange-300/20 shadow-xl",children:[s.jsx(et,{children:s.jsxs(tt,{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:s.jsxs("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),s.jsx("span",{className:"font-semibold text-orange-50",children:"Location"})]})}),s.jsx(be,{children:s.jsxs("div",{className:"space-y-2","data-testid":"section-location",children:[s.jsxs("p",{className:"text-lg font-medium text-orange-600",children:[(B==null?void 0:B.city)||"City",B!=null&&B.state?`, ${B.state}`:""]}),s.jsx("p",{className:"text-orange-600",children:(B==null?void 0:B.country)||"Country"})]})})]}),s.jsxs(ge,{className:"bg-purple-500/10 backdrop-blur-lg border border-purple-300/20 shadow-xl",children:[s.jsx(et,{children:s.jsxs(tt,{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsxs("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c4.97 0 9-4.03 9-9s-4.03-9-9-9"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 21a9 9 0 009-9H3a9 9 0 009 9z"})]})}),s.jsx("span",{className:"text-purple-50",children:"Website"})]})}),s.jsx(be,{children:B!=null&&B.website?s.jsx("div",{"data-testid":"section-website",children:s.jsx("a",{href:B.website.startsWith("http")?B.website:`https://${B.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline font-medium","data-testid":"link-school-website",children:B.website})}):s.jsxs("div",{className:"text-gray-500","data-testid":"no-website",children:[s.jsx("p",{className:"mb-3 text-purple-50",children:"No website provided"}),s.jsx(T,{size:"sm",variant:"outline",onClick:()=>e("/school-settings?tab=profile"),"data-testid":"button-add-website",className:"text-purple-50 border-purple-200 bg-purple-5 hover:bg-purple-50 hover:text-purple-600",children:"Add Website"})]})})]})]})]}),s.jsx(sr,{open:b,onOpenChange:x,children:s.jsxs(Hs,{className:"max-w-2xl bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(Os,{children:[s.jsx(Ls,{className:"text-white",children:"Alumni Status Request Details"}),s.jsx(ao,{className:"text-blue-50",children:"Review the submitted alumni verification information"})]}),f&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Full Name"}),s.jsx("p",{className:"text-white/80",children:f.fullName})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Status"}),s.jsx("p",{className:`text-sm font-medium ${f.status==="pending"?"text-orange-600":f.status==="approved"?"text-green-600":"text-red-600"}`,children:f.status.charAt(0).toUpperCase()+f.status.slice(1)})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Admission Year"}),s.jsx("p",{className:"text-white/80",children:f.admissionYear})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Graduation Year"}),s.jsx("p",{className:"text-white/80",children:f.graduationYear})]})]}),f.postHeld&&s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Post Held"}),s.jsx("p",{className:"text-white/80",children:f.postHeld})]}),f.studentName&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Student Reference Name"}),s.jsx("p",{className:"text-white/80",children:f.studentName})]}),f.studentAdmissionYear&&s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Reference Admission Year"}),s.jsx("p",{className:"text-white/80",children:f.studentAdmissionYear})]})]}),f.additionalInfo&&s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Additional Information"}),s.jsx("p",{className:"text-white/80 bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl p-3 rounded-md",children:f.additionalInfo})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Request Date"}),s.jsx("p",{className:"text-white/80",children:new Date(f.createdAt||"").toLocaleDateString()})]}),f.status==="pending"&&s.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[s.jsxs(T,{onClick:()=>{ot(f.id),x(!1)},disabled:me.isPending,className:"bg-green-500/20 backdrop-blur-lg border border-white/20 shadow-2xl text-green-600 hover:bg-green-500 hover:text-white",children:[s.jsx(bn,{className:"h-4 w-4 mr-2"}),"Approve Request"]}),s.jsxs(T,{variant:"outline",onClick:()=>{Dt(f.id),x(!1)},disabled:Ae.isPending,className:"bg-red-500/20 backdrop-blur-lg border border-white/20 shadow-2xl text-red-600 hover:bg-red-500 hover:text-white",children:[s.jsx(el,{className:"h-4 w-4 mr-2"}),"Deny Request"]})]})]})]})}),s.jsx(sr,{open:!!t,onOpenChange:H=>!H&&r(null),children:s.jsx(Hs,{className:"max-w-4xl bg-white/95 backdrop-blur-lg border border-white/20 shadow-2xl",children:t&&s.jsxs(s.Fragment,{children:[s.jsxs(Os,{children:[s.jsx(Ls,{className:"text-xl font-semibold",children:t.title}),s.jsx(ao,{className:"text-gray-600",children:"Preview uploaded memory"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-center",children:t.mediaType==="image"?t.imageUrl?s.jsx("img",{src:t.imageUrl,alt:t.title,className:"max-w-full max-h-96 object-contain rounded-lg border"}):s.jsxs("div",{className:"w-64 h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:[s.jsx(da,{className:"h-16 w-16 text-gray-400"}),s.jsx("span",{className:"ml-2 text-gray-500",children:"No image available"})]}):t.videoUrl?s.jsx("video",{src:t.videoUrl,controls:!0,className:"max-w-full max-h-96 rounded-lg border"}):s.jsxs("div",{className:"w-64 h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:[s.jsx(t0,{className:"h-16 w-16 text-gray-400"}),s.jsx("span",{className:"ml-2 text-gray-500",children:"No video available"})]})}),s.jsxs("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg",children:[t.description&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Description"}),s.jsx("p",{className:"text-gray-700",children:t.description})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600",children:"Category:"}),s.jsx("br",{}),s.jsx("span",{className:"text-gray-800 capitalize",children:((Te=t.category)==null?void 0:Te.replace("_"," "))||"None"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600",children:"Year:"}),s.jsx("br",{}),s.jsx("span",{className:"text-gray-800",children:t.year})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600",children:"Uploaded by:"}),s.jsx("br",{}),s.jsx("span",{className:"text-gray-800",children:t.uploadedBy})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600",children:"Upload Date:"}),s.jsx("br",{}),s.jsx("span",{className:"text-gray-800",children:new Date(t.createdAt||"").toLocaleDateString()})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[s.jsx(T,{variant:"outline",onClick:()=>r(null),children:"Close"}),s.jsxs(T,{onClick:()=>{ie.mutate(t.id),r(null)},disabled:ie.isPending,className:"bg-red-600 hover:bg-red-700 text-white",children:[s.jsx(el,{className:"h-4 w-4 mr-1"}),"Deny"]}),s.jsxs(T,{onClick:()=>{Ne.mutate(t.id),r(null)},disabled:Ne.isPending,className:"bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(bn,{className:"h-4 w-4 mr-1"}),"Approve"]})]})]})]})})}),w&&X&&n&&B&&s.jsx(gR,{isOpen:w,onClose:()=>C(!1),year:X,price:((Jt=ce.find(H=>H&&H.year===X))==null?void 0:Jt.price)||14.99,schoolId:B.id,userId:n.id,isFree:((de=ce.find(H=>H&&H.year===X))==null?void 0:de.isFree)||!1})]})]})]}):null}function _h(e,[t,r]){return Math.min(r,Math.max(t,e))}var vR=[" ","Enter","ArrowUp","ArrowDown"],wR=[" ","Enter"],io="Select",[Pm,Em,yR]=om(io),[tc]=cr(io,[yR,pm]),Tm=pm(),[NR,Ni]=tc(io),[jR,CR]=tc(io),ej=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:m,autoComplete:h,disabled:p,required:y,form:N}=e,f=Tm(t),[j,b]=d.useState(null),[x,w]=d.useState(null),[C,S]=d.useState(!1),M=Ld(u),[A,R]=qn({prop:n,defaultProp:a??!1,onChange:i,caller:io}),[z,$]=qn({prop:o,defaultProp:l,onChange:c,caller:io}),W=d.useRef(null),G=j?N||!!j.closest("form"):!0,[X,P]=d.useState(new Set),L=Array.from(X).map(_=>_.props.value).join(";");return s.jsx(lE,{...f,children:s.jsxs(NR,{required:y,scope:t,trigger:j,onTriggerChange:b,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:C,onValueNodeHasChildrenChange:S,contentId:ii(),value:z,onValueChange:$,open:A,onOpenChange:R,dir:M,triggerPointerDownPosRef:W,disabled:p,children:[s.jsx(Pm.Provider,{scope:t,children:s.jsx(jR,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(_=>{P(V=>new Set(V).add(_))},[]),onNativeOptionRemove:d.useCallback(_=>{P(V=>{const E=new Set(V);return E.delete(_),E})},[]),children:r})}),G?s.jsxs(Cj,{"aria-hidden":!0,required:y,tabIndex:-1,name:m,autoComplete:h,value:z,onChange:_=>$(_.target.value),disabled:p,form:N,children:[z===void 0?s.jsx("option",{value:""}):null,Array.from(X)]},L):null]})})};ej.displayName=io;var tj="SelectTrigger",sj=d.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=Tm(r),o=Ni(tj,r),l=o.disabled||n,c=xt(t,o.onTriggerChange),u=Em(r),m=d.useRef("touch"),[h,p,y]=Sj(f=>{const j=u().filter(w=>!w.disabled),b=j.find(w=>w.value===o.value),x=Pj(j,f,b);x!==void 0&&o.onValueChange(x.value)}),N=f=>{l||(o.onOpenChange(!0),y()),f&&(o.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return s.jsx(f3,{asChild:!0,...i,children:s.jsx(Xe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":kj(o.value)?"":void 0,...a,ref:c,onClick:We(a.onClick,f=>{f.currentTarget.focus(),m.current!=="mouse"&&N(f)}),onPointerDown:We(a.onPointerDown,f=>{m.current=f.pointerType;const j=f.target;j.hasPointerCapture(f.pointerId)&&j.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(N(f),f.preventDefault())}),onKeyDown:We(a.onKeyDown,f=>{const j=h.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&p(f.key),!(j&&f.key===" ")&&vR.includes(f.key)&&(N(),f.preventDefault())})})})});sj.displayName=tj;var rj="SelectValue",nj=d.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=Ni(rj,r),{onValueNodeHasChildrenChange:u}=c,m=i!==void 0,h=xt(t,c.onValueNodeChange);return bs(()=>{u(m)},[u,m]),s.jsx(Xe.span,{...l,ref:h,style:{pointerEvents:"none"},children:kj(c.value)?s.jsx(s.Fragment,{children:o}):i})});nj.displayName=rj;var kR="SelectIcon",aj=d.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Xe.span,{"aria-hidden":!0,...a,ref:t,children:n||"▼"})});aj.displayName=kR;var SR="SelectPortal",ij=e=>s.jsx(lm,{asChild:!0,...e});ij.displayName=SR;var oo="SelectContent",oj=d.forwardRef((e,t)=>{const r=Ni(oo,e.__scopeSelect),[n,a]=d.useState();if(bs(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?Wr.createPortal(s.jsx(lj,{scope:e.__scopeSelect,children:s.jsx(Pm.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(cj,{...e,ref:t})});oj.displayName=oo;var an=10,[lj,ji]=tc(oo),PR="SelectContentImpl",ER=Il("SelectContent.RemoveScroll"),cj=d.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:m,arrowPadding:h,collisionBoundary:p,collisionPadding:y,sticky:N,hideWhenDetached:f,avoidCollisions:j,...b}=e,x=Ni(oo,r),[w,C]=d.useState(null),[S,M]=d.useState(null),A=xt(t,re=>C(re)),[R,z]=d.useState(null),[$,W]=d.useState(null),G=Em(r),[X,P]=d.useState(!1),L=d.useRef(!1);d.useEffect(()=>{if(w)return dN(w)},[w]),tN();const _=d.useCallback(re=>{const[ye,...Q]=G().map(we=>we.ref.current),[te]=Q.slice(-1),ve=document.activeElement;for(const we of re)if(we===ve||(we==null||we.scrollIntoView({block:"nearest"}),we===ye&&S&&(S.scrollTop=0),we===te&&S&&(S.scrollTop=S.scrollHeight),we==null||we.focus(),document.activeElement!==ve))return},[G,S]),V=d.useCallback(()=>_([R,w]),[_,R,w]);d.useEffect(()=>{X&&V()},[X,V]);const{onOpenChange:E,triggerPointerDownPosRef:Y}=x;d.useEffect(()=>{if(w){let re={x:0,y:0};const ye=te=>{var ve,we;re={x:Math.abs(Math.round(te.pageX)-(((ve=Y.current)==null?void 0:ve.x)??0)),y:Math.abs(Math.round(te.pageY)-(((we=Y.current)==null?void 0:we.y)??0))}},Q=te=>{re.x<=10&&re.y<=10?te.preventDefault():w.contains(te.target)||E(!1),document.removeEventListener("pointermove",ye),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",Q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",Q,{capture:!0})}}},[w,E,Y]),d.useEffect(()=>{const re=()=>E(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[E]);const[Z,ne]=Sj(re=>{const ye=G().filter(ve=>!ve.disabled),Q=ye.find(ve=>ve.ref.current===document.activeElement),te=Pj(ye,re,Q);te&&setTimeout(()=>te.ref.current.focus())}),oe=d.useCallback((re,ye,Q)=>{const te=!L.current&&!Q;(x.value!==void 0&&x.value===ye||te)&&(z(re),te&&(L.current=!0))},[x.value]),pe=d.useCallback(()=>w==null?void 0:w.focus(),[w]),he=d.useCallback((re,ye,Q)=>{const te=!L.current&&!Q;(x.value!==void 0&&x.value===ye||te)&&W(re)},[x.value]),B=n==="popper"?b0:dj,K=B===b0?{side:l,sideOffset:c,align:u,alignOffset:m,arrowPadding:h,collisionBoundary:p,collisionPadding:y,sticky:N,hideWhenDetached:f,avoidCollisions:j}:{};return s.jsx(lj,{scope:r,content:w,viewport:S,onViewportChange:M,itemRefCallback:oe,selectedItem:R,onItemLeave:pe,itemTextRefCallback:he,focusSelectedItem:V,selectedItemText:$,position:n,isPositioned:X,searchRef:Z,children:s.jsx(fg,{as:ER,allowPinchZoom:!0,children:s.jsx(mg,{asChild:!0,trapped:x.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:We(a,re=>{var ye;(ye=x.trigger)==null||ye.focus({preventScroll:!0}),re.preventDefault()}),children:s.jsx(Rd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:s.jsx(B,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:re=>re.preventDefault(),...b,...K,onPlaced:()=>P(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:We(b.onKeyDown,re=>{const ye=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!ye&&re.key.length===1&&ne(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let te=G().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);if(["ArrowUp","End"].includes(re.key)&&(te=te.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const ve=re.target,we=te.indexOf(ve);te=te.slice(we+1)}setTimeout(()=>_(te)),re.preventDefault()}})})})})})})});cj.displayName=PR;var TR="SelectItemAlignedPosition",dj=d.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Ni(oo,r),o=ji(oo,r),[l,c]=d.useState(null),[u,m]=d.useState(null),h=xt(t,A=>m(A)),p=Em(r),y=d.useRef(!1),N=d.useRef(!0),{viewport:f,selectedItem:j,selectedItemText:b,focusSelectedItem:x}=o,w=d.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&f&&j&&b){const A=i.trigger.getBoundingClientRect(),R=u.getBoundingClientRect(),z=i.valueNode.getBoundingClientRect(),$=b.getBoundingClientRect();if(i.dir!=="rtl"){const ve=$.left-R.left,we=z.left-ve,Ne=A.left-we,ie=A.width+Ne,me=Math.max(ie,R.width),Ae=window.innerWidth-an,at=_h(we,[an,Math.max(an,Ae-me)]);l.style.minWidth=ie+"px",l.style.left=at+"px"}else{const ve=R.right-$.right,we=window.innerWidth-z.right-ve,Ne=window.innerWidth-A.right-we,ie=A.width+Ne,me=Math.max(ie,R.width),Ae=window.innerWidth-an,at=_h(we,[an,Math.max(an,Ae-me)]);l.style.minWidth=ie+"px",l.style.right=at+"px"}const W=p(),G=window.innerHeight-an*2,X=f.scrollHeight,P=window.getComputedStyle(u),L=parseInt(P.borderTopWidth,10),_=parseInt(P.paddingTop,10),V=parseInt(P.borderBottomWidth,10),E=parseInt(P.paddingBottom,10),Y=L+_+X+E+V,Z=Math.min(j.offsetHeight*5,Y),ne=window.getComputedStyle(f),oe=parseInt(ne.paddingTop,10),pe=parseInt(ne.paddingBottom,10),he=A.top+A.height/2-an,B=G-he,K=j.offsetHeight/2,re=j.offsetTop+K,ye=L+_+re,Q=Y-ye;if(ye<=he){const ve=W.length>0&&j===W[W.length-1].ref.current;l.style.bottom="0px";const we=u.clientHeight-f.offsetTop-f.offsetHeight,Ne=Math.max(B,K+(ve?pe:0)+we+V),ie=ye+Ne;l.style.height=ie+"px"}else{const ve=W.length>0&&j===W[0].ref.current;l.style.top="0px";const Ne=Math.max(he,L+f.offsetTop+(ve?oe:0)+K)+Q;l.style.height=Ne+"px",f.scrollTop=ye-he+f.offsetTop}l.style.margin=`${an}px 0`,l.style.minHeight=Z+"px",l.style.maxHeight=G+"px",n==null||n(),requestAnimationFrame(()=>y.current=!0)}},[p,i.trigger,i.valueNode,l,u,f,j,b,i.dir,n]);bs(()=>w(),[w]);const[C,S]=d.useState();bs(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const M=d.useCallback(A=>{A&&N.current===!0&&(w(),x==null||x(),N.current=!1)},[w,x]);return s.jsx(RR,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:M,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:s.jsx(Xe.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});dj.displayName=TR;var AR="SelectPopperPosition",b0=d.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=an,...i}=e,o=Tm(r);return s.jsx(p3,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});b0.displayName=AR;var[RR,Cg]=tc(oo,{}),v0="SelectViewport",uj=d.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=ji(v0,r),o=Cg(v0,r),l=xt(t,i.onViewportChange),c=d.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(Pm.Slot,{scope:r,children:s.jsx(Xe.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:We(a.onScroll,u=>{const m=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const y=Math.abs(c.current-m.scrollTop);if(y>0){const N=window.innerHeight-an*2,f=parseFloat(h.style.minHeight),j=parseFloat(h.style.height),b=Math.max(f,j);if(b<N){const x=b+y,w=Math.min(N,x),C=x-w;h.style.height=w+"px",h.style.bottom==="0px"&&(m.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}c.current=m.scrollTop})})})]})});uj.displayName=v0;var hj="SelectGroup",[MR,_R]=tc(hj),DR=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=ii();return s.jsx(MR,{scope:r,id:a,children:s.jsx(Xe.div,{role:"group","aria-labelledby":a,...n,ref:t})})});DR.displayName=hj;var mj="SelectLabel",fj=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=_R(mj,r);return s.jsx(Xe.div,{id:a.id,...n,ref:t})});fj.displayName=mj;var Dh="SelectItem",[IR,pj]=tc(Dh),xj=d.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=Ni(Dh,r),c=ji(Dh,r),u=l.value===n,[m,h]=d.useState(i??""),[p,y]=d.useState(!1),N=xt(t,x=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,x,n,a)}),f=ii(),j=d.useRef("touch"),b=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(IR,{scope:r,value:n,disabled:a,textId:f,isSelected:u,onItemTextChange:d.useCallback(x=>{h(w=>w||((x==null?void 0:x.textContent)??"").trim())},[]),children:s.jsx(Pm.ItemSlot,{scope:r,value:n,disabled:a,textValue:m,children:s.jsx(Xe.div,{role:"option","aria-labelledby":f,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:N,onFocus:We(o.onFocus,()=>y(!0)),onBlur:We(o.onBlur,()=>y(!1)),onClick:We(o.onClick,()=>{j.current!=="mouse"&&b()}),onPointerUp:We(o.onPointerUp,()=>{j.current==="mouse"&&b()}),onPointerDown:We(o.onPointerDown,x=>{j.current=x.pointerType}),onPointerMove:We(o.onPointerMove,x=>{var w;j.current=x.pointerType,a?(w=c.onItemLeave)==null||w.call(c):j.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:We(o.onPointerLeave,x=>{var w;x.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:We(o.onKeyDown,x=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&x.key===" "||(wR.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});xj.displayName=Dh;var kc="SelectItemText",gj=d.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=Ni(kc,r),l=ji(kc,r),c=pj(kc,r),u=CR(kc,r),[m,h]=d.useState(null),p=xt(t,b=>h(b),c.onItemTextChange,b=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,b,c.value,c.disabled)}),y=m==null?void 0:m.textContent,N=d.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:f,onNativeOptionRemove:j}=u;return bs(()=>(f(N),()=>j(N)),[f,j,N]),s.jsxs(s.Fragment,{children:[s.jsx(Xe.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Wr.createPortal(i.children,o.valueNode):null]})});gj.displayName=kc;var bj="SelectItemIndicator",vj=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return pj(bj,r).isSelected?s.jsx(Xe.span,{"aria-hidden":!0,...n,ref:t}):null});vj.displayName=bj;var w0="SelectScrollUpButton",wj=d.forwardRef((e,t)=>{const r=ji(w0,e.__scopeSelect),n=Cg(w0,e.__scopeSelect),[a,i]=d.useState(!1),o=xt(t,n.onScrollButtonChange);return bs(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(Nj,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});wj.displayName=w0;var y0="SelectScrollDownButton",yj=d.forwardRef((e,t)=>{const r=ji(y0,e.__scopeSelect),n=Cg(y0,e.__scopeSelect),[a,i]=d.useState(!1),o=xt(t,n.onScrollButtonChange);return bs(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,m=Math.ceil(c.scrollTop)<u;i(m)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(Nj,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});yj.displayName=y0;var Nj=d.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=ji("SelectScrollButton",r),o=d.useRef(null),l=Em(r),c=d.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),bs(()=>{var m;const u=l().find(h=>h.ref.current===document.activeElement);(m=u==null?void 0:u.ref.current)==null||m.scrollIntoView({block:"nearest"})},[l]),s.jsx(Xe.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:We(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:We(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:We(a.onPointerLeave,()=>{c()})})}),FR="SelectSeparator",jj=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Xe.div,{"aria-hidden":!0,...n,ref:t})});jj.displayName=FR;var N0="SelectArrow",OR=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Tm(r),i=Ni(N0,r),o=ji(N0,r);return i.open&&o.position==="popper"?s.jsx(x3,{...a,...n,ref:t}):null});OR.displayName=N0;var LR="SelectBubbleInput",Cj=d.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=d.useRef(null),i=xt(n,a),o=Od(t);return d.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&m){const h=new Event("change",{bubbles:!0});m.call(l,t),l.dispatchEvent(h)}},[o,t]),s.jsx(Xe.select,{...r,style:{...o4,...r.style},ref:i,defaultValue:t})});Cj.displayName=LR;function kj(e){return e===""||e===void 0}function Sj(e){const t=Mr(e),r=d.useRef(""),n=d.useRef(0),a=d.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=d.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function Pj(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=$R(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function $R(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var zR=ej,Ej=sj,UR=nj,VR=aj,BR=ij,Tj=oj,qR=uj,Aj=fj,Rj=xj,HR=gj,YR=vj,Mj=wj,_j=yj,Dj=jj;const nr=zR,ar=UR,Ys=d.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Ej,{ref:n,className:$e("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(VR,{asChild:!0,children:s.jsx(Ux,{className:"h-4 w-4 opacity-50"})})]}));Ys.displayName=Ej.displayName;const Ij=d.forwardRef(({className:e,...t},r)=>s.jsx(Mj,{ref:r,className:$e("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(U7,{className:"h-4 w-4"})}));Ij.displayName=Mj.displayName;const Fj=d.forwardRef(({className:e,...t},r)=>s.jsx(_j,{ref:r,className:$e("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Ux,{className:"h-4 w-4"})}));Fj.displayName=_j.displayName;const Ws=d.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(BR,{children:s.jsxs(Tj,{ref:a,className:$e("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(Ij,{}),s.jsx(qR,{className:$e("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(Fj,{})]})}));Ws.displayName=Tj.displayName;const WR=d.forwardRef(({className:e,...t},r)=>s.jsx(Aj,{ref:r,className:$e("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));WR.displayName=Aj.displayName;const Nt=d.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Rj,{ref:n,className:$e("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(YR,{children:s.jsx(js,{className:"h-4 w-4"})})}),s.jsx(HR,{children:t})]}));Nt.displayName=Rj.displayName;const KR=d.forwardRef(({className:e,...t},r)=>s.jsx(Dj,{ref:r,className:$e("-mx-1 my-1 h-px bg-muted",e),...t}));KR.displayName=Dj.displayName;var Oj="AlertDialog",[GR]=cr(Oj,[hN]),Na=hN(),Lj=e=>{const{__scopeAlertDialog:t,...r}=e,n=Na(t);return s.jsx(EN,{...n,...r,modal:!0})};Lj.displayName=Oj;var QR="AlertDialogTrigger",$j=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Na(r);return s.jsx(TN,{...a,...n,ref:t})});$j.displayName=QR;var ZR="AlertDialogPortal",zj=e=>{const{__scopeAlertDialog:t,...r}=e,n=Na(t);return s.jsx(AN,{...n,...r})};zj.displayName=ZR;var XR="AlertDialogOverlay",Uj=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Na(r);return s.jsx(bg,{...a,...n,ref:t})});Uj.displayName=XR;var ml="AlertDialogContent",[JR,eM]=GR(ml),tM=s4("AlertDialogContent"),Vj=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Na(r),o=d.useRef(null),l=xt(t,o),c=d.useRef(null);return s.jsx(HA,{contentName:ml,titleName:Bj,docsSlug:"alert-dialog",children:s.jsx(JR,{scope:r,cancelRef:c,children:s.jsxs(vg,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:We(a.onOpenAutoFocus,u=>{var m;u.preventDefault(),(m=c.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(tM,{children:n}),s.jsx(rM,{contentRef:o})]})})})});Vj.displayName=ml;var Bj="AlertDialogTitle",qj=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Na(r);return s.jsx(wg,{...a,...n,ref:t})});qj.displayName=Bj;var Hj="AlertDialogDescription",Yj=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Na(r);return s.jsx(yg,{...a,...n,ref:t})});Yj.displayName=Hj;var sM="AlertDialogAction",Wj=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Na(r);return s.jsx(Ng,{...a,...n,ref:t})});Wj.displayName=sM;var Kj="AlertDialogCancel",Gj=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=eM(Kj,r),i=Na(r),o=xt(t,a);return s.jsx(Ng,{...i,...n,ref:o})});Gj.displayName=Kj;var rM=({contentRef:e})=>{const t=`\`${ml}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ml}\` by passing a \`${Hj}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ml}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},nM=Lj,aM=$j,iM=zj,Qj=Uj,Zj=Vj,Xj=Wj,Jj=Gj,e6=qj,t6=Yj;const Hl=nM,oM=aM,lM=iM,s6=d.forwardRef(({className:e,...t},r)=>s.jsx(Qj,{className:$e("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));s6.displayName=Qj.displayName;const lo=d.forwardRef(({className:e,...t},r)=>s.jsxs(lM,{children:[s.jsx(s6,{}),s.jsx(Zj,{ref:r,className:$e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));lo.displayName=Zj.displayName;const co=({className:e,...t})=>s.jsx("div",{className:$e("flex flex-col space-y-2 text-center sm:text-left",e),...t});co.displayName="AlertDialogHeader";const uo=({className:e,...t})=>s.jsx("div",{className:$e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});uo.displayName="AlertDialogFooter";const ho=d.forwardRef(({className:e,...t},r)=>s.jsx(e6,{ref:r,className:$e("text-lg font-semibold",e),...t}));ho.displayName=e6.displayName;const mo=d.forwardRef(({className:e,...t},r)=>s.jsx(t6,{ref:r,className:$e("text-sm text-muted-foreground",e),...t}));mo.displayName=t6.displayName;const fo=d.forwardRef(({className:e,...t},r)=>s.jsx(Xj,{ref:r,className:$e(tg(),e),...t}));fo.displayName=Xj.displayName;const po=d.forwardRef(({className:e,...t},r)=>s.jsx(Jj,{ref:r,className:$e(tg({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));po.displayName=Jj.displayName;var Am="Switch",[cM]=cr(Am),[dM,uM]=cM(Am),r6=d.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:m,...h}=e,[p,y]=d.useState(null),N=xt(t,w=>y(w)),f=d.useRef(!1),j=p?m||!!p.closest("form"):!0,[b,x]=qn({prop:a,defaultProp:i??!1,onChange:u,caller:Am});return s.jsxs(dM,{scope:r,checked:b,disabled:l,children:[s.jsx(Xe.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":o6(b),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:N,onClick:We(e.onClick,w=>{x(C=>!C),j&&(f.current=w.isPropagationStopped(),f.current||w.stopPropagation())})}),j&&s.jsx(i6,{control:p,bubbles:!f.current,name:n,value:c,checked:b,required:o,disabled:l,form:m,style:{transform:"translateX(-100%)"}})]})});r6.displayName=Am;var n6="SwitchThumb",a6=d.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=uM(n6,r);return s.jsx(Xe.span,{"data-state":o6(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});a6.displayName=n6;var hM="SwitchBubbleInput",i6=d.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=d.useRef(null),l=xt(o,i),c=Od(r),u=Id(t);return d.useEffect(()=>{const m=o.current;if(!m)return;const h=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&y){const N=new Event("click",{bubbles:n});y.call(m,r),m.dispatchEvent(N)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});i6.displayName=hM;function o6(e){return e?"checked":"unchecked"}var l6=r6,mM=a6;const c6=d.forwardRef(({className:e,...t},r)=>s.jsx(l6,{className:$e("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(mM,{className:$e("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));c6.displayName=l6.displayName;function d6({schools:e,value:t,onValueChange:r,placeholder:n="Search for a school...",className:a}){const[i,o]=d.useState(!1),[l,c]=d.useState(""),[u,m]=d.useState(-1),h=d.useRef(null),p=d.useRef(null),y=d.useRef(null),N=e.find(C=>C.id===t),f=e.filter(C=>C.name.toLowerCase().includes(l.toLowerCase())),j=C=>C.country?FT(C.country):"🏴";d.useEffect(()=>{const C=S=>{h.current&&!h.current.contains(S.target)&&(o(!1),c(""),m(-1))};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),d.useEffect(()=>{i&&p.current&&p.current.focus()},[i]);const b=C=>{if(!i){(C.key==="Enter"||C.key===" "||C.key==="ArrowDown")&&(C.preventDefault(),o(!0));return}switch(C.key){case"ArrowDown":C.preventDefault(),m(S=>S<f.length-1?S+1:0);break;case"ArrowUp":C.preventDefault(),m(S=>S>0?S-1:f.length-1);break;case"Enter":C.preventDefault(),u>=0&&f[u]&&(r(f[u].id),o(!1),c(""),m(-1));break;case"Escape":o(!1),c(""),m(-1);break}},x=C=>{r(C),o(!1),c(""),m(-1)},w=C=>{c(C.target.value),m(-1)};return d.useEffect(()=>{if(u>=0&&y.current){const C=y.current.children[u];C&&C.scrollIntoView({block:"nearest",behavior:"smooth"})}},[u]),s.jsxs("div",{ref:h,className:$e("relative w-full",a),children:[s.jsxs("div",{className:$e("flex items-center justify-between w-full px-3 py-2 text-sm bg-white/10 backdrop-blur-lg border border-white/20 rounded-md cursor-pointer transition-colors shadow-lg","hover:bg-white/15 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30",i&&"border-white/30 ring-2 ring-white/30"),onClick:()=>o(!i),onKeyDown:b,tabIndex:0,role:"combobox","aria-expanded":i,"aria-haspopup":"listbox",children:[s.jsx("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:N?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-lg",children:j(N)}),s.jsx("span",{className:"truncate text-white",children:N.name})]}):s.jsx("span",{className:"text-white/70",children:n})}),s.jsx(Ux,{className:$e("h-4 w-4 text-white/70 transition-transform",i&&"rotate-180")})]}),i&&s.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-blue-600/100 backdrop-blur-lg border border-white/20 rounded-md shadow-2xl max-h-60 overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-white/20",children:s.jsxs("div",{className:"relative bg-white/10",children:[s.jsx(ds,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-white"}),s.jsx("input",{ref:p,type:"text",value:l,onChange:w,onKeyDown:b,placeholder:"Type to search schools...",className:"w-full pl-8 pr-3 py-2 text-sm bg-blue-400/60 backdrop-blur-lg border border-white/20 rounded text-white placeholder:text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30"})]})}),s.jsx("ul",{ref:y,className:"py-1 overflow-y-auto max-h-48",role:"listbox",children:f.length>0?f.map((C,S)=>s.jsxs("li",{className:$e("flex items-center space-x-3 px-3 py-2 text-sm cursor-pointer transition-colors text-white","hover:bg-white/20",u===S&&"bg-white/30",t===C.id&&"bg-white/40"),onClick:()=>x(C.id),role:"option","aria-selected":t===C.id,children:[s.jsx("span",{className:"text-lg",children:j(C)}),s.jsx("span",{className:"flex-1 truncate text-white",children:C.name}),t===C.id&&s.jsx(js,{className:"h-4 w-4 text-green-500"})]},C.id)):s.jsx("li",{className:"px-3 py-2 text-sm text-white text-center",children:"No schools found"})})]})]})}const fM=_d("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Wi({className:e,variant:t,...r}){return s.jsx("div",{className:$e(fM({variant:t}),e),...r})}function pM({schools:e,onSchoolSelect:t,selectedSchool:r}){const[n,a]=d.useState(""),[i,o]=d.useState(!1),l=d.useMemo(()=>{if(!n.trim())return e.slice(0,5);const m=n.toLowerCase();return e.filter(h=>{var p,y;return h.name.toLowerCase().includes(m)||((p=h.city)==null?void 0:p.toLowerCase().includes(m))||((y=h.state)==null?void 0:y.toLowerCase().includes(m))}).slice(0,8)},[e,n]),c=e.find(m=>m.id===r),u=()=>{t(""),a(""),o(!1)};return s.jsxs("div",{className:"w-full space-y-4",children:[c&&s.jsx(ge,{className:"bg-primary/5 border-primary/20",children:s.jsx(be,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center overflow-hidden",children:c.logo?s.jsx("img",{src:c.logo.startsWith("/")?c.logo:`/${c.logo}`,alt:`${c.name} logo`,className:"w-full h-full object-cover"}):s.jsx(rr,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg text-white","data-testid":"text-selected-school-name",children:c.name}),s.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1 text-blue-50",children:[s.jsx(Fl,{className:"w-3 h-3"}),s.jsxs("span",{children:[c.city,", ",c.state]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-blue-50",children:[s.jsx(yr,{className:"w-3 h-3"}),s.jsxs("span",{children:["Est. ",c.yearFounded]})]})]})]})]}),s.jsx(T,{variant:"ghost",size:"sm",onClick:u,"data-testid":"button-clear-school-selection",children:s.jsx(Pt,{className:"w-4 h-4 text-red-600"})})]})})}),!c&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4 text-white"}),s.jsx(xe,{placeholder:"Search schools by name, city, or state...",value:n,onChange:m=>{a(m.target.value),o(!0)},onFocus:()=>o(!0),className:"pl-10 h-12 text-base bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white placeholder:text-white/50","data-testid":"input-school-search"})]}),i&&s.jsx(ge,{className:"border-border/50 bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsx(be,{className:"p-0",children:l.length>0?s.jsx("div",{className:"space-y-0",children:l.map((m,h)=>s.jsx("button",{onClick:()=>{t(m.id),o(!1),a("")},className:`w-full p-4 text-left hover-elevate transition-colors ${h!==l.length-1?"border-b border-border/20":""}`,"data-testid":`button-school-option-${m.id}`,children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center overflow-hidden",children:m.logo?s.jsx("img",{src:m.logo.startsWith("/")?m.logo:`/${m.logo}`,alt:`${m.name} logo`,className:"w-full h-full object-cover"}):s.jsx(rr,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white",children:m.name}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground text-blue-50",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Fl,{className:"w-3 h-3 text-blue-50"}),s.jsxs("span",{className:"text-blue-50",children:[m.city,", ",m.state]})]}),s.jsxs(Wi,{variant:"secondary",className:"text-xs",children:["Est. ",m.yearFounded]})]})]})]})})},m.id))}):s.jsxs("div",{className:"p-8 text-center text-muted-foreground text-white",children:[s.jsx(ds,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),s.jsxs("p",{children:['No schools found matching "',n,'"']}),s.jsx("p",{className:"text-sm mt-1 text-blue-50",children:"Try adjusting your search terms"})]})})}),!i&&n===""&&e.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground text-white",children:"Popular schools:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.slice(0,6).map(m=>s.jsx(Wi,{variant:"outline",className:"cursor-pointer hover-elevate text-white",onClick:()=>t(m.id),"data-testid":`button-popular-school-${m.id}`,children:m.name},m.id))})]})]})]})}const zd=d.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:$e("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));zd.displayName="Textarea";const xM=va({title:Wt().optional(),description:Wt().optional()});function gM({school:e,galleryImages:t}){const[r,n]=d.useState(null),[a,i]=d.useState(!1),[o,l]=d.useState(null),{toast:c}=ks();d.useEffect(()=>{const x=localStorage.getItem("user");x&&n(JSON.parse(x))},[]);const u=r&&(r.userType==="school"||r.userType==="school_admin")&&r.schoolId===e.id,m=cl({resolver:ul(xM),defaultValues:{title:"",description:""}}),{data:h=[],isLoading:p,refetch:y}=Ze({queryKey:[`/api/schools/${e.id}/gallery`],queryFn:async()=>{const x=await fetch(`/api/schools/${e.id}/gallery`,{headers:{Authorization:`Bearer ${r==null?void 0:r.id}`}});if(!x.ok)throw new Error("Failed to fetch gallery images");return x.json()},enabled:!!u}),N=nt({mutationFn:async x=>{const w=new FormData;w.append("galleryImage",x.file),w.append("title",x.title||""),w.append("description",x.description||"");const C=await fetch(`/api/schools/${e.id}/gallery`,{method:"POST",body:w,headers:{Authorization:`Bearer ${r==null?void 0:r.id}`}});if(!C.ok){const S=await C.json();throw new Error(S.message||"Upload failed")}return C.json()},onSuccess:()=>{c({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Success",description:"Image uploaded successfully!"}),i(!1),l(null),m.reset(),ke.invalidateQueries({queryKey:[`/api/schools/${e.id}/gallery`]})},onError:x=>{c({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Error",description:x.message,variant:"destructive"})}}),f=nt({mutationFn:async x=>rt(`/api/schools/${e.id}/gallery/${x}`,{method:"DELETE",headers:{Authorization:`Bearer ${r==null?void 0:r.id}`}}),onSuccess:()=>{c({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Success",description:"Image deleted successfully!"}),ke.invalidateQueries({queryKey:[`/api/schools/${e.id}/gallery`]})},onError:x=>{c({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Error",description:x.message,variant:"destructive"})}}),j=x=>{o&&N.mutate({...x,file:o})},b=x=>{confirm("Are you sure you want to delete this image?")&&f.mutate(x)};return h.length>0?h.map(x=>({image:x.imageUrl})):t&&t.length>0||Array.from({length:12},(x,w)=>({image:`/api/placeholder-image?seed=${w+1}&width=800&height=450`})),s.jsxs("div",{className:"space-y-8",children:[s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsx(be,{className:"p-8",children:s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-primary/20 to-primary/10 rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden",children:e.logo?s.jsx("img",{src:e.logo.startsWith("/")?e.logo:`/${e.logo}`,alt:`${e.name} logo`,className:"w-full h-full object-cover"}):s.jsx(rr,{className:"w-12 h-12 text-primary"})}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold mb-2 text-white","data-testid":"text-school-name",children:e.name}),s.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground text-white",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Fl,{className:"w-4 h-4"}),s.jsxs("span",{"data-testid":"text-school-location",children:[e.address,", ",e.city,", ",e.state]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-white",children:[s.jsx(yr,{className:"w-4 h-4"}),s.jsxs("span",{"data-testid":"text-school-founded text-blue-50",children:["Founded ",e.yearFounded]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.website&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(H7,{className:"w-4 h-4 text-muted-foreground text-white"}),s.jsx("a",{href:e.website.startsWith("http")?e.website:`https://${e.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline","data-testid":"link-school-website",children:e.website})]}),e.email&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(R4,{className:"w-4 h-4 text-muted-foreground text-white"}),s.jsx("a",{href:`mailto:${e.email}`,className:"text-primary hover:underline","data-testid":"link-school-email",children:e.email})]}),e.phoneNumber&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(_4,{className:"w-4 h-4 text-muted-foreground text-white"}),s.jsx("a",{href:`tel:${e.phoneNumber}`,className:"text-primary hover:underline","data-testid":"link-school-phone",children:e.phoneNumber})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-500",children:[s.jsx(la,{className:"w-4 h-4 text-muted-foreground text-white"}),s.jsx("span",{"data-testid":"text-school-type",children:"Educational Institution"})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(Wi,{variant:"secondary",children:["Est. ",e.yearFounded]}),s.jsx(Wi,{variant:"outline",className:"text-white",children:"Educational Institution"}),s.jsxs(Wi,{variant:"outline",className:"text-white",children:[e.city,", ",e.state]})]})]})]})})}),u&&s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(tt,{className:"text-xl font-semibold",children:"Display Images"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your school's gallery images that visitors see"})]}),s.jsxs(sr,{open:a,onOpenChange:i,children:[s.jsx(RN,{asChild:!0,children:s.jsxs(T,{className:"flex items-center gap-2","data-testid":"button-upload-image",children:[s.jsx(nl,{className:"w-4 h-4"}),"Add Image"]})}),s.jsxs(Hs,{className:"max-w-md",children:[s.jsx(Os,{children:s.jsx(Ls,{children:"Upload Gallery Image"})}),s.jsx(dl,{...m,children:s.jsxs("form",{onSubmit:m.handleSubmit(j),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Image"}),s.jsx(xe,{type:"file",accept:"image/*",onChange:x=>{var w;return l(((w=x.target.files)==null?void 0:w[0])||null)},className:"mb-2","data-testid":"input-image-file"}),o&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Selected: ",o.name]})]}),s.jsx(fs,{control:m.control,name:"title",render:({field:x})=>s.jsxs(rs,{children:[s.jsx(qt,{children:"Title (Optional)"}),s.jsx(ns,{children:s.jsx(xe,{placeholder:"Enter image title...",...x,"data-testid":"input-image-title"})}),s.jsx(as,{})]})}),s.jsx(fs,{control:m.control,name:"description",render:({field:x})=>s.jsxs(rs,{children:[s.jsx(qt,{children:"Description (Optional)"}),s.jsx(ns,{children:s.jsx(zd,{placeholder:"Enter image description...",rows:3,...x,"data-testid":"input-image-description"})}),s.jsx(as,{})]})}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(T,{type:"button",variant:"outline",onClick:()=>i(!1),"data-testid":"button-cancel-upload",children:"Cancel"}),s.jsx(T,{type:"submit",disabled:!o||N.isPending,"data-testid":"button-confirm-upload",children:N.isPending?"Uploading...":"Upload"})]})]})})]})]})]})}),s.jsx(be,{children:p?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading images..."})}):h.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(W7,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground mb-2",children:"No images uploaded yet"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload your first image to get started"})]}):s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:h.map(x=>s.jsxs("div",{className:"relative group bg-white/5 rounded-lg overflow-hidden border border-white/10",children:[s.jsx("img",{src:x.imageUrl,alt:x.title||"Gallery image",className:"w-full h-32 object-cover","data-testid":`img-gallery-${x.id}`}),s.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:s.jsx("div",{className:"flex gap-2",children:s.jsx(T,{size:"sm",variant:"outline",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>b(x.id),"data-testid":`button-delete-${x.id}`,children:s.jsx(As,{className:"w-3 h-3"})})})}),x.title&&s.jsx("div",{className:"p-2",children:s.jsx("p",{className:"text-xs text-white/80 truncate","data-testid":`text-title-${x.id}`,children:x.title})})]},x.id))})})]})]})}function bM({src:e,className:t="",poster:r,title:n="Video",autoPlay:a=!1,muted:i=!1,controls:o=!0,onVideoClick:l}){const c=d.useRef(null),[u,m]=d.useState(!1),[h,p]=d.useState(i),[y,N]=d.useState(0),[f,j]=d.useState(0),[b,x]=d.useState(!1),[w,C]=d.useState(1),[S,M]=d.useState("16 / 9"),[A,R]=d.useState(!1),z=E=>E?E.startsWith("/uploads/")?`/public${E}`:(E.startsWith("/public/uploads/"),E):"",$=()=>{c.current&&(u?c.current.pause():c.current.play())},W=()=>{c.current&&(c.current.muted=!h,p(!h))},G=()=>{c.current&&N(c.current.currentTime)},X=()=>{if(c.current){j(c.current.duration);const E=c.current,Y=`${E.videoWidth} / ${E.videoHeight}`;M(Y);const Z=E.videoHeight>E.videoWidth;R(Z)}},P=E=>{if(c.current){const Y=E.currentTarget.getBoundingClientRect(),ne=(E.clientX-Y.left)/Y.width*f;c.current.currentTime=ne,N(ne)}},L=E=>{const Y=parseFloat(E.target.value);C(Y),c.current&&(c.current.volume=Y,p(Y===0))},_=()=>{c.current&&c.current.requestFullscreen&&c.current.requestFullscreen()},V=E=>{if(isNaN(E))return"0:00";const Y=Math.floor(E/60),Z=Math.floor(E%60);return`${Y}:${Z.toString().padStart(2,"0")}`};return d.useEffect(()=>{const E=c.current;if(!E)return;const Y=()=>m(!0),Z=()=>m(!1);return E.addEventListener("play",Y),E.addEventListener("pause",Z),E.addEventListener("timeupdate",G),E.addEventListener("loadedmetadata",X),E.volume=w,E.muted=h,()=>{E.removeEventListener("play",Y),E.removeEventListener("pause",Z),E.removeEventListener("timeupdate",G),E.removeEventListener("loadedmetadata",X)}},[w,h]),s.jsxs("div",{className:`relative overflow-hidden w-full rounded-lg mx-auto ${t}`,style:{aspectRatio:S,maxHeight:A?"45rem":"24rem",maxWidth:A?"25rem":"100%"},onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),onClick:l,children:[s.jsx("video",{ref:c,src:z(e),poster:r,className:"block w-full h-full object-contain",autoPlay:a,muted:h,onClick:E=>{E.stopPropagation(),$()},onError:E=>{console.error("Failed to load video:",e),console.error("Attempted URL:",E.currentTarget.src)},"data-testid":"enhanced-video-player"}),o&&s.jsxs("div",{className:`absolute inset-0 bg-black bg-opacity-0 transition-all duration-300 ${b?"bg-opacity-20":""}`,children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(T,{variant:"ghost",size:"icon",className:`h-16 w-16 rounded-full bg-black bg-opacity-50 text-white hover:bg-opacity-70 transition-all ${b||!u?"opacity-100":"opacity-0"}`,onClick:E=>{E.stopPropagation(),$()},"data-testid":u?"button-pause-video":"button-play-video",children:u?s.jsx(yb,{className:"h-8 w-8"}):s.jsx(Ou,{className:"h-8 w-8"})})}),s.jsx("div",{className:`absolute bottom-0 left-0 right-0 p-4 transition-all duration-300 ${b?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:s.jsxs("div",{className:"bg-black bg-opacity-70 rounded-lg p-3 space-y-2",children:[s.jsx("div",{className:"w-full h-2 bg-white bg-opacity-30 rounded-full cursor-pointer group/progress",onClick:P,"data-testid":"video-progress-bar",children:s.jsx("div",{className:"h-full bg-white rounded-full transition-all group-hover/progress:bg-blue-400",style:{width:f?`${y/f*100}%`:"0%"}})}),s.jsxs("div",{className:"flex items-center justify-between text-white text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(T,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white hover:bg-opacity-20",onClick:$,"data-testid":"button-toggle-play",children:u?s.jsx(yb,{className:"h-4 w-4"}):s.jsx(Ou,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(T,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white hover:bg-opacity-20",onClick:W,"data-testid":"button-toggle-mute",children:h||w===0?s.jsx(rS,{className:"h-4 w-4"}):s.jsx(sS,{className:"h-4 w-4"})}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:h?0:w,onChange:L,className:"w-16 h-1 bg-white bg-opacity-30 rounded-lg appearance-none cursor-pointer slider","data-testid":"volume-slider"})]}),s.jsxs("span",{className:"text-xs font-mono","data-testid":"video-time",children:[V(y)," / ",V(f)]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(T,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white hover:bg-opacity-20",onClick:()=>{c.current&&(c.current.currentTime=0)},"data-testid":"button-restart-video",children:s.jsx(qx,{className:"h-4 w-4"})}),s.jsx(T,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white hover:bg-opacity-20",onClick:_,"data-testid":"button-fullscreen-video",children:s.jsx(Z7,{className:"h-4 w-4"})})]})]})]})})]}),s.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-60 rounded-full p-2",children:s.jsx(Ou,{className:"h-4 w-4 text-white"})})]})}function Lc({src:e,alt:t="Memory image",className:r="",onImageClick:n,title:a,eventDate:i,category:o,viewerMode:l=!1,enableZoomPan:c=!1}){const[u,m]=d.useState(!1),[h,p]=d.useState("1 / 1"),[y,N]=d.useState(!1),[f,j]=d.useState(1),[b,x]=d.useState({x:0,y:0}),[w,C]=d.useState(!1),[S,M]=d.useState({x:0,y:0}),A=d.useRef(null),R=E=>E?E.startsWith("/uploads/")?`/public${E}`:(E.startsWith("/public/uploads/"),E):"/placeholder-image.jpg",z=E=>{const Y=E.currentTarget,Z=`${Y.naturalWidth} / ${Y.naturalHeight}`;p(Z);const ne=Y.naturalHeight>Y.naturalWidth;m(ne),N(!0)},$=E=>{console.error("Failed to load memory image:",e),console.error("Attempted URL:",E.currentTarget.src),E.currentTarget.src="/placeholder-image.jpg"},W=E=>{if(!c)return;E.preventDefault();const Y=E.deltaY>0?-.1:.1;j(Z=>Math.min(Math.max(.5,Z+Y),4))},G=E=>{!c||f===1||(C(!0),M({x:E.clientX-b.x,y:E.clientY-b.y}))},X=E=>{!c||!w||x({x:E.clientX-S.x,y:E.clientY-S.y})},P=()=>{C(!1)},L=()=>{j(1),x({x:0,y:0})},_=()=>{j(E=>Math.min(E+.25,4))},V=()=>{j(E=>Math.max(E-.25,.5))};return s.jsxs("div",{ref:A,className:`group relative rounded-lg overflow-hidden ${c?"cursor-move":"cursor-pointer"} ${r}`,style:{aspectRatio:y?h:"1 / 1",maxHeight:u?"45rem":"24rem",maxWidth:u?"25rem":"100%",width:"fit-content",margin:"0 auto"},onClick:c?void 0:n,onWheel:W,onMouseDown:G,onMouseMove:X,onMouseUp:P,onMouseLeave:P,"data-testid":"enhanced-image-viewer",children:[s.jsx("img",{src:R(e),alt:t,className:"w-full h-full object-cover",style:c?{transform:`scale(${f}) translate(${b.x/f}px, ${b.y/f}px)`,transition:w?"none":"transform 0.1s ease-out"}:void 0,onLoad:z,onError:$,"data-testid":"memory-image",draggable:!1}),!c&&s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-opacity flex items-center justify-center",children:l?s.jsxs("div",{className:"text-white transform scale-0 group-hover:scale-100 transition-transform text-center",children:[s.jsx(ds,{className:"mx-auto text-2xl mb-2"}),a&&s.jsx("div",{className:"text-sm font-medium",children:a}),i&&s.jsx("div",{className:"text-xs",children:i}),o&&s.jsx("div",{className:"text-xs opacity-80 capitalize",children:o.replace("_"," ")})]}):s.jsx("div",{className:"p-3 text-white transform translate-y-full group-hover:translate-y-0 transition-transform flex items-end",children:s.jsxs("div",{children:[a&&s.jsx("div",{className:"text-sm font-medium",children:a}),i&&s.jsx("div",{className:"text-xs",children:i}),o&&s.jsx("div",{className:"text-xs opacity-80 capitalize",children:o.replace("_"," ")})]})})}),c&&s.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1 bg-black/50 rounded-lg p-1",children:[s.jsx("button",{onClick:E=>{E.stopPropagation(),_()},className:"p-1.5 hover:bg-white/20 rounded transition-colors",title:"Zoom In",children:s.jsx(ui,{className:"h-4 w-4 text-white"})}),s.jsx("button",{onClick:E=>{E.stopPropagation(),V()},className:"p-1.5 hover:bg-white/20 rounded transition-colors",title:"Zoom Out",children:s.jsx(hi,{className:"h-4 w-4 text-white"})}),s.jsx("button",{onClick:E=>{E.stopPropagation(),L()},className:"p-1.5 hover:bg-white/20 rounded transition-colors",title:"Reset View",children:s.jsx(qx,{className:"h-4 w-4 text-white"})})]})]})}function jv({memories:e,viewerMode:t=!1,onImageClick:r}){const n=t?"grid-cols-[repeat(auto-fill,minmax(200px,1fr))]":"grid-cols-[repeat(auto-fill,minmax(250px,1fr))]";return s.jsx("div",{className:`grid ${n} gap-6 justify-items-center`,children:e.map((a,i)=>s.jsx("div",{className:"w-full max-w-md",children:a.mediaType==="image"&&a.imageUrl?s.jsx(Lc,{src:a.imageUrl||void 0,alt:a.title,title:a.title,eventDate:a.eventDate,category:a.category,viewerMode:t,onImageClick:()=>r==null?void 0:r(a,i)}):a.mediaType==="video"&&a.videoUrl?s.jsx(bM,{src:a.videoUrl,title:a.title,className:"w-full",muted:!0,onVideoClick:()=>r==null?void 0:r(a,i)}):s.jsx(Lc,{src:a.imageUrl||void 0,alt:a.title,title:a.title,eventDate:a.eventDate,category:a.category,viewerMode:t,onImageClick:()=>r==null?void 0:r(a,i)})},a.id))})}function vM(){var ki;const[,e]=us(),[t,r]=d.useState(""),[n,a]=d.useState($n.toString()),[i,o]=d.useState(null),[l,c]=d.useState("home"),[u,m]=d.useState(!1),[h,p]=d.useState(!1),[y,N]=d.useState(""),[f,j]=d.useState(""),[b,x]=d.useState(""),[w,C]=d.useState(""),[S,M]=d.useState(new Set),[A,R]=d.useState("all"),[z,$]=d.useState(-1),[W,G]=d.useState(!1),[X,P]=d.useState(1),[L,_]=d.useState({x:0,y:0}),[V,E]=d.useState(!1),[Y,Z]=d.useState({x:0,y:0}),[ne,oe]=d.useState(!1),[pe,he]=d.useState(""),[B,K]=d.useState(!1),[re,ye]=d.useState(null),[Q,te]=d.useState(null),[ve,we]=d.useState(""),[Ne,ie]=d.useState({title:"",description:""}),[me,Ae]=d.useState("single"),[at,lt]=d.useState([]),[it,F]=d.useState({files:[]}),{toast:g}=ks(),{convertPrice:D,formatPrice:J}=yi(),ce=ee=>ee?ee.startsWith("/uploads/")?`/public${ee}`:(ee.startsWith("/public/uploads/"),ee):"/placeholder-image.jpg",le=(ee,O)=>{$(O),G(!0)},Re=()=>{z<Ie.length-1&&$(z+1)},He=()=>{z>0&&$(z-1)},Ye=()=>{G(!1),$(-1),P(1),_({x:0,y:0})},fe=()=>{P(ee=>Math.min(ee+.5,3))},Ue=()=>{P(ee=>Math.max(ee-.5,.5))},ot=()=>{P(1),_({x:0,y:0})},Dt=ee=>{X>1&&(E(!0),Z({x:ee.clientX-L.x,y:ee.clientY-L.y}))},Ft=ee=>{V&&X>1&&_({x:ee.clientX-Y.x,y:ee.clientY-Y.y})},zt=()=>{E(!1)},At=async()=>{if(i)try{if((await fetch(`/api/users/${i.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:y})})).ok){const O={...i,phoneNumber:y};o(O),localStorage.setItem("user",JSON.stringify(O)),p(!1),g({title:"Phone number updated",description:"Your phone number has been successfully updated."})}else throw new Error("Failed to update phone number")}catch{g({title:"Error",description:"Failed to update phone number. Please try again.",variant:"destructive"})}},Te=()=>{N((i==null?void 0:i.phoneNumber)||""),p(!0)},Jt=()=>{N(""),p(!1)},de=async ee=>{if(i)try{if((await fetch(`/api/users/${i.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({showPhoneToAlumni:ee})})).ok){const k={...i,showPhoneToAlumni:ee};o(k),localStorage.setItem("user",JSON.stringify(k)),g({title:"Privacy setting updated",description:ee?"Your phone number will be visible to alumni":"Your phone number will be hidden from alumni"})}else throw new Error("Failed to update privacy setting")}catch{g({title:"Error",description:"Failed to update privacy setting. Please try again.",variant:"destructive"})}},{data:H=[]}=Ze({queryKey:["/api/alumni-badges",i==null?void 0:i.id],enabled:!!i,queryFn:async()=>{if(!(i!=null&&i.id))return[];const ee=await fetch(`/api/alumni-badges/${i.id}`);if(!ee.ok)throw new Error("Failed to fetch alumni badges");return ee.json()}}),Je=4,wt=H.length>0?"Alumni":"Viewer";d.useEffect(()=>{const ee=localStorage.getItem("user");if(!ee){e("/");return}const O=JSON.parse(ee);if(O.userType==="school"){console.log("School admin account detected in viewer dashboard, redirecting to correct dashboard"),localStorage.removeItem("user"),e("/");return}o(O);const k=localStorage.getItem(`selectedSchool_${O.id}`);k&&r(k);const U=new URLSearchParams(window.location.search),se=U.get("tab"),ae=U.get("code");se==="memory_upload"&&(c("memory-upload"),ae&&(he(ae),Or(ae)))},[e]);const{data:Ge=[]}=Ze({queryKey:["/api/schools"],enabled:!!i}),{data:ut=[]}=Ze({queryKey:["/api/notifications",i==null?void 0:i.id],enabled:!!i,queryFn:async()=>{if(!(i!=null&&i.id))return[];const ee=await fetch(`/api/notifications/${i.id}`);if(!ee.ok)throw new Error("Failed to fetch notifications");return ee.json()},refetchInterval:3e4}),{data:Ie=[]}=Ze({queryKey:["/api/memories/school",t,n],enabled:!!t}),{data:Rt}=Ze({queryKey:["/api/schools",t],enabled:!!t});d.useEffect(()=>{const ee=O=>{if(W)switch(O.key){case"ArrowLeft":He();break;case"ArrowRight":Re();break;case"Escape":Ye();break}};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[W,z,Ie.length]),d.useEffect(()=>{const ee=O=>{if(ne){const k=O.target;!k.closest('[data-testid="button-hamburger-menu"]')&&!k.closest(".hamburger-dropdown")&&oe(!1)}};return document.addEventListener("mousedown",ee),()=>document.removeEventListener("mousedown",ee)},[ne]);const{data:Ve=[]}=Ze({queryKey:["/api/library",i==null?void 0:i.id],enabled:!!i,queryFn:async()=>{if(!(i!=null&&i.id))return[];const ee=await fetch(`/api/library/${i.id}`);if(!ee.ok)throw new Error("Failed to fetch purchased yearbooks");return ee.json()}}),{data:vt=[]}=Ze({queryKey:["/api/students",f,"search"],enabled:!!f,queryFn:async()=>{if(!f)return[];let ee=f;if(!f.includes("-")){const k=Ge.find(U=>U.name===f);k&&(ee=k.id)}const O=await fetch(`/api/students/${ee}/search`);if(!O.ok)throw new Error("Failed to fetch students");return O.json()}}),{data:I=[]}=Ze({queryKey:["/api/students",f,b],enabled:!!f&&!!b,queryFn:async()=>{if(!f||!b)return[];let ee=f;if(!f.includes("-")){const k=Ge.find(U=>U.name===f);k&&(ee=k.id)}const O=await fetch(`/api/students/${ee}/${b}`);if(!O.ok)throw new Error("Failed to fetch classmates");return O.json()}});d.useEffect(()=>{t&&(i!=null&&i.id)&&localStorage.setItem(`selectedSchool_${i.id}`,t)},[t,i==null?void 0:i.id]);const Pe=()=>{localStorage.removeItem("user"),e("/")},Me=()=>{if(!t){g({title:"Please select a school",description:"Choose a school from the dropdown before browsing yearbooks.",variant:"destructive"});return}e(`/yearbook-finder?school=${t}`)},Be=()=>{if(H.length>=Je){alert("You have reached the maximum number of alumni badges (4). Please upgrade your account to add more alumni statuses.");return}const ee=t?`/request-alumni-status?school=${t}`:"/request-alumni-status";e(ee)},gt=()=>{alert("Upgrade feature coming soon! You'll be able to purchase additional alumni badge slots.")},ht=nt({mutationFn:async ee=>{await rt("DELETE",`/api/alumni-badges/${ee}`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/alumni-badges",i==null?void 0:i.id]})}}),Ds=ee=>{ht.mutate(ee)},Nr=nt({mutationFn:async ee=>{await rt("PATCH",`/api/notifications/${ee}/read`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",i==null?void 0:i.id]})}}),Gs=ee=>{Nr.mutate(ee)},Fr=nt({mutationFn:async()=>{i!=null&&i.id&&await rt("DELETE",`/api/notifications/user/${i.id}/clear-all`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",i==null?void 0:i.id]}),g({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"All notifications cleared",description:"Your notification history has been cleared."})}}),Sn=()=>{Fr.mutate()},vo=ee=>{if(!ee)return"";const k=new Date().getTime()-new Date(ee).getTime(),U=Math.floor(k/1e3),se=Math.floor(U/60),ae=Math.floor(se/60),Ee=Math.floor(ae/24);return U<60?"Just now":se<60?`${se} ${se===1?"minute":"minutes"} ago`:ae<24?`${ae} ${ae===1?"hour":"hours"} ago`:Ee<7?`${Ee} ${Ee===1?"day":"days"} ago`:new Date(ee).toLocaleDateString()},Kn=ut.filter(ee=>!ee.isRead).length,tn=$n,Pn=Ge.find(ee=>ee.id===t),wo=(Pn==null?void 0:Pn.yearFounded)||hv,ja=Array.from({length:tn-wo+1},(ee,O)=>(tn-O).toString());if(d.useEffect(()=>{t&&Pn&&ja.includes(n)||a(tn.toString())},[t,Pn,ja]),!i)return null;const Or=async ee=>{const O=(ee||pe).replace(/-/g,"");if(!O.trim()||O.length!==16){g({title:"Code Required",description:"Please enter a valid 16-character upload code",variant:"destructive"});return}try{const k=localStorage.getItem("user"),U=k?JSON.parse(k).id:null,se={};U&&(se.Authorization=`Bearer ${U}`);const ae=await fetch(`/api/public-upload-links/${O}`,{headers:se,credentials:"include"});if(!ae.ok){const Fe=await ae.json();g({title:"Invalid Code",description:Fe.message||"The upload code is invalid or expired",variant:"destructive"});return}const Ee=await ae.json();ye(Ee),K(!0),g({title:"Code Validated",description:`Upload access granted for ${Ee.category} memories`})}catch{g({title:"Validation Failed",description:"Failed to validate upload code",variant:"destructive"})}},sn=ee=>{var k;const O=(k=ee.target.files)==null?void 0:k[0];if(O){if(O.size>10*1024*1024){g({title:"File Too Large",description:"Please select a file smaller than 10MB",variant:"destructive"});return}ve&&URL.revokeObjectURL(ve),te(O);const U=URL.createObjectURL(O);we(U)}},rn=ee=>{const k=Array.from(ee.target.files||[]).filter(se=>se.size>10*1024*1024?(g({title:"File Too Large",description:`${se.name} is larger than 10MB and was skipped`,variant:"destructive"}),!1):!0);if(k.length===0)return;const U=k.map(se=>{const ae=(re==null?void 0:re.category)||"Event",Ee=(re==null?void 0:re.year)||new Date().getFullYear(),Fe=`${ae} ${Ee}`;return{file:se,title:Fe,description:""}});F(se=>({...se,files:[...se.files,...U]})),g({title:"Files Added",description:`${k.length} file(s) added with default titles`})},Ci=async()=>{if(!(!Q||!re))try{const ee=new FormData;if(ee.append("memoryFile",Q),ee.append("title",Ne.title||"Untitled"),ee.append("description",Ne.description||""),ee.append("uploadedBy",(i==null?void 0:i.fullName)||`${i==null?void 0:i.firstName} ${i==null?void 0:i.lastName}`||"Unknown User"),!(await fetch(`/api/public-uploads/${pe.replace(/-/g,"")}`,{method:"POST",body:ee})).ok)throw new Error("Upload failed");g({title:"Upload Successful",description:"Your memory has been uploaded and is pending approval!"}),ie({title:"",description:""}),te(null),we(""),K(!1),he(""),ye(null)}catch{g({title:"Upload Failed",description:"Failed to upload memory. Please try again.",variant:"destructive"})}},yo=async()=>{if(it.files.length===0||!re)return;const ee=it.files.map(async(O,k)=>{try{const U=new FormData;if(U.append("memoryFile",O.file),U.append("title",O.title||"Untitled"),U.append("description",O.description||""),U.append("uploadedBy",(i==null?void 0:i.fullName)||`${i==null?void 0:i.firstName} ${i==null?void 0:i.lastName}`||"Unknown User"),!(await fetch(`/api/public-uploads/${pe.replace(/-/g,"")}`,{method:"POST",body:U})).ok)throw new Error(`Upload failed for ${O.file.name}`);return{success:!0,filename:O.file.name}}catch(U){return{success:!1,filename:O.file.name,error:U instanceof Error?U.message:"Unknown error"}}});try{const O=await Promise.all(ee),k=O.filter(se=>se.success),U=O.filter(se=>!se.success);k.length>0&&g({title:"Upload Successful",description:`${k.length} memories uploaded successfully and are pending approval!`}),U.length>0&&g({title:"Some Uploads Failed",description:`${U.length} files failed to upload. Please try again.`,variant:"destructive"}),U.length===0&&(F({files:[]}),K(!1),he(""),ye(null),Ae("single"))}catch{g({title:"Upload Failed",description:"Failed to upload memories. Please try again.",variant:"destructive"})}},Ca=()=>s.jsx("div",{className:"space-y-8",children:s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(is,{className:"h-6 w-6 text-yellow-500"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Memory Upload"}),s.jsx("p",{className:"text-sm text-white/70",children:"Upload photos and videos using special school codes"})]})]}),B?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-green-500/20 border border-green-400/30 rounded-lg",children:[s.jsx(bn,{className:"h-5 w-5 text-green-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-green-200 font-medium",children:"Code Validated Successfully!"}),s.jsxs("p",{className:"text-green-300/80 text-sm",children:["Upload access granted for ",re==null?void 0:re.category," memories"]})]})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-4 p-3 bg-white/5 border border-white/10 rounded-lg",children:[s.jsx("span",{className:"text-white text-sm",children:"Upload Mode:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(T,{variant:me==="single"?"default":"outline",size:"sm",onClick:()=>Ae("single"),className:me==="single"?"bg-yellow-500 text-black":"text-white border-white/20","data-testid":"button-single-mode",children:"Single"}),s.jsx(T,{variant:me==="multiple"?"default":"outline",size:"sm",onClick:()=>Ae("multiple"),className:me==="multiple"?"bg-yellow-500 text-black":"text-white border-white/20","data-testid":"button-multiple-mode",children:"Multiple"})]})]}),me==="single"?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ue,{className:"text-white",children:"Title *"}),s.jsx(xe,{value:Ne.title,onChange:ee=>ie(O=>({...O,title:ee.target.value})),placeholder:"Enter a title for your memory",className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50","data-testid":"input-memory-title"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-white",children:"Description (Optional)"}),s.jsx(xe,{value:Ne.description,onChange:ee=>ie(O=>({...O,description:ee.target.value})),placeholder:"Describe this memory",className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50","data-testid":"input-memory-description"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-white",children:"Upload Photo or Video *"}),s.jsx("div",{className:"mt-2",children:Q?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white/10 rounded-lg",children:[Q.type.startsWith("image/")?s.jsx(da,{className:"h-6 w-6 text-blue-400"}):s.jsx(t0,{className:"h-6 w-6 text-green-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white font-medium",children:Q.name}),s.jsxs("p",{className:"text-white/70 text-sm",children:[(Q.size/(1024*1024)).toFixed(2)," MB"]})]}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{te(null),we("")},className:"text-red-400 hover:text-red-300","data-testid":"button-remove-file",children:s.jsx(Pt,{className:"h-4 w-4"})})]}),ve&&Q.type.startsWith("image/")&&s.jsx("div",{className:"rounded-lg overflow-hidden max-w-sm",children:s.jsx("img",{src:ve,alt:"Preview",className:"w-full h-auto max-h-64 object-contain"})})]}):s.jsxs("div",{className:"border-2 border-dashed border-white/30 bg-white/5 backdrop-blur-lg rounded-lg p-6 text-center",children:[s.jsx("input",{type:"file",accept:"image/*,video/*",onChange:sn,className:"hidden",id:"file-upload","data-testid":"input-file-upload"}),s.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center space-y-2",children:[s.jsx(is,{className:"h-12 w-12 text-white/60"}),s.jsx("p",{className:"text-white/80",children:"Click to upload a photo or video"}),s.jsx("p",{className:"text-white/60 text-sm",children:"Max file size: 10MB"})]})]})})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(T,{onClick:Ci,disabled:!Q||!Ne.title.trim(),className:"bg-green-500 hover:bg-green-600 text-white","data-testid":"button-upload-memory",children:"Upload Memory"}),s.jsx(T,{variant:"outline",onClick:()=>{K(!1),he(""),ye(null),te(null),we(""),ie({title:"",description:""})},className:"border-white/20 text-white hover:bg-white/10","data-testid":"button-reset-upload",children:"Use Different Code"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ue,{className:"text-white",children:"Uploaded By"}),s.jsx("p",{className:"text-white/80 text-sm bg-white/10 p-2 rounded border border-white/20",children:(i==null?void 0:i.fullName)||`${i==null?void 0:i.firstName} ${i==null?void 0:i.lastName}`||"Unknown User"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-white",children:"Upload Photos or Videos *"}),s.jsx("div",{className:"mt-2",children:s.jsxs("div",{className:"border-2 border-dashed border-white/30 bg-white/5 backdrop-blur-lg rounded-lg p-6 text-center",children:[s.jsx("input",{type:"file",accept:"image/*,video/*",multiple:!0,onChange:rn,className:"hidden",id:"multiple-file-upload","data-testid":"input-multiple-file-upload"}),s.jsxs("label",{htmlFor:"multiple-file-upload",className:"cursor-pointer flex flex-col items-center space-y-2",children:[s.jsx(is,{className:"h-12 w-12 text-white/60"}),s.jsx("p",{className:"text-white/80",children:"Click to upload multiple photos or videos"}),s.jsx("p",{className:"text-white/60 text-sm",children:"Max file size: 10MB per file"})]})]})})]}),it.files.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs(ue,{className:"text-white",children:["Files (",it.files.length,")"]}),it.files.map((ee,O)=>s.jsxs("div",{className:"p-4 bg-white/10 rounded-lg space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[ee.file.type.startsWith("image/")?s.jsx(da,{className:"h-6 w-6 text-blue-400"}):s.jsx(t0,{className:"h-6 w-6 text-green-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white font-medium",children:ee.file.name}),s.jsxs("p",{className:"text-white/70 text-sm",children:[(ee.file.size/(1024*1024)).toFixed(2)," MB"]})]}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{F(k=>({...k,files:k.files.filter((U,se)=>se!==O)}))},className:"text-red-400 hover:text-red-300","data-testid":`button-remove-file-${O}`,children:s.jsx(Pt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ue,{className:"text-white text-sm",children:"Title *"}),s.jsx(xe,{value:ee.title,onChange:k=>{F(U=>({...U,files:U.files.map((se,ae)=>ae===O?{...se,title:k.target.value}:se)}))},placeholder:"Edit title",className:"bg-white/5 border border-white/20 text-white placeholder:text-white/50 text-sm","data-testid":`input-file-title-${O}`})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-white text-sm",children:"Description (Optional)"}),s.jsx(xe,{value:ee.description,onChange:k=>{F(U=>({...U,files:U.files.map((se,ae)=>ae===O?{...se,description:k.target.value}:se)}))},placeholder:"Add description",className:"bg-white/5 border border-white/20 text-white placeholder:text-white/50 text-sm","data-testid":`input-file-description-${O}`})]})]})]},O))]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(T,{onClick:yo,disabled:it.files.length===0||it.files.some(ee=>!ee.title.trim()),className:"bg-green-500 hover:bg-green-600 text-white","data-testid":"button-upload-multiple-memories",children:["Upload ",it.files.length," Memories"]}),s.jsx(T,{variant:"outline",onClick:()=>{K(!1),he(""),ye(null),F({files:[]}),Ae("single")},className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white","data-testid":"button-reset-multiple-upload",children:"Use Different Code"})]})]})]}):s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(ue,{className:"text-white",children:"Enter Upload Code"}),s.jsx("p",{className:"text-sm text-white/70 mb-2",children:"Enter the 16-character code provided by your school (XXXX-XXXX-XXXX-XXXX format)"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(xe,{value:pe,onChange:ee=>{let O=ee.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"");O.length>16&&(O=O.slice(0,16));const k=O.replace(/(.{4})/g,"$1-").replace(/-$/,"");he(k)},placeholder:"XXXX-XXXX-XXXX-XXXX",className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50","data-testid":"input-upload-code",maxLength:19}),s.jsx(T,{onClick:()=>Or(),className:"bg-yellow-500 hover:bg-yellow-600 text-black","data-testid":"button-validate-code",children:"Validate"})]})]})})]})})}),No=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsx(be,{className:"p-8",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Discover Schools"}),s.jsx("p",{className:"text-blue-200",children:"Search and explore schools to view yearbooks, memories, and connect with alumni"})]}),s.jsx(pM,{schools:Ge,selectedSchool:t,onSchoolSelect:r})]})})}),t&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 justify-center",children:[s.jsxs(T,{onClick:Me,className:"bg-secondary flex items-center justify-center space-x-2 sm:space-x-3 px-6 sm:px-12 py-6 sm:py-10 text-base sm:text-xl font-bold w-full sm:w-auto bg-green-500/20 backdrop-blur-lg border border-green-400 shadow-2xl cursor-pointer transition-all hover:bg-white/15 hover:scale-105 hover:border-green-400 hover:shadow-green-500/50 hover:shadow-lg hover:scale-105 transition-all duration-200 transform min-w-fit text-green-50 hover:text-green-400","data-testid":"button-yearbook-finder",children:[s.jsx(Gr,{className:"h-5 w-5 sm:h-6 sm:w-6"}),s.jsx("span",{children:"Find Yearbooks"})]}),s.jsxs(T,{onClick:Be,className:"bg-secondary flex items-center justify-center space-x-2 sm:space-x-3 px-6 sm:px-12 py-6 sm:py-10 text-base sm:text-xl font-bold w-full sm:w-auto bg-blue-500/20 backdrop-blur-lg border border-blue-400 shadow-2xl cursor-pointer transition-all hover:bg-white/15 hover:scale-105 hover:border-blue-400 hover:shadow-blue-500/50 hover:shadow-lg hover:scale-105 transition-all duration-200 transform min-w-fit text-blue-50 hover:text-blue-400","data-testid":"button-request-alumni-status",children:[s.jsx(il,{className:"h-5 w-5 sm:h-6 sm:w-6"}),s.jsx("span",{children:"Request Alumni Status"})]})]}),Rt&&s.jsxs("div",{className:"space-y-8",children:[s.jsx(gM,{school:Rt,galleryImages:[...Array.from({length:12},(ee,O)=>({image:`https://picsum.photos/seed/${Rt.id}-${O+1}/800/450`}))]}),s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsx(be,{className:"p-8",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"School Memories & Events"}),s.jsx("p",{className:"text-blue-200",children:"Browse photos and videos from different academic years"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Academic Year:"}),s.jsxs(nr,{value:n,onValueChange:a,children:[s.jsx(Ys,{className:"w-32 bg-white/10 backdrop-blur-lg border border-white/20 text-white","data-testid":"select-academic-year",children:s.jsx(ar,{})}),s.jsx(Ws,{className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 text-white",children:ja.map(ee=>s.jsx(Nt,{value:ee,children:ee},ee))})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-200",children:[s.jsx(_n,{className:"h-4 w-4 text-cyan-400"}),s.jsxs("span",{children:[Ie.filter(ee=>ee.mediaType==="image").length," Photos, ",Ie.filter(ee=>ee.mediaType==="video").length," Videos for ",n]})]}),s.jsxs("div",{className:"flex flex-wrap space-x-1 bg-white/10 backdrop-blur-lg border border-white/20 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>R("all"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${A==="all"?"bg-white/30 text-white shadow-sm":"text-blue-100 hover:text-blue-400"}`,"data-testid":"filter-all-events",children:"All Events"}),s.jsx("button",{onClick:()=>R("graduation"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${A==="graduation"?"bg-white/30 text-white shadow-sm":"text-blue-100 hover:text-blue-400"}`,"data-testid":"filter-graduation",children:"Graduation"}),s.jsx("button",{onClick:()=>R("sports"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${A==="sports"?"bg-white/30 text-white shadow-sm":"text-blue-100 hover:text-blue-400"}`,"data-testid":"filter-sports",children:"Sports"}),s.jsx("button",{onClick:()=>R("arts"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${A==="arts"?"bg-white/30 text-white shadow-sm":"text-blue-100 hover:text-blue-400"}`,"data-testid":"filter-arts",children:"Arts"}),s.jsx("button",{onClick:()=>R("field_trips"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${A==="field_trips"?"bg-white/30 text-white shadow-sm":"text-blue-100 hover:text-blue-400"}`,"data-testid":"filter-field-trips",children:"Field Trips"}),s.jsx("button",{onClick:()=>R("academic"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${A==="academic"?"bg-white/30 text-white shadow-sm":"text-blue-100 hover:text-blue-400"}`,"data-testid":"filter-academic",children:"Academic"})]}),Ie.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsx(jv,{memories:(A==="all"?Ie:Ie.filter(ee=>ee.category===A)).slice(0,12),viewerMode:!0,onImageClick:le}),Ie.length>12&&s.jsx("div",{className:"text-center",children:s.jsxs(T,{onClick:()=>c("photos"),variant:"outline",className:"bg-white/10 hover:bg-white/20 text-white border-white/20 hover:border-white/40","data-testid":"button-view-all-memories",children:[s.jsx(_n,{className:"h-4 w-4 mr-2"}),"View All ",Ie.length," Photos & Videos"]})})]}):s.jsxs("div",{className:"text-center py-12 bg-white/5 backdrop-blur-lg rounded-lg border-2 border-dashed border-white/20",children:[s.jsx(_n,{className:"mx-auto h-12 w-12 text-white/40 mb-4"}),s.jsx("p",{className:"text-white/60 text-lg font-medium mb-2",children:"No memories found"}),s.jsxs("p",{className:"text-white/40 text-sm",children:["No memories available for ",n," in the ",A==="all"?"selected":A," category yet."]})]})]})})})]}),!t&&s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsx(be,{className:"p-12 text-center",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mx-auto",children:s.jsx(ds,{className:"w-12 h-12 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Welcome to your Viewer Dashboard"}),s.jsx("p",{className:"text-blue-200 text-lg leading-relaxed max-w-2xl mx-auto",children:"Search for schools above to explore yearbooks, browse memories, and connect with alumni from your educational journey. Start by typing a school name, city, or state in the search box."})]})]})})})]}),jo=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Profile Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white/70",children:"Full Name"}),s.jsx("p",{className:"text-white",children:i==null?void 0:i.fullName})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white/70",children:"Email"}),s.jsx("p",{className:"text-white",children:(i==null?void 0:i.email)||"Not provided"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ue,{className:"text-sm font-medium text-white/70",children:"Phone Number"}),!h&&s.jsx(T,{variant:"outline",size:"sm",onClick:Te,className:"ml-2","data-testid":"button-edit-phone",children:i!=null&&i.phoneNumber?"Edit":"Add"})]}),h?s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsx(xe,{type:"tel",value:y,onChange:ee=>N(ee.target.value),placeholder:"Enter phone number",className:"w-full","data-testid":"input-phone-number"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(T,{size:"sm",onClick:At,"data-testid":"button-save-phone",children:"Save"}),s.jsx(T,{variant:"outline",size:"sm",onClick:Jt,"data-testid":"button-cancel-phone",children:"Cancel"})]})]}):s.jsx("p",{className:"text-white","data-testid":"text-phone-number",children:(i==null?void 0:i.phoneNumber)||"Not provided"})]}),s.jsxs("div",{className:"border-t border-white/20 pt-4",children:[s.jsx(ue,{className:"text-sm font-medium text-white/70 mb-3 block",children:"Privacy Settings"}),s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${i!=null&&i.phoneNumber?"bg-white/10":"bg-white/5"}`,children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-sm font-medium ${i!=null&&i.phoneNumber?"text-white":"text-white/70"}`,children:"Show phone number to alumni"}),s.jsx("p",{className:`text-xs ${i!=null&&i.phoneNumber?"text-white/60":"text-white/40"}`,children:i!=null&&i.phoneNumber?"Allow other alumni from your schools to see your phone number":"Add a phone number to enable this privacy setting"})]}),s.jsx(c6,{checked:i!=null&&i.phoneNumber?(i==null?void 0:i.showPhoneToAlumni)!==!1:!1,onCheckedChange:de,disabled:!(i!=null&&i.phoneNumber),className:"ml-4","data-testid":"switch-phone-privacy"})]})]})]})]})}),s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(O7,{className:"h-5 w-5 text-green-500"}),s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Alumni Badges"})]}),s.jsxs("div",{className:"text-sm text-white/70",children:[H.length," of ",Je," slots used"]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-6 sm:grid-cols-2",children:[H.map(ee=>s.jsx(ge,{className:`border-2 ${ee.status==="verified"?"bg-green-500/30 backdrop-blur-lg border border-white/20 shadow-2xl border-green-500":"bg-orange-500/30 backdrop-blur-lg border border-white/20 shadow-2xl border-orange-500"}`,children:s.jsx(be,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(rr,{className:`h-4 w-4 ${ee.status==="verified"?"text-green-600":"text-orange-600"}`}),s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${ee.status==="verified"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:ee.status==="verified"?"Approved":"Pending"})]}),s.jsx("h4",{className:"font-semibold text-white text-sm",children:ee.school}),s.jsxs("p",{className:"text-sm text-gray-50",children:["Class of ",ee.graduationYear]}),s.jsxs("p",{className:"text-xs text-gray-50",children:["Admitted: ",ee.admissionYear]})]}),s.jsx("div",{className:"ml-2",children:s.jsxs(Hl,{children:[s.jsx(oM,{asChild:!0,children:s.jsx(T,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50 p-1",children:s.jsx(As,{className:"h-3 w-3"})})}),s.jsxs(lo,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white",children:[s.jsxs(co,{children:[s.jsx(ho,{children:"Delete Alumni Badge?"}),s.jsxs(mo,{className:"space-y-2 text-white",children:[s.jsxs("p",{children:["Are you sure you want to delete this alumni badge for ",s.jsx("strong",{children:ee.school}),"?"]}),s.jsxs("div",{className:"bg-amber-500/30 backdrop-blur-lg border border-white/20 shadow-2xl rounded p-3 text-sm",children:[s.jsx("p",{className:"font-medium text-amber-50 mb-1",children:"⚠️ Important Warning:"}),s.jsxs("ul",{className:"text-amber-50 space-y-1",children:[s.jsxs("li",{children:["• This action is ",s.jsx("strong",{children:"irreversible"})]}),s.jsx("li",{children:"• You will lose your verified/pending status for this school"})]})]})]})]}),s.jsxs(uo,{children:[s.jsx(po,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:"Cancel"}),s.jsx(fo,{onClick:()=>Ds(ee.id),className:"bg-red-600/80 backdrop-blur-lg border border-white/20 shadow-2xl hover:bg-red-600",children:"Delete Badge"})]})]})]})})]})})},ee.id)),Array.from({length:Je-H.length}).map((ee,O)=>s.jsx(ge,{className:"border-2 border-dashed border-white/30 bg-white/5 backdrop-blur-lg",children:s.jsx(be,{className:"p-4 flex items-center justify-center h-24",children:s.jsxs("div",{className:"text-center text-white/40",children:[s.jsx(nl,{className:"h-6 w-6 mx-auto mb-1"}),s.jsx("p",{className:"text-xs",children:"Empty Slot"})]})})},`empty-${O}`))]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4 border-t border-white/20",children:[s.jsxs(T,{onClick:Be,disabled:H.length>=Je,className:"flex items-center space-x-2",children:[s.jsx(nl,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Alumni Badge"})]}),H.length>=Je&&s.jsxs(T,{onClick:gt,variant:"outline",className:"border-orange-500 text-orange-500 hover:bg-orange-500 hover:text-white flex items-center space-x-2",children:[s.jsx(tl,{className:"h-4 w-4"}),s.jsx("span",{children:"Upgrade for More Slots"})]})]}),H.length>=Je&&s.jsx("p",{className:"text-sm text-amber-300 mt-2 bg-amber-900/20 backdrop-blur-lg border border-amber-300/20 p-2 rounded",children:"⚠️ You've reached the maximum number of free alumni badges. Upgrade to add more!"}),H.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-blue-900/20 backdrop-blur-lg border border-blue-300/20 rounded text-sm text-blue-300",children:[s.jsx("p",{className:"font-medium mb-1",children:"💡 Alumni Badge Information:"}),s.jsx("p",{children:"Deleting an alumni badge will require a $15 fee for future applications to any school. Consider carefully before removing verified badges."})]})]})})]}),Co=()=>{const ee=Ve.reduce((k,U)=>{var ae;const se=((ae=U.school)==null?void 0:ae.name)||"Unknown School";return k[se]||(k[se]=[]),k[se].push(U),k},{}),O=Object.keys(ee).sort();return s.jsxs("div",{className:"space-y-8",children:[s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsx(be,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(bf,{className:"h-6 w-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"My Yearbook Library"}),s.jsxs("p",{className:"text-sm text-white/70",children:[Ve.length," purchased yearbook",Ve.length!==1?"s":""," from ",O.length," school",O.length!==1?"s":""]})]})]}),s.jsx("div",{className:"text-right"})]})})}),O.length===0?s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-8 text-center",children:[s.jsx(bf,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No Yearbooks Yet"}),s.jsx("p",{className:"text-white/70 mb-4",children:"Start building your collection by purchasing yearbooks from schools you're interested in."}),s.jsxs(T,{onClick:()=>c("home"),className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(Gr,{className:"h-4 w-4 mr-2"}),"Browse Yearbooks"]})]})}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:O.map(k=>{var ae;const U=ee[k],se=(ae=U[0])==null?void 0:ae.school;return s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(q7,{className:"h-8 w-8 text-blue-500"}),s.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold",children:U.length})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-blue-50 truncate",children:k}),s.jsxs("p",{className:"text-sm text-blue-50",children:[se==null?void 0:se.city,", ",se==null?void 0:se.country]})]})]}),s.jsxs("div",{className:"space-y-2 mb-4 ",children:[U.sort((Ee,Fe)=>Fe.year-Ee.year).slice(0,S.has(k)?U.length:4).map(Ee=>s.jsxs(T,{variant:"ghost",className:"w-full flex items-center justify-between p-3 bg-blue/10 hover:bg-blue-600 rounded-md transition-colors duration-200 border border-blue-200 hover:border-blue-300",onClick:()=>{const Fe=se!=null&&se.id?`?school=${se.id}`:"";e(`/waibuk/${Ee.year}${Fe}`)},"data-testid":`button-library-year-${Ee.year}`,children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gr,{className:"h-4 w-4 text-blue-50"}),s.jsxs("span",{className:"text-sm font-medium text-blue-50  ",children:[Ee.year," Academic Year"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs text-blue-50",children:new Date(Ee.purchaseDate).toLocaleDateString()}),s.jsx(zs,{className:"h-4 w-4 text-blue-50"})]})]},`${k}-${Ee.year}`)),U.length>4&&s.jsx(T,{variant:"ghost",size:"sm",className:"w-full p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50",onClick:()=>{const Ee=new Set(S);S.has(k)?Ee.delete(k):Ee.add(k),M(Ee)},"data-testid":`button-expand-${k.replace(/\s+/g,"-").toLowerCase()}`,children:s.jsx("span",{className:"text-sm",children:S.has(k)?"Show Less":`Show ${U.length-4} More...`})})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(T,{size:"sm",className:"flex-1 w-full bg-white-500/40 backdrop-blur-lg border border-whhite shadow-2xl cursor-pointer transition-all hover:bg-blue-500 hover:scale-105 hover:border-white text-white hover:text-white",onClick:()=>{r(se==null?void 0:se.id),c("home")},children:[s.jsx(zs,{className:"h-4 w-4 mr-1"}),"View"]}),s.jsxs(T,{size:"sm",variant:"outline",className:"flex-1 w-full bg-white-500/40 backdrop-blur-lg border border-whhite shadow-2xl cursor-pointer transition-all hover:bg-white hover:scale-105 hover:border-black text-white hover:text-black",onClick:()=>{const Ee=se!=null&&se.id?`?school=${se.id}`:"";e(`/yearbook-finder${Ee}`)},children:[s.jsx(nl,{className:"h-4 w-4 mr-1"}),"Add More"]})]})]})},k)})})]})},ko=()=>{var se;const ee=Ge.find(ae=>ae.id===t),O=(ee==null?void 0:ee.yearFounded)||hv,k=$n,U=Array.from({length:k-O+1},(ae,Ee)=>k-Ee);return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ue,{className:"block text-sm font-medium text-white mb-2",children:"Select School"}),s.jsx(d6,{schools:Ge,value:t,onValueChange:r,placeholder:"Choose a school to view memories..."})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"block text-sm font-medium text-white mb-2",children:"Academic Year"}),s.jsxs(nr,{value:n,onValueChange:a,disabled:!t,children:[s.jsx(Ys,{className:"w-full bg-white/10 backdrop-blur-lg border border-white/20 text-white",children:s.jsx(ar,{placeholder:t?"Choose year":"Select school first"})}),s.jsx(Ws,{className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 text-white",children:U.map(ae=>s.jsx(Nt,{value:ae.toString(),children:ae},ae))})]})]})]}),t&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl rounded-lg p-6",children:s.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-bold text-white mb-2",children:[(se=Ge.find(ae=>ae.id===t))==null?void 0:se.name," - ",n]}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-white/70",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(_n,{className:"h-4 w-4 text-blue-500"}),s.jsx("span",{className:"font-medium",children:Ie.filter(ae=>ae.mediaType==="image").length}),s.jsx("span",{children:"Photos"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Ou,{className:"h-4 w-4 text-green-500"}),s.jsx("span",{className:"font-medium",children:Ie.filter(ae=>ae.mediaType==="video").length}),s.jsx("span",{children:"Videos"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(yr,{className:"h-4 w-4 text-purple-500"}),s.jsx("span",{className:"font-medium",children:Ie.length}),s.jsx("span",{children:"Total Memories"})]})]})]})})}),s.jsx("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl rounded-lg p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(ue,{className:"text-sm font-medium text-white mr-2",children:"Filter by category:"}),["all","sports","cultural","graduation","activities","academic"].map(ae=>s.jsx("button",{onClick:()=>R(ae),className:`px-3 py-1 text-xs font-medium rounded-full border transition-colors ${A===ae?"bg-blue-500 text-white border-blue-500":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100"}`,children:ae==="all"?"All":ae.charAt(0).toUpperCase()+ae.slice(1)},ae))]}),s.jsxs("div",{className:"relative",children:[s.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(xe,{type:"text",placeholder:"Search memories...",className:"pl-10 pr-4 py-2 w-48 text-sm bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white"})]})]})}),Ie.length>0?s.jsx(jv,{memories:A==="all"?Ie:Ie.filter(ae=>ae.category===A),viewerMode:!0,onImageClick:le}):s.jsxs("div",{className:"text-center py-12 bg-white/10 backdrop-blur-lg rounded-lg border-2 border-dashed border-white/20",children:[s.jsx(_n,{className:"mx-auto h-12 w-12 text-white/60 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No memories found"}),s.jsx("p",{className:"text-white/80",children:t?`No memories available for ${n} yet.`:"Please select a school to view memories"})]})]})]})},So=()=>{var Fe;const ee=H.filter(_e=>_e.status==="verified"),O=()=>{if(!f)return[];const _e=Ge.find(Qs=>Qs.id===f)||Ge.find(Qs=>Qs.name===f),mt=_e?Math.max(1980,_e.yearFounded):1980,Mt=$n,St=Array.from({length:Mt-mt+1},(Qs,Po)=>(Mt-Po).toString());return St.push("did-not-graduate"),St},k=(Fe=ee.find(_e=>{const mt=Ge.find(Mt=>Mt.id===f);return mt&&_e.school===mt.name}))==null?void 0:Fe.graduationYear;let U=[],se=!1;w.trim()?U=vt.filter(_e=>_e.fullName.toLowerCase().includes(w.toLowerCase())):(U=I,se=b===k);const ae=()=>w.trim()?`${U.length} Students Found`:b==="did-not-graduate"?`${U.length} Did Not Graduate`:se?`${U.length} Classmates`:`${U.length} Alumni Accounts`,Ee=U;return s.jsxs("div",{className:"space-y-8",children:[s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(la,{className:"h-6 w-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Alumni Network"}),s.jsx("p",{className:"text-sm text-white/70",children:"Connect with your former classmates and explore graduating classes"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx(ue,{className:"text-white",htmlFor:"alumni-school",children:"Select Your Alumni School"}),s.jsxs(nr,{value:f,onValueChange:j,children:[s.jsx(Ys,{className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white",children:s.jsx(ar,{placeholder:""})}),s.jsx(Ws,{className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 text-white",children:ee.map(_e=>{const mt=Ge.find(Mt=>Mt.name===_e.school);return mt?s.jsx(Nt,{className:"text-white",value:mt.id,children:_e.school},mt.id):s.jsx(Nt,{value:_e.school,children:_e.school},_e.id)})})]})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-white",htmlFor:"graduation-year",children:"Graduation Year"}),s.jsxs(nr,{value:b,onValueChange:x,disabled:!f,children:[s.jsx(Ys,{className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white",children:s.jsx(ar,{placeholder:""})}),s.jsx(Ws,{className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 text-white",children:O().map(_e=>{var mt;if(_e==="did-not-graduate"){const Mt=((mt=Ge.find(St=>St.id===f))==null?void 0:mt.name)||"this school";return s.jsxs(Nt,{value:_e,children:["I did not graduate from ",Mt]},_e)}return s.jsxs(Nt,{value:_e,children:["Class of ",_e]},_e)})})]})]})]}),f&&s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(xe,{type:"text",placeholder:"Search students across all years...",value:w,onChange:_e=>C(_e.target.value),className:"pl-10 pr-4 py-2 w-full bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white"})]})]})}),f&&(b||w.trim())&&s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:w.trim()?"Search Results":b==="did-not-graduate"?"Did Not Graduate":`Class of ${b}`}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-white/70",children:[s.jsx(la,{className:"h-4 w-4"}),s.jsx("span",{children:ae()})]})]}),Ee.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(la,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:w.trim()?"No matching students found":b==="did-not-graduate"?"No students to show":"No students found"}),s.jsx("p",{className:"text-white/70",children:w.trim()?`No students match "${w}" in this school.`:b==="did-not-graduate"?"This option is for users who did not graduate from the school.":"There are no registered students for this graduating year yet."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:Ee.map(_e=>s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl hover:shadow-lg transition-shadow",children:s.jsx(be,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:_e.profileImage?s.jsx("img",{src:_e.profileImage,alt:_e.fullName,className:"w-12 h-12 rounded-full object-cover"}):s.jsx(to,{className:"h-6 w-6 text-gray-500"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-semibold text-white text-sm truncate",children:_e.fullName}),s.jsxs("p",{className:"text-xs text-white/70",children:["Class of ",_e.graduationYear]})]})]}),s.jsxs("div",{className:"space-y-3 border-t border-gray-100 pt-4",children:[_e.email&&s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(R4,{className:"h-4 w-4 text-white/40 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs text-white/60 font-medium",children:"Email"}),s.jsx("p",{className:"text-sm text-white truncate",children:_e.email})]})]}),s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(_4,{className:"h-4 w-4 text-white/40 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs text-white/60 font-medium",children:"Mobile"}),_e.phoneNumber&&_e.showPhoneToAlumni!==!1?s.jsx("p",{className:"text-sm text-white",children:_e.phoneNumber}):_e.phoneNumber&&_e.showPhoneToAlumni===!1?s.jsx("p",{className:"text-sm text-white/40 italic",children:"Hidden"}):s.jsx("p",{className:"text-sm text-white/40 italic",children:"Not provided"})]})]})]})]})})},_e.id))})]})}),ee.length===0&&s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-8 text-center",children:[s.jsx(rr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No Verified Alumni Status"}),s.jsx("p",{className:"text-white/70 mb-4",children:"You need to have at least one verified alumni badge to access the Alumni network."}),s.jsxs(T,{onClick:Be,className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(rr,{className:"h-4 w-4 mr-2"}),"Request Alumni Status"]})]})})]})};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-20 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-20 animate-float-delayed"})]})}),s.jsxs("div",{className:"relative z-10 min-h-screen",children:[s.jsxs("header",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-2xl relative",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-2 left-10 w-8 h-8 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-3 right-20 w-6 h-6 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-2 left-20 w-5 h-5 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-1 right-10 w-4 h-4 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"mx-auto px-2 sm:px-4 lg:px-8 xl:px-12 2xl:px-16 relative z-10",children:s.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(zs,{className:"text-white text-xs sm:text-sm"})}),s.jsx("h1",{className:"ml-2 sm:ml-3 text-sm sm:text-xl font-semibold text-white truncate",children:"Viewer/Alumni Portal"})]}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-4 flex-shrink-0",children:[s.jsx("div",{className:"sm:hidden relative",children:wt==="Alumni"?s.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:H.filter(ee=>ee.status==="verified").length}):s.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full"})}),s.jsxs("div",{className:`hidden sm:block px-2 sm:px-3 py-1 rounded-full text-xs font-medium ${wt.startsWith("Alumni")?"bg-green-500/20 text-green-200 border border-green-400/30":"bg-blue-500/20 text-blue-200 border border-blue-400/30"}`,children:[s.jsx("span",{className:"hidden md:inline",children:"Account Status: "}),wt]}),s.jsx("div",{className:"relative",children:s.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>m(!u),className:"relative text-white hover:bg-white/20","data-testid":"button-notifications",children:[s.jsx(Yn,{className:"h-5 w-5"}),Kn>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:Kn})]})}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-white hidden xs:block",children:[s.jsx("span",{className:"hidden sm:inline",children:i.fullName}),s.jsx("span",{className:"sm:hidden",children:i.fullName.split(" ")[0]})]}),s.jsx("div",{className:"relative",children:s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>oe(!ne),className:"text-white hover:bg-white/20 p-2 bg-white/10 rounded-lg border border-white/20 ml-3","data-testid":"button-hamburger-menu",children:s.jsx(Jr,{className:"h-5 w-5"})})})]})]})})]}),u&&s.jsxs("div",{className:"notification-dropdown fixed top-16 right-16 w-72 sm:w-80 max-w-[calc(100vw-2rem)] bg-blue-600/60 backdrop-blur-lg rounded-lg shadow-xl border border-white/20 z-[999999]",children:[s.jsx("div",{className:"p-4 border-b border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"}),s.jsxs("div",{className:"flex items-center gap-2",children:[ut.length>0&&s.jsx(T,{variant:"ghost",size:"sm",onClick:Sn,className:"text-white/80 hover:text-white text-xs","data-testid":"button-clear-all-notifications",children:"Clear All"}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>m(!1),"data-testid":"button-close-notifications",children:s.jsx(Pt,{className:"h-4 w-4 text-white hover:text-red-500"})})]})]})}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:ut.length===0?s.jsx("div",{className:"p-4 text-center text-white/70",children:"No notifications yet"}):ut.map(ee=>s.jsx("div",{className:`p-4 border-b border-white/20 hover:bg-white/10 cursor-pointer transition-colors ${ee.isRead?"":"bg-blue-500/20"}`,onClick:()=>{ee.isRead||Gs(ee.id)},"data-testid":`notification-${ee.id}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${ee.isRead?"bg-gray-300":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-white",children:ee.title}),s.jsx("p",{className:"text-sm text-white/80 mt-1",children:ee.message}),s.jsx("p",{className:"text-xs text-white/60 mt-2",children:vo(ee.createdAt)})]})]})},ee.id))})]}),ne&&s.jsx("div",{className:"hamburger-dropdown fixed top-16 right-4 w-48 bg-blue-600/60 backdrop-blur-lg border border-white/20 rounded-lg shadow-xl z-[999999]",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{oe(!1),c("home")},"data-testid":"menu-home",children:[s.jsx(Xr,{className:"h-4 w-4 mr-3"}),"Home"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{oe(!1),e("/viewer-settings")},"data-testid":"menu-settings",children:[s.jsx(Rs,{className:"h-4 w-4 mr-3"}),"Settings"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{oe(!1),e("/cart")},"data-testid":"menu-cart",children:[s.jsx(xs,{className:"h-4 w-4 mr-3"}),"Cart"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm hover:bg-red-500/40 transition-colors text-red-500",onClick:()=>{oe(!1),Pe()},"data-testid":"menu-logout",children:[s.jsx(Cn,{className:"h-4 w-4 mr-3"}),"Logout"]})]})}),s.jsx("div",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-lg relative z-10",children:s.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:s.jsxs("div",{className:"flex gap-2 py-4 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[s.jsxs("button",{onClick:()=>c("home"),className:`px-4 sm:px-6 py-3 text-sm font-medium rounded-xl flex items-center space-x-2 whitespace-nowrap transition-all duration-300 transform min-w-fit ${l==="home"?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-lg scale-105 shadow-blue-500/25":"bg-white/10 text-blue-100 hover:bg-white/20 hover:text-white hover:scale-102"}`,children:[s.jsx(Xr,{className:"h-4 w-4 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden xs:inline",children:"Home"})]}),s.jsxs("button",{onClick:()=>c("library"),className:`px-4 sm:px-6 py-3 text-sm font-medium rounded-xl flex items-center space-x-2 whitespace-nowrap transition-all duration-300 transform min-w-fit ${l==="library"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg scale-105 shadow-purple-500/25":"bg-white/10 text-blue-100 hover:bg-white/20 hover:text-white hover:scale-102"}`,children:[s.jsx(bf,{className:"h-4 w-4 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden xs:inline",children:"Library"})]}),s.jsxs("button",{onClick:()=>c("profile"),className:`px-4 sm:px-6 py-3 text-sm font-medium rounded-xl flex items-center space-x-2 whitespace-nowrap transition-all duration-300 transform min-w-fit ${l==="profile"?"bg-gradient-to-r from-green-500 to-teal-500 text-white shadow-lg scale-105 shadow-green-500/25":"bg-white/10 text-blue-100 hover:bg-white/20 hover:text-white hover:scale-102"}`,children:[s.jsx(to,{className:"h-4 w-4 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden xs:inline",children:"Profile"})]}),s.jsxs("button",{onClick:()=>c("photos"),className:`px-4 sm:px-6 py-3 text-sm font-medium rounded-xl flex items-center space-x-2 whitespace-nowrap transition-all duration-300 transform min-w-fit ${l==="photos"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg scale-105 shadow-orange-500/25":"bg-white/10 text-blue-100 hover:bg-white/20 hover:text-white hover:scale-102"}`,"data-testid":"tab-photos",children:[s.jsx(_n,{className:"h-4 w-4 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden xs:inline",children:"Photos"})]}),s.jsxs("button",{onClick:()=>c("memory-upload"),className:`px-4 sm:px-6 py-3 text-sm font-medium rounded-xl flex items-center space-x-2 whitespace-nowrap transition-all duration-300 transform min-w-fit ${l==="memory-upload"?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-lg scale-105 shadow-yellow-500/25":"bg-white/10 text-blue-100 hover:bg-white/20 hover:text-white hover:scale-102"}`,"data-testid":"tab-memory-upload",children:[s.jsx(is,{className:"h-4 w-4 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden xs:inline",children:"Memory Upload"})]}),H.some(ee=>ee.status==="verified")&&s.jsxs("button",{onClick:()=>c("alumni"),className:`px-4 sm:px-6 py-3 text-sm font-medium rounded-xl flex items-center space-x-2 whitespace-nowrap transition-all duration-300 transform min-w-fit ${l==="alumni"?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg scale-105 shadow-indigo-500/25":"bg-white/10 text-blue-100 hover:bg-white/20 hover:text-white hover:scale-102"}`,"data-testid":"tab-alumni",children:[s.jsx(la,{className:"h-4 w-4 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden xs:inline",children:"Alumni"})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-6 sm:py-8 relative z-10",children:[s.jsx("div",{className:"mb-8 bg-white/10 backdrop-blur-lg rounded-2xl p-4 sm:p-6 border border-white/20 shadow-2xl",children:s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl flex items-center justify-center shadow-lg",children:s.jsx(rr,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl sm:text-3xl font-bold text-white",children:["Welcome back, ",((ki=i==null?void 0:i.fullName)==null?void 0:ki.split(" ")[0])||"User","!"]}),s.jsx("p",{className:"text-blue-200 mt-1 text-sm sm:text-lg",children:l==="home"?"Browse school memories and events":l==="library"?"Your purchased yearbooks organized by school":l==="photos"?"Enhanced photo gallery with advanced viewing options":l==="alumni"?"Connect with fellow alumni from your graduating class":l==="memory-upload"?"Upload memories with special school codes":"Manage your profile and alumni badges"})]})]})}),l==="home"?No():l==="library"?Co():l==="photos"?ko():l==="alumni"?So():l==="memory-upload"?Ca():jo()]}),W&&z>=0&&Ie[z]&&s.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[s.jsx(T,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 z-20 bg-black/50 text-white hover:bg-black/70 rounded-full",onClick:Ye,children:s.jsx(Pt,{className:"h-4 w-4"})}),s.jsxs("div",{className:"relative flex-1 flex items-center justify-center bg-black overflow-hidden cursor-grab",onMouseDown:Dt,onMouseMove:Ft,onMouseUp:zt,onMouseLeave:zt,style:{cursor:V?"grabbing":X>1?"grab":"default"},children:[s.jsx("img",{src:ce(Ie[z].imageUrl)||"/placeholder-image.jpg",alt:Ie[z].title,className:"max-w-full max-h-full object-contain transition-transform duration-200",style:{transform:`scale(${X}) translate(${L.x/X}px, ${L.y/X}px)`},draggable:!1}),s.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[s.jsx(T,{variant:"ghost",size:"sm",className:"bg-black/50 text-white hover:bg-black/70 rounded-full w-10 h-10 p-0",onClick:fe,disabled:X>=3,children:s.jsx(ui,{className:"h-4 w-4"})}),s.jsx(T,{variant:"ghost",size:"sm",className:"bg-black/50 text-white hover:bg-black/70 rounded-full w-10 h-10 p-0",onClick:Ue,disabled:X<=.5,children:s.jsx(hi,{className:"h-4 w-4"})}),s.jsx(T,{variant:"ghost",size:"sm",className:"bg-black/50 text-white hover:bg-black/70 rounded-full w-10 h-10 p-0",onClick:ot,disabled:X===1,children:s.jsx(qx,{className:"h-4 w-4"})})]}),z>0&&s.jsx(T,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/50 text-white hover:bg-black/70 rounded-full w-12 h-12",onClick:He,children:s.jsx(mn,{className:"h-6 w-6"})}),z<Ie.length-1&&s.jsx(T,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/50 text-white hover:bg-black/70 rounded-full w-12 h-12",onClick:Re,children:s.jsx(Fn,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"bg-black/90 text-white px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold",children:Ie[z].title}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:Ie[z].description}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-400",children:[s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(yr,{className:"h-3 w-3"}),s.jsx("span",{children:Ie[z].eventDate})]}),Ie[z].category&&s.jsx("span",{className:"capitalize",children:Ie[z].category.replace("_"," ")})]})]}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"text-xs text-gray-400 ml-4 flex-shrink-0",children:[z+1," of ",Ie.length]})})]})]})]})]})}var Rm="Tabs",[wM]=cr(Rm,[km]),u6=km(),[yM,kg]=wM(Rm),h6=d.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,m=Ld(l),[h,p]=qn({prop:n,onChange:a,defaultProp:i??"",caller:Rm});return s.jsx(yM,{scope:r,baseId:ii(),value:h,onValueChange:p,orientation:o,dir:m,activationMode:c,children:s.jsx(Xe.div,{dir:m,"data-orientation":o,...u,ref:t})})});h6.displayName=Rm;var m6="TabsList",f6=d.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=kg(m6,r),o=u6(r);return s.jsx(LN,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Xe.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});f6.displayName=m6;var p6="TabsTrigger",x6=d.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=kg(p6,r),l=u6(r),c=v6(o.baseId,n),u=w6(o.baseId,n),m=n===o.value;return s.jsx($N,{asChild:!0,...l,focusable:!a,active:m,children:s.jsx(Xe.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:We(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:We(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:We(e.onFocus,()=>{const h=o.activationMode!=="manual";!m&&!a&&h&&o.onValueChange(n)})})})});x6.displayName=p6;var g6="TabsContent",b6=d.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=kg(g6,r),c=v6(l.baseId,n),u=w6(l.baseId,n),m=n===l.value,h=d.useRef(m);return d.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),s.jsx(ya,{present:a||m,children:({present:p})=>s.jsx(Xe.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});b6.displayName=g6;function v6(e,t){return`${e}-trigger-${t}`}function w6(e,t){return`${e}-content-${t}`}var NM=h6,y6=f6,N6=x6,j6=b6;const Ih=NM,pd=d.forwardRef(({className:e,...t},r)=>s.jsx(y6,{ref:r,className:$e("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));pd.displayName=y6.displayName;const Hr=d.forwardRef(({className:e,...t},r)=>s.jsx(N6,{ref:r,className:$e("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Hr.displayName=N6.displayName;const hn=d.forwardRef(({className:e,...t},r)=>s.jsx(j6,{ref:r,className:$e("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));hn.displayName=j6.displayName;function jM(){return Ry.useSyncExternalStore(CM,()=>!0,()=>!1)}function CM(){return()=>{}}var Sg="Avatar",[kM]=cr(Sg),[SM,C6]=kM(Sg),k6=d.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,i]=d.useState("idle");return s.jsx(SM,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(Xe.span,{...n,ref:t})})});k6.displayName=Sg;var S6="AvatarImage",P6=d.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=e,o=C6(S6,r),l=PM(n,i),c=Mr(u=>{a(u),o.onImageLoadingStatusChange(u)});return bs(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(Xe.img,{...i,ref:t,src:n}):null});P6.displayName=S6;var E6="AvatarFallback",T6=d.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,i=C6(E6,r),[o,l]=d.useState(n===void 0);return d.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(Xe.span,{...a,ref:t}):null});T6.displayName=E6;function Cv(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function PM(e,{referrerPolicy:t,crossOrigin:r}){const n=jM(),a=d.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,l]=d.useState(()=>Cv(i,e));return bs(()=>{l(Cv(i,e))},[i,e]),bs(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),m=c("error");return i.addEventListener("load",u),i.addEventListener("error",m),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",m)}},[i,r,t]),o}var A6=k6,R6=P6,M6=T6;const Fh=d.forwardRef(({className:e,...t},r)=>s.jsx(A6,{ref:r,className:$e("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Fh.displayName=A6.displayName;const Oh=d.forwardRef(({className:e,...t},r)=>s.jsx(R6,{ref:r,className:$e("aspect-square h-full w-full",e),...t}));Oh.displayName=R6.displayName;const Lh=d.forwardRef(({className:e,...t},r)=>s.jsx(M6,{ref:r,className:$e("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Lh.displayName=M6.displayName;const Vu=d.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:$e("w-full caption-bottom text-sm",e),...t})}));Vu.displayName="Table";const Bu=d.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:$e("[&_tr]:border-b",e),...t}));Bu.displayName="TableHeader";const qu=d.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:$e("[&_tr:last-child]:border-0",e),...t}));qu.displayName="TableBody";const EM=d.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:$e("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));EM.displayName="TableFooter";const Aa=d.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:$e("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Aa.displayName="TableRow";const Is=d.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:$e("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Is.displayName="TableHead";const Ss=d.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:$e("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Ss.displayName="TableCell";const TM=d.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:$e("mt-4 text-sm text-muted-foreground",e),...t}));TM.displayName="TableCaption";function _6({user:e,onLogout:t}){var F;const[r,n]=d.useState([]),[a,i]=d.useState([]),[o,l]=d.useState([]),[c,u]=d.useState({}),[m,h]=d.useState([]),[p,y]=d.useState("overview"),[N,f]=d.useState(""),[j,b]=d.useState(""),[x,w]=d.useState(!1),[C,S]=d.useState(null),[M,A]=d.useState(null),[R,z]=d.useState(!1),[$,W]=d.useState("grid"),[G,X]=d.useState(!1),[P,L]=d.useState(!1),[_,V]=d.useState(null),[E,Y]=d.useState(null),[Z,ne]=d.useState(""),[oe,pe]=d.useState(""),{toast:he}=ks(),B=()=>({Authorization:`Bearer ${localStorage.getItem("superAdminToken")}`,"Content-Type":"application/json"}),K=async()=>{w(!0);try{const[g,D,J,ce,le]=await Promise.all([fetch("/api/super-admin/users",{headers:B()}),fetch("/api/super-admin/schools",{headers:B()}),fetch("/api/super-admin/pending-schools",{headers:B()}),fetch("/api/super-admin/analytics",{headers:B()}),fetch("/api/super-admin/login-activity",{headers:B()})]);if(g.ok){const Re=await g.json();n(Re.filter(He=>He.userType==="viewer"))}D.ok&&i(await D.json()),J.ok&&l(await J.json()),ce.ok&&u(await ce.json()),le.ok&&h(await le.json())}catch(g){console.error("Error fetching data:",g),he({title:"Error",description:"Failed to fetch dashboard data",variant:"destructive"})}finally{w(!1)}};d.useEffect(()=>{K()},[]);const re=async(g,D)=>{try{const J=await fetch(`/api/super-admin/approve-school/${g}`,{method:"POST",headers:B()});if(J.ok)he({title:"School Approved",description:`${D} has been approved successfully`}),K();else{const ce=await J.json();he({title:"Error",description:ce.message||"Failed to approve school",variant:"destructive"})}}catch{he({title:"Error",description:"Failed to approve school",variant:"destructive"})}},ye=async(g,D,J)=>{try{const ce=await fetch(`/api/super-admin/reject-school/${g}`,{method:"POST",headers:B(),body:JSON.stringify({reason:J})});if(ce.ok)he({title:"School Rejected",description:`${D} registration has been rejected`}),K();else{const le=await ce.json();he({title:"Error",description:le.message||"Failed to reject school",variant:"destructive"})}}catch{he({title:"Error",description:"Failed to reject school",variant:"destructive"})}},Q=async g=>{z(!0);try{const D=await fetch(`/api/super-admin/school-years/${g}`,{headers:B()});if(D.ok){const J=await D.json();A(J)}else{let J="Failed to fetch yearbooks";try{J=(await D.json()).message||J}catch{}he({title:"Error",description:J,variant:"destructive"})}}catch{he({title:"Error",description:"Failed to fetch yearbooks. Please try again.",variant:"destructive"})}finally{z(!1)}},te=async(g,D,J)=>{try{const ce=await fetch("/api/super-admin/unlock-year",{method:"POST",headers:B(),body:JSON.stringify({schoolId:g,year:D,unlock:J})});if(ce.ok){const le=await ce.json();he({title:"Year Access Updated",description:le.message}),C&&await Q(C.id)}else{const le=await ce.json();he({title:"Error",description:le.message||"Failed to update year access",variant:"destructive"})}}catch{he({title:"Error",description:"Failed to update year access",variant:"destructive"})}},ve=(g,D,J)=>{V({schoolId:g,year:D,schoolName:J}),X(!0)},we=()=>{X(!1),L(!0)},Ne=(g,D)=>{Y({schoolId:g,schoolName:D,action:"approve"}),L(!0)},ie=(g,D)=>{Y({schoolId:g,schoolName:D,action:"deny"}),L(!0)},me=async()=>{try{(await fetch("/api/super-admin/verify-password",{method:"POST",headers:B(),body:JSON.stringify({password:Z})})).ok?(_?(await te(_.schoolId,_.year,!0),V(null)):E&&(E.action==="approve"?await re(E.schoolId,E.schoolName):await ye(E.schoolId,E.schoolName,"Registration rejected by administrator"),Y(null)),L(!1),ne(""),pe("")):pe("Incorrect password. Please try again.")}catch{pe("Error verifying password. Please try again.")}},Ae=()=>{X(!1),L(!1),ne(""),pe(""),V(null),Y(null)},at=r.filter(g=>g.username.toLowerCase().includes(N.toLowerCase())||g.fullName.toLowerCase().includes(N.toLowerCase())||g.email&&g.email.toLowerCase().includes(N.toLowerCase())),lt=a.filter(g=>g.name.toLowerCase().includes(N.toLowerCase())||g.country.toLowerCase().includes(N.toLowerCase())),it=o.filter(g=>g.name.toLowerCase().includes(j.toLowerCase())||g.city.toLowerCase().includes(j.toLowerCase())||g.country.toLowerCase().includes(j.toLowerCase()));return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-20 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-20 animate-float-delayed"})]})}),s.jsxs("div",{className:"relative z-10 min-h-screen",children:[s.jsxs("header",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-2xl relative overflow-hidden","data-testid":"header-dashboard",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-2 left-10 w-8 h-8 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-3 right-20 w-6 h-6 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-2 left-20 w-5 h-5 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-1 right-10 w-4 h-4 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsxs("div",{className:"px-6 py-4 flex items-center justify-between relative z-10",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-pink-600 rounded-lg flex items-center justify-center shadow-lg","data-testid":"icon-container-header",children:s.jsx(On,{className:"w-6 h-6 text-white","data-testid":"icon-shield-header"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-white","data-testid":"text-title-header",children:"Super Admin Dashboard"}),s.jsxs("p",{className:"text-sm text-blue-200","data-testid":"text-subtitle",children:["Welcome back, ",e.fullName]})]})]}),s.jsxs(T,{variant:"outline",onClick:t,"data-testid":"button-logout",className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white hover:bg-white/20",children:[s.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]}),s.jsxs("main",{className:"p-6","data-testid":"main-dashboard",children:[s.jsxs(Ih,{value:p,onValueChange:y,className:"space-y-6","data-testid":"tabs-dashboard",children:[s.jsxs(pd,{className:"grid w-full grid-cols-6","data-testid":"tabs-list",children:[s.jsxs(Hr,{value:"overview","data-testid":"tab-overview",children:[s.jsx(z7,{className:"w-4 h-4 mr-2"}),"Overview"]}),s.jsxs(Hr,{value:"viewers","data-testid":"tab-viewers",children:[s.jsx(la,{className:"w-4 h-4 mr-2"}),"Viewers"]}),s.jsxs(Hr,{value:"schools","data-testid":"tab-schools",children:[s.jsx(al,{className:"w-4 h-4 mr-2"}),"Schools"]}),s.jsxs(Hr,{value:"pending-schools","data-testid":"tab-pending-schools",children:[s.jsx(vh,{className:"w-4 h-4 mr-2"}),"Pending ",o.length>0&&s.jsx(Wi,{variant:"destructive",className:"ml-1",children:o.length})]}),s.jsxs(Hr,{value:"yearbooks","data-testid":"tab-yearbooks",children:[s.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Yearbooks"]}),s.jsxs(Hr,{value:"logs","data-testid":"tab-logs",children:[s.jsx(F7,{className:"w-4 h-4 mr-2"}),"Activity Logs"]})]}),s.jsx(hn,{value:"overview","data-testid":"content-overview",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl","data-testid":"card-total-schools",children:[s.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium text-white",children:"Registered Schools"}),s.jsx(al,{className:"h-4 w-4 text-blue-200"})]}),s.jsxs(be,{children:[s.jsx("div",{className:"text-2xl font-bold text-white","data-testid":"text-total-schools",children:c.totalSchools||0}),s.jsx("div",{className:"text-xs text-blue-200 mt-1",children:"Educational institutions"})]})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl","data-testid":"card-total-viewers",children:[s.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium text-white",children:"Total Viewers"}),s.jsx(la,{className:"h-4 w-4 text-blue-200"})]}),s.jsxs(be,{children:[s.jsx("div",{className:"text-2xl font-bold text-white","data-testid":"text-total-viewers",children:((F=c.usersByType)==null?void 0:F.viewers)||0}),s.jsx("div",{className:"text-xs text-blue-200 mt-1",children:"Active viewer accounts"})]})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl","data-testid":"card-pending-schools",children:[s.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium text-white",children:"Pending Schools"}),s.jsx(vh,{className:"h-4 w-4 text-yellow-400"})]}),s.jsxs(be,{children:[s.jsx("div",{className:"text-2xl font-bold text-white","data-testid":"text-pending-schools",children:o.length}),s.jsx("div",{className:"text-xs text-blue-200 mt-1",children:"Awaiting verification"})]})]})]})}),s.jsx(hn,{value:"viewers","data-testid":"content-viewers",children:s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(tt,{className:"text-white",children:"Viewer Accounts"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ds,{className:"w-4 h-4 text-blue-200"}),s.jsx(xe,{placeholder:"Search viewers...",value:N,onChange:g=>f(g.target.value),className:"w-64 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-blue-200","data-testid":"input-search-viewers"})]})]})}),s.jsx(be,{children:s.jsxs(Vu,{"data-testid":"table-viewers",children:[s.jsx(Bu,{children:s.jsxs(Aa,{children:[s.jsx(Is,{className:"text-white",children:"Username"}),s.jsx(Is,{className:"text-white",children:"Full Name"}),s.jsx(Is,{className:"text-white",children:"Phone Number"}),s.jsx(Is,{className:"text-white",children:"Email"}),s.jsx(Is,{className:"text-white",children:"Created"})]})}),s.jsx(qu,{children:at.map(g=>s.jsxs(Aa,{"data-testid":`row-viewer-${g.id}`,children:[s.jsx(Ss,{className:"font-medium text-white",children:g.username}),s.jsx(Ss,{className:"text-white",children:g.fullName}),s.jsx(Ss,{className:"text-white",children:g.phoneNumber||"N/A"}),s.jsx(Ss,{className:"text-white",children:g.email||"N/A"}),s.jsx(Ss,{className:"text-white",children:new Date(g.createdAt).toLocaleDateString()})]},g.id))})]})})]})}),s.jsx(hn,{value:"schools","data-testid":"content-schools",children:s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(tt,{className:"text-white",children:"Registered Schools"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ds,{className:"w-4 h-4 text-blue-200"}),s.jsx(xe,{placeholder:"Search schools...",value:N,onChange:g=>f(g.target.value),className:"w-64 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-blue-200","data-testid":"input-search-schools"})]})]})}),s.jsx(be,{children:s.jsxs(Vu,{"data-testid":"table-schools",children:[s.jsx(Bu,{children:s.jsxs(Aa,{children:[s.jsx(Is,{className:"text-white",children:"Username"}),s.jsx(Is,{className:"text-white",children:"School Name"}),s.jsx(Is,{className:"text-white",children:"Founding Year"}),s.jsx(Is,{className:"text-white",children:"Country"}),s.jsx(Is,{className:"text-white",children:"Email"}),s.jsx(Is,{className:"text-white",children:"Phone Number"}),s.jsx(Is,{className:"text-white",children:"Created"})]})}),s.jsx(qu,{children:lt.map(g=>s.jsxs(Aa,{"data-testid":`row-school-${g.id}`,children:[s.jsx(Ss,{className:"font-medium text-white",children:g.adminUsername||"N/A"}),s.jsx(Ss,{className:"font-medium text-white",children:g.name}),s.jsx(Ss,{className:"text-white",children:g.yearFounded}),s.jsx(Ss,{className:"text-white",children:g.country}),s.jsx(Ss,{className:"text-white",children:g.email}),s.jsx(Ss,{className:"text-white",children:g.phoneNumber||"N/A"}),s.jsx(Ss,{className:"text-white",children:new Date(g.createdAt).toLocaleDateString()})]},g.id))})]})})]})}),s.jsx(hn,{value:"pending-schools","data-testid":"content-pending-schools",children:s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(tt,{className:"text-white",children:"School Registration Requests"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ds,{className:"w-4 h-4 text-blue-200"}),s.jsx(xe,{placeholder:"Search pending schools...",value:j,onChange:g=>b(g.target.value),className:"w-64 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-blue-200","data-testid":"input-search-pending-schools"})]})]})}),s.jsx(be,{children:it.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(al,{className:"w-12 h-12 mx-auto text-blue-200 mb-2"}),s.jsx("p",{className:"text-blue-200",children:j?"No schools found matching your search":"No pending school requests"})]}):s.jsx("div",{className:"space-y-4","data-testid":"list-pending-schools",children:it.map(g=>{var D;return s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl border-l-4 border-l-yellow-500","data-testid":`card-pending-school-${g.id}`,children:s.jsxs(be,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:g.name}),s.jsxs("p",{className:"text-sm text-blue-200",children:["Submitted on ",new Date(g.createdAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(T,{size:"sm",onClick:()=>Ne(g.id,g.name),"data-testid":`button-approve-school-${g.id}`,children:[s.jsx(il,{className:"w-4 h-4 mr-1"}),"Approve"]}),s.jsx(T,{variant:"destructive",size:"sm",onClick:()=>ie(g.id,g.name),"data-testid":`button-deny-school-${g.id}`,children:"Deny"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white mb-1",children:"School Information"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-white",children:[s.jsx("span",{className:"text-blue-200",children:"Location:"})," ",g.city,", ",g.country]}),s.jsxs("p",{className:"text-white",children:[s.jsx("span",{className:"text-blue-200",children:"Founded:"})," ",g.yearFounded]}),s.jsxs("p",{className:"text-white",children:[s.jsx("span",{className:"text-blue-200",children:"Email:"})," ",g.email]}),s.jsxs("p",{className:"text-white",children:[s.jsx("span",{className:"text-blue-200",children:"Phone:"})," ",g.phoneNumber||"Not provided"]}),s.jsxs("p",{className:"text-white",children:[s.jsx("span",{className:"text-blue-200",children:"Website:"})," ",g.website?s.jsx("a",{href:g.website.startsWith("http")?g.website:`https://${g.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 hover:underline","data-testid":`link-website-${g.id}`,children:g.website}):"Not provided"]}),g.address&&s.jsxs("p",{className:"text-white",children:[s.jsx("span",{className:"text-blue-200",children:"Address:"})," ",g.address]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white mb-1",children:"Admin Credentials"}),s.jsx("div",{className:"space-y-1",children:s.jsxs("p",{className:"text-white",children:[s.jsx("span",{className:"text-blue-200",children:"Username:"})," ",s.jsx("code",{className:"bg-white/10 px-1 py-0.5 rounded text-xs text-white",children:((D=g.tempAdminCredentials)==null?void 0:D.username)||"N/A"})]})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white mb-1",children:"Registration Details"}),s.jsxs("div",{className:"space-y-1",children:[g.registrationNumber?s.jsxs("p",{className:"text-white",children:[s.jsx("span",{className:"text-blue-200",children:"Reg. Number:"})," ",g.registrationNumber]}):s.jsxs("p",{className:"text-white",children:[s.jsx("span",{className:"text-blue-200",children:"Reg. Number:"})," ",s.jsx("span",{className:"text-blue-200",children:"Not provided"})]}),g.accreditationDocument?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-blue-200",children:"Accreditation:"}),s.jsx(T,{size:"sm",variant:"outline",onClick:()=>window.open(`/${g.accreditationDocument}`,"_blank"),className:"text-xs h-6 px-2","data-testid":`button-view-document-${g.id}`,children:"View Document"})]}):s.jsxs("p",{className:"text-white",children:[s.jsx("span",{className:"text-blue-200",children:"Accreditation:"})," ",s.jsx("span",{className:"text-blue-200",children:"Not provided"})]})]})]})]})]})},g.id)})})})]})}),s.jsx(hn,{value:"yearbooks","data-testid":"content-yearbooks",children:s.jsx("div",{className:"space-y-6",children:C?s.jsxs("div",{className:"space-y-4",children:[s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsx(et,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(Fh,{className:"h-12 w-12 flex-shrink-0",children:[s.jsx(Oh,{src:C.logo||void 0,alt:C.name}),s.jsx(Lh,{className:"bg-white/10 text-blue-200 font-semibold",children:C.name.charAt(0).toUpperCase()})]}),s.jsxs("div",{children:[s.jsx(tt,{className:"text-white",children:C.name}),s.jsxs("p",{className:"text-sm text-blue-200",children:[C.city,", ",C.country," • Founded ",C.yearFounded]})]})]}),s.jsx(T,{variant:"outline",onClick:()=>{S(null),A(null)},"data-testid":"button-back-to-schools",children:"Back to Schools"})]})})}),R?s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),s.jsx("p",{className:"text-blue-200",children:"Loading school years..."})]})}):M?s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(tt,{className:"text-white",children:"Year Access Management"}),s.jsxs("p",{className:"text-sm text-blue-200",children:["Control which years ",C.name," has access to. Green = Unlocked, Red = Locked"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(T,{variant:$==="grid"?"default":"outline",size:"sm",onClick:()=>W("grid"),"data-testid":"button-grid-view",children:s.jsx(Vx,{className:"w-4 h-4"})}),s.jsx(T,{variant:$==="list"?"default":"outline",size:"sm",onClick:()=>W("list"),"data-testid":"button-list-view",children:s.jsx(Bx,{className:"w-4 h-4"})})]})]})}),s.jsx(be,{children:$==="grid"?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:M.years.map(g=>s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl","data-testid":`card-year-${g.year}`,children:s.jsxs(be,{className:"p-3 text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-2",children:g.purchased?s.jsx(yr,{className:"w-5 h-5 text-green-400"}):s.jsx(wb,{className:"w-5 h-5 text-blue-200"})}),s.jsx("h3",{className:"font-bold text-lg text-white",children:g.year}),s.jsx("p",{className:"text-xs text-blue-200 mb-2",children:g.purchased?"Access Granted":"Not Purchased"}),g.purchaseDate&&s.jsx("p",{className:"text-xs text-green-400 mb-2",children:new Date(g.purchaseDate).toLocaleDateString()}),s.jsx(T,{size:"sm",variant:g.purchased?"secondary":"default",disabled:g.purchased,onClick:g.purchased?void 0:()=>ve(C.id,g.year,C.name),"data-testid":`button-toggle-year-${g.year}`,className:"w-full",children:g.purchased?"Purchased":"Unlock"})]})},g.year))}):s.jsx("div",{className:"space-y-2",children:M.years.map(g=>s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl","data-testid":`card-year-list-${g.year}`,children:s.jsx(be,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[g.purchased?s.jsx(Q7,{className:"w-5 h-5 text-green-400"}):s.jsx(wb,{className:"w-5 h-5 text-blue-200"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg text-white",children:g.year}),s.jsx("p",{className:"text-sm text-blue-200",children:g.purchased?"Access Granted":"Not Purchased"}),g.purchaseDate&&s.jsxs("p",{className:"text-sm text-green-400",children:["Unlocked: ",new Date(g.purchaseDate).toLocaleDateString()]})]})]}),s.jsx(T,{size:"sm",variant:g.purchased?"secondary":"default",disabled:g.purchased,onClick:g.purchased?void 0:()=>ve(C.id,g.year,C.name),"data-testid":`button-toggle-year-${g.year}`,children:g.purchased?g.unlockedByAdmin?"Unlocked":"Purchased":"Unlock"})]})})},g.year))})})]}):null]}):s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{children:[s.jsx(tt,{className:"text-white",children:"Yearbook Management"}),s.jsx("p",{className:"text-sm text-blue-200",children:"Select a school to manage their yearbook access and unlocked years"})]}),s.jsx(be,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(ds,{className:"w-4 h-4 text-blue-200"}),s.jsx(xe,{placeholder:"Search schools...",value:N,onChange:g=>f(g.target.value),className:"w-64 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-blue-200","data-testid":"input-search-schools-yearbooks"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:lt.map(g=>s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl hover-elevate active-elevate-2 cursor-pointer transition-colors","data-testid":`card-school-yearbook-${g.id}`,children:s.jsx(be,{className:"p-4",onClick:()=>{S(g),Q(g.id)},children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(Fh,{className:"h-10 w-10 flex-shrink-0",children:[s.jsx(Oh,{src:g.logo||void 0,alt:g.name}),s.jsx(Lh,{className:"bg-white/10 text-blue-200 font-semibold",children:g.name.charAt(0).toUpperCase()})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium text-sm text-white",children:g.name}),s.jsxs("p",{className:"text-xs text-blue-200",children:[g.city,", ",g.country]}),s.jsxs("p",{className:"text-xs text-blue-200",children:["Founded: ",g.yearFounded]})]})]})})},g.id))})]})})]})})}),s.jsx(hn,{value:"logs","data-testid":"content-logs",children:s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{children:[s.jsx(tt,{className:"text-white",children:"Super Admin Login Activity"}),s.jsx("p",{className:"text-sm text-blue-200",children:"Recent login sessions and activity for your account"})]}),s.jsx(be,{children:s.jsxs(Vu,{"data-testid":"table-logs",children:[s.jsx(Bu,{children:s.jsxs(Aa,{children:[s.jsx(Is,{className:"text-white",children:"Timestamp"}),s.jsx(Is,{className:"text-white",children:"Action"}),s.jsx(Is,{className:"text-white",children:"IP Address"}),s.jsx(Is,{className:"text-white",children:"Device/Browser"})]})}),s.jsx(qu,{children:m.length>0?m.map(g=>s.jsxs(Aa,{"data-testid":`row-log-${g.id}`,children:[s.jsx(Ss,{className:"text-white",children:new Date(g.createdAt).toLocaleString()}),s.jsx(Ss,{className:"text-white",children:s.jsx(Wi,{variant:g.loginStatus==="success"?"default":"destructive",children:g.loginStatus==="success"?"Login":"Failed Login"})}),s.jsx(Ss,{className:"font-mono text-xs text-white",children:g.ipAddress||"N/A"}),s.jsx(Ss,{className:"text-white text-xs",children:g.browser&&g.os?`${g.browser} on ${g.os}`:g.userAgent||"N/A"})]},g.id)):s.jsx(Aa,{children:s.jsx(Ss,{colSpan:4,className:"text-center text-blue-200 py-8",children:"No login activity recorded yet"})})})]})})]})})]}),s.jsx(Hl,{open:G,onOpenChange:X,children:s.jsxs(lo,{"data-testid":"dialog-confirm-unlock",className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white",children:[s.jsxs(co,{children:[s.jsx(ho,{children:"Confirm Year Unlock"}),s.jsxs(mo,{className:"text-gray-100",children:["Are you sure you want to unlock the ",_==null?void 0:_.year,' yearbook for "',_==null?void 0:_.schoolName,'"?',s.jsx("br",{}),s.jsx("br",{}),"This will grant the school access to this year without requiring payment."]})]}),s.jsxs(uo,{children:[s.jsx(po,{onClick:Ae,"data-testid":"button-cancel-unlock",className:`text-white bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl
`,children:"No, Cancel"}),s.jsx(fo,{onClick:we,"data-testid":"button-confirm-unlock",children:"Yes, Continue"})]})]})}),s.jsx(Hl,{open:P,onOpenChange:L,children:s.jsxs(lo,{"data-testid":"dialog-password-verification",className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white",children:[s.jsxs(co,{className:"text-white",children:[s.jsx(ho,{children:"Enter Super Admin Password"}),s.jsx(mo,{className:"text-white",children:E?`Please enter your super admin password to ${E.action} "${E.schoolName}".`:"Please enter your super admin password to confirm this action."})]}),s.jsxs("div",{className:"py-4",children:[s.jsx(xe,{type:"password",placeholder:"Enter your password",value:Z,onChange:g=>ne(g.target.value),onKeyDown:g=>g.key==="Enter"&&me(),"data-testid":"input-admin-password",className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-gray-200"}),oe&&s.jsx("p",{className:"text-sm text-red-400 mt-2","data-testid":"text-password-error",children:oe})]}),s.jsxs(uo,{children:[s.jsx(po,{onClick:Ae,"data-testid":"button-cancel-password",className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:"Cancel"}),s.jsx(fo,{onClick:me,"data-testid":"button-submit-password",children:"Verify & Confirm"})]})]})})]})]})]})}function AM(){const[e,t]=d.useState(null),[r,n]=d.useState(!0),[,a]=us();d.useEffect(()=>{const o=localStorage.getItem("superAdminToken"),l=localStorage.getItem("user");if(o&&l)try{const c=JSON.parse(l);c.userType==="super_admin"||c.role==="super_admin"?fetch("/api/super-admin/analytics",{headers:{Authorization:`Bearer ${o}`}}).then(u=>{u.ok?t(c):(localStorage.removeItem("superAdminToken"),localStorage.removeItem("user"),a("/login"))}).catch(()=>{localStorage.removeItem("superAdminToken"),localStorage.removeItem("user"),a("/login")}).finally(()=>{n(!1)}):(a("/login"),n(!1))}catch{a("/login"),n(!1)}else a("/login"),n(!1)},[a]);const i=()=>{localStorage.removeItem("superAdminToken"),localStorage.removeItem("user"),a("/login")};return r?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):e?s.jsx(_6,{user:e,onLogout:i}):null}function ls(e){if(!e)return null;const t=localStorage.getItem("user")||"{}",r=JSON.parse(t);return r!=null&&r.id?e.includes("/api/secure-image/")?`${e}?userId=${r.id}`:e.includes("/uploads/memories/")?e:e.includes("/uploads/yearbooks/")?`/api/secure-image/yearbooks/${e.split("/").pop()}?userId=${r.id}`:e.includes("/uploads/accreditation/")?`/api/secure-image/accreditation/${e.split("/").pop()}?userId=${r.id}`:e:(console.warn("No user ID found for secure image access, returning original URL"),e)}function RM(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return d.useMemo(()=>n=>{t.forEach(a=>a(n))},t)}const Mm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sc(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Pg(e){return"nodeType"in e}function dr(e){var t,r;return e?sc(e)?e:Pg(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Eg(e){const{Document:t}=dr(e);return e instanceof t}function Ud(e){return sc(e)?!1:e instanceof dr(e).HTMLElement}function D6(e){return e instanceof dr(e).SVGElement}function rc(e){return e?sc(e)?e.document:Pg(e)?Eg(e)?e:Ud(e)||D6(e)?e.ownerDocument:document:document:document}const Nn=Mm?d.useLayoutEffect:d.useEffect;function _m(e){const t=d.useRef(e);return Nn(()=>{t.current=e}),d.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t.current==null?void 0:t.current(...n)},[])}function MM(){const e=d.useRef(null),t=d.useCallback((n,a)=>{e.current=setInterval(n,a)},[]),r=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function xd(e,t){t===void 0&&(t=[e]);const r=d.useRef(e);return Nn(()=>{r.current!==e&&(r.current=e)},t),r}function Vd(e,t){const r=d.useRef();return d.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function $h(e){const t=_m(e),r=d.useRef(null),n=d.useCallback(a=>{a!==r.current&&(t==null||t(a,r.current)),r.current=a},[]);return[r,n]}function zh(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let _f={};function Bd(e,t){return d.useMemo(()=>{if(t)return t;const r=_f[e]==null?0:_f[e]+1;return _f[e]=r,e+"-"+r},[e,t])}function I6(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const l=Object.entries(o);for(const[c,u]of l){const m=i[c];m!=null&&(i[c]=m+e*u)}return i},{...t})}}const fl=I6(1),gd=I6(-1);function _M(e){return"clientX"in e&&"clientY"in e}function Dm(e){if(!e)return!1;const{KeyboardEvent:t}=dr(e.target);return t&&e instanceof t}function DM(e){if(!e)return!1;const{TouchEvent:t}=dr(e.target);return t&&e instanceof t}function bd(e){if(DM(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return _M(e)?{x:e.clientX,y:e.clientY}:null}const gi=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[gi.Translate.toString(e),gi.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),kv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function IM(e){return e.matches(kv)?e:e.querySelector(kv)}const FM={display:"none"};function OM(e){let{id:t,value:r}=e;return Le.createElement("div",{id:t,style:FM},r)}function LM(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Le.createElement("div",{id:t,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function $M(){const[e,t]=d.useState("");return{announce:d.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const F6=d.createContext(null);function zM(e){const t=d.useContext(F6);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function UM(){const[e]=d.useState(()=>new Set),t=d.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[d.useCallback(n=>{let{type:a,event:i}=n;e.forEach(o=>{var l;return(l=o[a])==null?void 0:l.call(o,i)})},[e]),t]}const VM={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},BM={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function qM(e){let{announcements:t=BM,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=VM}=e;const{announce:i,announcement:o}=$M(),l=Bd("DndLiveRegion"),[c,u]=d.useState(!1);if(d.useEffect(()=>{u(!0)},[]),zM(d.useMemo(()=>({onDragStart(h){let{active:p}=h;i(t.onDragStart({active:p}))},onDragMove(h){let{active:p,over:y}=h;t.onDragMove&&i(t.onDragMove({active:p,over:y}))},onDragOver(h){let{active:p,over:y}=h;i(t.onDragOver({active:p,over:y}))},onDragEnd(h){let{active:p,over:y}=h;i(t.onDragEnd({active:p,over:y}))},onDragCancel(h){let{active:p,over:y}=h;i(t.onDragCancel({active:p,over:y}))}}),[i,t])),!c)return null;const m=Le.createElement(Le.Fragment,null,Le.createElement(OM,{id:n,value:a.draggable}),Le.createElement(LM,{id:l,announcement:o}));return r?Wr.createPortal(m,r):m}var ys;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ys||(ys={}));function Uh(){}function Sv(e,t){return d.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function HM(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return d.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const jn=Object.freeze({x:0,y:0});function O6(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function YM(e,t){const r=bd(e);if(!r)return"0 0";const n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}function L6(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function WM(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function Pv(e){let{left:t,top:r,height:n,width:a}=e;return[{x:t,y:r},{x:t+a,y:r},{x:t,y:r+n},{x:t+a,y:r+n}]}function $6(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function Ev(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const KM=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=Ev(t,t.left,t.top),i=[];for(const o of n){const{id:l}=o,c=r.get(l);if(c){const u=O6(Ev(c),a);i.push({id:l,data:{droppableContainer:o,value:u}})}}return i.sort(L6)},GM=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=Pv(t),i=[];for(const o of n){const{id:l}=o,c=r.get(l);if(c){const u=Pv(c),m=a.reduce((p,y,N)=>p+O6(u[N],y),0),h=Number((m/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:h}})}}return i.sort(L6)};function QM(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-n,l=i-r;if(n<a&&r<i){const c=t.width*t.height,u=e.width*e.height,m=o*l,h=m/(c+u-m);return Number(h.toFixed(4))}return 0}const ZM=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=[];for(const i of n){const{id:o}=i,l=r.get(o);if(l){const c=QM(l,t);c>0&&a.push({id:o,data:{droppableContainer:i,value:c}})}}return a.sort(WM)};function XM(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function z6(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:jn}function JM(e){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...r})}}const e_=JM(1);function U6(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function t_(e,t,r){const n=U6(t);if(!n)return e;const{scaleX:a,scaleY:i,x:o,y:l}=n,c=e.left-o-(1-a)*parseFloat(r),u=e.top-l-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),m=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:m,height:h,top:u,right:c+m,bottom:u+h,left:c}}const s_={ignoreTransform:!1};function nc(e,t){t===void 0&&(t=s_);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:m}=dr(e).getComputedStyle(e);u&&(r=t_(r,u,m))}const{top:n,left:a,width:i,height:o,bottom:l,right:c}=r;return{top:n,left:a,width:i,height:o,bottom:l,right:c}}function Tv(e){return nc(e,{ignoreTransform:!0})}function r_(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function n_(e,t){return t===void 0&&(t=dr(e).getComputedStyle(e)),t.position==="fixed"}function a_(e,t){t===void 0&&(t=dr(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?r.test(i):!1})}function Im(e,t){const r=[];function n(a){if(t!=null&&r.length>=t||!a)return r;if(Eg(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Ud(a)||D6(a)||r.includes(a))return r;const i=dr(e).getComputedStyle(a);return a!==e&&a_(a,i)&&r.push(a),n_(a,i)?r:n(a.parentNode)}return e?n(e):r}function V6(e){const[t]=Im(e,1);return t??null}function Df(e){return!Mm||!e?null:sc(e)?e:Pg(e)?Eg(e)||e===rc(e).scrollingElement?window:Ud(e)?e:null:null}function B6(e){return sc(e)?e.scrollX:e.scrollLeft}function q6(e){return sc(e)?e.scrollY:e.scrollTop}function j0(e){return{x:B6(e),y:q6(e)}}var Ts;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ts||(Ts={}));function H6(e){return!Mm||!e?!1:e===document.scrollingElement}function Y6(e){const t={x:0,y:0},r=H6(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=n.y,l=e.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:l,maxScroll:n,minScroll:t}}const i_={x:.2,y:.2};function o_(e,t,r,n,a){let{top:i,left:o,right:l,bottom:c}=r;n===void 0&&(n=10),a===void 0&&(a=i_);const{isTop:u,isBottom:m,isLeft:h,isRight:p}=Y6(e),y={x:0,y:0},N={x:0,y:0},f={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+f.height?(y.y=Ts.Backward,N.y=n*Math.abs((t.top+f.height-i)/f.height)):!m&&c>=t.bottom-f.height&&(y.y=Ts.Forward,N.y=n*Math.abs((t.bottom-f.height-c)/f.height)),!p&&l>=t.right-f.width?(y.x=Ts.Forward,N.x=n*Math.abs((t.right-f.width-l)/f.width)):!h&&o<=t.left+f.width&&(y.x=Ts.Backward,N.x=n*Math.abs((t.left+f.width-o)/f.width)),{direction:y,speed:N}}function l_(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}function W6(e){return e.reduce((t,r)=>fl(t,j0(r)),jn)}function c_(e){return e.reduce((t,r)=>t+B6(r),0)}function d_(e){return e.reduce((t,r)=>t+q6(r),0)}function K6(e,t){if(t===void 0&&(t=nc),!e)return;const{top:r,left:n,bottom:a,right:i}=t(e);V6(e)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const u_=[["x",["left","right"],c_],["y",["top","bottom"],d_]];class Tg{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Im(r),a=W6(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,l]of u_)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(n),m=a[i]-u;return this.rect[c]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class $c{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var a;(a=this.target)==null||a.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function h_(e){const{EventTarget:t}=dr(e);return e instanceof t?e:rc(e)}function If(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var Ur;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ur||(Ur={}));function Av(e){e.preventDefault()}function m_(e){e.stopPropagation()}var kt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(kt||(kt={}));const G6={start:[kt.Space,kt.Enter],cancel:[kt.Esc],end:[kt.Space,kt.Enter,kt.Tab]},f_=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case kt.Right:return{...r,x:r.x+25};case kt.Left:return{...r,x:r.x-25};case kt.Down:return{...r,y:r.y+25};case kt.Up:return{...r,y:r.y-25}}};class Ag{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new $c(rc(r)),this.windowListeners=new $c(dr(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ur.Resize,this.handleCancel),this.windowListeners.add(Ur.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ur.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&K6(n),r(jn)}handleKeyDown(t){if(Dm(t)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=G6,coordinateGetter:o=f_,scrollBehavior:l="smooth"}=a,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=n.current,m=u?{x:u.left,y:u.top}:jn;this.referenceCoordinates||(this.referenceCoordinates=m);const h=o(t,{active:r,context:n.current,currentCoordinates:m});if(h){const p=gd(h,m),y={x:0,y:0},{scrollableAncestors:N}=n.current;for(const f of N){const j=t.code,{isTop:b,isRight:x,isLeft:w,isBottom:C,maxScroll:S,minScroll:M}=Y6(f),A=l_(f),R={x:Math.min(j===kt.Right?A.right-A.width/2:A.right,Math.max(j===kt.Right?A.left:A.left+A.width/2,h.x)),y:Math.min(j===kt.Down?A.bottom-A.height/2:A.bottom,Math.max(j===kt.Down?A.top:A.top+A.height/2,h.y))},z=j===kt.Right&&!x||j===kt.Left&&!w,$=j===kt.Down&&!C||j===kt.Up&&!b;if(z&&R.x!==h.x){const W=f.scrollLeft+p.x,G=j===kt.Right&&W<=S.x||j===kt.Left&&W>=M.x;if(G&&!p.y){f.scrollTo({left:W,behavior:l});return}G?y.x=f.scrollLeft-W:y.x=j===kt.Right?f.scrollLeft-S.x:f.scrollLeft-M.x,y.x&&f.scrollBy({left:-y.x,behavior:l});break}else if($&&R.y!==h.y){const W=f.scrollTop+p.y,G=j===kt.Down&&W<=S.y||j===kt.Up&&W>=M.y;if(G&&!p.x){f.scrollTo({top:W,behavior:l});return}G?y.y=f.scrollTop-W:y.y=j===kt.Down?f.scrollTop-S.y:f.scrollTop-M.y,y.y&&f.scrollBy({top:-y.y,behavior:l});break}}this.handleMove(t,fl(gd(h,this.referenceCoordinates),y))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ag.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=G6,onActivation:a}=t,{active:i}=r;const{code:o}=e.nativeEvent;if(n.start.includes(o)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function Rv(e){return!!(e&&"distance"in e)}function Mv(e){return!!(e&&"delay"in e)}class Rg{constructor(t,r,n){var a;n===void 0&&(n=h_(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:o}=i;this.props=t,this.events=r,this.document=rc(o),this.documentListeners=new $c(this.document),this.listeners=new $c(n),this.windowListeners=new $c(dr(o)),this.initialCoordinates=(a=bd(i))!=null?a:jn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ur.Resize,this.handleCancel),this.windowListeners.add(Ur.DragStart,Av),this.windowListeners.add(Ur.VisibilityChange,this.handleCancel),this.windowListeners.add(Ur.ContextMenu,Av),this.documentListeners.add(Ur.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Mv(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Rv(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:a}=this.props;a(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ur.Click,m_,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ur.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!a)return;const c=(r=bd(t))!=null?r:jn,u=gd(a,c);if(!n&&l){if(Rv(l)){if(l.tolerance!=null&&If(u,l.tolerance))return this.handleCancel();if(If(u,l.distance))return this.handleStart()}if(Mv(l)&&If(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===kt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const p_={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Mg extends Rg{constructor(t){const{event:r}=t,n=rc(r.target);super(t,p_,n)}}Mg.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const x_={move:{name:"mousemove"},end:{name:"mouseup"}};var C0;(function(e){e[e.RightClick=2]="RightClick"})(C0||(C0={}));class g_ extends Rg{constructor(t){super(t,x_,rc(t.event.target))}}g_.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===C0.RightClick?!1:(n==null||n({event:r}),!0)}}];const Ff={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class b_ extends Rg{constructor(t){super(t,Ff)}static setup(){return window.addEventListener(Ff.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ff.move.name,t)};function t(){}}}b_.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var zc;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(zc||(zc={}));var Vh;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Vh||(Vh={}));function v_(e){let{acceleration:t,activator:r=zc.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:l=Vh.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:m,delta:h,threshold:p}=e;const y=y_({delta:h,disabled:!i}),[N,f]=MM(),j=d.useRef({x:0,y:0}),b=d.useRef({x:0,y:0}),x=d.useMemo(()=>{switch(r){case zc.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case zc.DraggableRect:return a}},[r,a,c]),w=d.useRef(null),C=d.useCallback(()=>{const M=w.current;if(!M)return;const A=j.current.x*b.current.x,R=j.current.y*b.current.y;M.scrollBy(A,R)},[]),S=d.useMemo(()=>l===Vh.TreeOrder?[...u].reverse():u,[l,u]);d.useEffect(()=>{if(!i||!u.length||!x){f();return}for(const M of S){if((n==null?void 0:n(M))===!1)continue;const A=u.indexOf(M),R=m[A];if(!R)continue;const{direction:z,speed:$}=o_(M,R,x,t,p);for(const W of["x","y"])y[W][z[W]]||($[W]=0,z[W]=0);if($.x>0||$.y>0){f(),w.current=M,N(C,o),j.current=$,b.current=z;return}}j.current={x:0,y:0},b.current={x:0,y:0},f()},[t,C,n,f,i,o,JSON.stringify(x),JSON.stringify(y),N,u,S,m,JSON.stringify(p)])}const w_={x:{[Ts.Backward]:!1,[Ts.Forward]:!1},y:{[Ts.Backward]:!1,[Ts.Forward]:!1}};function y_(e){let{delta:t,disabled:r}=e;const n=zh(t);return Vd(a=>{if(r||!n||!a)return w_;const i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Ts.Backward]:a.x[Ts.Backward]||i.x===-1,[Ts.Forward]:a.x[Ts.Forward]||i.x===1},y:{[Ts.Backward]:a.y[Ts.Backward]||i.y===-1,[Ts.Forward]:a.y[Ts.Forward]||i.y===1}}},[r,t,n])}function N_(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return Vd(a=>{var i;return t==null?null:(i=n??a)!=null?i:null},[n,t])}function j_(e,t){return d.useMemo(()=>e.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,n)}));return[...r,...i]},[]),[e,t])}var vd;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(vd||(vd={}));var k0;(function(e){e.Optimized="optimized"})(k0||(k0={}));const _v=new Map;function C_(e,t){let{dragging:r,dependencies:n,config:a}=t;const[i,o]=d.useState(null),{frequency:l,measure:c,strategy:u}=a,m=d.useRef(e),h=j(),p=xd(h),y=d.useCallback(function(b){b===void 0&&(b=[]),!p.current&&o(x=>x===null?b:x.concat(b.filter(w=>!x.includes(w))))},[p]),N=d.useRef(null),f=Vd(b=>{if(h&&!r)return _v;if(!b||b===_v||m.current!==e||i!=null){const x=new Map;for(let w of e){if(!w)continue;if(i&&i.length>0&&!i.includes(w.id)&&w.rect.current){x.set(w.id,w.rect.current);continue}const C=w.node.current,S=C?new Tg(c(C),C):null;w.rect.current=S,S&&x.set(w.id,S)}return x}return b},[e,i,r,h,c]);return d.useEffect(()=>{m.current=e},[e]),d.useEffect(()=>{h||y()},[r,h]),d.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),d.useEffect(()=>{h||typeof l!="number"||N.current!==null||(N.current=setTimeout(()=>{y(),N.current=null},l))},[l,h,y,...n]),{droppableRects:f,measureDroppableContainers:y,measuringScheduled:i!=null};function j(){switch(u){case vd.Always:return!1;case vd.BeforeDragging:return r;default:return!r}}}function _g(e,t){return Vd(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function k_(e,t){return _g(e,t)}function S_(e){let{callback:t,disabled:r}=e;const n=_m(t),a=d.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return d.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Fm(e){let{callback:t,disabled:r}=e;const n=_m(t),a=d.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return d.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function P_(e){return new Tg(nc(e),e)}function Dv(e,t,r){t===void 0&&(t=P_);const[n,a]=d.useState(null);function i(){a(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??r)!=null?u:null}const m=t(e);return JSON.stringify(c)===JSON.stringify(m)?c:m})}const o=S_({callback(c){if(e)for(const u of c){const{type:m,target:h}=u;if(m==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),l=Fm({callback:i});return Nn(()=>{i(),e?(l==null||l.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[e]),n}function E_(e){const t=_g(e);return z6(e,t)}const Iv=[];function T_(e){const t=d.useRef(e),r=Vd(n=>e?n&&n!==Iv&&e&&t.current&&e.parentNode===t.current.parentNode?n:Im(e):Iv,[e]);return d.useEffect(()=>{t.current=e},[e]),r}function A_(e){const[t,r]=d.useState(null),n=d.useRef(e),a=d.useCallback(i=>{const o=Df(i.target);o&&r(l=>l?(l.set(o,j0(o)),new Map(l)):null)},[]);return d.useEffect(()=>{const i=n.current;if(e!==i){o(i);const l=e.map(c=>{const u=Df(c);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,j0(u)]):null}).filter(c=>c!=null);r(l.length?new Map(l):null),n.current=e}return()=>{o(e),o(i)};function o(l){l.forEach(c=>{const u=Df(c);u==null||u.removeEventListener("scroll",a)})}},[a,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>fl(i,o),jn):W6(e):jn,[e,t])}function Fv(e,t){t===void 0&&(t=[]);const r=d.useRef(null);return d.useEffect(()=>{r.current=null},t),d.useEffect(()=>{const n=e!==jn;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?gd(e,r.current):jn}function R_(e){d.useEffect(()=>{if(!Mm)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function M_(e,t){return d.useMemo(()=>e.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=o=>{i(o,t)},r},{}),[e,t])}function Q6(e){return d.useMemo(()=>e?r_(e):null,[e])}const Ov=[];function __(e,t){t===void 0&&(t=nc);const[r]=e,n=Q6(r?dr(r):null),[a,i]=d.useState(Ov);function o(){i(()=>e.length?e.map(c=>H6(c)?n:new Tg(t(c),c)):Ov)}const l=Fm({callback:o});return Nn(()=>{l==null||l.disconnect(),o(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),a}function Z6(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ud(t)?t:e}function D_(e){let{measure:t}=e;const[r,n]=d.useState(null),a=d.useCallback(u=>{for(const{target:m}of u)if(Ud(m)){n(h=>{const p=t(m);return h?{...h,width:p.width,height:p.height}:p});break}},[t]),i=Fm({callback:a}),o=d.useCallback(u=>{const m=Z6(u);i==null||i.disconnect(),m&&(i==null||i.observe(m)),n(m?t(m):null)},[t,i]),[l,c]=$h(o);return d.useMemo(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}const I_=[{sensor:Mg,options:{}},{sensor:Ag,options:{}}],F_={current:{}},Hu={draggable:{measure:Tv},droppable:{measure:Tv,strategy:vd.WhileDragging,frequency:k0.Optimized},dragOverlay:{measure:nc}};class Uc extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const O_={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Uc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Uh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Hu,measureDroppableContainers:Uh,windowRect:null,measuringScheduled:!1},X6={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Uh,draggableNodes:new Map,over:null,measureDroppableContainers:Uh},qd=d.createContext(X6),J6=d.createContext(O_);function L_(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Uc}}}function $_(e,t){switch(t.type){case ys.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ys.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case ys.DragEnd:case ys.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ys.RegisterDroppable:{const{element:r}=t,{id:n}=r,a=new Uc(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case ys.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const o=new Uc(e.droppable.containers);return o.set(r,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case ys.UnregisterDroppable:{const{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;const i=new Uc(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function z_(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:a}=d.useContext(qd),i=zh(n),o=zh(r==null?void 0:r.id);return d.useEffect(()=>{if(!t&&!n&&i&&o!=null){if(!Dm(i)||document.activeElement===i.target)return;const l=a.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const m of[c.current,u.current]){if(!m)continue;const h=IM(m);if(h){h.focus();break}}})}},[n,t,a,o,i]),null}function e5(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...n}),r):r}function U_(e){return d.useMemo(()=>({draggable:{...Hu.draggable,...e==null?void 0:e.draggable},droppable:{...Hu.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Hu.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function V_(e){let{activeNode:t,measure:r,initialRect:n,config:a=!0}=e;const i=d.useRef(!1),{x:o,y:l}=typeof a=="boolean"?{x:a,y:a}:a;Nn(()=>{if(!o&&!l||!t){i.current=!1;return}if(i.current||!n)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const m=r(u),h=z6(m,n);if(o||(h.x=0),l||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=V6(u);p&&p.scrollBy({top:h.y,left:h.x})}},[t,o,l,n,r])}const Om=d.createContext({...jn,scaleX:1,scaleY:1});var Da;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Da||(Da={}));const B_=d.memo(function(t){var r,n,a,i;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:m=I_,collisionDetection:h=ZM,measuring:p,modifiers:y,...N}=t;const f=d.useReducer($_,void 0,L_),[j,b]=f,[x,w]=UM(),[C,S]=d.useState(Da.Uninitialized),M=C===Da.Initialized,{draggable:{active:A,nodes:R,translate:z},droppable:{containers:$}}=j,W=A!=null?R.get(A):null,G=d.useRef({initial:null,translated:null}),X=d.useMemo(()=>{var Ge;return A!=null?{id:A,data:(Ge=W==null?void 0:W.data)!=null?Ge:F_,rect:G}:null},[A,W]),P=d.useRef(null),[L,_]=d.useState(null),[V,E]=d.useState(null),Y=xd(N,Object.values(N)),Z=Bd("DndDescribedBy",o),ne=d.useMemo(()=>$.getEnabled(),[$]),oe=U_(p),{droppableRects:pe,measureDroppableContainers:he,measuringScheduled:B}=C_(ne,{dragging:M,dependencies:[z.x,z.y],config:oe.droppable}),K=N_(R,A),re=d.useMemo(()=>V?bd(V):null,[V]),ye=wt(),Q=k_(K,oe.draggable.measure);V_({activeNode:A!=null?R.get(A):null,config:ye.layoutShiftCompensation,initialRect:Q,measure:oe.draggable.measure});const te=Dv(K,oe.draggable.measure,Q),ve=Dv(K?K.parentElement:null),we=d.useRef({activatorEvent:null,active:null,activeNode:K,collisionRect:null,collisions:null,droppableRects:pe,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ne=$.getNodeFor((r=we.current.over)==null?void 0:r.id),ie=D_({measure:oe.dragOverlay.measure}),me=(n=ie.nodeRef.current)!=null?n:K,Ae=M?(a=ie.rect)!=null?a:te:null,at=!!(ie.nodeRef.current&&ie.rect),lt=E_(at?null:te),it=Q6(me?dr(me):null),F=T_(M?Ne??K:null),g=__(F),D=e5(y,{transform:{x:z.x-lt.x,y:z.y-lt.y,scaleX:1,scaleY:1},activatorEvent:V,active:X,activeNodeRect:te,containerNodeRect:ve,draggingNodeRect:Ae,over:we.current.over,overlayNodeRect:ie.rect,scrollableAncestors:F,scrollableAncestorRects:g,windowRect:it}),J=re?fl(re,z):null,ce=A_(F),le=Fv(ce),Re=Fv(ce,[te]),He=fl(D,le),Ye=Ae?e_(Ae,D):null,fe=X&&Ye?h({active:X,collisionRect:Ye,droppableRects:pe,droppableContainers:ne,pointerCoordinates:J}):null,Ue=$6(fe,"id"),[ot,Dt]=d.useState(null),Ft=at?D:fl(D,Re),zt=XM(Ft,(i=ot==null?void 0:ot.rect)!=null?i:null,te),At=d.useRef(null),Te=d.useCallback((Ge,ut)=>{let{sensor:Ie,options:Rt}=ut;if(P.current==null)return;const Ve=R.get(P.current);if(!Ve)return;const vt=Ge.nativeEvent,I=new Ie({active:P.current,activeNode:Ve,event:vt,options:Rt,context:we,onAbort(Me){if(!R.get(Me))return;const{onDragAbort:gt}=Y.current,ht={id:Me};gt==null||gt(ht),x({type:"onDragAbort",event:ht})},onPending(Me,Be,gt,ht){if(!R.get(Me))return;const{onDragPending:Nr}=Y.current,Gs={id:Me,constraint:Be,initialCoordinates:gt,offset:ht};Nr==null||Nr(Gs),x({type:"onDragPending",event:Gs})},onStart(Me){const Be=P.current;if(Be==null)return;const gt=R.get(Be);if(!gt)return;const{onDragStart:ht}=Y.current,Ds={activatorEvent:vt,active:{id:Be,data:gt.data,rect:G}};Wr.unstable_batchedUpdates(()=>{ht==null||ht(Ds),S(Da.Initializing),b({type:ys.DragStart,initialCoordinates:Me,active:Be}),x({type:"onDragStart",event:Ds}),_(At.current),E(vt)})},onMove(Me){b({type:ys.DragMove,coordinates:Me})},onEnd:Pe(ys.DragEnd),onCancel:Pe(ys.DragCancel)});At.current=I;function Pe(Me){return async function(){const{active:gt,collisions:ht,over:Ds,scrollAdjustedTranslate:Nr}=we.current;let Gs=null;if(gt&&Nr){const{cancelDrop:Fr}=Y.current;Gs={activatorEvent:vt,active:gt,collisions:ht,delta:Nr,over:Ds},Me===ys.DragEnd&&typeof Fr=="function"&&await Promise.resolve(Fr(Gs))&&(Me=ys.DragCancel)}P.current=null,Wr.unstable_batchedUpdates(()=>{b({type:Me}),S(Da.Uninitialized),Dt(null),_(null),E(null),At.current=null;const Fr=Me===ys.DragEnd?"onDragEnd":"onDragCancel";if(Gs){const Sn=Y.current[Fr];Sn==null||Sn(Gs),x({type:Fr,event:Gs})}})}}},[R]),Jt=d.useCallback((Ge,ut)=>(Ie,Rt)=>{const Ve=Ie.nativeEvent,vt=R.get(Rt);if(P.current!==null||!vt||Ve.dndKit||Ve.defaultPrevented)return;const I={active:vt};Ge(Ie,ut.options,I)===!0&&(Ve.dndKit={capturedBy:ut.sensor},P.current=Rt,Te(Ie,ut))},[R,Te]),de=j_(m,Jt);R_(m),Nn(()=>{te&&C===Da.Initializing&&S(Da.Initialized)},[te,C]),d.useEffect(()=>{const{onDragMove:Ge}=Y.current,{active:ut,activatorEvent:Ie,collisions:Rt,over:Ve}=we.current;if(!ut||!Ie)return;const vt={active:ut,activatorEvent:Ie,collisions:Rt,delta:{x:He.x,y:He.y},over:Ve};Wr.unstable_batchedUpdates(()=>{Ge==null||Ge(vt),x({type:"onDragMove",event:vt})})},[He.x,He.y]),d.useEffect(()=>{const{active:Ge,activatorEvent:ut,collisions:Ie,droppableContainers:Rt,scrollAdjustedTranslate:Ve}=we.current;if(!Ge||P.current==null||!ut||!Ve)return;const{onDragOver:vt}=Y.current,I=Rt.get(Ue),Pe=I&&I.rect.current?{id:I.id,rect:I.rect.current,data:I.data,disabled:I.disabled}:null,Me={active:Ge,activatorEvent:ut,collisions:Ie,delta:{x:Ve.x,y:Ve.y},over:Pe};Wr.unstable_batchedUpdates(()=>{Dt(Pe),vt==null||vt(Me),x({type:"onDragOver",event:Me})})},[Ue]),Nn(()=>{we.current={activatorEvent:V,active:X,activeNode:K,collisionRect:Ye,collisions:fe,droppableRects:pe,draggableNodes:R,draggingNode:me,draggingNodeRect:Ae,droppableContainers:$,over:ot,scrollableAncestors:F,scrollAdjustedTranslate:He},G.current={initial:Ae,translated:Ye}},[X,K,fe,Ye,R,me,Ae,pe,$,ot,F,He]),v_({...ye,delta:z,draggingRect:Ye,pointerCoordinates:J,scrollableAncestors:F,scrollableAncestorRects:g});const H=d.useMemo(()=>({active:X,activeNode:K,activeNodeRect:te,activatorEvent:V,collisions:fe,containerNodeRect:ve,dragOverlay:ie,draggableNodes:R,droppableContainers:$,droppableRects:pe,over:ot,measureDroppableContainers:he,scrollableAncestors:F,scrollableAncestorRects:g,measuringConfiguration:oe,measuringScheduled:B,windowRect:it}),[X,K,te,V,fe,ve,ie,R,$,pe,ot,he,F,g,oe,B,it]),Je=d.useMemo(()=>({activatorEvent:V,activators:de,active:X,activeNodeRect:te,ariaDescribedById:{draggable:Z},dispatch:b,draggableNodes:R,over:ot,measureDroppableContainers:he}),[V,de,X,te,b,Z,R,ot,he]);return Le.createElement(F6.Provider,{value:w},Le.createElement(qd.Provider,{value:Je},Le.createElement(J6.Provider,{value:H},Le.createElement(Om.Provider,{value:zt},u)),Le.createElement(z_,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Le.createElement(qM,{...l,hiddenTextDescribedById:Z}));function wt(){const Ge=(L==null?void 0:L.autoScrollEnabled)===!1,ut=typeof c=="object"?c.enabled===!1:c===!1,Ie=M&&!Ge&&!ut;return typeof c=="object"?{...c,enabled:Ie}:{enabled:Ie}}}),q_=d.createContext(null),Lv="button",H_="Draggable";function Y_(e){let{id:t,data:r,disabled:n=!1,attributes:a}=e;const i=Bd(H_),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:m,draggableNodes:h,over:p}=d.useContext(qd),{role:y=Lv,roleDescription:N="draggable",tabIndex:f=0}=a??{},j=(c==null?void 0:c.id)===t,b=d.useContext(j?Om:q_),[x,w]=$h(),[C,S]=$h(),M=M_(o,t),A=xd(r);Nn(()=>(h.set(t,{id:t,key:i,node:x,activatorNode:C,data:A}),()=>{const z=h.get(t);z&&z.key===i&&h.delete(t)}),[h,t]);const R=d.useMemo(()=>({role:y,tabIndex:f,"aria-disabled":n,"aria-pressed":j&&y===Lv?!0:void 0,"aria-roledescription":N,"aria-describedby":m.draggable}),[n,y,f,j,N,m.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:R,isDragging:j,listeners:n?void 0:M,node:x,over:p,setNodeRef:w,setActivatorNodeRef:S,transform:b}}function t5(){return d.useContext(J6)}const W_="Droppable",K_={timeout:25};function G_(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:a}=e;const i=Bd(W_),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=d.useContext(qd),m=d.useRef({disabled:r}),h=d.useRef(!1),p=d.useRef(null),y=d.useRef(null),{disabled:N,updateMeasurementsFor:f,timeout:j}={...K_,...a},b=xd(f??n),x=d.useCallback(()=>{if(!h.current){h.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),y.current=null},j)},[j]),w=Fm({callback:x,disabled:N||!o}),C=d.useCallback((R,z)=>{w&&(z&&(w.unobserve(z),h.current=!1),R&&w.observe(R))},[w]),[S,M]=$h(C),A=xd(t);return d.useEffect(()=>{!w||!S.current||(w.disconnect(),h.current=!1,w.observe(S.current))},[S,w]),d.useEffect(()=>(l({type:ys.RegisterDroppable,element:{id:n,key:i,disabled:r,node:S,rect:p,data:A}}),()=>l({type:ys.UnregisterDroppable,key:i,id:n})),[n]),d.useEffect(()=>{r!==m.current.disabled&&(l({type:ys.SetDroppableDisabled,id:n,key:i,disabled:r}),m.current.disabled=r)},[n,i,r,l]),{active:o,rect:p,isOver:(c==null?void 0:c.id)===n,node:S,over:c,setNodeRef:M}}function Q_(e){let{animation:t,children:r}=e;const[n,a]=d.useState(null),[i,o]=d.useState(null),l=zh(r);return!r&&!n&&l&&a(l),Nn(()=>{if(!i)return;const c=n==null?void 0:n.key,u=n==null?void 0:n.props.id;if(c==null||u==null){a(null);return}Promise.resolve(t(u,i)).then(()=>{a(null)})},[t,n,i]),Le.createElement(Le.Fragment,null,r,n?d.cloneElement(n,{ref:o}):null)}const Z_={x:0,y:0,scaleX:1,scaleY:1};function X_(e){let{children:t}=e;return Le.createElement(qd.Provider,{value:X6},Le.createElement(Om.Provider,{value:Z_},t))}const J_={position:"fixed",touchAction:"none"},eD=e=>Dm(e)?"transform 250ms ease":void 0,tD=d.forwardRef((e,t)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:o,rect:l,style:c,transform:u,transition:m=eD}=e;if(!l)return null;const h=a?u:{...u,scaleX:1,scaleY:1},p={...J_,width:l.width,height:l.height,top:l.top,left:l.left,transform:gi.Transform.toString(h),transformOrigin:a&&n?YM(n,l):void 0,transition:typeof m=="function"?m(n):m,...c};return Le.createElement(r,{className:o,style:p,ref:t},i)}),sD=e=>t=>{let{active:r,dragOverlay:n}=t;const a={},{styles:i,className:o}=e;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(a[l]=r.node.style.getPropertyValue(l),r.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&n.node.style.setProperty(l,c);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(a))r.node.style.setProperty(c,u);o!=null&&o.active&&r.node.classList.remove(o.active)}},rD=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:gi.Transform.toString(t)},{transform:gi.Transform.toString(r)}]},nD={duration:250,easing:"ease",keyframes:rD,sideEffects:sD({styles:{active:{opacity:"0"}}})};function aD(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=e;return _m((i,o)=>{if(t===null)return;const l=r.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=Z6(o);if(!u)return;const{transform:m}=dr(o).getComputedStyle(o),h=U6(m);if(!h)return;const p=typeof t=="function"?t:iD(t);return K6(c,a.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:a.draggable.measure(c)},draggableNodes:r,dragOverlay:{node:o,rect:a.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:a,transform:h})})}function iD(e){const{duration:t,easing:r,sideEffects:n,keyframes:a}={...nD,...e};return i=>{let{active:o,dragOverlay:l,transform:c,...u}=i;if(!t)return;const m={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},h={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-m.x,y:c.y-m.y,...h},y=a({...u,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[N]=y,f=y[y.length-1];if(JSON.stringify(N)===JSON.stringify(f))return;const j=n==null?void 0:n({active:o,dragOverlay:l,...u}),b=l.node.animate(y,{duration:t,easing:r,fill:"forwards"});return new Promise(x=>{b.onfinish=()=>{j==null||j(),x()}})}}let $v=0;function oD(e){return d.useMemo(()=>{if(e!=null)return $v++,$v},[e])}const lD=Le.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=e;const{activatorEvent:m,active:h,activeNodeRect:p,containerNodeRect:y,draggableNodes:N,droppableContainers:f,dragOverlay:j,over:b,measuringConfiguration:x,scrollableAncestors:w,scrollableAncestorRects:C,windowRect:S}=t5(),M=d.useContext(Om),A=oD(h==null?void 0:h.id),R=e5(o,{activatorEvent:m,active:h,activeNodeRect:p,containerNodeRect:y,draggingNodeRect:j.rect,over:b,overlayNodeRect:j.rect,scrollableAncestors:w,scrollableAncestorRects:C,transform:M,windowRect:S}),z=_g(p),$=aD({config:n,draggableNodes:N,droppableContainers:f,measuringConfiguration:x}),W=z?j.setRef:void 0;return Le.createElement(X_,null,Le.createElement(Q_,{animation:$},h&&A?Le.createElement(tD,{key:A,id:h.id,ref:W,as:l,activatorEvent:m,adjustScale:t,className:c,transition:i,rect:z,style:{zIndex:u,...a},transform:R},r):null))});function Dg(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function cD(e,t){return e.reduce((r,n,a)=>{const i=t.get(n);return i&&(r[a]=i),r},Array(e.length))}function bu(e){return e!==null&&e>=0}function dD(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function uD(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Ig=e=>{let{rects:t,activeIndex:r,overIndex:n,index:a}=e;const i=Dg(t,n,r),o=t[a],l=i[a];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},s5="Sortable",r5=Le.createContext({activeIndex:-1,containerId:s5,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ig,disabled:{draggable:!1,droppable:!1}});function hD(e){let{children:t,id:r,items:n,strategy:a=Ig,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:m}=t5(),h=Bd(s5,r),p=l.rect!==null,y=d.useMemo(()=>n.map(M=>typeof M=="object"&&"id"in M?M.id:M),[n]),N=o!=null,f=o?y.indexOf(o.id):-1,j=u?y.indexOf(u.id):-1,b=d.useRef(y),x=!dD(y,b.current),w=j!==-1&&f===-1||x,C=uD(i);Nn(()=>{x&&N&&m(y)},[x,y,N,m]),d.useEffect(()=>{b.current=y},[y]);const S=d.useMemo(()=>({activeIndex:f,containerId:h,disabled:C,disableTransforms:w,items:y,overIndex:j,useDragOverlay:p,sortedRects:cD(y,c),strategy:a}),[f,h,C.draggable,C.droppable,w,y,j,c,p,a]);return Le.createElement(r5.Provider,{value:S},t)}const mD=e=>{let{id:t,items:r,activeIndex:n,overIndex:a}=e;return Dg(r,n,a).indexOf(t)},fD=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:a,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=e;return!u||!n||l!==i&&a===o?!1:r?!0:o!==a&&t===c},pD={duration:200,easing:"ease"},n5="transform",xD=gi.Transition.toString({property:n5,duration:0,easing:"linear"}),gD={roleDescription:"sortable"};function bD(e){let{disabled:t,index:r,node:n,rect:a}=e;const[i,o]=d.useState(null),l=d.useRef(r);return Nn(()=>{if(!t&&r!==l.current&&n.current){const c=a.current;if(c){const u=nc(n.current,{ignoreTransform:!0}),m={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(m.x||m.y)&&o(m)}}r!==l.current&&(l.current=r)},[t,r,n,a]),d.useEffect(()=>{i&&o(null)},[i]),i}function vD(e){let{animateLayoutChanges:t=fD,attributes:r,disabled:n,data:a,getNewIndex:i=mD,id:o,strategy:l,resizeObserverConfig:c,transition:u=pD}=e;const{items:m,containerId:h,activeIndex:p,disabled:y,disableTransforms:N,sortedRects:f,overIndex:j,useDragOverlay:b,strategy:x}=d.useContext(r5),w=wD(n,y),C=m.indexOf(o),S=d.useMemo(()=>({sortable:{containerId:h,index:C,items:m},...a}),[h,a,C,m]),M=d.useMemo(()=>m.slice(m.indexOf(o)),[m,o]),{rect:A,node:R,isOver:z,setNodeRef:$}=G_({id:o,data:S,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...c}}),{active:W,activatorEvent:G,activeNodeRect:X,attributes:P,setNodeRef:L,listeners:_,isDragging:V,over:E,setActivatorNodeRef:Y,transform:Z}=Y_({id:o,data:S,attributes:{...gD,...r},disabled:w.draggable}),ne=RM($,L),oe=!!W,pe=oe&&!N&&bu(p)&&bu(j),he=!b&&V,B=he&&pe?Z:null,re=pe?B??(l??x)({rects:f,activeNodeRect:X,activeIndex:p,overIndex:j,index:C}):null,ye=bu(p)&&bu(j)?i({id:o,items:m,activeIndex:p,overIndex:j}):C,Q=W==null?void 0:W.id,te=d.useRef({activeId:Q,items:m,newIndex:ye,containerId:h}),ve=m!==te.current.items,we=t({active:W,containerId:h,isDragging:V,isSorting:oe,id:o,index:C,items:m,newIndex:te.current.newIndex,previousItems:te.current.items,previousContainerId:te.current.containerId,transition:u,wasDragging:te.current.activeId!=null}),Ne=bD({disabled:!we,index:C,node:R,rect:A});return d.useEffect(()=>{oe&&te.current.newIndex!==ye&&(te.current.newIndex=ye),h!==te.current.containerId&&(te.current.containerId=h),m!==te.current.items&&(te.current.items=m)},[oe,ye,h,m]),d.useEffect(()=>{if(Q===te.current.activeId)return;if(Q!=null&&te.current.activeId==null){te.current.activeId=Q;return}const me=setTimeout(()=>{te.current.activeId=Q},50);return()=>clearTimeout(me)},[Q]),{active:W,activeIndex:p,attributes:P,data:S,rect:A,index:C,newIndex:ye,items:m,isOver:z,isSorting:oe,isDragging:V,listeners:_,node:R,overIndex:j,over:E,setNodeRef:ne,setActivatorNodeRef:Y,setDroppableNodeRef:$,setDraggableNodeRef:L,transform:Ne??re,transition:ie()};function ie(){if(Ne||ve&&te.current.newIndex===C)return xD;if(!(he&&!Dm(G)||!u)&&(oe||we))return gi.Transition.toString({...u,property:n5})}}function wD(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}function Bh(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const yD=[kt.Down,kt.Right,kt.Up,kt.Left],ND=(e,t)=>{let{context:{active:r,collisionRect:n,droppableRects:a,droppableContainers:i,over:o,scrollableAncestors:l}}=t;if(yD.includes(e.code)){if(e.preventDefault(),!r||!n)return;const c=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const p=a.get(h.id);if(p)switch(e.code){case kt.Down:n.top<p.top&&c.push(h);break;case kt.Up:n.top>p.top&&c.push(h);break;case kt.Left:n.left>p.left&&c.push(h);break;case kt.Right:n.left<p.left&&c.push(h);break}});const u=GM({collisionRect:n,droppableRects:a,droppableContainers:c});let m=$6(u,"id");if(m===(o==null?void 0:o.id)&&u.length>1&&(m=u[1].id),m!=null){const h=i.get(r.id),p=i.get(m),y=p?a.get(p.id):null,N=p==null?void 0:p.node.current;if(N&&y&&h&&p){const j=Im(N).some((M,A)=>l[A]!==M),b=a5(h,p),x=jD(h,p),w=j||!b?{x:0,y:0}:{x:x?n.width-y.width:0,y:x?n.height-y.height:0},C={x:y.left,y:y.top};return w.x&&w.y?C:gd(C,w)}}}};function a5(e,t){return!Bh(e)||!Bh(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function jD(e,t){return!Bh(e)||!Bh(t)||!a5(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const CD=e=>{let{activatorEvent:t,draggingNodeRect:r,transform:n}=e;if(r&&t){const a=bd(t);if(!a)return n;const i=a.x-r.left,o=a.y-r.top;return{...n,x:n.x+i-r.width/2,y:n.y+o-r.height/2}}return n},kD=e=>{e("/school-dashboard?tab=years")};function SD(){var Gs,Fr,Sn,vo,Kn,tn,Pn,wo,ja,Or,sn,rn,Ci,yo,Ca,No,jo,Co,ko,So,ki,ee,O;const[,e]=Ad("/yearbook-manage/:year"),[,t]=us(),{toast:r}=ks(),[n,a]=d.useState(null),[i,o]=d.useState(null),[l,c]=d.useState(0),u=HM(Sv(Mg),Sv(Ag,{coordinateGetter:ND})),m=e==null?void 0:e.year,h=new URLSearchParams(window.location.search).get("school"),[p,y]=d.useState(null),[N,f]=d.useState(!1),[j,b]=d.useState(!1),[x,w]=d.useState("content"),[C,S]=d.useState([]),[M,A]=d.useState({isProcessingPDF:!1,currentFile:"",totalFiles:0,currentFileIndex:0}),[R,z]=d.useState({title:"",pageNumber:null,description:""}),[$,W]=d.useState(!1),[G,X]=d.useState(!1),[P,L]=d.useState([]),[_,V]=d.useState([]),[E,Y]=d.useState(!1),[Z,ne]=d.useState(!1),[oe,pe]=d.useState(null),[he,B]=d.useState({title:"",pageNumber:1,description:""}),[K,re]=d.useState(!1),[ye,Q]=d.useState(""),[te,ve]=d.useState(!1);d.useEffect(()=>{const k=localStorage.getItem("user");k?y(JSON.parse(k)):t("/"),W(window.history.length>1)},[t]);const we=()=>{kD(t)},{data:Ne}=Ze({queryKey:["/api/schools",h],enabled:!!h}),{data:ie=[]}=Ze({queryKey:["/api/notifications",p==null?void 0:p.id],enabled:!!p&&(p==null?void 0:p.userType)!=="viewer",refetchInterval:3e4}),me=ie.filter(k=>!k.isRead).length,Ae=nt({mutationFn:async k=>{await rt("PATCH",`/api/notifications/${k}/read`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",p==null?void 0:p.id]})}}),at=nt({mutationFn:async()=>{p!=null&&p.id&&await rt("DELETE",`/api/notifications/user/${p.id}/clear-all`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",p==null?void 0:p.id]}),r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"All notifications cleared",description:"Your notification history has been cleared."})}}),lt=k=>{Ae.mutate(k)},it=()=>{at.mutate()},F=k=>{if(!k)return"";const se=new Date().getTime()-new Date(k).getTime(),ae=Math.floor(se/1e3),Ee=Math.floor(ae/60),Fe=Math.floor(Ee/60),_e=Math.floor(Fe/24);return ae<60?"Just now":Ee<60?`${Ee} minute${Ee>1?"s":""} ago`:Fe<24?`${Fe} hour${Fe>1?"s":""} ago`:_e<7?`${_e} day${_e>1?"s":""} ago`:new Date(k).toLocaleDateString()},{data:g,isLoading:D,error:J}=Ze({queryKey:["/api/yearbooks",h,m],enabled:!!h&&!!m,queryFn:async()=>{const k=await fetch(`/api/yearbooks/${h}/${m}`);if(!k.ok)throw new Error("Yearbook not found. Please purchase this year first.");return k.json()},retry:!1,refetchOnWindowFocus:!1});d.useEffect(()=>{g!=null&&g.price&&Q(g.price)},[g==null?void 0:g.price]);const{data:ce=[]}=Ze({queryKey:["/api/yearbooks",g==null?void 0:g.id,"price-history"],enabled:!!(g!=null&&g.id),queryFn:async()=>{const k=await fetch(`/api/yearbooks/${g==null?void 0:g.id}/price-history`);return k.ok?k.json():[]}}),{data:le}=Ze({queryKey:["/api/yearbooks",g==null?void 0:g.id,"can-increase-price"],enabled:!!(g!=null&&g.id)&&K,queryFn:async()=>{const k=await fetch(`/api/yearbooks/${g==null?void 0:g.id}/can-increase-price`);return k.ok?k.json():{canIncrease:!0}}}),Re=nt({mutationFn:async({yearbookId:k,price:U})=>await rt("PATCH",`/api/yearbooks/${k}/price`,{price:U,userId:p==null?void 0:p.id}),onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/yearbooks",h,m]}),ke.invalidateQueries({queryKey:["/api/yearbooks",g==null?void 0:g.id,"price-history"]}),ke.invalidateQueries({queryKey:["/api/yearbooks",g==null?void 0:g.id,"can-increase-price"]}),re(!1),r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Price updated successfully",description:`Yearbook price is now $${ye}`})},onError:k=>{r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Failed to update price",description:k.message||"Please try again",variant:"destructive"})}}),He=nt({mutationFn:async({file:k,pageType:U,title:se,yearbookId:ae})=>{if(k.type==="application/pdf"&&A(_e=>({..._e,isProcessingPDF:!0,currentFile:k.name})),U==="front_cover"||U==="back_cover"){const _e=new FormData;_e.append("file",k),_e.append("pageType",U),_e.append("title",se);const mt=await fetch(`/api/yearbooks/${ae}/upload-page`,{method:"POST",body:_e});if(!mt.ok){const St=await mt.json().catch(()=>({}));throw k.type==="application/pdf"?new Error(St.message||"PDF processing failed. Please ensure the PDF is not password-protected and contains valid pages."):new Error(St.message||"Upload failed")}const Mt=await mt.json();return k.type==="application/pdf"&&A(St=>({...St,isProcessingPDF:!1})),Mt}if(g!=null&&g.isPublished){const _e=URL.createObjectURL(k);return V(mt=>{var Mt,St;return[...mt,{file:k,pageType:U,title:se,tempId:Date.now(),tempUrl:_e,pageNumber:U==="content"?(((St=(Mt=g==null?void 0:g.pages)==null?void 0:Mt.filter(Qs=>Qs.pageType==="content"))==null?void 0:St.length)||0)+mt.filter(Qs=>Qs.pageType==="content").length+1:0}]}),X(!0),Promise.resolve({tempId:Date.now()})}const Ee=new FormData;Ee.append("file",k),Ee.append("pageType",U),Ee.append("title",se);const Fe=await fetch(`/api/yearbooks/${ae}/upload-page`,{method:"POST",body:Ee});if(!Fe.ok){const _e=await Fe.json().catch(()=>({}));throw _e.error==="PDF_ALREADY_EXISTS"?new Error(_e.message||"A PDF has already been uploaded. Please delete existing pages first."):k.type==="application/pdf"?new Error(_e.message||"PDF processing failed. Please ensure the PDF is not password-protected and contains valid pages."):new Error(_e.message||"Upload failed")}return Fe.json()},onSuccess:(k,U)=>{var Ee;const se=U.pageType==="front_cover"||U.pageType==="back_cover";(se||!(g!=null&&g.isPublished))&&ke.invalidateQueries({queryKey:["/api/yearbooks",h,m]}),A({isProcessingPDF:!1,currentFile:"",totalFiles:0,currentFileIndex:0}),((Ee=U.file)==null?void 0:Ee.type)==="application/pdf"&&(k!=null&&k.pagesCreated)?r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"PDF uploaded successfully!",description:`Extracted ${k.pagesCreated} page${k.pagesCreated>1?"s":""} from ${U.file.name}`}):r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:`${se?"Cover":"Page"} uploaded successfully!`});const ae=document.getElementById("file-upload");ae&&(ae.value=""),f(!1),S([])},onError:k=>{A({isProcessingPDF:!1,currentFile:"",totalFiles:0,currentFileIndex:0});const U=(k==null?void 0:k.message)||"Upload failed";U.includes("already been uploaded")||U.includes("delete existing pages")?r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"PDF Already Uploaded",description:U,variant:"destructive"}):r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Upload failed",description:U.includes("PDF")?U:"Please try again.",variant:"destructive"})}}),Ye=nt({mutationFn:async k=>g!=null&&g.isPublished?(L(U=>[...U,{...k,tempId:Date.now()}]),X(!0),Promise.resolve({tempId:Date.now()})):rt("POST",`/api/yearbooks/${g==null?void 0:g.id}/table-of-contents`,{...k,yearbookId:g==null?void 0:g.id}),onSuccess:()=>{g!=null&&g.isPublished||ke.invalidateQueries({queryKey:["/api/yearbooks",h,m]}),r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Table of contents item added!"}),b(!1),z({title:"",pageNumber:null,description:""})}}),fe=nt({mutationFn:async({tocId:k,updates:U})=>rt("PATCH",`/api/yearbooks/table-of-contents/${k}`,U),onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/yearbooks",h,m]}),r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Table of contents item updated!"}),pe(null)},onError:()=>{r({title:"Update failed",description:"Please try again.",variant:"destructive"})}}),Ue=nt({mutationFn:async k=>rt("DELETE",`/api/yearbooks/table-of-contents/${k}`),onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/yearbooks",h,m]}),r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Table of contents item deleted!"})},onError:()=>{r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Delete failed",description:"Please try again.",variant:"destructive"})}}),ot=nt({mutationFn:async()=>rt("PATCH",`/api/yearbooks/${g==null?void 0:g.id}/publish`,{isPublished:!0}),onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/yearbooks",h,m]}),r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Yearbook published successfully!",description:"Viewers can now access this yearbook."})},onError:()=>{r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Publish failed",description:"Please ensure you have uploaded front and back covers.",variant:"destructive"})}}),Dt=nt({mutationFn:async k=>{const U=(g==null?void 0:g.pages)||[],se=U.find(ae=>ae.id===k);if(await rt("DELETE",`/api/yearbooks/pages/${k}`),se&&se.pageType==="content"){const Ee=U.filter(Fe=>Fe.pageType==="content").sort((Fe,_e)=>Fe.pageNumber-_e.pageNumber).filter(Fe=>Fe.pageNumber>se.pageNumber);for(const Fe of Ee)await rt("PATCH",`/api/yearbooks/pages/${Fe.id}/reorder`,{pageNumber:Fe.pageNumber-1})}return k},onSuccess:(k,U)=>{ke.invalidateQueries({queryKey:["/api/yearbooks",h,m]});const ae=((g==null?void 0:g.pages)||[]).find(Fe=>Fe.id===U),Ee=ae==null?void 0:ae.pageType;r(Ee==="front_cover"||Ee==="back_cover"?{className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:`${Ee==="front_cover"?"Front cover":"Back cover"} deleted successfully!`,description:"You can upload a new one when ready."}:{className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Page deleted and pages renumbered!"})},onError:()=>{r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Delete failed",description:"Please try again.",variant:"destructive"})}}),Ft=nt({mutationFn:async()=>{for(const k of _){const U=new FormData;if(U.append("file",k.file),U.append("pageType",k.pageType),U.append("title",k.title),!(await fetch(`/api/yearbooks/${g==null?void 0:g.id}/upload-page`,{method:"POST",body:U})).ok)throw new Error(`Upload failed for ${k.title}`)}for(const k of P)await rt("POST",`/api/yearbooks/${g==null?void 0:g.id}/table-of-contents`,{...k,yearbookId:g==null?void 0:g.id});return Promise.resolve()},onSuccess:()=>{V([]),L([]),X(!1),ke.invalidateQueries({queryKey:["/api/yearbooks",h,m]}),r({title:"All changes saved successfully!"})},onError:k=>{r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Save failed",description:"Some changes could not be saved. Please try again.",variant:"destructive"})}}),zt=nt({mutationFn:async({pageId:k,newPageNumber:U})=>rt("PATCH",`/api/yearbooks/pages/${k}/reorder`,{pageNumber:U}),onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/yearbooks",h,m]}),r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Page order updated successfully!"})},onError:()=>{r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Failed to reorder page",description:"Please try again.",variant:"destructive"})}}),At=nt({mutationFn:async({page1Id:k,page2Id:U,page1Number:se,page2Number:ae})=>{await Promise.all([rt("PATCH",`/api/yearbooks/pages/${k}/reorder`,{pageNumber:ae}),rt("PATCH",`/api/yearbooks/pages/${U}/reorder`,{pageNumber:se})])},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/yearbooks",h,m]}),r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Pages swapped successfully!"}),o(null),c(0)},onError:()=>{r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Failed to swap pages",description:"Please try again.",variant:"destructive"})}}),Te=k=>{const U=Array.from(k.target.files||[]);if(U.length>0){if(U.filter(mt=>{const Mt=mt.type.startsWith("image/"),St=mt.type==="application/pdf";return(g==null?void 0:g.uploadType)==="pdf"?x!=="content"?!0:!St:!Mt}).length>0){const mt=(g==null?void 0:g.uploadType)==="pdf"?"PDF files only":"images only";r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Invalid file type",description:`For ${x==="content"?"content pages":"covers"}, please upload ${mt}.`,variant:"destructive"}),k.target.value="";return}const ae=U.filter(mt=>mt.type==="application/pdf");if(ae.filter(mt=>mt.size>50*1024*1024).length>0){r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"PDF file too large",description:"PDF files must be under 50MB. Please compress or split larger PDFs.",variant:"destructive"}),k.target.value="";return}if(U.reduce((mt,Mt)=>mt+Mt.size,0)>100*1024*1024){r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Upload size limit exceeded",description:"Total upload size must be under 100MB. Please reduce file sizes or upload fewer files.",variant:"destructive"}),k.target.value="";return}if(x!=="content"&&U.length>1){r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Multiple files not allowed",description:"Only one file allowed for covers.",variant:"destructive"}),k.target.value="";return}const _e=U.filter(mt=>mt.type.startsWith("image/"));ae.length>0&&_e.length>0&&r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Mixed file types detected",description:"Consider uploading PDFs and images separately for better organization.",variant:"default"}),ae.length>1&&r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Multiple PDFs selected",description:`${ae.length} PDFs will be processed. Each PDF page will become a separate yearbook page.`,variant:"default"}),S(U)}},Jt=k=>{S(U=>U.filter((se,ae)=>ae!==k))},de=async()=>{var k,U,se,ae;if(!(C.length===0||!(g!=null&&g.id)))if(C.length===1){const Ee=x==="front_cover"?"Front Cover":x==="back_cover"?"Back Cover":`Page ${(((U=(k=g==null?void 0:g.pages)==null?void 0:k.filter(Fe=>Fe.pageType==="content"))==null?void 0:U.length)||0)+1}`;He.mutate({file:C[0],pageType:x,title:Ee,yearbookId:g.id})}else for(let Ee=0;Ee<C.length;Ee++){const Fe=C[Ee],mt=`Page ${(((ae=(se=g==null?void 0:g.pages)==null?void 0:se.filter(Mt=>Mt.pageType==="content"))==null?void 0:ae.length)||0)+Ee+1}`;try{await new Promise((Mt,St)=>{He.mutate({file:Fe,pageType:x,title:mt,yearbookId:g.id},{onSuccess:Mt,onError:St})})}catch{r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Upload failed",description:`Failed to upload ${Fe.name}`,variant:"destructive"});break}}},H=()=>{Ye.mutate(R)},[Je,wt]=d.useState(null),[Ge,ut]=d.useState(!1),Ie=k=>{a(k.active.id)},Rt=k=>{var Mt;const{active:U,over:se}=k;if(a(null),!se||U.id===se.id)return;const ae=((Mt=g==null?void 0:g.pages)==null?void 0:Mt.filter(St=>St.pageType==="content").sort((St,Qs)=>St.pageNumber-Qs.pageNumber))||[],Ee=ae.findIndex(St=>St.id===U.id),Fe=ae.findIndex(St=>St.id===se.id);if(Ee===-1||Fe===-1)return;const _e=Dg(ae,Ee,Fe),mt=[];_e.forEach((St,Qs)=>{const Po=Qs+1;St.pageNumber!==Po&&mt.push({pageId:St.id,newPageNumber:Po})}),mt.length>0&&(r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Reordering pages...",description:`Updating ${mt.length} page(s)`}),Promise.all(mt.map(St=>rt("PATCH",`/api/yearbooks/pages/${St.pageId}/reorder`,{pageNumber:St.newPageNumber}))).then(()=>{ke.invalidateQueries({queryKey:["/api/yearbooks",h,m]}),r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Pages reordered successfully!"})}).catch(()=>{r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Failed to reorder pages",description:"Please try again.",variant:"destructive"})}))},Ve=(k,U)=>{var Fe;const se=((Fe=g==null?void 0:g.pages)==null?void 0:Fe.filter(_e=>_e.pageType==="content").sort((_e,mt)=>_e.pageNumber-mt.pageNumber))||[],ae=se.find(_e=>_e.id===k),Ee=se.find(_e=>_e.pageNumber===U);if(!ae||!Ee||ae.id===Ee.id){r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Invalid page number",description:"Please enter a valid page number.",variant:"destructive"}),o(null),c(0);return}At.mutate({page1Id:ae.id,page2Id:Ee.id,page1Number:ae.pageNumber,page2Number:Ee.pageNumber})},vt=(k,U)=>{o(k),c(U)},I=()=>{o(null),c(0)},Pe=k=>{var Ee;const U=((Ee=g==null?void 0:g.pages)==null?void 0:Ee.filter(Fe=>Fe.pageType==="content").sort((Fe,_e)=>Fe.pageNumber-_e.pageNumber))||[],se=U.find(Fe=>Fe.id===k);if(!se)return;const ae=U.findIndex(Fe=>Fe.id===k);if(ae>0){const Fe=U[ae-1];At.mutate({page1Id:se.id,page2Id:Fe.id,page1Number:se.pageNumber,page2Number:Fe.pageNumber})}},Me=k=>{var Ee;const U=((Ee=g==null?void 0:g.pages)==null?void 0:Ee.filter(Fe=>Fe.pageType==="content").sort((Fe,_e)=>Fe.pageNumber-_e.pageNumber))||[],se=U.find(Fe=>Fe.id===k);if(!se)return;const ae=U.findIndex(Fe=>Fe.id===k);if(ae<U.length-1){const Fe=U[ae+1];At.mutate({page1Id:se.id,page2Id:Fe.id,page1Number:se.pageNumber,page2Number:Fe.pageNumber})}},Be=nt({mutationFn:async()=>{var U;const k=((U=g==null?void 0:g.pages)==null?void 0:U.filter(se=>se.pageType==="content").sort((se,ae)=>se.pageNumber-ae.pageNumber))||[];for(let se=0;se<k.length;se++){const ae=k[se],Ee=se+1;ae.pageNumber!==Ee&&await rt("PATCH",`/api/yearbooks/pages/${ae.id}/reorder`,{pageNumber:Ee})}},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/yearbooks",h,m]}),r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Page numbering updated successfully!"})},onError:()=>{r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Update failed",description:"Please try again.",variant:"destructive"})}}),gt=()=>{var se;const k=((se=g==null?void 0:g.pages)==null?void 0:se.filter(ae=>ae.pageType==="content").sort((ae,Ee)=>ae.pageNumber-Ee.pageNumber))||[];if(k.length===0){r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"No content pages to renumber",variant:"destructive"});return}if(!k.some((ae,Ee)=>ae.pageNumber!==Ee+1)){r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Page numbering is already correct"});return}Be.mutate()},ht=((Gs=g==null?void 0:g.pages)==null?void 0:Gs.some(k=>k.pageType==="front_cover"))&&((Fr=g==null?void 0:g.pages)==null?void 0:Fr.some(k=>k.pageType==="back_cover"))&&(g==null?void 0:g.price)&&parseFloat(g.price)>=1.99&&parseFloat(g.price)<=49.99;function Ds({page:k,index:U,onPreview:se,onDelete:ae,reorderPending:Ee,totalPages:Fe,isDragging:_e=!1,editingPageId:mt,tempPageNumber:Mt,onStartEditingPageNumber:St,onCancelEditingPageNumber:Qs,onManualPageChange:Po,onMoveLeft:q5,onMoveRight:H5}){const{attributes:Y5,listeners:W5,setNodeRef:K5,transform:G5,transition:Q5,isDragging:$g}=vD({id:k.id}),Z5={transform:gi.Transform.toString(G5),transition:Q5,opacity:$g?.5:1};return s.jsxs("div",{ref:K5,style:Z5,className:`border rounded-lg p-3 bg-white/10 backdrop-blur-lg border-white/20 transition-all duration-200 min-w-[160px] aspect-[3/4] flex flex-col hover:bg-white/15 hover:shadow-md ${$g?"shadow-2xl scale-105":""} ${_e?"ring-2 ring-blue-400":""}`,"data-testid":`page-item-${k.id}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"flex items-center gap-2",children:mt===k.id?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs text-white",children:"Page"}),s.jsx(xe,{type:"number",min:"1",max:Fe,value:Mt,onChange:jr=>{const X5=parseInt(jr.target.value)||k.pageNumber;St(k.id,X5)},onBlur:()=>{Mt!==k.pageNumber&&Mt>=1&&Mt<=Fe?Po(k.id,Mt):Qs()},onKeyDown:jr=>{jr.key==="Enter"?jr.currentTarget.blur():jr.key==="Escape"&&Qs()},className:"w-12 h-6 text-xs px-1 bg-white/20 border-white/30 text-white",autoFocus:!0,"data-testid":`input-page-number-${k.id}`})]}):s.jsxs("span",{className:"text-xs font-medium text-white cursor-pointer hover:text-blue-300 transition-colors",onClick:()=>St(k.id,k.pageNumber),title:"Click to edit page number","data-testid":`text-page-number-${k.id}`,children:["Page ",k.pageNumber]})}),s.jsx("div",{className:"cursor-grab hover:cursor-grabbing text-white/60 hover:text-white p-1 rounded",title:"Drag to reorder",...Y5,...W5,children:s.jsx(vb,{className:"h-3 w-3"})})]}),s.jsx("div",{className:"flex-1 w-full mb-2 overflow-hidden rounded",children:s.jsx("img",{src:ls(k.imageUrl)||"",alt:k.title??"",className:"w-full h-full object-cover pointer-events-none"})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(T,{size:"sm",variant:"ghost",onClick:jr=>{jr.stopPropagation(),q5(k.id)},className:"p-1 h-5 w-5 text-white hover:bg-white/20",title:"Move page left","data-testid":`button-move-left-${k.id}`,children:s.jsx(mn,{className:"h-2 w-2"})}),s.jsx(T,{size:"sm",variant:"ghost",onClick:jr=>{jr.stopPropagation(),H5(k.id)},className:"p-1 h-5 w-5 text-white hover:bg-white/20",title:"Move page right","data-testid":`button-move-right-${k.id}`,children:s.jsx(Fn,{className:"h-2 w-2"})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(T,{size:"sm",variant:"outline",onClick:jr=>{jr.stopPropagation(),se(k.id)},className:"p-1 h-5 w-5",title:"Preview page","data-testid":`button-preview-${k.id}`,children:s.jsx(zs,{className:"h-2 w-2"})}),s.jsx(T,{size:"sm",variant:"destructive",onClick:jr=>{jr.stopPropagation(),ae(k.id)},className:"p-1 h-5 w-5",title:"Delete page","data-testid":`button-delete-${k.id}`,children:s.jsx(As,{className:"h-2 w-2"})})]})]})]})}function Nr({page:k}){return s.jsxs("div",{className:"border rounded-lg p-3 bg-white/20 backdrop-blur-lg border-white/30 shadow-lg min-w-[160px] aspect-[3/4] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{className:"text-xs font-medium text-white",children:["Page ",k.pageNumber]})}),s.jsx(vb,{className:"h-3 w-3 text-white/60"})]}),s.jsx("div",{className:"flex-1 w-full mb-2 overflow-hidden rounded",children:s.jsx("img",{src:ls(k.imageUrl)||"",alt:k.title??"",className:"w-full h-full object-cover pointer-events-none opacity-90"})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"text-xs text-white/60",children:"Drag to reorder"}),s.jsxs("div",{className:"flex items-center gap-1 opacity-50",children:[s.jsx("div",{className:"p-1 h-5 w-5 bg-white/10 rounded"}),s.jsx("div",{className:"p-1 h-5 w-5 bg-white/10 rounded"})]})]})]})}return!p||p.userType!=="school"?s.jsx("div",{className:"p-4",children:"Access denied. School administrators only."}):D?s.jsx("div",{className:"p-4",children:"Loading yearbook..."}):J?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:s.jsxs(ge,{className:"max-w-md w-full bg-white/10 backdrop-blur-lg border border-white/20",children:[s.jsx(et,{children:s.jsxs(tt,{className:"text-xl text-white flex items-center gap-2",children:[s.jsx(id,{className:"h-6 w-6 text-yellow-400"}),"Yearbook Not Found"]})}),s.jsxs(be,{className:"space-y-4",children:[s.jsx("p",{className:"text-white/80",children:"This yearbook hasn't been purchased yet. Please purchase this year first to manage it."}),s.jsxs(T,{onClick:()=>t("/school-dashboard?tab=years"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white","data-testid":"button-back-to-dashboard",children:[s.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]})]})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-20 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-20 animate-float-delayed"})]})}),s.jsxs("div",{className:"relative z-10 min-h-screen bg-white/5 backdrop-blur-sm",children:[s.jsxs("header",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-2xl relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-2 left-10 w-8 h-8 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-3 right-20 w-6 h-6 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-2 left-20 w-5 h-5 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-1 right-10 w-4 h-4 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"mx-auto px-2 sm:px-4 lg:px-8 xl:px-12 2xl:px-16 relative z-10",children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center py-4 sm:py-0 sm:h-16 gap-4 sm:gap-0",children:[s.jsxs("div",{className:"flex items-center w-full sm:w-auto",children:[s.jsx("div",{className:"hidden sm:flex items-center",children:s.jsxs(T,{variant:"ghost",onClick:we,disabled:!$,className:"mr-2 text-white hover:bg-white/20","data-testid":"button-back",children:[s.jsx(_s,{className:"h-4 w-4 mr-2"}),"Back"]})}),s.jsx(T,{variant:"ghost",onClick:we,disabled:!$,className:"sm:hidden mr-2 text-white hover:bg-white/20",size:"sm","data-testid":"button-mobile-back",children:s.jsx(_s,{className:"h-4 w-4"})}),s.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:s.jsx(Gr,{className:"text-white text-sm"})}),s.jsxs("div",{className:"ml-3",children:[s.jsxs("h1",{className:"text-lg sm:text-xl font-semibold text-white",children:[s.jsx("span",{className:"hidden sm:inline",children:"Yearbook Manager - "}),s.jsx("span",{className:"sm:hidden",children:"Yearbook - "}),s.jsx("span",{className:"hidden sm:inline",children:Ne==null?void 0:Ne.name}),s.jsx("span",{className:"sm:hidden",children:(Sn=Ne==null?void 0:Ne.name)==null?void 0:Sn.split(" ")[0]}),s.jsx("span",{className:"ml-1",children:m})]}),s.jsxs("p",{className:"text-sm text-white/80",children:[g!=null&&g.isPublished?"Published":"Draft"," • ",((vo=g==null?void 0:g.pages)==null?void 0:vo.length)||0," pages",G&&s.jsx("span",{className:"ml-2 text-orange-300",children:"• Unsaved changes"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"relative",children:s.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>ne(!Z),className:"relative text-white hover:bg-white/20","data-testid":"button-notifications",children:[s.jsx(Yn,{className:"h-5 w-5"}),me>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:me})]})}),s.jsx("div",{className:"relative",children:s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>Y(!E),className:"text-white hover:bg-white/20 p-2 bg-white/10 rounded-lg border border-white/20","data-testid":"button-hamburger-menu",children:s.jsx(Jr,{className:"h-5 w-5"})})})]})]})})]}),Z&&s.jsxs("div",{className:"notification-dropdown fixed top-16 right-16 w-72 sm:w-80 max-w-[calc(100vw-2rem)] bg-blue-600/60 backdrop-blur-lg rounded-lg shadow-xl border border-white/20 z-[999999]",children:[s.jsx("div",{className:"p-4 border-b border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"}),s.jsxs("div",{className:"flex items-center gap-2",children:[ie.length>0&&s.jsx(T,{variant:"ghost",size:"sm",onClick:it,className:"text-white/80 hover:text-white text-xs","data-testid":"button-clear-all-notifications",children:"Clear All"}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>ne(!1),"data-testid":"button-close-notifications",children:s.jsx(Pt,{className:"h-4 w-4 text-white hover:text-red-500"})})]})]})}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:ie.length===0?s.jsx("div",{className:"p-4 text-center text-white/70",children:"No notifications yet"}):ie.map(k=>s.jsx("div",{className:`p-4 border-b border-white/20 hover:bg-white/10 cursor-pointer transition-colors ${k.isRead?"":"bg-blue-500/20"}`,onClick:()=>{k.isRead||lt(k.id)},"data-testid":`notification-${k.id}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${k.isRead?"bg-gray-300":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-white",children:k.title}),s.jsx("p",{className:"text-sm text-white/80 mt-1",children:k.message}),s.jsx("p",{className:"text-xs text-white/60 mt-2",children:F(k.createdAt)})]})]})},k.id))})]}),E&&s.jsx("div",{className:"hamburger-dropdown fixed top-16 right-4 w-48 bg-blue-600/60 backdrop-blur-lg border border-white/20 rounded-lg shadow-xl z-[999999]",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{Y(!1),t("/school-dashboard")},"data-testid":"menu-home",children:[s.jsx(Xr,{className:"h-4 w-4 mr-3"}),"Home"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{Y(!1),t("/school-settings")},"data-testid":"menu-settings",children:[s.jsx(Rs,{className:"h-4 w-4 mr-3"}),"Settings"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{Y(!1),t("/cart")},"data-testid":"menu-cart",children:[s.jsx(xs,{className:"h-4 w-4 mr-3"}),"Cart"]}),s.jsx("div",{className:"border-t border-gray-100"}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-red-500 hover:bg-red-500/40 transition-colors",onClick:()=>{Y(!1),localStorage.removeItem("user"),t("/")},"data-testid":"menu-logout",children:[s.jsx(Cn,{className:"h-4 w-4 mr-3"}),"Logout"]})]})}),s.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:flex-1 gap-4",children:[s.jsx("h3",{className:"font-semibold text-white lg:w-40 flex-shrink-0",children:"Publishing Checklist"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 lg:flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center ${(Kn=g==null?void 0:g.pages)!=null&&Kn.some(k=>k.pageType==="front_cover")?"bg-green-500":"bg-gray-300"}`,children:((tn=g==null?void 0:g.pages)==null?void 0:tn.some(k=>k.pageType==="front_cover"))&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),s.jsx("span",{className:`text-sm ${(Pn=g==null?void 0:g.pages)!=null&&Pn.some(k=>k.pageType==="front_cover")?"text-green-400":"text-white/60"}`,children:"Front cover"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center ${(wo=g==null?void 0:g.pages)!=null&&wo.some(k=>k.pageType==="back_cover")?"bg-green-500":"bg-gray-300"}`,children:((ja=g==null?void 0:g.pages)==null?void 0:ja.some(k=>k.pageType==="back_cover"))&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),s.jsx("span",{className:`text-sm ${(Or=g==null?void 0:g.pages)!=null&&Or.some(k=>k.pageType==="back_cover")?"text-green-400":"text-white/60"}`,children:"Back cover"})]}),s.jsx("div",{className:"text-xs text-white/60",children:ht?"✓ Ready to publish!":"Upload both covers to enable publishing."})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 lg:flex-shrink-0",children:[s.jsxs(T,{size:"sm",className:"bg-blue-500/40 backdrop-blur-lg border border-blue-500 shadow-2xl cursor-pointer transition-all hover:bg-blue-410 hover:scale-105 hover:border-blue-700",onClick:()=>{g!=null&&g.isPublished?Ft.mutate():ot.mutate()},disabled:g!=null&&g.isPublished?!G||Ft.isPending:!ht||ot.isPending,"data-testid":"button-publish-yearbook",children:[s.jsx(D4,{className:"h-4 w-4 mr-1"}),g!=null&&g.isPublished?G?"Save":"Saved":"Publish"]}),s.jsxs(T,{size:"sm",variant:"outline",className:"bg-white-500/40 backdrop-blur-lg border border-whhite shadow-2xl cursor-pointer transition-all hover:bg-white hover:scale-105 hover:border-black text-white hover:text-black",onClick:()=>{const k=`/preview/${m}?school=${h}`;window.open(k,"_blank")},disabled:!g||!g.pages||g.pages.length===0,"data-testid":"button-preview-yearbook",children:[s.jsx(zs,{className:"h-4 w-4 mr-1"}),"Preview"]}),s.jsxs(T,{size:"sm",variant:"outline",className:"bg-white-500/40 backdrop-blur-lg border border-whhite shadow-2xl cursor-pointer transition-all hover:bg-white hover:scale-105 hover:border-black text-white hover:text-black",onClick:gt,disabled:!((sn=g==null?void 0:g.pages)!=null&&sn.some(k=>k.pageType==="content"))||Be.isPending,"data-testid":"button-update-page-numbering",children:[s.jsx(G7,{className:"h-4 w-4 mr-1"}),Be.isPending?"Updating...":"Update Pages"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm border-l border-white/20 pl-4 lg:flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-white/80",children:"Pages:"}),s.jsx("span",{className:"text-white font-medium",children:((rn=g==null?void 0:g.pages)==null?void 0:rn.length)||0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-white/80",children:"TOC:"}),s.jsx("span",{className:"text-white font-medium",children:((Ci=g==null?void 0:g.tableOfContents)==null?void 0:Ci.length)||0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-white/80",children:"Status:"}),s.jsx("span",{className:g!=null&&g.isPublished?"text-green-400 font-medium":"text-orange-400 font-medium",children:g!=null&&g.isPublished?"Published":"Draft"})]})]})]})}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[s.jsxs("div",{className:"w-full lg:w-56 flex-shrink-0 space-y-6",children:[s.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl rounded-lg p-4 lg:p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[s.jsx(Nc,{className:"h-4 w-4"}),"Pricing"]})}),s.jsx("div",{className:"space-y-3",children:K?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(ue,{htmlFor:"price-input",className:"text-white/80 text-xs",children:"Price (USD)"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/60",children:"$"}),s.jsx(xe,{id:"price-input",type:"number",step:"0.01",min:"1.99",max:"49.99",value:ye,onChange:k=>Q(k.target.value),className:"pl-7 bg-white/10 border-white/30 text-white","data-testid":"input-yearbook-price"})]}),s.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Range: $1.99 - $49.99"})]}),le&&!le.canIncrease&&s.jsx("div",{className:"bg-orange-500/20 border border-orange-500/30 rounded p-2",children:s.jsxs("p",{className:"text-xs text-orange-200 flex items-start gap-1",children:[s.jsx(id,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:le.message})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(T,{size:"sm",onClick:()=>{const k=parseFloat(ye);if(isNaN(k)||k<1.99||k>49.99){r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Invalid price",description:"Price must be between $1.99 and $49.99",variant:"destructive"});return}const U=g!=null&&g.price?parseFloat(g.price):0;if(k>U&&le&&!le.canIncrease){r({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Price increase not allowed",description:le.message,variant:"destructive"});return}ve(!0)},disabled:Re.isPending,className:"flex-1","data-testid":"button-save-price",children:[s.jsx(js,{className:"h-3 w-3 mr-1"}),"Save"]}),s.jsxs(T,{size:"sm",variant:"outline",onClick:()=>{Q((g==null?void 0:g.price)||""),re(!1)},className:"flex-1",children:[s.jsx(Pt,{className:"h-3 w-3 mr-1"}),"Cancel"]})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-baseline justify-between mb-3",children:[s.jsx("span",{className:"text-2xl font-bold text-white",children:g!=null&&g.price?`$${g.price}`:"Not Set"}),s.jsx(T,{size:"sm",variant:"ghost",onClick:()=>re(!0),className:"h-7 px-2 text-white/80 hover:text-white","data-testid":"button-edit-price",children:s.jsx(zr,{className:"h-3 w-3"})})]}),ce&&ce.length>0&&s.jsxs("div",{className:"border-t border-white/20 pt-3",children:[s.jsx("p",{className:"text-xs text-white/60 mb-2",children:"Price History"}),s.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:ce.slice(0,3).map((k,U)=>s.jsxs("div",{className:"text-xs text-white/70",children:[s.jsx("div",{className:"flex justify-between",children:s.jsxs("span",{children:["$",k.oldPrice," → $",k.newPrice]})}),s.jsx("div",{className:"text-white/50",children:new Date(k.changedAt).toLocaleDateString()})]},U))})]})]})})]}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl rounded-lg p-4 lg:p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-semibold text-white",children:"Table of Contents"}),s.jsx(T,{className:"bg-blue-500/40 backdrop-blur-lg border border-blue-500 shadow-2xl cursor-pointer transition-all hover:bg-blue-410 hover:scale-105 hover:border-blue-700 hover",size:"sm",onClick:()=>b(!0),"data-testid":"button-add-toc-item",children:s.jsx(nl,{className:"h-4 w-4 text-white"})})]}),s.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[(yo=g==null?void 0:g.tableOfContents)==null?void 0:yo.map(k=>s.jsx("div",{className:"p-3 border rounded-lg",children:oe===k.id?s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{value:he.title,onChange:U=>B({...he,title:U.target.value}),placeholder:"Title",className:"text-sm"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(xe,{type:"number",min:"1",value:he.pageNumber,onChange:U=>B({...he,pageNumber:parseInt(U.target.value)||1}),className:"text-xs w-20"}),s.jsx(xe,{value:he.description,onChange:U=>B({...he,description:U.target.value}),placeholder:"Description (optional)",className:"text-xs flex-1"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(T,{size:"sm",onClick:()=>{fe.mutate({tocId:k.id,updates:he})},disabled:!he.title||fe.isPending,children:"Save"}),s.jsx(T,{size:"sm",variant:"outline",onClick:()=>{pe(null),B({title:"",pageNumber:1,description:""})},children:"Cancel"})]})]}):s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-sm text-white",children:k.title}),s.jsxs("p",{className:"text-xs text-blue-50",children:["Content Page ",k.pageNumber]}),k.description&&s.jsx("p",{className:"text-xs text-blue-50 mt-1",children:k.description})]}),s.jsxs("div",{className:"flex gap-1 ml-2",children:[s.jsx(T,{size:"sm",variant:"outline",onClick:()=>{pe(k.id),B({title:k.title,pageNumber:k.pageNumber,description:k.description||""})},className:"p-1 h-6 w-6",title:"Edit item",children:s.jsx(zr,{className:"h-3 w-3"})}),s.jsx(T,{size:"sm",variant:"destructive",onClick:()=>Ue.mutate(k.id),disabled:Ue.isPending,className:"p-1 h-6 w-6",title:"Delete item",children:s.jsx(As,{className:"h-3 w-3"})})]})]})},k.id)),P.map(k=>s.jsx("div",{className:"p-3 border-2 border-orange-300 rounded-lg bg-orange-50",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-sm",children:k.title}),s.jsxs("p",{className:"text-xs text-orange-600",children:["Content Page ",k.pageNumber," (Pending)"]}),k.description&&s.jsx("p",{className:"text-xs text-orange-500 mt-1",children:k.description})]}),s.jsx(T,{size:"sm",variant:"destructive",onClick:()=>{L(U=>U.filter(se=>se.tempId!==k.tempId)),P.length===1&&_.length===0&&X(!1)},className:"p-1 h-6 w-6 ml-2",title:"Remove pending item",children:s.jsx(As,{className:"h-3 w-3"})})]})},k.tempId)),(!(g!=null&&g.tableOfContents)||g.tableOfContents.length===0)&&P.length===0&&s.jsx("p",{className:"text-white/60 text-sm text-center py-4",children:"No items added yet"})]})]})]}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl rounded-lg",children:[s.jsx("div",{className:"p-6 border-b border-white/20",children:s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Yearbook Pages"})})}),(g==null?void 0:g.uploadType)!=="pdf"&&s.jsx("div",{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[s.jsxs("div",{className:"border-2 border-dashed border-white/30 rounded-lg p-6 text-center",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx(sl,{className:"h-8 w-8 text-white/60 mx-auto mb-2"}),s.jsx("h3",{className:"font-medium text-white",children:"Front Cover"}),s.jsx("p",{className:"text-sm text-white/80",children:"Required"})]}),(Ca=g==null?void 0:g.pages)!=null&&Ca.find(k=>k.pageType==="front_cover")?s.jsxs("div",{children:[s.jsx("img",{src:ls((No=g.pages.find(k=>k.pageType==="front_cover"))==null?void 0:No.imageUrl)||"",alt:"Front Cover",className:"w-full h-32 object-cover rounded mb-3 pointer-events-none"}),s.jsx("div",{className:"flex justify-center",children:s.jsx(T,{className:"text-red-500 bg-white-700 backdrop-blur-lg border border-red-500 shadow-2xl cursor-pointer transition-all hover:bg-red-410 hover:scale-105",size:"sm",variant:"destructive",onClick:()=>{const k=g.pages.find(U=>U.pageType==="front_cover");k&&Dt.mutate(k.id)},"data-testid":"button-delete-front-cover",children:s.jsx(As,{className:"h-3 w-3 mr-1"})})})]}):s.jsxs(T,{className:"text-blue-50 bg-blue-500/40 backdrop-blur-lg border border-blue-500 shadow-2xl cursor-pointer transition-all hover:bg-blue-410 hover:scale-105 hover:border-blue-700 hover:scale-105 transition-all duration-200",onClick:()=>{w("front_cover"),f(!0)},"data-testid":"button-upload-front-cover",children:[s.jsx(is,{className:"h-4 w-4 mr-2 text-blue-50"}),"Upload Front Cover"]})]}),s.jsxs("div",{className:"border-2 border-dashed border-white/30 rounded-lg p-6 text-center",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx(sl,{className:"h-8 w-8 text-white/60 mx-auto mb-2"}),s.jsx("h3",{className:"font-medium text-white",children:"Back Cover"}),s.jsx("p",{className:"text-sm text-white/80",children:"Required"})]}),(jo=g==null?void 0:g.pages)!=null&&jo.find(k=>k.pageType==="back_cover")?s.jsxs("div",{children:[s.jsx("img",{src:ls((Co=g.pages.find(k=>k.pageType==="back_cover"))==null?void 0:Co.imageUrl)||"",alt:"Back Cover",className:"w-full h-32 object-cover rounded mb-3"}),s.jsx("div",{className:"flex justify-center",children:s.jsxs(T,{className:"text-red-500 bg-white-700 backdrop-blur-lg border border-red-500 shadow-2xl cursor-pointer transition-all hover:bg-red-410 hover:scale-105",size:"sm",variant:"destructive",onClick:()=>{const k=g.pages.find(U=>U.pageType==="back_cover");k&&Dt.mutate(k.id)},"data-testid":"button-delete-back-cover",children:[" ",s.jsx(As,{className:"h-3 w-3 mr-1 text-center"})]})})]}):s.jsxs(T,{className:"text-blue-50 bg-blue-500/40 backdrop-blur-lg border border-blue-500 shadow-2xl cursor-pointer transition-all hover:bg-blue-410 hover:scale-105 hover:border-blue-700 hover:scale-105 transition-all duration-200",onClick:()=>{w("back_cover"),f(!0)},"data-testid":"button-upload-back-cover",children:[s.jsx(is,{className:"h-4 w-4 mr-2"}),"Upload Back Cover"]})]})]})}),s.jsxs("div",{className:"p-4 sm:p-6",children:[s.jsx("h3",{className:"font-medium text-white mb-4",children:"Content Pages"}),(g==null?void 0:g.uploadType)!=="pdf"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded-lg p-3 mb-4",children:[s.jsx("p",{className:"text-sm text-blue-200 mb-1 font-medium",children:"Page Organization"}),s.jsx("p",{className:"text-xs text-blue-300",children:"Drag and drop pages to reorder them, or click preview to view a page and delete to remove it."})]}),s.jsxs(B_,{sensors:u,collisionDetection:KM,onDragStart:Ie,onDragEnd:Rt,children:[s.jsx(hD,{items:(((ko=g==null?void 0:g.pages)==null?void 0:ko.filter(k=>k.pageType==="content").sort((k,U)=>k.pageNumber-U.pageNumber))||[]).map(k=>k.id),strategy:Ig,children:s.jsxs("div",{className:"grid gap-4 p-4 justify-items-center",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 200px)",gap:"16px",justifyContent:"start"},"data-testid":"pages-grid",children:[(So=g==null?void 0:g.pages)==null?void 0:So.filter(k=>k.pageType==="content").sort((k,U)=>k.pageNumber-U.pageNumber).map((k,U)=>{var se;return s.jsx(Ds,{page:k,index:U,onPreview:ae=>{wt(ae),ut(!0)},onDelete:ae=>Dt.mutate(ae),reorderPending:zt.isPending,totalPages:((se=g==null?void 0:g.pages)==null?void 0:se.filter(ae=>ae.pageType==="content").length)||0,isDragging:n===k.id,editingPageId:i,tempPageNumber:l,onStartEditingPageNumber:vt,onCancelEditingPageNumber:I,onManualPageChange:Ve,onMoveLeft:Pe,onMoveRight:Me},k.id)}),_.filter(k=>k.pageType==="content").map(k=>s.jsxs("div",{className:"border-2 border-orange-300 rounded-lg p-4 bg-orange-50",children:[s.jsx("img",{src:k.tempUrl||"",alt:k.title||"",className:"w-full h-32 object-cover rounded mb-2"}),s.jsx("p",{className:"text-sm font-medium truncate",children:k.title}),s.jsxs("p",{className:"text-xs text-orange-600",children:["Page ",k.pageNumber," (Pending)"]}),s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsx("span",{className:"text-xs text-orange-600 font-medium",children:"Unsaved"}),s.jsx(T,{size:"sm",variant:"destructive",onClick:()=>{V(U=>U.filter(se=>se.tempId!==k.tempId)),URL.revokeObjectURL(k.tempUrl),_.length===1&&X(!1)},children:s.jsx(As,{className:"h-3 w-3"})})]})]},k.tempId)),s.jsx("div",{className:"border-2 border-dashed border-white/30 rounded-lg p-4 flex items-center justify-center w-[200px] aspect-[3/4]",children:s.jsxs(T,{variant:"ghost",onClick:()=>{w("content"),f(!0)},className:"flex flex-col items-center h-full w-full hover:bg-white/10 transition-all duration-200","data-testid":"button-add-page",children:[s.jsx(nl,{className:"h-8 w-8 text-white/60 mb-2"}),s.jsx("span",{className:"text-sm text-white/80",children:"Add Page"})]})})]})}),s.jsx(lD,{dropAnimation:null,modifiers:[CD],children:n?s.jsx(Nr,{page:(ki=g==null?void 0:g.pages)==null?void 0:ki.find(k=>k.id===n)}):null})]})]}),(g==null?void 0:g.uploadType)==="pdf"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded-lg p-3 mb-4",children:[s.jsx("p",{className:"text-sm text-blue-200 mb-1 font-medium",children:"PDF Upload Mode"}),s.jsx("p",{className:"text-xs text-blue-300",children:"Upload your complete yearbook as a single PDF file. All pages will be automatically extracted and cannot be reordered."})]}),s.jsxs("div",{className:"border-2 border-dashed border-white/30 rounded-lg p-8 text-center",children:[s.jsx(sl,{className:"h-12 w-12 text-white/60 mx-auto mb-4"}),s.jsx("h4",{className:"font-medium text-white mb-2",children:"Upload Complete Yearbook PDF"}),s.jsx("p",{className:"text-sm text-white/60 mb-4",children:"Select a PDF file containing all yearbook pages (including covers)"}),s.jsxs(T,{className:"text-blue-50 bg-blue-500/40 backdrop-blur-lg border border-blue-500 shadow-2xl cursor-pointer transition-all hover:bg-blue-410 hover:scale-105",onClick:()=>{w("content"),f(!0)},"data-testid":"button-upload-pdf",children:[s.jsx(is,{className:"h-4 w-4 mr-2"}),"Upload PDF File"]})]}),(g==null?void 0:g.pages)&&g.pages.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsxs("h4",{className:"font-medium text-white mb-4",children:["Extracted Pages (",g.pages.length,")"]}),s.jsx("div",{className:"grid gap-4 p-4",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 200px)",gap:"16px",justifyContent:"start"},children:g.pages.sort((k,U)=>k.pageNumber-U.pageNumber).map((k,U)=>s.jsxs("div",{className:"border-2 border-white/20 rounded-lg p-2 bg-white/5",children:[s.jsx("img",{src:ls(k.imageUrl)||"",alt:`Page ${k.pageNumber}`,className:"w-full h-auto object-cover rounded mb-2"}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-xs text-white/80",children:["Page ",k.pageNumber]})})]},k.id))})]})]})]})]})})]})]})]}),s.jsx(sr,{open:N,onOpenChange:k=>{if(f(k),!k){const U=document.getElementById("file-upload");U&&(U.value=""),S([])}},children:s.jsxs(Hs,{className:`bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl
`,children:[s.jsx(Os,{children:s.jsxs(Ls,{className:"text-white",children:["Upload ",x==="front_cover"?"Front Cover":x==="back_cover"?"Back Cover":"Content Page"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs(ue,{htmlFor:"file-upload",className:"text-blue-50",children:["Select ",x==="content"?"Image or PDF File":"Image File",x==="content"?"s (multiple allowed)":""]}),s.jsx(xe,{className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",id:"file-upload",type:"file",accept:x==="content"?"image/*,.pdf":"image/*",multiple:x==="content",onChange:Te}),s.jsx("p",{className:"text-xs text-white/50 mt-1",children:x==="content"?"You can select multiple images or PDFs for content pages. They will be uploaded in sequence.":"Please upload portrait orientation images only. Recommended resolution: 1200x1600px"})]}),C.length>0&&s.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:C.map((k,U)=>s.jsxs("div",{className:`p-3 rounded flex justify-between items-center bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl
`,children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-50",children:k.name}),s.jsxs("p",{className:"text-xs text-blue-50",children:[(k.size/1024/1024).toFixed(2)," MB"]})]}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>Jt(U),className:"text-red-500 hover:text-red-700",children:"Remove"})]},U))}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(T,{className:`bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl
 text-red-500`,variant:"outline",onClick:()=>f(!1),children:"Cancel"}),s.jsx(T,{onClick:de,disabled:C.length===0||He.isPending,"data-testid":"button-upload-files",children:He.isPending?M.isProcessingPDF?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Processing PDF..."})]}):"Uploading...":`Upload ${C.length>1?`${C.length} Files`:"File"}`})]})]})]})}),s.jsx(sr,{open:j,onOpenChange:b,children:s.jsxs(Hs,{className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:[s.jsx(Os,{children:s.jsx(Ls,{children:"Add Table of Contents Item"})}),s.jsxs("div",{className:"space-y-4 ",children:[s.jsxs("div",{children:[s.jsx(ue,{htmlFor:"toc-title",children:"Title"}),s.jsx(xe,{id:"toc-title",value:R.title,onChange:k=>z({...R,title:k.target.value}),placeholder:"",className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20"})]}),s.jsxs("div",{children:[s.jsx(ue,{htmlFor:"toc-page",children:"Content Page Number"}),s.jsx(xe,{id:"toc-page",type:"number",min:"1",max:((O=(ee=g==null?void 0:g.pages)==null?void 0:ee.filter(k=>k.pageType==="content"))==null?void 0:O.length)||1,value:R.pageNumber||"",onChange:k=>{const U=k.target.value;z({...R,pageNumber:U===""?null:parseInt(U)||null})},placeholder:"",className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20"}),!R.pageNumber&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Content page number is required"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Page numbers refer to content pages only (covers are not counted)"})]}),s.jsxs("div",{children:[s.jsx(ue,{htmlFor:"toc-description",children:"Description (Optional)"}),s.jsx(xe,{id:"toc-description",value:R.description,onChange:k=>z({...R,description:k.target.value}),placeholder:"",className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(T,{className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",variant:"outline",onClick:()=>b(!1),children:"Cancel"}),s.jsx(T,{className:"bg-blue-500/40 backdrop-blur-lg border border-blue-500 shadow-2xl cursor-pointer transition-all hover:bg-blue-410 hover:scale-105 hover:border-blue-7",onClick:H,disabled:!R.title||!R.pageNumber||Ye.isPending,children:"Add Item"})]})]})]})}),s.jsx(sr,{open:Ge,onOpenChange:ut,children:s.jsxs(Hs,{className:`max-w-2xl bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl
`,children:[s.jsx(Os,{children:s.jsx(Ls,{className:"text-blue-50",children:"Page Preview"})}),Je&&(()=>{var U;const k=(U=g==null?void 0:g.pages)==null?void 0:U.find(se=>se.id===Je);return k?s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:`bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl
`,children:[s.jsx("img",{src:ls(k.imageUrl)||"",alt:k.title??"",className:"max-w-full max-h-96 object-contain"}),s.jsx("div",{className:`p-3 bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl
`,children:k.pageType==="content"&&s.jsxs("p",{className:"text-sm font-medium text-blue-50",children:["Page ",k.pageNumber]})})]})}):s.jsx("p",{className:"text-center text-gray-500",children:"Page not found"})})()]})}),s.jsx(sr,{open:te,onOpenChange:ve,children:s.jsxs(Hs,{className:"bg-slate-900 border-white/20 text-white",children:[s.jsx(Os,{children:s.jsx(Ls,{children:"Confirm Price Change"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-white/80",children:"Are you sure you want to change this yearbook's price? This change cannot be modified again for the next 30 days."}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/10 rounded",children:[s.jsx("span",{className:"text-white/80",children:"Current Price:"}),s.jsx("span",{className:"font-semibold text-lg",children:g!=null&&g.price?`$${g.price}`:"Not Set"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-500/20 rounded",children:[s.jsx("span",{className:"text-white/80",children:"New Price:"}),s.jsxs("span",{className:"font-semibold text-lg",children:["$",ye]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx(T,{onClick:()=>{g!=null&&g.id&&Re.mutate({yearbookId:g.id,price:parseFloat(ye).toFixed(2)}),ve(!1)},disabled:Re.isPending,className:"flex-1","data-testid":"button-confirm-price-change",children:"Confirm Change"}),s.jsx(T,{variant:"outline",onClick:()=>ve(!1),className:"flex-1","data-testid":"button-cancel-price-change",children:"Cancel"})]})]})]})})]})}const Of=768;function i5(){const[e,t]=d.useState(void 0);return d.useEffect(()=>{const r=window.matchMedia(`(max-width: ${Of-1}px)`),n=()=>{t(window.innerWidth<Of)};return r.addEventListener("change",n),t(window.innerWidth<Of),()=>r.removeEventListener("change",n)},[]),!!e}class PD{constructor(){$m(this,"history",{});$m(this,"listeners",[])}setPreviousRoute(t,r){this.history={previousRoute:t,previousTab:r},this.notifyListeners()}getPreviousRoute(){if(this.history.previousRoute)return this.history.previousRoute;switch(JSON.parse(localStorage.getItem("user")||"{}").userType){case"school":return"/school-dashboard";case"viewer":return"/viewer-dashboard";case"super_admin":return"/super-admin";default:return"/login"}}getPreviousTab(){return this.history.previousTab}getBackRoute(){const t=this.getPreviousRoute(),r=this.getPreviousTab();return t==="/school-dashboard"&&r?`${t}?tab=${r}`:t}subscribe(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(r=>r!==t)}}notifyListeners(){this.listeners.forEach(t=>t(this.history))}clear(){this.history={},this.notifyListeners()}}const S0=new PD,o5=(e,t,r)=>{const n=window.location.pathname;n!==t&&S0.setPreviousRoute(n),e(t)},Yl=e=>{const t=S0.getBackRoute();e(t),S0.clear()};function ED(){var He,Ye;const[,e]=us(),[t,r]=Ad("/preview/:year"),n=(r==null?void 0:r.year)||"2000",i=new URLSearchParams(window.location.search).get("school"),[o,l]=d.useState(null),[c,u]=d.useState(0),[m,h]=d.useState(100),[p,y]=d.useState(!1),[N,f]=d.useState("cover"),[j,b]=d.useState(!1),[x,w]=d.useState({x:0,y:0}),[C,S]=d.useState({x:0,y:0}),[M,A]=d.useState({x:0,y:0}),[R,z]=d.useState(!1),[$,W]=d.useState(!1),G=d.useRef(null),[X,P]=d.useState(!0),L=i5();d.useEffect(()=>{w({x:0,y:0})},[c,N]);const _=`/api/yearbooks/${i}/${n}`,{data:V,isLoading:E}=Ze({queryKey:[_],enabled:!!i&&!0,queryFn:async()=>{const fe=await fetch(_);if(!fe.ok)throw new Error("Yearbook not found");return fe.json()}});d.useEffect(()=>{V!=null&&V.orientation&&(P(V.orientation==="portrait"),L||V.orientation==="landscape"?f("single"):f("spread"))},[V==null?void 0:V.orientation,L]);const{data:Y}=Ze({queryKey:["/api/schools",i],enabled:!!i}),Z=(V==null?void 0:V.pages)||[],ne=(V==null?void 0:V.tableOfContents)||[],oe=!!V&&!!Z&&Z.length>0,pe=(Z==null?void 0:Z.length)||0,he=Z==null?void 0:Z.find(fe=>fe.pageType==="front_cover"),B=Z==null?void 0:Z.find(fe=>fe.pageType==="back_cover"),K=((He=Z==null?void 0:Z.filter(fe=>fe.pageType==="content"))==null?void 0:He.sort((fe,Ue)=>fe.pageNumber-Ue.pageNumber))||[];d.useEffect(()=>{const fe=localStorage.getItem("user");if(fe){const Ue=JSON.parse(fe);if(Ue.userType!=="school"){e("/");return}l(Ue)}else e("/")},[e]);const re=fe=>{if(m>100){b(!0);const Ue={x:fe.clientX,y:fe.clientY};S(Ue),A(Ue),fe.preventDefault()}},ye=fe=>{if(j&&m>100){const Ue=fe.clientX-C.x,ot=fe.clientY-C.y;w(Dt=>{const Ft=Dt.x+Ue,zt=Dt.y+ot,At=(m-100)*3;return{x:Math.max(-At,Math.min(At,Ft)),y:Math.max(-At,Math.min(At,zt))}}),S({x:fe.clientX,y:fe.clientY}),fe.preventDefault()}},Q=fe=>{if(j&&Math.sqrt(Math.pow(fe.clientX-M.x,2)+Math.pow(fe.clientY-M.y,2))<5&&m<=100){const ot=fe.currentTarget.getBoundingClientRect();fe.clientX-ot.left<ot.width/2?F():g()}b(!1)},te=fe=>{if(m>100&&fe.touches.length===1){b(!0);const Ue={x:fe.touches[0].clientX,y:fe.touches[0].clientY};S(Ue),A(Ue),fe.preventDefault()}},ve=fe=>{if(j&&m>100&&fe.touches.length===1){const Ue=fe.touches[0].clientX-C.x,ot=fe.touches[0].clientY-C.y;w(Dt=>{const Ft=Dt.x+Ue,zt=Dt.y+ot,At=(m-100)*3;return{x:Math.max(-At,Math.min(At,Ft)),y:Math.max(-At,Math.min(At,zt))}}),S({x:fe.touches[0].clientX,y:fe.touches[0].clientY}),fe.preventDefault()}},we=()=>{b(!1)};d.useEffect(()=>{const fe=()=>b(!1),Ue=()=>b(!1);return document.addEventListener("mouseup",Ue),document.addEventListener("mouseleave",fe),()=>{document.removeEventListener("mouseup",Ue),document.removeEventListener("mouseleave",fe)}},[]),d.useEffect(()=>{const fe=Ue=>{const ot=Ue.target;R&&!ot.closest('[data-testid="button-hamburger-menu"]')&&!ot.closest(".hamburger-dropdown")&&z(!1),$&&!ot.closest('[data-testid="button-notifications"]')&&!ot.closest(".notification-dropdown")&&W(!1)};return document.addEventListener("mousedown",fe),()=>document.removeEventListener("mousedown",fe)},[R,$]);const Ne=()=>{Yl(e)},ie=()=>{h(fe=>{const Ue=Math.min(fe+25,500);return Ue>fe&&w({x:0,y:0}),Ue})},me=()=>{h(fe=>{const Ue=Math.max(fe-25,50);return Ue<=100&&w({x:0,y:0}),Ue})},Ae=()=>{y(!p)},at=fe=>{if(oe)if(fe===0)f("cover"),u(0);else if(he&&fe===1)f("cover"),u(0);else if(B&&fe===pe-1)f("back"),u(pe-1);else if(L||(V==null?void 0:V.orientation)==="landscape"){f("single");const Ue=Math.max(0,fe-(he?1:0));u(Ue)}else{f("spread");const Ue=Math.max(0,fe-(he?1:0));let ot;Ue%2===0?ot=Ue:ot=Ue-1,u(Math.max(0,ot))}},lt=()=>{oe&&(f("spread"),u(0))},it=()=>{if(!oe)return;f("spread");const fe=Math.max(0,K.length-2);u(fe)},F=()=>{if(oe&&N!=="cover")if(N==="back")if(K.length>0){const fe=L||(V==null?void 0:V.orientation)==="landscape"?"single":"spread";f(fe);const Ue=fe==="single"?K.length-1:Math.max(0,K.length-2);u(Ue)}else he&&(f("cover"),u(0));else N==="spread"?c<=0?he&&(f("cover"),u(0)):u(Math.max(0,c-2)):N==="single"&&(c<=0?he&&(f("cover"),u(0)):u(Math.max(0,c-1)))},g=()=>{if(oe)if(N==="cover")if(K.length>0){const fe=L||(V==null?void 0:V.orientation)==="landscape"?"single":"spread";f(fe),u(0)}else B&&(f("back"),u(pe-1));else{if(N==="back")return;N==="spread"?c+2>=K.length?B&&(f("back"),u(pe-1)):u(Math.min(K.length-2,c+2)):N==="single"&&(c+1>=K.length?B&&(f("back"),u(pe-1)):u(c+1))}},D=fe=>{!j&&m<=100&&(fe.preventDefault(),fe.stopPropagation(),F())},J=fe=>{!j&&m<=100&&(fe.preventDefault(),fe.stopPropagation(),g())};if(E)return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsxs("div",{className:"text-center relative z-10",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-white/80",children:"Loading yearbook..."})]})]});const ce=()=>s.jsx("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] relative",children:s.jsxs("div",{className:"text-center p-8 max-w-md",children:[s.jsx(sl,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsxs("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:["Yearbook ",n," Not Available"]}),s.jsxs("p",{className:"text-gray-500 mb-6",children:["The yearbook for ",n," has not been published yet. Please check back later or contact the school administration."]}),s.jsxs(T,{onClick:Ne,className:"bg-secondary hover:bg-green-700",children:[s.jsx(_s,{className:"h-4 w-4 mr-2"}),"Back to Yearbook Finder"]})]})}),le=()=>oe?N==="cover"?s.jsxs("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] relative",children:[s.jsx("div",{ref:G,className:"relative overflow-hidden border border-gray-200 shadow-lg",style:{width:X?"320px":"800px",height:X?"440px":"600px",maxWidth:"90vw"},children:s.jsxs("div",{className:"bg-white cursor-pointer hover:shadow-2xl transition-shadow mx-auto relative",style:{width:"100%",height:"100%",aspectRatio:X?"3/4":"4/3",transform:`scale(${m/100}) translate(${x.x}px, ${x.y}px)`,transformOrigin:"center center"},onMouseDown:re,onMouseMove:ye,onMouseUp:Q,onTouchStart:te,onTouchMove:ve,onTouchEnd:we,onClick:m<=100?lt:void 0,children:[he?s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(he.imageUrl),alt:"Front Cover",className:"w-full h-full object-cover protected-image"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-white bg-black/50 px-2 py-1 rounded",children:m>100?"Drag to pan":"Click to open"})]}):s.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4 sm:p-8 bg-gradient-to-br from-blue-900 to-blue-700 text-white",children:[s.jsx(Gr,{className:"h-12 w-12 sm:h-16 sm:w-16 mb-3 sm:mb-4 opacity-80"}),s.jsx("h1",{className:"text-lg sm:text-3xl font-bold mb-1 sm:mb-2",children:V==null?void 0:V.title}),s.jsx("p",{className:"text-base sm:text-xl opacity-80",children:Y==null?void 0:Y.name}),s.jsx("div",{className:"mt-4 sm:mt-8 text-xs sm:text-sm opacity-60",children:m>100?"Drag to pan":"Click to open"})]}),m<=100&&s.jsxs("div",{className:"absolute inset-0 flex",children:[s.jsx("div",{className:"w-1/2 h-full z-10",onClick:D}),s.jsx("div",{className:"w-1/2 h-full z-10",onClick:J})]})]})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:g,children:s.jsx(Fn,{className:"h-4 w-4"})})]}):N==="back"?s.jsxs("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] relative",children:[s.jsx("div",{ref:G,className:"relative overflow-hidden border border-gray-200 shadow-lg",style:{width:X?"320px":"800px",height:X?"440px":"600px",maxWidth:"90vw"},children:s.jsxs("div",{className:"bg-white cursor-pointer hover:shadow-2xl transition-shadow mx-auto relative",style:{width:"100%",height:"100%",aspectRatio:X?"3/4":"4/3",transform:`scale(${m/100}) translate(${x.x}px, ${x.y}px)`,transformOrigin:"center center"},onMouseDown:re,onMouseMove:ye,onMouseUp:Q,onTouchStart:te,onTouchMove:ve,onTouchEnd:we,onClick:m<=100?it:void 0,children:[B?s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(B.imageUrl),alt:"Back Cover",className:"w-full h-full object-cover protected-image"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-white bg-black/50 px-2 py-1 rounded",children:m>100?"Drag to pan":"Click to go back"})]}):s.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4 sm:p-8 bg-gradient-to-br from-gray-800 to-gray-600 text-white",children:[s.jsx(yr,{className:"h-12 w-12 sm:h-16 sm:w-16 mb-3 sm:mb-4 opacity-80"}),s.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-1 sm:mb-2",children:"Back Cover"}),s.jsx("p",{className:"text-base sm:text-lg opacity-80",children:V==null?void 0:V.year}),s.jsx("div",{className:"mt-4 sm:mt-8 text-xs sm:text-sm opacity-60",children:m>100?"Drag to pan":"Click to go back"})]}),m<=100&&s.jsxs("div",{className:"absolute inset-0 flex",children:[s.jsx("div",{className:"w-1/2 h-full z-10",onClick:D}),s.jsx("div",{className:"w-1/2 h-full z-10",onClick:J})]})]})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:F,children:s.jsx(mn,{className:"h-4 w-4"})})]}):X?s.jsxs("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] relative",children:[s.jsx("div",{ref:G,className:"relative overflow-hidden border border-gray-200 shadow-lg",style:{width:"680px",height:"440px",maxWidth:"90vw"},children:s.jsxs("div",{className:"flex space-x-0",style:{transform:`scale(${m/100}) translate(${x.x}px, ${x.y}px)`,transformOrigin:"center center"},onMouseDown:re,onMouseMove:ye,onMouseUp:Q,onTouchStart:te,onTouchMove:ve,onTouchEnd:we,children:[K[c]&&s.jsxs("div",{className:"bg-white shadow-lg border border-gray-300 relative",style:{width:"340px",height:"440px",aspectRatio:"3/4"},children:[s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(K[c].imageUrl),alt:K[c].title,className:"w-full h-full object-cover protected-image"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 bg-white/80 px-2 py-1 rounded",children:m>100?"Drag to pan":`Page ${c+1}`})]}),m<=100&&s.jsx("div",{className:"absolute inset-0 z-10",onClick:D})]}),K[c+1]&&s.jsxs("div",{className:"bg-white shadow-lg border border-gray-300 relative",style:{width:"340px",height:"440px",aspectRatio:"3/4"},children:[s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(K[c+1].imageUrl),alt:K[c+1].title,className:"w-full h-full object-cover protected-image"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 bg-white/80 px-2 py-1 rounded",children:m>100?"Drag to pan":`Page ${c+2}`})]}),m<=100&&s.jsx("div",{className:"absolute inset-0 z-10",onClick:J})]})]})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:F,children:s.jsx(mn,{className:"h-4 w-4"})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:g,children:s.jsx(Fn,{className:"h-4 w-4"})})]}):N==="single"?s.jsxs("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] relative",children:[s.jsx("div",{ref:G,className:"relative overflow-hidden border border-gray-200 shadow-2xl",style:{width:"800px",height:"600px",maxWidth:"95vw"},children:s.jsx("div",{className:"w-full h-full",style:{transform:`scale(${m/100}) translate(${x.x}px, ${x.y}px)`,transformOrigin:"center center",cursor:m>100?j?"grabbing":"grab":"pointer"},onMouseDown:re,onMouseMove:ye,onMouseUp:Q,onTouchStart:te,onTouchMove:ve,onTouchEnd:we,children:K[c]&&s.jsxs("div",{className:"bg-white shadow-lg border border-gray-300 relative w-full h-full",children:[s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(K[c].imageUrl),alt:K[c].title,className:"w-full h-full object-cover protected-image"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 bg-white/80 px-2 py-1 rounded",children:m>100?"Drag to pan around page":`Page ${c+1} of ${K.length}`})]}),m<=100&&s.jsxs("div",{className:"absolute inset-0 flex",children:[s.jsx("div",{className:"w-1/2 h-full z-10",onClick:D}),s.jsx("div",{className:"w-1/2 h-full z-10",onClick:J})]})]})})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:F,children:s.jsx(mn,{className:"h-4 w-4"})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:g,children:s.jsx(Fn,{className:"h-4 w-4"})})]}):s.jsxs("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] relative",children:[s.jsx("div",{ref:G,className:"relative overflow-hidden border border-gray-200 shadow-2xl",style:{width:"1100px",height:"450px",maxWidth:"95vw"},children:s.jsxs("div",{className:"flex gap-1",style:{transform:`scale(${m/100}) translate(${x.x}px, ${x.y}px)`,transformOrigin:"center center",cursor:m>100?j?"grabbing":"grab":"pointer"},onMouseDown:re,onMouseMove:ye,onMouseUp:Q,onTouchStart:te,onTouchMove:ve,onTouchEnd:we,children:[K[c]&&s.jsxs("div",{className:"bg-white border-r border-gray-300 relative",style:{width:"540px",height:"400px",aspectRatio:"4/3"},children:[" ",s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(K[c].imageUrl),alt:K[c].title,className:"w-full h-full object-cover protected-image"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 bg-white/80 px-2 py-1 rounded",children:m>100?"Drag to pan around page":`Page ${c+1} of spread`})]}),m<=100&&s.jsx("div",{className:"absolute inset-0 z-10",onClick:D})]}),s.jsx("div",{className:"w-2 bg-gradient-to-b from-gray-200 to-gray-400 shadow-inner"}),K[c+1]&&s.jsxs("div",{className:"bg-white border-l border-gray-300 relative",style:{width:"540px",height:"400px",aspectRatio:"4/3"},children:[" ",s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(K[c+1].imageUrl),alt:K[c+1].title,className:"w-full h-full object-cover protected-image"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 bg-white/80 px-2 py-1 rounded",children:m>100?"Drag to pan around page":`Page ${c+2} of spread`})]}),m<=100&&s.jsx("div",{className:"absolute inset-0 z-10",onClick:J})]})]})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:F,children:s.jsx(mn,{className:"h-4 w-4"})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:g,children:s.jsx(Fn,{className:"h-4 w-4"})})]}):ce(),Re=()=>s.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[s.jsxs("div",{className:"bg-black/80 text-white p-4 flex justify-between items-center",children:[s.jsxs(T,{onClick:Ae,variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:[s.jsx(_s,{className:"h-4 w-4 mr-2"}),"Exit Fullscreen"]}),s.jsx("div",{className:"text-sm",children:N==="cover"?"Cover":N==="back"?"Back Cover":`Pages ${c} - ${c+1}`})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center relative bg-black",children:le()}),s.jsxs("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 flex items-center space-x-4 bg-black/80 rounded-full px-6 py-3",children:[s.jsx(T,{onClick:me,variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",disabled:m<=50,children:s.jsx(hi,{className:"h-4 w-4"})}),s.jsxs("span",{className:"text-white text-sm",children:[m,"%"]}),s.jsx(T,{onClick:ie,variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",disabled:m>=500,children:s.jsx(ui,{className:"h-4 w-4"})})]})]});return s.jsx(s.Fragment,{children:p?Re():s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-20 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-20 animate-float-delayed"})]})}),s.jsxs("div",{className:"bg-yellow-500 text-black text-center py-2 px-4",children:[s.jsx("span",{className:"font-medium",children:"📋 Preview Mode"})," - This is how your yearbook will look to viewers after publishing"]}),s.jsxs("header",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-2xl relative",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-2 left-10 w-8 h-8 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-3 right-20 w-6 h-6 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-2 left-20 w-5 h-5 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-1 right-10 w-4 h-4 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-12 sm:h-16",children:[s.jsx("div",{className:"flex items-center space-x-2 sm:space-x-4",children:s.jsx("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h1",{className:"text-sm sm:text-lg font-semibold text-white truncate",children:"Preview"}),s.jsx("p",{className:"text-xs sm:text-sm text-white/80 truncate",children:(Y==null?void 0:Y.name)||"School"})]})})}),s.jsx("div",{className:"flex items-center space-x-1 sm:space-x-4 flex-shrink-0",children:o&&s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-white hidden xs:block",children:[s.jsx("span",{className:"hidden sm:inline",children:o.fullName||"User"}),s.jsx("span",{className:"sm:hidden",children:((Ye=o.fullName)==null?void 0:Ye.split(" ")[0])||"User"})]})})]})})]}),s.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-3 sm:py-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-3 sm:gap-6",children:[oe&&s.jsx("div",{className:"lg:col-span-1 order-2 lg:order-1",children:s.jsx(ge,{className:"sticky top-3 lg:top-6 bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-3 sm:p-4",children:[s.jsx("h3",{className:"font-semibold text-white mb-3 sm:mb-4 text-sm sm:text-base",children:"Navigation"}),s.jsxs("div",{className:"space-y-3 sm:space-y-4 mb-4 sm:mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[s.jsx(T,{onClick:me,variant:"outline",size:"sm",disabled:m<=50,className:"px-2 sm:px-3 bg-gre-200 text-white",children:s.jsx(hi,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium flex-1 text-center text-white",children:[m,"%"]}),s.jsx(T,{onClick:ie,variant:"outline",size:"sm",disabled:m>=500,className:"px-2 sm:px-3 bg-gre-200 text-white",children:s.jsx(ui,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),s.jsxs(T,{onClick:Ae,variant:"outline",className:"w-full bg-white-500/40 backdrop-blur-lg border border-whhite shadow-2xl cursor-pointer transition-all hover:bg-white hover:scale-105 hover:border-black text-white hover:text-black",size:"sm",children:[s.jsx(M4,{className:"h-4 w-4 mr-2"}),"Fullscreen"]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white mb-3",children:"Table of Contents"}),s.jsxs("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:[he&&s.jsx("button",{onClick:()=>{f("cover"),u(0)},className:"w-full text-left px-2 py-1 text-sm bg-white-500/40 backdrop-blur-lg  shadow-2xl cursor-pointer transition-all hover:bg-white hover:border-black text-white hover:text-black rounded transition-colors","data-testid":"toc-item-front-cover",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"truncate",children:"Front Cover"}),s.jsx("span",{className:"text-xs ml-2",children:"Cover"})]})}),ne.map((fe,Ue)=>s.jsx("button",{onClick:()=>at(fe.pageNumber),className:"w-full text-left px-2 py-1 text-sm bg-white-500/40 backdrop-blur-lg  shadow-2xl cursor-pointer transition-all hover:bg-white hover:border-black text-white hover:text-black rounded transition-colors","data-testid":`toc-item-${Ue}`,children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"truncate",children:fe.title}),s.jsx("span",{className:"text-xs ml-2",children:fe.pageNumber})]})},Ue)),B&&s.jsx("button",{onClick:()=>{f("back"),u(pe-1)},className:"w-full text-left px-2 py-1 text-sm bg-white-500/40 backdrop-blur-lg  shadow-2xl cursor-pointer transition-all hover:bg-white hover:border-black text-white hover:text-black rounded transition-colors","data-testid":"toc-item-back-cover",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"truncate",children:"Back Cover"}),s.jsx("span",{className:"text-xs ml-2",children:"Back"})]})})]})]})]})})}),s.jsx("div",{className:oe?"lg:col-span-3 order-1 lg:order-2":"lg:col-span-4 order-1",children:s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsx(be,{className:"p-2 sm:p-4",children:le()})})})]})})]})})}function TD(){const[,e]=us(),[t,r]=d.useState(""),[n,a]=d.useState(""),[i,o]=d.useState(100),[l,c]=d.useState(1);d.useEffect(()=>{const y=window.location.pathname.split("/"),N=y[y.length-1];r(N);const j=new URLSearchParams(window.location.search).get("school");j&&a(j)},[]);const u=()=>{Yl(e)},m=()=>{o(y=>Math.min(y+25,500))},h=()=>{o(y=>Math.max(y-25,50))},p=120;return s.jsxs("div",{className:"relative z-10 min-h-screen bg-white/5 backdrop-blur-sm",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/20 via-purple-600/20 to-pink-600/20"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-tl from-green-600/10 via-blue-600/10 to-purple-600/10"}),s.jsx("div",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-2xl relative overflow-hidden p-3 sm:p-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 w-full sm:w-auto",children:[s.jsxs(T,{variant:"outline",onClick:u,className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm",children:[s.jsx(_s,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Back to Dashboard"}),s.jsx("span",{className:"sm:hidden",children:"Back"})]}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-lg sm:text-2xl font-bold text-white",children:["Yearbook ",t]}),s.jsxs("p",{className:"text-xs sm:text-sm text-white/70 hidden sm:block",children:["School ID: ",n]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 w-full sm:w-auto justify-between sm:justify-end",children:[s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 backdrop-blur-lg border border-white/20 rounded-lg p-1",children:[s.jsx(T,{size:"sm",variant:"ghost",onClick:h,disabled:i<=50,className:"p-1 sm:p-2",children:s.jsx(hi,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium min-w-[40px] sm:min-w-[60px] text-center text-white",children:[i,"%"]}),s.jsx(T,{size:"sm",variant:"ghost",onClick:m,disabled:i>=500,className:"p-1 sm:p-2",children:s.jsx(ui,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),s.jsxs(T,{className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm px-2 sm:px-4",children:[s.jsx(A4,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Download PDF"}),s.jsx("span",{className:"sm:hidden",children:"PDF"})]})]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto p-3 sm:p-6",children:s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{className:"border-b border-white/20 p-3 sm:p-6",children:s.jsxs(tt,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0",children:[s.jsx("span",{className:"text-white text-base sm:text-lg",children:"Yearbook Viewer"}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[s.jsxs("span",{className:"text-xs sm:text-sm text-white/70",children:["Page ",l," of ",p]}),s.jsxs("div",{className:"flex space-x-1 w-full sm:w-auto",children:[s.jsx(T,{size:"sm",variant:"outline",onClick:()=>c(y=>Math.max(y-1,1)),disabled:l<=1,className:"flex-1 sm:flex-none text-xs sm:text-sm",children:"Previous"}),s.jsx(T,{size:"sm",variant:"outline",onClick:()=>c(y=>Math.min(y+1,p)),disabled:l>=p,className:"flex-1 sm:flex-none text-xs sm:text-sm",children:"Next"})]})]})]})}),s.jsx(be,{className:"p-8",children:s.jsx("div",{className:"bg-white/10 backdrop-blur-lg border-2 border-dashed border-white/30 rounded-lg mx-auto shadow-2xl",style:{width:`${Math.floor(8.5*96*(i/100))}px`,height:`${Math.floor(11*96*(i/100))}px`,maxWidth:"100%"},children:s.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx(J7,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"PDF Viewer Placeholder"}),s.jsxs("p",{className:"text-white/70 mb-4",children:["This is where the yearbook PDF for ",t," would be displayed."]})]}),s.jsxs("div",{className:"w-full max-w-md space-y-4",children:[s.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded p-4",children:[s.jsxs("h4",{className:"font-medium text-white mb-2",children:["Page ",l," Content"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-3 bg-white/20 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-white/20 rounded w-1/2"}),s.jsx("div",{className:"h-20 bg-white/10 backdrop-blur-lg border border-white/20 rounded w-full mb-2"}),s.jsx("div",{className:"h-3 bg-white/20 rounded w-2/3"})]})]}),s.jsx("div",{className:"text-xs text-white/60",children:"In a real implementation, this would integrate with a PDF viewer library like react-pdf or pdf.js to display the actual yearbook pages."})]})]})})})]})})]})}function AD(){var Te,Jt;const[,e]=us(),[t,r]=Ad("/waibuk/:year"),n=(r==null?void 0:r.year)||"2000",a=new URLSearchParams(window.location.search),i=a.get("school"),o=a.get("preview")==="true",[l,c]=d.useState(null),[u,m]=d.useState(0),[h,p]=d.useState(100),[y,N]=d.useState(!1),[f,j]=d.useState("cover"),[b,x]=d.useState(!1),[w,C]=d.useState({x:0,y:0}),[S,M]=d.useState({x:0,y:0}),[A,R]=d.useState({x:0,y:0}),[z,$]=d.useState(!1),[W,G]=d.useState(!1),X=d.useRef(null),[P,L]=d.useState(!0),_=i5();d.useEffect(()=>{C({x:0,y:0})},[u,f]);const V=o?`/api/yearbooks/${i}/${n}`:`/api/published-yearbooks/${i}/${n}`,{data:E,isLoading:Y}=Ze({queryKey:[V],enabled:!!i&&!0,queryFn:async()=>{const de=await fetch(V);if(!de.ok)throw new Error("Yearbook not found");return de.json()}});d.useEffect(()=>{E!=null&&E.orientation&&L(E.orientation==="portrait")},[E==null?void 0:E.orientation,_]);const{data:Z}=Ze({queryKey:["/api/schools",i],enabled:!!i}),{data:ne=[]}=Ze({queryKey:["/api/alumni-badges",l==null?void 0:l.id],enabled:!!l,queryFn:async()=>{if(!(l!=null&&l.id))return[];const de=await fetch(`/api/alumni-badges/${l.id}`);return de.ok?de.json():[]}}),{data:oe=[]}=Ze({queryKey:["/api/notifications",l==null?void 0:l.id],enabled:!!l,queryFn:async()=>{if(!(l!=null&&l.id))return[];const de=await fetch(`/api/notifications/${l.id}`);if(!de.ok)throw new Error("Failed to fetch notifications");return de.json()},refetchInterval:3e4}),pe=ne.length>0?"Alumni":"Viewer",he=nt({mutationFn:async de=>{await rt("PATCH",`/api/notifications/${de}/read`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",l==null?void 0:l.id]})}}),B=de=>{he.mutate(de)},K=oe.filter(de=>!de.isRead).length,re=(E==null?void 0:E.pages)||[],ye=(E==null?void 0:E.tableOfContents)||[],Q=!!E&&!!re&&re.length>0,te=(re==null?void 0:re.length)||0,ve=re==null?void 0:re.find(de=>de.pageType==="front_cover"),we=re==null?void 0:re.find(de=>de.pageType==="back_cover"),Ne=((Te=re==null?void 0:re.filter(de=>de.pageType==="content"))==null?void 0:Te.sort((de,H)=>de.pageNumber-H.pageNumber))||[];d.useEffect(()=>{const de=localStorage.getItem("user");de&&c(JSON.parse(de))},[]);const ie=de=>{if(h>100){x(!0);const H={x:de.clientX,y:de.clientY};M(H),R(H),de.preventDefault()}},me=de=>{if(b&&h>100){const H=de.clientX-S.x,Je=de.clientY-S.y;C(wt=>{const Ge=wt.x+H,ut=wt.y+Je,Ie=(h-100)*3;return{x:Math.max(-Ie,Math.min(Ie,Ge)),y:Math.max(-Ie,Math.min(Ie,ut))}}),M({x:de.clientX,y:de.clientY}),de.preventDefault()}},Ae=de=>{if(b&&Math.sqrt(Math.pow(de.clientX-A.x,2)+Math.pow(de.clientY-A.y,2))<5&&h<=100){const Je=de.currentTarget.getBoundingClientRect();de.clientX-Je.left<Je.width/2?fe():Ue()}x(!1)},at=de=>{if(h>100&&de.touches.length===1){x(!0);const H={x:de.touches[0].clientX,y:de.touches[0].clientY};M(H),R(H),de.preventDefault()}},lt=de=>{if(b&&h>100&&de.touches.length===1){const H=de.touches[0].clientX-S.x,Je=de.touches[0].clientY-S.y;C(wt=>{const Ge=wt.x+H,ut=wt.y+Je,Ie=(h-100)*3;return{x:Math.max(-Ie,Math.min(Ie,Ge)),y:Math.max(-Ie,Math.min(Ie,ut))}}),M({x:de.touches[0].clientX,y:de.touches[0].clientY}),de.preventDefault()}},it=()=>{x(!1)};d.useEffect(()=>{const de=()=>x(!1),H=()=>x(!1);return document.addEventListener("mouseup",H),document.addEventListener("mouseleave",de),()=>{document.removeEventListener("mouseup",H),document.removeEventListener("mouseleave",de)}},[]),d.useEffect(()=>{const de=H=>{const Je=H.target;z&&!Je.closest('[data-testid="button-hamburger-menu"]')&&!Je.closest(".hamburger-dropdown")&&$(!1),W&&!Je.closest('[data-testid="button-notifications"]')&&!Je.closest(".notification-dropdown")&&G(!1)};return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[z,W]);const F=()=>{Yl(e)},g=async()=>{if(!Q){alert(`Yearbook for ${n} is not available yet.`);return}try{if(ve){const de=document.createElement("a");de.href=ls(ve.imageUrl)||ve.imageUrl,de.download=`${(E==null?void 0:E.title)||"yearbook"}-front-cover.jpg`,de.click()}alert("Download started! Note: Full yearbook download feature coming soon.")}catch{alert("Download failed. Please try again.")}},D=()=>{p(de=>{const H=Math.min(de+25,500);return H>de&&C({x:0,y:0}),H})},J=()=>{p(de=>{const H=Math.max(de-25,50);return H<=100&&C({x:0,y:0}),H})},ce=()=>{N(!y)},le=()=>{navigator.share&&E&&Z?navigator.share({title:`${E.title} - ${Z.name}`,text:`Check out the ${E.year} yearbook from ${Z.name}`,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))},Re=de=>{if(Q)if(de===0)j("cover"),m(0);else if(ve&&de===1)j("cover"),m(0);else if(we&&de===te-1)j("back"),m(te-1);else if(_||(E==null?void 0:E.orientation)==="landscape"){j("single");const H=Math.max(0,de-(ve?1:0));m(H)}else{j("spread");const H=Math.max(0,de-(ve?1:0));let Je;H%2===0?Je=H:Je=H-1,m(Math.max(0,Je))}},He=()=>{Q&&(j("spread"),m(0))},Ye=()=>{if(!Q)return;j("spread");const de=Math.max(0,Ne.length-2);m(de)},fe=()=>{if(Q&&f!=="cover")if(f==="back")if(Ne.length>0){const de=_||(E==null?void 0:E.orientation)==="landscape"?"single":"spread";j(de);const H=de==="single"?Ne.length-1:Math.max(0,Ne.length-2);m(H)}else ve&&(j("cover"),m(0));else f==="spread"?u<=0?ve&&(j("cover"),m(0)):m(Math.max(0,u-2)):f==="single"&&(u<=0?ve&&(j("cover"),m(0)):m(Math.max(0,u-1)))},Ue=()=>{if(Q)if(f==="cover")if(Ne.length>0){const de=_||(E==null?void 0:E.orientation)==="landscape"?"single":"spread";j(de),m(0)}else we&&(j("back"),m(te-1));else{if(f==="back")return;f==="spread"?u+2>=Ne.length?we&&(j("back"),m(te-1)):m(Math.min(Ne.length-2,u+2)):f==="single"&&(u+1>=Ne.length?we&&(j("back"),m(te-1)):m(u+1))}},ot=de=>{!b&&h<=100&&(de.preventDefault(),de.stopPropagation(),fe())},Dt=de=>{!b&&h<=100&&(de.preventDefault(),de.stopPropagation(),Ue())};if(Y)return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsxs("div",{className:"text-center relative z-10",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-white/80",children:"Loading yearbook..."})]})]});const Ft=()=>s.jsx("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] relative",children:s.jsxs("div",{className:"text-center p-8 max-w-md",children:[s.jsx(sl,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsxs("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:["Yearbook ",n," Not Available"]}),s.jsxs("p",{className:"text-gray-500 mb-6",children:["The yearbook for ",n," has not been published yet. Please check back later or contact the school administration."]}),s.jsxs(T,{onClick:F,className:"bg-secondary hover:bg-green-700",children:[s.jsx(_s,{className:"h-4 w-4 mr-2"}),"Back to Yearbook Finder"]})]})}),zt=()=>Q?f==="cover"?s.jsxs("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] relative",children:[s.jsx("div",{ref:X,className:"relative overflow-hidden border border-gray-200 shadow-lg",style:{width:P?"420px":"1040px",height:P?"570px":"780px",maxWidth:"90vw"},children:s.jsxs("div",{className:"bg-white cursor-pointer hover:shadow-2xl transition-shadow mx-auto relative",style:{width:"100%",height:"100%",aspectRatio:P?"3/4":"4/3",transform:`scale(${h/100}) translate(${w.x}px, ${w.y}px)`,transformOrigin:"center center"},onMouseDown:ie,onMouseMove:me,onMouseUp:Ae,onTouchStart:at,onTouchMove:lt,onTouchEnd:it,onClick:h<=100?He:void 0,children:[ve?s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(ve.imageUrl),alt:"Front Cover",className:"w-full h-full object-contain bg-gray-100"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-white bg-black/50 px-2 py-1 rounded",children:h>100?"Drag to pan":"Click to open"})]}):s.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4 sm:p-8 bg-gradient-to-br from-blue-900 to-blue-700 text-white",children:[s.jsx(Gr,{className:"h-12 w-12 sm:h-16 sm:w-16 mb-3 sm:mb-4 opacity-80"}),s.jsx("h1",{className:"text-lg sm:text-3xl font-bold mb-1 sm:mb-2",children:E==null?void 0:E.title}),s.jsx("p",{className:"text-base sm:text-xl opacity-80",children:Z==null?void 0:Z.name}),s.jsx("div",{className:"mt-4 sm:mt-8 text-xs sm:text-sm opacity-60",children:h>100?"Drag to pan":"Click to open"})]}),h<=100&&s.jsxs("div",{className:"absolute inset-0 flex",children:[s.jsx("div",{className:"w-1/2 h-full z-10",onClick:ot}),s.jsx("div",{className:"w-1/2 h-full z-10",onClick:Dt})]})]})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:Ue,children:s.jsx(Fn,{className:"h-4 w-4"})})]}):f==="back"?s.jsxs("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] relative",children:[s.jsx("div",{ref:X,className:"relative overflow-hidden border border-gray-200 shadow-lg",style:{width:P?"420px":"1040px",height:P?"570px":"780px",maxWidth:"90vw"},children:s.jsxs("div",{className:"bg-white cursor-pointer hover:shadow-2xl transition-shadow mx-auto relative",style:{width:"100%",height:"100%",aspectRatio:P?"3/4":"4/3",transform:`scale(${h/100}) translate(${w.x}px, ${w.y}px)`,transformOrigin:"center center"},onMouseDown:ie,onMouseMove:me,onMouseUp:Ae,onTouchStart:at,onTouchMove:lt,onTouchEnd:it,onClick:h<=100?Ye:void 0,children:[we?s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(we.imageUrl),alt:"Back Cover",className:"w-full h-full object-contain bg-gray-100"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-white bg-black/50 px-2 py-1 rounded",children:h>100?"Drag to pan":"Click to go back"})]}):s.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4 sm:p-8 bg-gradient-to-br from-gray-800 to-gray-600 text-white",children:[s.jsx(yr,{className:"h-12 w-12 sm:h-16 sm:w-16 mb-3 sm:mb-4 opacity-80"}),s.jsx("h2",{className:"text-lg sm:text-2xl font-bold mb-1 sm:mb-2",children:"Back Cover"}),s.jsx("p",{className:"text-base sm:text-lg opacity-80",children:E==null?void 0:E.year}),s.jsx("div",{className:"mt-4 sm:mt-8 text-xs sm:text-sm opacity-60",children:h>100?"Drag to pan":"Click to go back"})]}),h<=100&&s.jsxs("div",{className:"absolute inset-0 flex",children:[s.jsx("div",{className:"w-1/2 h-full z-10",onClick:ot}),s.jsx("div",{className:"w-1/2 h-full z-10",onClick:Dt})]})]})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:fe,children:s.jsx(mn,{className:"h-4 w-4"})})]}):P?s.jsxs("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] relative",children:[s.jsx("div",{ref:X,className:"relative overflow-hidden border border-gray-200 shadow-lg",style:{width:"884px",height:"572px",maxWidth:"90vw"},children:s.jsxs("div",{className:"flex space-x-0",style:{transform:`scale(${h/100}) translate(${w.x}px, ${w.y}px)`,transformOrigin:"center center"},onMouseDown:ie,onMouseMove:me,onMouseUp:Ae,onTouchStart:at,onTouchMove:lt,onTouchEnd:it,children:[Ne[u]&&s.jsxs("div",{className:"bg-white shadow-lg border border-gray-300 relative",style:{width:"442px",height:"572px",aspectRatio:"3/4"},children:[s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(Ne[u].imageUrl),alt:Ne[u].title,className:"w-full h-full object-contain bg-gray-100"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 bg-white/80 px-2 py-1 rounded",children:h>100?"Drag to pan":`Page ${u+1}`})]}),h<=100&&s.jsx("div",{className:"absolute inset-0 z-10",onClick:ot})]}),Ne[u+1]&&s.jsxs("div",{className:"bg-white shadow-lg border border-gray-300 relative",style:{width:"442px",height:"572px",aspectRatio:"3/4"},children:[s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(Ne[u+1].imageUrl),alt:Ne[u+1].title,className:"w-full h-full object-contain bg-gray-100"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 bg-white/80 px-2 py-1 rounded",children:h>100?"Drag to pan":`Page ${u+2}`})]}),h<=100&&s.jsx("div",{className:"absolute inset-0 z-10",onClick:Dt})]})]})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:fe,children:s.jsx(mn,{className:"h-4 w-4"})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:Ue,children:s.jsx(Fn,{className:"h-4 w-4"})})]}):f==="single"?s.jsxs("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] relative",children:[s.jsx("div",{ref:X,className:"relative overflow-hidden border border-gray-200 shadow-2xl",style:{width:"1040px",height:"780px",maxWidth:"95vw"},children:s.jsx("div",{className:"w-full h-full",style:{transform:`scale(${h/100}) translate(${w.x}px, ${w.y}px)`,transformOrigin:"center center",cursor:h>100?b?"grabbing":"grab":"pointer"},onMouseDown:ie,onMouseMove:me,onMouseUp:Ae,onTouchStart:at,onTouchMove:lt,onTouchEnd:it,children:Ne[u]&&s.jsxs("div",{className:"bg-white shadow-lg border border-gray-300 relative w-full h-full",children:[s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(Ne[u].imageUrl),alt:Ne[u].title,className:"w-full h-full object-contain bg-gray-100"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 bg-white/80 px-2 py-1 rounded",children:h>100?"Drag to pan around page":`Page ${u+1} of ${Ne.length}`})]}),h<=100&&s.jsxs("div",{className:"absolute inset-0 flex",children:[s.jsx("div",{className:"w-1/2 h-full z-10",onClick:ot}),s.jsx("div",{className:"w-1/2 h-full z-10",onClick:Dt})]})]})})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:fe,children:s.jsx(mn,{className:"h-4 w-4"})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:Ue,children:s.jsx(Fn,{className:"h-4 w-4"})})]}):s.jsxs("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] relative",children:[s.jsx("div",{ref:X,className:"relative overflow-hidden border border-gray-200 shadow-2xl",style:{width:"1430px",height:"585px",maxWidth:"95vw"},children:s.jsxs("div",{className:"flex gap-1",style:{transform:`scale(${h/100}) translate(${w.x}px, ${w.y}px)`,transformOrigin:"center center",cursor:h>100?b?"grabbing":"grab":"pointer"},onMouseDown:ie,onMouseMove:me,onMouseUp:Ae,onTouchStart:at,onTouchMove:lt,onTouchEnd:it,children:[Ne[u]&&s.jsxs("div",{className:"bg-white border-r border-gray-300 relative",style:{width:"702px",height:"520px",aspectRatio:"4/3"},children:[" ",s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(Ne[u].imageUrl),alt:Ne[u].title,className:"w-full h-full object-contain bg-gray-100"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 bg-white/80 px-2 py-1 rounded",children:h>100?"Drag to pan around page":`Page ${u+1} of spread`})]}),h<=100&&s.jsx("div",{className:"absolute inset-0 z-10",onClick:ot})]}),s.jsx("div",{className:"w-2 bg-gradient-to-b from-gray-200 to-gray-400 shadow-inner"}),Ne[u+1]&&s.jsxs("div",{className:"bg-white border-l border-gray-300 relative",style:{width:"702px",height:"520px",aspectRatio:"4/3"},children:[" ",s.jsxs("div",{className:"h-full relative",children:[s.jsx("img",{src:ls(Ne[u+1].imageUrl),alt:Ne[u+1].title,className:"w-full h-full object-contain bg-gray-100"}),s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 bg-white/80 px-2 py-1 rounded",children:h>100?"Drag to pan around page":`Page ${u+2} of spread`})]}),h<=100&&s.jsx("div",{className:"absolute inset-0 z-10",onClick:Dt})]})]})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:fe,children:s.jsx(mn,{className:"h-4 w-4"})}),s.jsx(T,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white shadow-lg z-20",onClick:Ue,children:s.jsx(Fn,{className:"h-4 w-4"})})]}):Ft(),At=()=>s.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[s.jsxs("div",{className:"bg-black/80 text-white p-4 flex justify-between items-center",children:[s.jsxs(T,{onClick:ce,variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:[s.jsx(_s,{className:"h-4 w-4 mr-2"}),"Exit Fullscreen"]}),s.jsx("div",{className:"text-sm",children:f==="cover"?"Cover":f==="back"?"Back Cover":`Pages ${u} - ${u+1}`})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center relative bg-black",children:zt()}),s.jsxs("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 flex items-center space-x-4 bg-black/80 rounded-full px-6 py-3",children:[s.jsx(T,{onClick:J,variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",disabled:h<=50,children:s.jsx(hi,{className:"h-4 w-4"})}),s.jsxs("span",{className:"text-white text-sm",children:[h,"%"]}),s.jsx(T,{onClick:D,variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",disabled:h>=500,children:s.jsx(ui,{className:"h-4 w-4"})})]})]});return s.jsx(s.Fragment,{children:y?At():s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-20 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-20 animate-float-delayed"})]})}),o&&s.jsxs("div",{className:"bg-yellow-500 text-black text-center py-2 px-4",children:[s.jsx("span",{className:"font-medium",children:"📋 Preview Mode"})," - This is how your yearbook will look to viewers after publishing"]}),s.jsxs("header",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-2xl relative",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-2 left-10 w-8 h-8 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-3 right-20 w-6 h-6 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-2 left-20 w-5 h-5 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-1 right-10 w-4 h-4 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"mx-auto px-2 sm:px-4 lg:px-8 xl:px-12 2xl:px-16 relative z-10",children:s.jsxs("div",{className:"flex justify-between items-center h-12 sm:h-16",children:[s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[s.jsxs(T,{onClick:()=>Yl(e),variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 p-1 sm:p-2 mr-1 sm:mr-2","data-testid":"button-back",children:[s.jsx(mn,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-0 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(Gr,{className:"text-white text-xs sm:text-sm"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h1",{className:"text-sm sm:text-lg font-semibold text-white truncate",children:(E==null?void 0:E.title)||`${n} Yearbook`}),s.jsx("p",{className:"text-xs sm:text-sm text-white/80 truncate",children:(Z==null?void 0:Z.name)||"School"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-4 flex-shrink-0",children:[Q&&o&&s.jsxs(s.Fragment,{children:[s.jsxs(T,{onClick:g,variant:"outline",size:"sm",className:"text-white border-white/30 hover:bg-white/20 px-2 sm:px-3",children:[s.jsx(A4,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-0 sm:mr-2"}),s.jsx("span",{className:"hidden sm:inline",children:"Download"})]}),s.jsxs(T,{onClick:le,variant:"outline",size:"sm",className:"text-white border-white/30 hover:bg-white/20 px-2 sm:px-3",children:[s.jsx(Lu,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-0 sm:mr-2"}),s.jsx("span",{className:"hidden sm:inline",children:"Share"})]})]}),s.jsx("div",{className:"sm:hidden relative",children:pe==="Alumni"?s.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:ne.filter(de=>de.status==="verified").length}):s.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full"})}),s.jsxs("div",{className:`hidden sm:block px-2 sm:px-3 py-1 rounded-full text-xs font-medium ${pe.startsWith("Alumni")?"bg-green-500/20 text-green-200 border border-green-400/30":"bg-blue-500/20 text-blue-200 border border-blue-400/30"}`,children:[s.jsx("span",{className:"hidden md:inline",children:"Account Status: "}),pe]}),l&&s.jsx("div",{className:"relative",children:s.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>G(!W),className:"relative text-white hover:bg-white/20","data-testid":"button-notifications",children:[s.jsx(Yn,{className:"h-5 w-5"}),K>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:K})]})}),l&&s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-white hidden xs:block",children:[s.jsx("span",{className:"hidden sm:inline",children:l.fullName||"User"}),s.jsx("span",{className:"sm:hidden",children:((Jt=l.fullName)==null?void 0:Jt.split(" ")[0])||"User"})]}),l&&s.jsx("div",{className:"relative",children:s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>$(!z),className:"text-white hover:bg-white/20 p-2 bg-white/10 rounded-lg border border-white/20 ml-3","data-testid":"button-hamburger-menu",children:s.jsx(Jr,{className:"h-5 w-5"})})})]})]})})]}),W&&l&&s.jsxs("div",{className:"notification-dropdown fixed top-16 right-16 w-72 sm:w-80 max-w-[calc(100vw-2rem)] bg-blue-600/60 backdrop-blur-lg shadow-xl border border-white/20 z-[999999] rounded-lg",children:[s.jsx("div",{className:"p-4 border-b border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>G(!1),children:s.jsx(Pt,{className:"h-4 w-4 text-white hover:text-red-500"})})]})}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:oe.length===0?s.jsx("div",{className:"p-4 text-center text-white/70",children:"No notifications yet"}):oe.map(de=>s.jsx("div",{className:`p-4 border-b border-white/20 hover:bg-white/10 cursor-pointer ${de.isRead?"":"bg-blue-500/20"}`,onClick:()=>{de.isRead||B(de.id)},"data-testid":`notification-${de.id}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${de.isRead?"bg-gray-300":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-black",children:de.title}),s.jsx("p",{className:"text-sm text-black mt-1",children:de.message}),s.jsx("p",{className:"text-xs text-black mt-2",children:new Date(de.createdAt||"").toLocaleDateString()})]})]})},de.id))})]}),z&&l&&s.jsx("div",{className:"hamburger-dropdown fixed top-16 right-4 w-48 bg-blue-600/60 backdrop-blur-lg border border-white/20  shadow-xl z-[999999] rounded-lg",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{$(!1),e("/viewer-dashboard")},"data-testid":"menu-home",children:[s.jsx(Xr,{className:"h-4 w-4 mr-3"}),"Dashboard"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{$(!1),e("/viewer-settings")},"data-testid":"menu-settings",children:[s.jsx(Rs,{className:"h-4 w-4 mr-3"}),"Settings"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{$(!1),e("/cart")},"data-testid":"menu-cart",children:[s.jsx(xs,{className:"h-4 w-4 mr-3"}),"Cart"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm hover:bg-red-500/40 transition-colors text-red-500",onClick:()=>{$(!1),localStorage.removeItem("user"),e("/")},"data-testid":"menu-logout",children:[s.jsx(Cn,{className:"h-4 w-4 mr-3"}),"Logout"]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-3 sm:py-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-3 sm:gap-6",children:[Q&&s.jsx("div",{className:"lg:col-span-1 order-2 lg:order-1",children:s.jsx(ge,{className:"sticky top-3 lg:top-6 bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-3 sm:p-4",children:[s.jsx("h3",{className:"font-semibold text-white mb-3 sm:mb-4 text-sm sm:text-base",children:"Navigation"}),s.jsxs("div",{className:"space-y-3 sm:space-y-4 mb-4 sm:mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[s.jsx(T,{onClick:J,variant:"outline",size:"sm",disabled:h<=50,className:"px-2 sm:px-3 bg-gre-200 text-white",children:s.jsx(hi,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium flex-1 text-center text-white",children:[h,"%"]}),s.jsx(T,{onClick:D,variant:"outline",size:"sm",disabled:h>=500,className:"px-2 sm:px-3 bg-gre-200 text-white",children:s.jsx(ui,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),s.jsxs(T,{onClick:ce,variant:"outline",className:"w-full bg-white-500/40 backdrop-blur-lg border border-whhite shadow-2xl cursor-pointer transition-all hover:bg-white hover:scale-105 hover:border-black text-white hover:text-black",size:"sm",children:[s.jsx(M4,{className:"h-4 w-4 mr-2"}),"Fullscreen"]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white mb-3",children:"Table of Contents"}),s.jsxs("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:[ve&&s.jsx("button",{onClick:()=>{j("cover"),m(0)},className:"w-full text-left px-2 py-1 text-sm bg-white-500/40 backdrop-blur-lg  shadow-2xl cursor-pointer transition-all hover:bg-white hover:border-black text-white hover:text-black rounded transition-colors","data-testid":"toc-item-front-cover",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"truncate",children:"Front Cover"}),s.jsx("span",{className:"text-xs ml-2",children:"Cover"})]})}),ye.map((de,H)=>s.jsx("button",{onClick:()=>Re(de.pageNumber),className:"w-full text-left px-2 py-1 text-sm bg-white-500/40 backdrop-blur-lg  shadow-2xl cursor-pointer transition-all hover:bg-white hover:border-black text-white hover:text-black rounded transition-colors","data-testid":`toc-item-${H}`,children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"truncate",children:de.title}),s.jsx("span",{className:"text-xs ml-2",children:de.pageNumber})]})},H)),we&&s.jsx("button",{onClick:()=>{j("back"),m(te-1)},className:"w-full text-left px-2 py-1 text-sm bg-white-500/40 backdrop-blur-lg  shadow-2xl cursor-pointer transition-all hover:bg-white hover:border-black text-white hover:text-black rounded transition-colors","data-testid":"toc-item-back-cover",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"truncate",children:"Back Cover"}),s.jsx("span",{className:"text-xs ml-2",children:"Back"})]})})]})]})]})})}),s.jsx("div",{className:Q?"lg:col-span-3 order-1 lg:order-2":"lg:col-span-4 order-1",children:s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsx(be,{className:"p-2 sm:p-4",children:zt()})})})]})})]})})}function RD(){const[,e]=us(),[t,r]=d.useState(null),[n,a]=d.useState(""),[i,o]=d.useState(""),[l,c]=d.useState(!1),[u,m]=d.useState(null),[h,p]=d.useState("grid"),[y,N]=d.useState(!1),[f,j]=d.useState(!1),{toast:b}=ks(),{convertPrice:x,formatPrice:w}=yi(),C=$n;d.useEffect(()=>{const re=new URLSearchParams(window.location.search).get("school");re&&o(re)},[]);const{data:S=[]}=Ze({queryKey:["/api/alumni-badges",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!(t!=null&&t.id))return[];const K=await fetch(`/api/alumni-badges/${t.id}`);if(!K.ok)throw new Error("Failed to fetch alumni badges");return K.json()}}),{data:M}=Ze({queryKey:["/api/schools",i],enabled:!!i}),A=S.length>0?"Alumni":"Viewer",{data:R=[]}=Ze({queryKey:["/api/notifications",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!(t!=null&&t.id))return[];const K=await fetch(`/api/notifications/${t.id}`);if(!K.ok)throw new Error("Failed to fetch notifications");return K.json()},refetchInterval:3e4}),z=M?S.find(K=>K.school===M.name):null,{data:$=[]}=Ze({queryKey:["/api/viewer-year-purchases",t==null?void 0:t.id,i],enabled:!!t&&!!i,queryFn:async()=>{if(!(t!=null&&t.id)||!i)return[];const K=await fetch(`/api/viewer-year-purchases/${t.id}/${i}`);return K.ok?K.json():[]}}),{data:W=[]}=Ze({queryKey:["/api/year-purchases/school",i],enabled:!!i,queryFn:async()=>{if(!i)return[];const K=await fetch(`/api/year-purchases/school/${i}`);return K.ok?K.json():[]}}),{data:G=[]}=Ze({queryKey:["/api/published-yearbooks-list",i],enabled:!!i,staleTime:0,gcTime:0,queryFn:async()=>{if(!i)return[];const K=await fetch(`/api/published-yearbooks-list/${i}?t=${Date.now()}`);return K.ok?K.json():[]}}),X=(M==null?void 0:M.yearFounded)||1980,P=Math.max(1980,X),L=C,V=Array.from({length:L-P+1},(K,re)=>{const ye=L-re,Q=G.find(Ae=>Ae.year===ye&&Ae.isPublished),te=!!Q,ve=(Q==null?void 0:Q.price)||"14.99",we=$.find(Ae=>Ae.year===ye&&Ae.schoolId===i),Ne=!!(we!=null&&we.purchased),ie=te&&Ne,me=te&&!Ne;return{year:ye,purchased:Ne,isPublished:te,price:parseFloat(ve),accessible:ie,canPurchase:me,status:Ne?"Purchased":te?"Published":"Not Published"}}).filter(K=>K.year.toString().includes(n)),E=nt({mutationFn:async K=>{await rt("PATCH",`/api/notifications/${K}/read`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",t==null?void 0:t.id]})}}),Y=K=>{E.mutate(K)},Z=R.filter(K=>!K.isRead).length;d.useEffect(()=>{const K=re=>{const ye=re.target;y&&!ye.closest('[data-testid="button-hamburger-menu"]')&&!ye.closest(".hamburger-dropdown")&&N(!1),f&&!ye.closest('[data-testid="button-notifications"]')&&!ye.closest(".notification-dropdown")&&j(!1)};return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[y,f]),d.useEffect(()=>{const K=localStorage.getItem("user");if(!K){e("/");return}r(JSON.parse(K))},[e]);const ne=()=>{localStorage.removeItem("user"),e("/")},oe=()=>{e("/viewer-dashboard")},pe=K=>{if(!K.accessible&&K.canPurchase){m({year:K.year.toString(),price:K.price}),c(!0);return}if(!K.accessible&&!K.canPurchase){b({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Yearbook not published",description:"This yearbook has not been published by the school yet.",variant:"destructive"});return}const re=i?`?school=${i}`:"";e(`/waibuk/${K.year}${re}`)},he=async()=>{var K;if(!(!u||!t||!i))try{const re={userId:t.id,schoolId:i,year:parseInt(u.year),price:u.price.toString()};await rt("POST","/api/cart",re),b({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Added to cart!",description:`${u.year} yearbook has been added to your cart.`}),c(!1),m(null)}catch(re){(K=re.message)!=null&&K.includes("already in cart")?b({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Already in cart",description:"This yearbook is already in your cart.",variant:"destructive"}):b({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Failed to add to cart",description:"Something went wrong. Please try again.",variant:"destructive"})}},B=()=>{e("/cart")};return t?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-20 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-20 animate-float-delayed"})]})}),s.jsxs("div",{className:"relative z-10 min-h-screen",children:[s.jsxs("header",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-2xl relative",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-2 left-10 w-8 h-8 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-3 right-20 w-6 h-6 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-2 left-20 w-5 h-5 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-1 right-10 w-4 h-4 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"mx-auto px-2 sm:px-4 lg:px-8 xl:px-12 2xl:px-16 relative z-10",children:s.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(Gr,{className:"text-white text-xs sm:text-sm"})}),s.jsx("h1",{className:"ml-2 sm:ml-3 text-sm sm:text-xl font-semibold text-white truncate",children:"Yearbook Finder"})]}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-4 flex-shrink-0",children:[s.jsx("div",{className:"sm:hidden relative",children:A==="Alumni"?s.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:S.filter(K=>K.status==="verified").length}):s.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full"})}),s.jsxs("div",{className:`hidden sm:block px-2 sm:px-3 py-1 rounded-full text-xs font-medium ${A.startsWith("Alumni")?"bg-green-500/20 text-green-200 border border-green-400/30":"bg-blue-500/20 text-blue-200 border border-blue-400/30"}`,children:[s.jsx("span",{className:"hidden md:inline",children:"Account Status: "}),A]}),s.jsx("div",{className:"relative",children:s.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>j(!f),className:"relative text-white hover:bg-white/20","data-testid":"button-notifications",children:[s.jsx(Yn,{className:"h-5 w-5"}),Z>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:Z})]})}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-white hidden xs:block",children:[s.jsx("span",{className:"hidden sm:inline",children:t.fullName}),s.jsx("span",{className:"sm:hidden",children:t.fullName.split(" ")[0]})]}),s.jsx("div",{className:"relative",children:s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>N(!y),className:"text-white hover:bg-white/20 p-2 bg-white/10 rounded-lg border border-white/20 ml-3","data-testid":"button-hamburger-menu",children:s.jsx(Jr,{className:"h-5 w-5"})})})]})]})})]}),f&&s.jsxs("div",{className:"notification-dropdown fixed top-16 right-16 w-72 sm:w-80 max-w-[calc(100vw-2rem)] bg-blue-600/60 backdrop-blur-lg rounded-lg shadow-xl border border-white/20 z-[999999]",children:[s.jsx("div",{className:"p-4 border-b border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>j(!1),children:s.jsx(Pt,{className:"h-4 w-4 text-white hover:text-red-500"})})]})}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:R.length===0?s.jsx("div",{className:"p-4 text-center text-white/70",children:"No notifications yet"}):R.map(K=>s.jsx("div",{className:`p-4 border-b border-white/20 hover:bg-white/10 cursor-pointer ${K.isRead?"":"bg-blue-500/20"}`,onClick:()=>{K.isRead||Y(K.id)},"data-testid":`notification-${K.id}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${K.isRead?"bg-gray-300":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-white",children:K.title}),s.jsx("p",{className:"text-sm text-white/80 mt-1",children:K.message}),s.jsx("p",{className:"text-xs text-white/60 mt-2",children:new Date(K.createdAt||"").toLocaleDateString()})]})]})},K.id))})]}),y&&s.jsx("div",{className:"hamburger-dropdown fixed top-16 right-4 w-48 bg-blue-600/60 backdrop-blur-lg border border-white/20 rounded-lg shadow-xl z-[999999]",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{N(!1),oe()},"data-testid":"menu-home",children:[s.jsx(Xr,{className:"h-4 w-4 mr-3"}),"Dashboard"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{N(!1),e("/viewer-settings")},"data-testid":"menu-settings",children:[s.jsx(Rs,{className:"h-4 w-4 mr-3"}),"Settings"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{N(!1),e("/cart")},"data-testid":"menu-cart",children:[s.jsx(xs,{className:"h-4 w-4 mr-3"}),"Cart"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm hover:bg-red-500/40 transition-colors text-red-500",onClick:()=>{N(!1),ne()},"data-testid":"menu-logout",children:[s.jsx(Cn,{className:"h-4 w-4 mr-3"}),"Logout"]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-8",children:[s.jsxs("div",{className:"mb-4 sm:mb-8",children:[s.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white",children:M?`${M.name} Yearbooks`:"Browse Yearbooks by Year"}),s.jsx("p",{className:"text-sm sm:text-base text-blue-200 mt-1 sm:mt-2",children:M?`Explore memories and moments from ${M.name}`:"Select a year to view available yearbooks and memories"}),M&&s.jsx("div",{className:"mt-3 sm:mt-4 p-3 sm:p-4 bg-white/10 backdrop-blur-lg border border-white/20 rounded-lg shadow-2xl",children:s.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[s.jsxs(Fh,{className:"h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0 border-2 border-cyan-400/50",children:[s.jsx(Oh,{src:M.logo||void 0,alt:M.name}),s.jsx(Lh,{className:"bg-cyan-400/20 text-cyan-400 font-semibold",children:M.name.charAt(0).toUpperCase()})]}),s.jsxs("div",{className:"space-y-1 sm:space-y-2 min-w-0 flex-1",children:[s.jsx("h3",{className:"text-sm sm:text-base font-semibold text-white break-words",children:M.name}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 text-xs sm:text-sm text-blue-200 space-y-1 sm:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Fl,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0 text-cyan-400"}),s.jsxs("span",{className:"break-words",children:[M.city,", ",M.country]})]}),s.jsx("span",{className:"hidden sm:inline",children:"•"}),s.jsxs("span",{children:["Founded ",M.yearFounded]})]}),M.address&&s.jsx("p",{className:"text-xs sm:text-sm text-blue-200 break-words",children:M.address})]})]})}),A==="Alumni"&&z&&s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2 mt-2 sm:mt-3 text-green-700",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(rr,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium break-words",children:[(M==null?void 0:M.name)||"Unknown School"," Class of ",z.graduationYear]})]}),s.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full self-start sm:self-auto",children:z.status==="verified"?"Verified Alumni":"Pending Verification"})]})]}),s.jsx("div",{className:"mb-4 sm:mb-8",children:s.jsxs("div",{className:"relative max-w-full sm:max-w-md",children:[s.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 h-4 w-4"}),s.jsx(xe,{type:"text",placeholder:"Search years",value:n,onChange:K=>a(K.target.value),className:"pl-10 pr-4 py-2 w-full text-sm sm:text-base bg-white/10 backdrop-blur-lg border border-white/20 shadow-xl text-white placeholder:text-white/50"})]})}),s.jsx("div",{className:"mb-4 sm:mb-8",children:s.jsxs(T,{onClick:oe,variant:"outline",className:"flex items-center space-x-2 text-sm sm:text-base px-3 py-2 sm:px-4 bg-white/10 backdrop-blur-lg border border-white/20 shadow-xl text-white hover:bg-white/20 hover:text-white",size:"sm",children:[s.jsx(zs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{children:"Back to Dashboard"})]})}),s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-3 sm:p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white break-words",children:M?`${M.name} Yearbooks by Year`:"Available Years"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-xs sm:text-sm text-blue-200",children:[s.jsx(yr,{className:"h-3 w-3 sm:h-4 sm:w-4 text-cyan-400"}),s.jsxs("span",{children:[V.length," Years Available"]})]}),s.jsxs("div",{className:"flex items-center bg-white/20 backdrop-blur-sm rounded-lg p-1 border border-white/20",children:[s.jsx("button",{onClick:()=>p("grid"),className:`p-1.5 rounded ${h==="grid"?"bg-white/30 backdrop-blur-sm shadow-sm text-white":"text-blue-200 hover:text-white hover:bg-white/20"}`,title:"Grid View",children:s.jsx(Vx,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsx("button",{onClick:()=>p("list"),className:`p-1.5 rounded ${h==="list"?"bg-white/30 backdrop-blur-sm shadow-sm text-white":"text-blue-200 hover:text-white hover:bg-white/20"}`,title:"List View",children:s.jsx(Bx,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]})]}),h==="grid"?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-2 sm:gap-4",children:V.map(K=>s.jsxs("div",{className:"relative",children:[s.jsxs(T,{onClick:()=>pe(K),disabled:!K.accessible&&!K.canPurchase,className:`w-full h-20 sm:h-24 flex flex-col items-center justify-center transition-all duration-200 ${K.accessible?"bg-green-600/20 backdrop-blur-lg border border-white/20 shadow-xl text-cyan-400 hover:bg-green-600/30 hover:text-cyan-400":K.canPurchase?"bg-blue-600/20 backdrop-blur-lg border border-blue-400/30 shadow-xl text-white hover:bg-blue-600/30 hover:text-white":"bg-gray-500/10 backdrop-blur-lg border border-gray-400/20 shadow-lg text-gray-400 cursor-not-allowed opacity-50"}`,variant:"outline","data-testid":`button-year-${K.year}`,children:[s.jsx("span",{className:"text-base sm:text-lg font-bold",children:K.year}),s.jsx("span",{className:"text-xs opacity-70 mt-1 flex items-center text-center px-1",children:K.accessible?s.jsxs(s.Fragment,{children:[s.jsx(zs,{className:"h-2 w-2 sm:h-3 sm:w-3 mr-1 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:"View Yearbook"}),s.jsx("span",{className:"sm:hidden",children:"View"})]}):K.canPurchase?s.jsxs(s.Fragment,{children:[s.jsx(xs,{className:"h-2 w-2 sm:h-3 sm:w-3 mr-1 flex-shrink-0"}),w(x(K.price))]}):null})]}),s.jsx("div",{className:`absolute top-0.5 sm:top-1 right-0.5 sm:right-1 px-1 sm:px-1.5 py-0.5 rounded text-xs font-medium ${K.status==="Purchased"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:K.status})]},K.year))}):s.jsx("div",{className:"space-y-2",children:V.map(K=>s.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-lg sm:text-xl font-bold text-gray-900",children:K.year})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${K.status==="Purchased"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:K.status}),K.canPurchase&&s.jsx("span",{className:"text-sm font-semibold text-blue-600",children:w(x(K.price))})]})]}),s.jsx(T,{onClick:()=>pe(K),disabled:!K.accessible&&!K.canPurchase,className:`${K.accessible?"bg-white hover:bg-blue-600 hover:text-white text-gray-900 border border-gray-200":K.canPurchase?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,variant:K.accessible?"outline":"default",size:"sm","data-testid":`button-year-${K.year}`,children:K.accessible?s.jsxs(s.Fragment,{children:[s.jsx(zs,{className:"h-4 w-4 mr-2"}),"View Yearbook"]}):K.canPurchase?s.jsxs(s.Fragment,{children:[s.jsx(xs,{className:"h-4 w-4 mr-2"}),"Purchase"]}):s.jsx(s.Fragment,{children:K.status})})]},K.year))}),V.length===0&&n&&s.jsx("div",{className:"text-center py-6 sm:py-8",children:s.jsxs("p",{className:"text-sm sm:text-base text-gray-500",children:['No years found matching "',n,'"']})})]})}),l&&u&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl rounded-lg w-full max-w-md p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-2",children:[M==null?void 0:M.name," - Class of ",u.year]}),s.jsxs("p",{className:"text-gray-50 mb-4",children:["Yearbook Price: ",s.jsx("span",{className:"font-semibold text-blue-600",children:w(x(u.price))})]}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsxs(T,{onClick:he,className:"w-full bg-blue-600 hover:bg-blue-700 text-white","data-testid":"button-add-to-cart",children:[s.jsx(xs,{className:"h-4 w-4 mr-2"}),"Add to Cart"]}),s.jsx(T,{onClick:B,variant:"outline",className:"w-full","data-testid":"button-view-cart",children:"View Cart"}),s.jsx(T,{onClick:()=>{c(!1),m(null)},variant:"ghost",className:"w-full text-white","data-testid":"button-cancel-cart",children:"Cancel"})]})]})})})]})]})]}):null}const MD=va({title:Wt().min(1,"Title is required"),description:Wt().optional(),category:md(["graduation","sports","arts","field_trips","academic"]),file:ym(File).refine(e=>e.size<=20*1024*1024,"File must be less than 20MB")}),_D=va({files:Y3(va({file:ym(File),title:Wt().min(1,"Title is required"),description:Wt().optional(),id:Wt()})).min(1,"At least one file is required").refine(e=>e.reduce((r,n)=>r+n.file.size,0)<=50*1024*1024,"Total file size must not exceed 50MB"),category:md(["graduation","sports","arts","field_trips","academic"])}),DD=va({category:md(["graduation","sports","arts","field_trips","academic"]),validFor:md(["1","6","12","24","48"]).transform(Number)});function ID(){var Ve,vt;const[,e]=us(),[t,r]=d.useState(""),[n,a]=d.useState(""),[i,o]=d.useState(null),[l,c]=d.useState(""),[u,m]=d.useState(!1),[h,p]=d.useState(!1),[y,N]=d.useState(!1),[f,j]=d.useState(null),[b,x]=d.useState(null),[w,C]=d.useState(!1),[S,M]=d.useState(null),[A,R]=d.useState(!1),[z,$]=d.useState(""),[W,G]=d.useState(null),[X,P]=d.useState(!1),[L,_]=d.useState(!1),[V,E]=d.useState("all"),[Y,Z]=d.useState(""),[ne,oe]=d.useState("single"),[pe,he]=d.useState([]),{toast:B}=ks(),K=cl({resolver:ul(MD),defaultValues:{title:"",description:"",category:"graduation"}}),re=cl({resolver:ul(DD),defaultValues:{category:"graduation",validFor:"24"}}),ye=cl({resolver:ul(_D),defaultValues:{files:[],category:"graduation"}});d.useEffect(()=>{const I=new URLSearchParams(window.location.search),Pe=I.get("year"),Me=I.get("school");Pe&&r(Pe),Me&&a(Me)},[]);const{data:Q}=Ze({queryKey:["/api/schools",n],enabled:!!n}),[te,ve]=d.useState(null);d.useEffect(()=>{const I=localStorage.getItem("user");I&&ve(JSON.parse(I))},[]);const{data:we=[]}=Ze({queryKey:["/api/notifications",te==null?void 0:te.id],enabled:!!te,refetchInterval:3e4}),Ne=we.filter(I=>!I.isRead).length,ie=nt({mutationFn:async I=>{await rt("PATCH",`/api/notifications/${I}/read`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",te==null?void 0:te.id]})}}),me=nt({mutationFn:async()=>{te!=null&&te.id&&await rt("DELETE",`/api/notifications/user/${te.id}/clear-all`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",te==null?void 0:te.id]}),B({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"All notifications cleared",description:"Your notification history has been cleared."})}}),Ae=I=>{ie.mutate(I)},at=()=>{me.mutate()},lt=I=>{if(!I)return"";const Me=new Date().getTime()-new Date(I).getTime(),Be=Math.floor(Me/1e3),gt=Math.floor(Be/60),ht=Math.floor(gt/60),Ds=Math.floor(ht/24);return Be<60?"Just now":gt<60?`${gt} minute${gt>1?"s":""} ago`:ht<24?`${ht} hour${ht>1?"s":""} ago`:Ds<7?`${Ds} day${Ds>1?"s":""} ago`:new Date(I).toLocaleDateString()},it=()=>{e("/school-dashboard?tab=memories")},F=()=>{localStorage.removeItem("user"),e("/")},g=I=>{var Me;const Pe=(Me=I.target.files)==null?void 0:Me[0];if(Pe){o(Pe);const Be=URL.createObjectURL(Pe);c(Be),K.setValue("file",Pe)}},D=()=>{o(null),l&&(URL.revokeObjectURL(l),c("")),K.setValue("file",void 0)},J=I=>{const Pe=Array.from(I.target.files||[]);if(Pe.length===0)return;const Me=Pe.map(gt=>({file:gt,title:`Memory - ${t}`,description:"",id:Math.random().toString(36).substr(2,9)}));he(gt=>[...gt,...Me]);const Be=[...pe,...Me];ye.setValue("files",Be),I.target.value=""},ce=I=>{he(Pe=>{const Me=Pe.filter(Be=>Be.id!==I);return ye.setValue("files",Me),Me})},le=(I,Pe,Me)=>{he(Be=>{const gt=Be.map(ht=>ht.id===I?{...ht,[Pe]:Me}:ht);return ye.setValue("files",gt),gt})},Re=()=>pe.reduce((I,Pe)=>I+Pe.file.size,0),He=I=>(I/(1024*1024)).toFixed(2),{data:Ye=[],isLoading:fe}=Ze({queryKey:["/api/memories/school",n,t],enabled:!!n&&!!t,queryFn:async()=>{const I=await fetch(`/api/memories/school/${n}/${t}`);if(!I.ok)throw new Error("Failed to fetch memories");return I.json()}}),Ue=Ye.filter(I=>{const Pe=V==="all"||I.category===V,Me=Y===""||I.title.toLowerCase().includes(Y.toLowerCase());return Pe&&Me}),ot=["all",...Array.from(new Set(Ye.map(I=>I.category)))],Dt={all:"All",graduation:"Graduation",sports:"Sports",arts:"Arts",field_trips:"Field Trips",academic:"Academic"},{data:Ft=[],isLoading:zt}=Ze({queryKey:["/api/memories/school",n,"pending"],enabled:!!n,queryFn:async()=>{const I=JSON.parse(localStorage.getItem("user")||"{}");if(!I.id)throw new Error("Authentication required");const Pe=await fetch(`/api/memories/school/${n}/pending`,{headers:{Authorization:`Bearer ${I.id}`}});if(!Pe.ok)throw new Error("Failed to fetch pending memories");return Pe.json()}}),At=nt({mutationFn:async I=>{if(!n||!t)throw new Error("Missing school ID or year");const Pe=new FormData;Pe.append("memoryFile",I.file),Pe.append("title",I.title),Pe.append("description",I.description||""),Pe.append("eventDate",t),Pe.append("year",t),Pe.append("category",I.category),Pe.append("schoolId",n);const Me=JSON.parse(localStorage.getItem("user")||"{}");if(!Me.id)throw new Error("Authentication required");const Be=await fetch("/api/memories",{method:"POST",headers:{Authorization:`Bearer ${Me.id}`},body:Pe});if(!Be.ok)throw new Error("Failed to upload memory");return Be.json()},onMutate:async I=>{await ke.cancelQueries({queryKey:["/api/memories/school",n,t]});const Pe=ke.getQueryData(["/api/memories/school",n,t]),Me={id:`temp-${Date.now()}`,schoolId:n,title:I.title,description:I.description||"",imageUrl:l||"",mediaType:"image",eventDate:t,year:parseInt(t),category:I.category,createdAt:new Date,uploading:!0};return ke.setQueryData(["/api/memories/school",n,t],(Be=[])=>[Me,...Be]),B({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Uploading memory...",description:"Your photo is being added to the memories..."}),K.reset(),D(),{previousMemories:Pe,optimisticMemory:Me}},onError:(I,Pe,Me)=>{ke.setQueryData(["/api/memories/school",n,t],(Me==null?void 0:Me.previousMemories)||[]),B({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Upload failed",description:I instanceof Error?I.message:"Failed to upload memory. Please try again.",variant:"destructive"})},onSuccess:()=>{B({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Memory uploaded successfully",description:"Your photo has been added to the memories."}),ke.invalidateQueries({queryKey:["/api/memories/school",n,t]})}}),Te=nt({mutationFn:async I=>{if(!n||!t)throw new Error("Missing school ID or year");if(I.files.length===0)throw new Error("No files selected");if(I.files.filter(gt=>!gt.title.trim()).length>0)throw new Error("All files must have titles");const Me=JSON.parse(localStorage.getItem("user")||"{}");if(!Me.id)throw new Error("Authentication required");const Be=[];for(const gt of I.files){const ht=new FormData;ht.append("memoryFile",gt.file),ht.append("title",gt.title),ht.append("description",gt.description||""),ht.append("eventDate",t),ht.append("year",t),ht.append("category",I.category),ht.append("schoolId",n);const Ds=await fetch("/api/memories",{method:"POST",headers:{Authorization:`Bearer ${Me.id}`},body:ht});if(!Ds.ok)throw new Error(`Failed to upload ${gt.title}`);const Nr=await Ds.json();Be.push(Nr)}return Be},onSuccess:I=>{ke.invalidateQueries({queryKey:["/api/memories/school",n,t]}),B({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Upload successful",description:`${I.length} memories uploaded successfully.`}),he([]),ye.reset()},onError:I=>{B({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Upload failed",description:I instanceof Error?I.message:"Please try again.",variant:"destructive"})}}),Jt=nt({mutationFn:async I=>{if(!n||!t)throw new Error("Missing school ID or year");const Pe=JSON.parse(localStorage.getItem("user")||"{}");if(!Pe.id)throw new Error("Authentication required");const Me=await fetch("/api/public-upload-links",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pe.id}`},body:JSON.stringify({schoolId:n,year:parseInt(t),category:I.category,validForHours:I.validFor})});if(!Me.ok){const Be=await Me.json();throw new Error(Be.message||"Failed to create upload link")}return Me.json()},onSuccess:I=>{j({code:I.linkCode,expiresAt:new Date(I.expiresAt).toLocaleString()}),ke.invalidateQueries({queryKey:["/api/public-upload-links/school",n,t]}),B({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Public upload link generated",description:"Share this link with external contributors to collect photos."})},onError:I=>{I.message&&I.message.includes("active upload link")?B({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Duplicate Link Exists",description:I.message,variant:"destructive"}):B({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Failed to generate link",description:I instanceof Error?I.message:"Please try again.",variant:"destructive"})}}),de=I=>{At.mutate(I)},H=I=>{Te.mutate(I)},Je=I=>{Jt.mutate(I)},wt=nt({mutationFn:async I=>{const Pe=JSON.parse(localStorage.getItem("user")||"{}");if(!Pe.id)throw new Error("Authentication required");const Me=await fetch(`/api/memories/${I}/approve`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pe.id}`},body:JSON.stringify({approvedBy:Pe.id})});if(!Me.ok){const Be=await Me.json();throw new Error(Be.message||"Failed to approve memory")}return Me.json()},onSuccess:()=>{B({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Memory approved",description:"The memory has been approved and is now visible to all users."}),ke.invalidateQueries({queryKey:["/api/memories/school",n,"pending"]}),ke.invalidateQueries({queryKey:["/api/memories/school",n,t]})},onError:I=>{B({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Failed to approve memory",description:I instanceof Error?I.message:"Please try again.",variant:"destructive"})}}),Ge=nt({mutationFn:async I=>{const Pe=JSON.parse(localStorage.getItem("user")||"{}");if(!Pe.id)throw new Error("Authentication required");const Me=await fetch(`/api/memories/${I}`,{method:"DELETE",headers:{Authorization:`Bearer ${Pe.id}`}});if(!Me.ok){const Be=await Me.json();throw new Error(Be.message||"Failed to deny memory")}return Me.json()},onSuccess:()=>{B({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Memory denied",description:"The memory has been denied and removed."}),ke.invalidateQueries({queryKey:["/api/memories/school",n,"pending"]})},onError:I=>{B({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Failed to deny memory",description:I instanceof Error?I.message:"Please try again.",variant:"destructive"})}}),ut=nt({mutationFn:async({memoryId:I,title:Pe})=>{const Me=JSON.parse(localStorage.getItem("user")||"{}");if(!Me.id)throw new Error("Authentication required");const Be=await fetch(`/api/memories/${I}/title`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Me.id}`},body:JSON.stringify({title:Pe})});if(!Be.ok){const gt=await Be.json();throw new Error(gt.message||"Failed to update memory title")}return Be.json()},onSuccess:()=>{B({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Title updated",description:"Memory title has been updated successfully."}),ke.invalidateQueries({queryKey:["/api/memories/school",n,t]}),ke.invalidateQueries({queryKey:["/api/memories/school",n,"pending"]})},onError:I=>{B({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Failed to update title",description:I instanceof Error?I.message:"Please try again.",variant:"destructive"})}}),Ie=nt({mutationFn:async I=>{const Pe=JSON.parse(localStorage.getItem("user")||"{}");if(!Pe.id)throw new Error("Authentication required");const Me=await fetch(`/api/memories/${I}`,{method:"DELETE",headers:{Authorization:`Bearer ${Pe.id}`}});if(!Me.ok){const Be=await Me.json();throw new Error(Be.message||"Failed to delete memory")}return Me.json()},onSuccess:()=>{B({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Memory deleted",description:"The memory has been permanently deleted."}),ke.invalidateQueries({queryKey:["/api/memories/school",n,t]})},onError:I=>{B({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Failed to delete memory",description:I instanceof Error?I.message:"Please try again.",variant:"destructive"})}}),Rt=I=>{navigator.clipboard.writeText(I).then(()=>{B({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Copied to clipboard",description:"The upload code has been copied to your clipboard."})})};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-20 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-20 animate-float-delayed"})]})}),s.jsxs("div",{className:"relative z-10 min-h-screen",children:[s.jsxs("header",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-2xl relative",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-2 left-10 w-8 h-8 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-3 right-20 w-6 h-6 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-2 left-20 w-5 h-5 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-1 right-10 w-4 h-4 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"mx-auto px-2 sm:px-4 lg:px-8 xl:px-12 2xl:px-16 relative z-10",children:s.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsxs(T,{variant:"outline",onClick:it,className:"text-white border-white/50 hover:bg-white/10 hover:text-white bg-white/10 mr-2 sm:mr-4 flex-shrink-0","data-testid":"button-back-to-school",children:[s.jsx(_s,{className:"h-4 w-4 sm:mr-2"}),s.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-white truncate",children:"Photos & Memories Management"}),s.jsx("p",{className:"text-xs sm:text-sm text-white/80 truncate",children:t?`Managing Year ${t}`:"Manage photos and memories"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-white",children:[s.jsx("span",{className:"sm:hidden truncate max-w-20",children:(Ve=Q==null?void 0:Q.name)==null?void 0:Ve.split(" ")[0]}),s.jsx("span",{className:"hidden sm:inline",children:Q==null?void 0:Q.name})]}),s.jsx("div",{className:"relative",children:s.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>p(!h),className:"relative text-white hover:bg-white/20","data-testid":"button-notifications",children:[s.jsx(Yn,{className:"h-5 w-5"}),Ne>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:Ne})]})}),s.jsx("div",{className:"relative",children:s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>m(!u),className:"text-white hover:bg-white/20 p-2 bg-white/10 rounded-lg border border-white/20","data-testid":"button-hamburger-menu",children:s.jsx(Jr,{className:"h-5 w-5"})})})]})]})})]}),h&&s.jsxs("div",{className:"notification-dropdown fixed top-16 right-16 w-72 sm:w-80 max-w-[calc(100vw-2rem)] bg-blue-600/60 backdrop-blur-lg rounded-lg shadow-xl border border-white/20 z-[999999]",children:[s.jsx("div",{className:"p-4 border-b border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"}),s.jsxs("div",{className:"flex items-center gap-2",children:[we.length>0&&s.jsx(T,{variant:"ghost",size:"sm",onClick:at,className:"text-white/80 hover:text-white text-xs","data-testid":"button-clear-all-notifications",children:"Clear All"}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>p(!1),"data-testid":"button-close-notifications",children:s.jsx(Pt,{className:"h-4 w-4 text-white hover:text-red-500"})})]})]})}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:we.length===0?s.jsx("div",{className:"p-4 text-center text-white/70",children:"No notifications yet"}):we.map(I=>s.jsx("div",{className:`p-4 border-b border-white/20 hover:bg-white/10 cursor-pointer transition-colors ${I.isRead?"":"bg-blue-500/20"}`,onClick:()=>{I.isRead||Ae(I.id)},"data-testid":`notification-${I.id}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${I.isRead?"bg-gray-300":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-white",children:I.title}),s.jsx("p",{className:"text-sm text-white/80 mt-1",children:I.message}),s.jsx("p",{className:"text-xs text-white/60 mt-2",children:lt(I.createdAt)})]})]})},I.id))})]}),u&&s.jsx("div",{className:"hamburger-dropdown fixed top-16 right-2 sm:right-4 w-48 bg-blue-600/60 backdrop-blur-lg border border-white/20 rounded-lg shadow-xl z-[999999]",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{m(!1),e("/school-dashboard")},"data-testid":"menu-home",children:[s.jsx(Xr,{className:"h-4 w-4 mr-3"}),"Home"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{m(!1),e("/school-settings")},"data-testid":"menu-settings",children:[s.jsx(Rs,{className:"h-4 w-4 mr-3"}),"Settings"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{m(!1),e("/cart")},"data-testid":"menu-cart",children:[s.jsx(xs,{className:"h-4 w-4 mr-3"}),"Cart"]}),s.jsx("div",{className:"border-t border-white/20"}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-red-500 hover:bg-red-500/40 transition-colors",onClick:()=>{m(!1),F()},"data-testid":"menu-logout",children:[s.jsx(Cn,{className:"h-4 w-4 mr-3"}),"Logout"]})]})}),s.jsx("div",{className:"max-w-screen-2xl mx-auto px-2 sm:px-4 lg:px-8 xl:px-12 py-4 sm:py-8",children:s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsx(ge,{className:"bg-blue-500/20 backdrop-blur-lg border border-blue-400/40 shadow-2xl",children:s.jsxs(be,{className:"p-3 sm:p-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(is,{className:"h-5 w-5 text-blue-300 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"text-white font-semibold truncate",children:"Memory Upload Portal"}),s.jsx("p",{className:"text-blue-100 text-xs sm:text-sm truncate",children:"Share this link for external memory uploads"})]})]}),s.jsxs(T,{onClick:()=>{const I=`${window.location.origin}/guest-upload`;navigator.clipboard.writeText(I).then(()=>{B({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Link copied!",description:"Memory upload link has been copied to clipboard."})})},className:"bg-blue-600 hover:bg-blue-700 text-white w-full sm:w-auto flex-shrink-0","data-testid":"button-copy-memory-upload-link",children:[s.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Copy Link"]})]}),s.jsx("div",{className:"mt-3 p-2 bg-white/10 rounded-lg",children:s.jsxs("code",{className:"text-xs text-blue-200 break-all",children:[window.location.origin,"/guest-upload"]})}),s.jsx("p",{className:"text-xs text-blue-200 mt-2",children:"Non-registered users will be prompted to enter codes. Logged-in viewers/alumni will go directly to upload."})]})}),Ft.length>0&&s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{children:[s.jsxs(tt,{className:"flex items-center text-white",children:[s.jsx(qr,{className:"h-5 w-5 mr-2"}),"Pending Memories Sent by Others (",Ft.length,")",s.jsx("span",{className:"ml-2 px-2 py-1 bg-orange-500/20 text-orange-300 text-xs rounded-full",children:"Awaiting Review"})]}),s.jsx("p",{className:"text-blue-100 text-sm",children:"These photos were submitted by external users and require your approval before they become visible."})]}),s.jsx(be,{children:zt?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(qr,{className:"h-12 w-12 text-blue-400 mx-auto mb-4 animate-spin"}),s.jsx("p",{className:"text-white",children:"Loading pending memories..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-3 sm:gap-6",children:Ft.slice(0,5).map(I=>s.jsx("div",{className:"relative group",children:s.jsx(ge,{className:"bg-white/5 backdrop-blur-lg border border-white/10 hover:bg-white/10 transition-all duration-200",children:s.jsxs(be,{className:"p-3 sm:p-4",children:[s.jsx("div",{className:"aspect-square mb-3 rounded-lg overflow-hidden bg-black/20 border border-white/10 cursor-pointer hover:bg-black/30 transition-colors",onClick:()=>{x(I),C(!0)},"data-testid":`media-preview-${I.id}`,children:I.mediaType==="video"?s.jsxs("div",{className:"w-full h-full flex items-center justify-center relative",children:[s.jsx(Video,{className:"h-12 w-12 text-white/60"}),I.videoUrl&&s.jsx(EnhancedVideoPlayer,{src:I.videoUrl,className:"absolute inset-0 w-full h-full",muted:!0,title:I.title})]}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:I.imageUrl?s.jsx("img",{src:I.imageUrl,alt:I.title,className:"w-full h-full object-cover"}):s.jsx(_n,{className:"h-12 w-12 text-white/60"})})}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsx("h3",{className:"font-medium text-white text-sm","data-testid":`text-pending-title-${I.id}`,children:I.title}),I.description&&s.jsx("p",{className:"text-blue-100 text-xs line-clamp-2","data-testid":`text-pending-description-${I.id}`,children:I.description}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-200",children:[s.jsxs("span",{"data-testid":`text-pending-uploader-${I.id}`,children:["By: ",I.uploadedBy]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(yr,{className:"h-3 w-3 mr-1"}),I.year]})]}),I.category&&s.jsx("span",{className:"inline-block px-2 py-1 bg-white/10 text-white text-xs rounded-full capitalize",children:I.category.replace("_"," ")})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[s.jsxs(T,{size:"sm",variant:"outline",className:"bg-white/10 border-white/30 text-white hover:bg-white/20",onClick:()=>{x(I),C(!0)},"data-testid":`button-preview-${I.id}`,children:[s.jsx(zs,{className:"h-4 w-4 mr-1"}),"Preview"]}),s.jsx(T,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 text-white border-green-700",onClick:()=>wt.mutate(I.id),disabled:wt.isPending||Ge.isPending,"data-testid":`button-approve-${I.id}`,children:wt.isPending?s.jsx(qr,{className:"h-4 w-4 mr-1 animate-spin"}):s.jsx(js,{className:"h-4 w-4 mr-1"})}),s.jsx(T,{size:"sm",variant:"destructive",className:"flex-1",onClick:()=>Ge.mutate(I.id),disabled:wt.isPending||Ge.isPending,"data-testid":`button-deny-${I.id}`,children:Ge.isPending?s.jsx(qr,{className:"h-4 w-4 mr-1 animate-spin"}):s.jsx(el,{className:"h-4 w-4 mr-1"})})]})]})})},I.id))}),Ft.length>5&&s.jsx("div",{className:"flex justify-center mt-6",children:s.jsxs(T,{onClick:()=>_(!0),variant:"outline",className:"bg-white/10 border-white/30 text-white hover:bg-white/20 hover:text-white","data-testid":"button-see-all-memories",children:["See all ",Ft.length," memories",s.jsx(zx,{className:"h-4 w-4 ml-2"})]})})]})})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{children:s.jsxs(tt,{className:"flex items-center justify-between text-white",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Lu,{className:"h-5 w-5 mr-2"}),"Public Upload Links"]}),s.jsxs(sr,{open:y,onOpenChange:N,children:[s.jsx(RN,{asChild:!0,children:s.jsxs(T,{variant:"outline",size:"sm",disabled:!n||!t,className:"text-white border-white/50 hover:bg-white/10 hover:text-white bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-generate-public-link",children:[s.jsx(Lu,{className:"h-4 w-4 mr-2"}),"Generate Link"]})}),s.jsxs(Hs,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl max-w-lg w-[95vw] sm:w-[90vw] mx-auto",children:[s.jsx(Os,{children:s.jsx(Ls,{className:"text-white",children:"Generate Public Upload Link"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-blue-50",children:"Create a time-limited link for external users to upload photos to your yearbook."}),f?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-green-600/50 backdrop-blur-lg border border-white/20 shadow-2xl rounded-lg",children:[s.jsx("h3",{className:"font-medium text-green-50 mb-2",children:"Upload Link Generated!"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-green-50",children:"Upload Code:"}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("code",{className:"px-3 py-2 bg-white border rounded text-lg font-mono font-bold tracking-wider flex-1","data-testid":"text-upload-code",children:f.code}),s.jsx(T,{size:"sm",variant:"outline",onClick:()=>Rt(f.code),"data-testid":"button-copy-code",children:s.jsx(Hi,{className:"h-4 w-4"})})]})]}),s.jsxs("p",{className:"text-sm text-green-50 flex items-center",children:[s.jsx(yr,{className:"h-4 w-4 mr-1"}),"Expires: ",f.expiresAt]})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx(T,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl cursor-pointer transition-all hover:bg-white/15 hover:scale-105  hover:shadow-blue-500/5 text-white",variant:"outline",onClick:()=>{j(null),re.reset()},"data-testid":"button-generate-another",children:"Generate Another"}),s.jsx(T,{className:"bg-blue-600/50 backdrop-blur-lg border border-white/20 shadow-2xl cursor-pointer transition-all hover:bg-white/15 hover:scale-105  hover:shadow-blue-500/5",onClick:()=>N(!1),"data-testid":"button-close-dialog",children:"Close"})]})]}):s.jsx(dl,{...re,children:s.jsxs("form",{onSubmit:re.handleSubmit(Je),className:"space-y-4",children:[s.jsx(fs,{control:re.control,name:"category",render:({field:I})=>s.jsxs(rs,{children:[s.jsx(qt,{className:"text-blue-50",children:"Memory Category"}),s.jsxs(nr,{onValueChange:I.onChange,defaultValue:I.value,children:[s.jsx(ns,{children:s.jsx(Ys,{className:"placeholder:text-white bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white","data-testid":"select-public-category",children:s.jsx(ar,{placeholder:"Select category"})})}),s.jsxs(Ws,{className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 text-white",children:[s.jsx(Nt,{value:"graduation",children:"Graduation"}),s.jsx(Nt,{value:"sports",children:"Sports"}),s.jsx(Nt,{value:"arts",children:"Arts"}),s.jsx(Nt,{value:"field_trips",children:"Field Trips"}),s.jsx(Nt,{value:"academic",children:"Academic"})]})]}),s.jsx(as,{})]})}),s.jsx(fs,{control:re.control,name:"validFor",render:({field:I})=>s.jsxs(rs,{children:[s.jsx(qt,{className:"text-white",children:"Link Valid For"}),s.jsxs(nr,{onValueChange:I.onChange,value:I.value||"24",children:[s.jsx(ns,{children:s.jsx(Ys,{className:"placeholder:text-white bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white","data-testid":"select-validity-period",children:s.jsx(ar,{placeholder:"Select validity period"})})}),s.jsxs(Ws,{className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 text-white",children:[s.jsx(Nt,{value:"1",children:"1 hour"}),s.jsx(Nt,{value:"6",children:"6 hours"}),s.jsx(Nt,{value:"12",children:"12 hours"}),s.jsx(Nt,{value:"24",children:"24 hours"}),s.jsx(Nt,{value:"48",children:"48 hours (Max)"})]})]}),s.jsx(as,{})]})}),s.jsx(T,{type:"submit",className:"w-full bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl cursor-pointer transition-all hover:bg-white/15 hover:scale-105  hover:shadow-blue-500/50 hover:shadow-lg hover:scale-105 transition-all duration-200",disabled:Jt.isPending,"data-testid":"button-create-link",children:Jt.isPending?"Generating...":"Generate Upload Link"})]})})]})]})]})]})}),s.jsx(be,{children:!n||!t?s.jsx("p",{className:"text-yellow-200 text-sm",children:"Please ensure you have a school and year selected to generate upload links."}):s.jsx("p",{className:"text-blue-100 text-sm",children:"Generate time-limited upload codes for external contributors. Anyone with the code can upload photos that will be pending your approval."})}),s.jsxs("div",{className:"mt-6 border-t border-white/20 pt-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(Lu,{className:"h-4 w-4 text-white"}),s.jsx("h3",{className:"text-white font-medium",children:"Existing Upload Links"})]}),s.jsx(FD,{schoolId:n,year:t})]})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{children:s.jsxs(tt,{className:"flex items-center text-white",children:[s.jsx(_n,{className:"h-5 w-5 mr-2"}),"Memory Categories"]})}),s.jsx(be,{children:s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-3 sm:gap-4 text-center",children:[s.jsx("div",{className:"p-3 bg-green-500/20 backdrop-blur-lg border border-green-400/20 rounded-lg",children:s.jsx("p",{className:"text-sm font-medium text-green-200",children:"Graduation"})}),s.jsx("div",{className:"p-3 bg-orange-500/20 backdrop-blur-lg border border-orange-400/20 rounded-lg",children:s.jsx("p",{className:"text-sm font-medium text-orange-200",children:"Sports"})}),s.jsx("div",{className:"p-3 bg-purple-500/20 backdrop-blur-lg border border-purple-400/20 rounded-lg",children:s.jsx("p",{className:"text-sm font-medium text-purple-200",children:"Arts"})}),s.jsx("div",{className:"p-3 bg-pink-500/20 backdrop-blur-lg border border-pink-400/20 rounded-lg",children:s.jsx("p",{className:"text-sm font-medium text-pink-200",children:"Field Trips"})}),s.jsx("div",{className:"p-3 bg-blue-500/20 backdrop-blur-lg border border-blue-400/20 rounded-lg",children:s.jsx("p",{className:"text-sm font-medium text-blue-200",children:"Academic"})})]})})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{children:s.jsxs(tt,{className:"flex items-center text-white",children:[s.jsx(is,{className:"h-5 w-5 mr-2"}),"Upload Memories"]})}),s.jsx(be,{children:s.jsxs(Ih,{value:ne,onValueChange:oe,className:"w-full",children:[s.jsxs(pd,{className:"grid w-full grid-cols-2 bg-white/5 backdrop-blur-lg border border-white/20",children:[s.jsx(Hr,{value:"single",className:"text-white/70 data-[state=active]:text-white data-[state=active]:bg-white/20","data-testid":"tab-single-upload",children:"Single Upload"}),s.jsx(Hr,{value:"multiple",className:"text-white/70 data-[state=active]:text-white data-[state=active]:bg-white/20","data-testid":"tab-multiple-upload",children:"Multiple Upload"})]}),s.jsx(hn,{value:"single",className:"mt-6",children:s.jsx(dl,{...K,children:s.jsxs("form",{onSubmit:K.handleSubmit(de),className:"space-y-6",children:[s.jsx("div",{className:"border-2 border-dashed border-white/30 bg-white/5 backdrop-blur-lg rounded-lg p-6",children:i?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[i.type.startsWith("image/")?s.jsx(da,{className:"h-8 w-8 text-blue-600"}):s.jsx(FileVideo,{className:"h-8 w-8 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:i.name}),s.jsxs("p",{className:"text-sm text-blue-100",children:[(i.size/(1024*1024)).toFixed(2)," MB"]})]})]}),s.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:D,"data-testid":"button-remove-file",children:s.jsx(Pt,{className:"h-4 w-4"})})]}),i.type.startsWith("image/")&&s.jsx("img",{src:l,alt:"Preview",className:"max-h-48 rounded-lg mx-auto"}),i.type.startsWith("video/")&&s.jsx(EnhancedVideoPlayer,{src:l,className:"max-h-48 rounded-lg mx-auto w-full",title:"Upload preview",controls:!0})]}):s.jsxs("div",{className:"text-center",children:[s.jsx(is,{className:"h-12 w-12 text-blue-200 mx-auto mb-4"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[s.jsx("span",{className:"text-lg font-medium text-white",children:"Upload photo"}),s.jsx("br",{}),s.jsx("span",{className:"text-sm text-blue-100",children:"Drag and drop or click to select (Max 20MB)"})]}),s.jsx("input",{id:"file-upload",type:"file",accept:"image/*",onChange:g,className:"hidden","data-testid":"input-file"})]}),s.jsx("p",{className:"text-xs text-blue-100",children:"Supported formats: JPG, PNG, MP4, MOV, etc."})]})}),s.jsx(fs,{control:K.control,name:"title",render:({field:I})=>s.jsxs(rs,{children:[s.jsx(qt,{className:"text-white",children:"Title"}),s.jsx(qt,{className:"text-red-500",children:" *"}),s.jsx(ns,{children:s.jsx(xe,{placeholder:"",className:"bg-white/10 backdrop-blur-lg text-white placeholder-white/60 border-white/20 focus-visible:ring-white/30 focus-visible:ring-offset-0",...I,"data-testid":"input-title"})}),s.jsx(as,{})]})}),s.jsx(fs,{control:K.control,name:"category",render:({field:I})=>s.jsxs(rs,{children:[s.jsx(qt,{className:"text-white",children:"Category"}),s.jsx(qt,{className:"text-red-500",children:" *"}),s.jsxs(nr,{onValueChange:I.onChange,defaultValue:I.value,children:[s.jsx(ns,{children:s.jsx(Ys,{className:"bg-white/10 backdrop-blur-lg text-white border-white/20 focus:ring-white/30","data-testid":"select-category",children:s.jsx(ar,{placeholder:"Select memory category"})})}),s.jsxs(Ws,{className:"bg-white/50 backdrop-blur-lg border border-white/20",children:[s.jsx(Nt,{value:"graduation",children:"Graduation"}),s.jsx(Nt,{value:"sports",children:"Sports"}),s.jsx(Nt,{value:"arts",children:"Arts"}),s.jsx(Nt,{value:"field_trips",children:"Field Trips"}),s.jsx(Nt,{value:"academic",children:"Academic"})]})]}),s.jsx(as,{})]})}),s.jsx(fs,{control:K.control,name:"description",render:({field:I})=>s.jsxs(rs,{children:[s.jsx(qt,{className:"text-white",children:"Description"}),s.jsx(ns,{children:s.jsx(zd,{placeholder:"Add details about this memory...",className:"resize-none bg-white/10 backdrop-blur-lg text-white placeholder-white/60 border-white/20 focus-visible:ring-white/30 focus-visible:ring-offset-0 placeholder:text-white/90",rows:3,...I,"data-testid":"textarea-description"})}),s.jsx(as,{})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx(T,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700  backdrop-blur-lg border border-blue-200 shadow-2xl cursor-pointer transition-all hover:bg-white/15 hover:scale-105  hover:shadow-blue-500/50 hover:shadow-lg hover:scale-105 transition-all duration-200",type:"submit",disabled:!i||At.isPending,"data-testid":"button-upload-memory",children:At.isPending?s.jsxs(s.Fragment,{children:[s.jsx(is,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(is,{className:"h-4 w-4 mr-2"}),"Upload Memory"]})})})]})})}),s.jsx(hn,{value:"multiple",className:"mt-6",children:s.jsx(dl,{...ye,children:s.jsxs("form",{onSubmit:ye.handleSubmit(H),className:"space-y-6",children:[s.jsx(fs,{control:ye.control,name:"category",render:({field:I})=>s.jsxs(rs,{children:[s.jsx(qt,{className:"text-white",children:"Category for All Files"}),s.jsx(qt,{className:"text-red-500",children:" *"}),s.jsxs(nr,{onValueChange:I.onChange,defaultValue:I.value,children:[s.jsx(ns,{children:s.jsx(Ys,{className:"bg-white/10 backdrop-blur-lg text-white border-white/20 focus:ring-white/30","data-testid":"select-multiple-category",children:s.jsx(ar,{placeholder:"Select memory category"})})}),s.jsxs(Ws,{className:"bg-white/50 backdrop-blur-lg border border-white/20",children:[s.jsx(Nt,{value:"graduation",children:"Graduation"}),s.jsx(Nt,{value:"sports",children:"Sports"}),s.jsx(Nt,{value:"arts",children:"Arts"}),s.jsx(Nt,{value:"field_trips",children:"Field Trips"}),s.jsx(Nt,{value:"academic",children:"Academic"})]})]}),s.jsx(as,{})]})}),s.jsx("div",{className:"border-2 border-dashed border-white/30 bg-white/5 backdrop-blur-lg rounded-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(is,{className:"h-12 w-12 text-blue-200 mx-auto mb-4"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{htmlFor:"multiple-file-upload",className:"cursor-pointer",children:[s.jsx("span",{className:"text-lg font-medium text-white",children:"Select multiple files"}),s.jsx("br",{}),s.jsx("span",{className:"text-sm text-blue-100",children:"Choose multiple photos/videos (Max 50MB total)"})]}),s.jsx("input",{id:"multiple-file-upload",type:"file",accept:"image/*,video/*",multiple:!0,onChange:J,className:"hidden","data-testid":"input-multiple-files"})]}),s.jsx("p",{className:"text-xs text-blue-100",children:"Supported formats: JPG, PNG, MP4, MOV, etc."}),pe.length>0&&s.jsxs("div",{className:"mt-4 text-sm text-white",children:[s.jsxs("p",{children:["Total size: ",He(Re())," MB / 50 MB"]}),s.jsxs("p",{children:[pe.length," files selected"]})]})]})}),pe.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-white font-medium",children:"Selected Files:"}),pe.map(I=>s.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-lg p-4 border border-white/20",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[I.file.type.startsWith("image/")?s.jsx(da,{className:"h-6 w-6 text-blue-600 flex-shrink-0"}):s.jsx(FileVideo,{className:"h-6 w-6 text-purple-600 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white text-sm",children:I.file.name}),s.jsxs("p",{className:"text-xs text-blue-100",children:[He(I.file.size)," MB"]})]})]}),s.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:()=>ce(I.id),"data-testid":`button-remove-multiple-${I.id}`,children:s.jsx(Pt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(ue,{htmlFor:`title-${I.id}`,className:"text-white text-sm",children:"Title *"}),s.jsx(xe,{id:`title-${I.id}`,value:I.title,onChange:Pe=>le(I.id,"title",Pe.target.value),className:"bg-white/10 backdrop-blur-lg text-white placeholder-white/60 border-white/20 focus-visible:ring-white/30 focus-visible:ring-offset-0 mt-1",placeholder:"Enter title","data-testid":`input-title-${I.id}`})]}),s.jsxs("div",{children:[s.jsx(ue,{htmlFor:`description-${I.id}`,className:"text-white text-sm",children:"Description"}),s.jsx(xe,{id:`description-${I.id}`,value:I.description,onChange:Pe=>le(I.id,"description",Pe.target.value),className:"bg-white/10 backdrop-blur-lg text-white placeholder-white/60 border-white/20 focus-visible:ring-white/30 focus-visible:ring-offset-0 mt-1",placeholder:"Optional description","data-testid":`input-description-${I.id}`})]})]})]},I.id))]}),pe.length>0&&s.jsx("div",{className:"flex justify-end",children:s.jsx(T,{className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700  backdrop-blur-lg border border-green-200 shadow-2xl cursor-pointer transition-all hover:bg-white/15 hover:scale-105  hover:shadow-green-500/50 hover:shadow-lg hover:scale-105 transition-all duration-200",type:"submit",disabled:pe.length===0||Te.isPending||Re()>50*1024*1024,"data-testid":"button-upload-multiple",children:Te.isPending?s.jsxs(s.Fragment,{children:[s.jsx(is,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading ",pe.length," files..."]}):s.jsxs(s.Fragment,{children:[s.jsx(is,{className:"h-4 w-4 mr-2"}),"Upload ",pe.length," memories"]})})})]})})})]})})]}),Ye.length>0&&s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"space-y-4",children:[s.jsxs(tt,{className:"flex items-center text-white",children:[s.jsx(B7,{className:"h-5 w-5 mr-2"}),"Uploaded Memories (",Ye.length,")"]}),s.jsxs("div",{className:"relative",children:[s.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-white/60"}),s.jsx(xe,{placeholder:"Search memories...",value:Y,onChange:I=>Z(I.target.value),className:"pl-10 bg-white/10 backdrop-blur-lg text-white placeholder-white/60 border-white/20 focus-visible:ring-white/30 focus-visible:ring-offset-0 placeholder:text-white/90","data-testid":"input-search-memories"})]}),s.jsx(Ih,{value:V,onValueChange:E,className:"w-full",children:s.jsx(pd,{className:"grid w-full grid-cols-3 lg:grid-cols-6 bg-white/5 backdrop-blur-lg border border-white/20",children:ot.map(I=>s.jsxs(Hr,{value:I,className:"text-white/70 data-[state=active]:text-white data-[state=active]:bg-white/20 text-xs px-2 py-1","data-testid":`tab-category-${I}`,children:[Dt[I]||I,I!=="all"&&s.jsxs("span",{className:"ml-1 text-xs opacity-70",children:["(",Ye.filter(Pe=>Pe.category===I).length,")"]}),I==="all"&&s.jsxs("span",{className:"ml-1 text-xs opacity-70",children:["(",Ye.length,")"]})]},I))})})]}),s.jsxs(be,{children:[Ue.length!==Ye.length&&s.jsx("div",{className:"mb-4 text-center",children:s.jsxs("p",{className:"text-white/70 text-sm",children:["Showing ",Ue.length," of ",Ye.length," memories",Y&&s.jsxs("span",{className:"ml-1",children:['matching "',Y,'"']})]})}),Ue.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-white/70",children:Y||V!=="all"?"No memories match your current filters.":"No memories uploaded yet."}),(Y||V!=="all")&&s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{Z(""),E("all")},className:"mt-2 text-white/70 hover:text-white","data-testid":"button-clear-filters",children:"Clear filters"})]}):s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(250px,1fr))] gap-4 sm:gap-6",children:Ue.map(I=>{var Pe,Me;return s.jsx("div",{className:"w-full relative",children:I.mediaType==="image"?s.jsxs("div",{className:"relative",children:[s.jsx(Lc,{src:I.imageUrl,alt:I.title,onImageClick:()=>{x(I),C(!0)},className:"border bg-white/5 hover:bg-white/10 transition-colors"}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-80 transition-opacity flex flex-col justify-between p-2 rounded-lg",children:s.jsxs("div",{className:"flex justify-end gap-1 opacity-0 hover:opacity-100 transition-opacity",children:[s.jsx(T,{size:"sm",variant:"secondary",className:"h-8 w-8 p-0",onClick:Be=>{Be.stopPropagation(),x(I),C(!0)},"data-testid":`button-preview-${I.id}`,children:s.jsx(zs,{className:"h-4 w-4"})}),s.jsx(T,{size:"sm",variant:"secondary",className:"h-8 w-8 p-0",onClick:Be=>{Be.stopPropagation(),M(I),$(I.title),R(!0)},"data-testid":`button-rename-${I.id}`,children:s.jsx(vf,{className:"h-4 w-4"})}),s.jsx(T,{size:"sm",variant:"destructive",className:"h-8 w-8 p-0",onClick:Be=>{Be.stopPropagation(),G(I),P(!0)},"data-testid":`button-delete-${I.id}`,children:s.jsx(As,{className:"h-4 w-4"})})]})}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent p-3 text-white",children:[s.jsx("div",{className:"font-medium text-sm truncate drop-shadow-sm",children:I.title}),s.jsx("div",{className:"text-xs text-white/70 capitalize mt-0.5",children:(Pe=I.category)==null?void 0:Pe.replace("_"," ")})]})]}):s.jsxs("div",{className:"group relative bg-white/5 hover:bg-white/10 transition-colors rounded-lg border cursor-pointer",onClick:()=>{x(I),C(!0)},"data-testid":`memory-preview-${I.id}`,children:[s.jsx(EnhancedVideoPlayer,{src:I.videoUrl||"",title:I.title,className:"w-full",muted:!0,onVideoClick:()=>{x(I),C(!0)}}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-80 transition-opacity flex flex-col justify-between p-2 rounded-lg",children:s.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx(T,{size:"sm",variant:"secondary",className:"h-8 w-8 p-0",onClick:Be=>{Be.stopPropagation(),x(I),C(!0)},"data-testid":`button-preview-${I.id}`,children:s.jsx(zs,{className:"h-4 w-4"})}),s.jsx(T,{size:"sm",variant:"secondary",className:"h-8 w-8 p-0",onClick:Be=>{Be.stopPropagation(),M(I),$(I.title),R(!0)},"data-testid":`button-rename-${I.id}`,children:s.jsx(vf,{className:"h-4 w-4"})}),s.jsx(T,{size:"sm",variant:"destructive",className:"h-8 w-8 p-0",onClick:Be=>{Be.stopPropagation(),G(I),P(!0)},"data-testid":`button-delete-${I.id}`,children:s.jsx(As,{className:"h-4 w-4"})})]})}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent p-3 text-white rounded-b-lg",children:[s.jsx("div",{className:"font-medium text-sm truncate drop-shadow-sm",children:I.title}),s.jsx("div",{className:"text-xs text-white/70 capitalize mt-0.5",children:(Me=I.category)==null?void 0:Me.replace("_"," ")})]})]})},I.id)})})]})]})]})})]}),s.jsx(sr,{open:w,onOpenChange:C,children:s.jsxs(Hs,{className:"max-w-4xl bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(Os,{children:s.jsx(Ls,{className:"text-white",children:"Preview Memory"})}),b&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-center",children:b.mediaType==="video"&&b.videoUrl?s.jsx(EnhancedVideoPlayer,{src:b.videoUrl.startsWith("/")?b.videoUrl:`/${b.videoUrl}`,className:"max-h-96 max-w-full rounded-lg",title:b.title,controls:!0}):b.imageUrl?s.jsx("div",{style:{maxHeight:"45rem",maxWidth:"100%"},children:s.jsx(Lc,{src:b.imageUrl,alt:b.title,enableZoomPan:!0,className:"rounded-lg","data-testid":"preview-image"})}):s.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsx(_n,{className:"h-16 w-16 text-gray-400"})})}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-blue-50",children:"Title:"}),s.jsx("p",{className:"text-green-50 mt-1",children:b.title})]}),b.description&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-blue-50",children:"Description:"}),s.jsx("p",{className:"text-green-50 mt-1",children:b.description})]}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-blue-50",children:"Category:"}),s.jsx("span",{className:"ml-2 capitalize text-green-50",children:(vt=b.category)==null?void 0:vt.replace("_"," ")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-blue-50",children:"Year:"}),s.jsx("span",{className:"ml-2 text-green-50",children:b.year})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-blue-50",children:"Uploaded by:"}),s.jsx("span",{className:"ml-2 text-green-50",children:b.uploadedBy})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[s.jsx(T,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white",variant:"outline",onClick:()=>C(!1),"data-testid":"button-close-preview",children:"Close"}),b.status==="pending"?s.jsxs(s.Fragment,{children:[s.jsxs(T,{className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>{wt.mutate(b.id),C(!1)},disabled:wt.isPending||Ge.isPending,"data-testid":"button-approve-from-preview",children:[s.jsx(js,{className:"h-4 w-4 mr-1"}),"Approve"]}),s.jsxs(T,{variant:"destructive",onClick:()=>{Ge.mutate(b.id),C(!1)},disabled:wt.isPending||Ge.isPending,"data-testid":"button-deny-from-preview",children:[s.jsx(el,{className:"h-4 w-4 mr-1"}),"Deny"]})]}):s.jsxs(s.Fragment,{children:[s.jsxs(T,{variant:"outline",onClick:()=>{M(b),$(b.title),C(!1),R(!0)},"data-testid":"button-edit-from-preview",children:[s.jsx(vf,{className:"h-4 w-4 mr-1"}),"Edit"]}),s.jsxs(T,{variant:"destructive",onClick:()=>{G(b),C(!1),P(!0)},disabled:Ie.isPending,"data-testid":"button-delete-from-preview",children:[s.jsx(As,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})]})]})}),s.jsx(sr,{open:A,onOpenChange:R,children:s.jsxs(Hs,{className:"max-w-md bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(Os,{children:s.jsx(Ls,{className:"text-white",children:"Edit Memory Title"})}),S&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ue,{className:"text-white",htmlFor:"edit-title",children:"Memory Title"}),s.jsx(xe,{id:"edit-title",value:z,onChange:I=>$(I.target.value),placeholder:"",className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white","data-testid":"input-edit-title"})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(T,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white",variant:"outline",onClick:()=>{R(!1),M(null),$("")},"data-testid":"button-cancel-edit",children:"Cancel"}),s.jsxs(T,{className:"bg-blue-600/50 backdrop-blur-lg border border-white/20 shadow-2xl text-white",onClick:()=>{z.trim()&&z!==S.title&&ut.mutate({memoryId:S.id,title:z.trim()}),R(!1),M(null),$("")},disabled:!z.trim()||z===S.title,"data-testid":"button-save-edit",children:[s.jsx(js,{className:"h-4 w-4 mr-1"}),"Save Changes"]})]})]})]})}),s.jsx(sr,{open:X,onOpenChange:P,children:s.jsxs(Hs,{className:"max-w-md bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(Os,{children:s.jsxs(Ls,{className:"flex items-center text-red-600",children:[s.jsx(vh,{className:"h-5 w-5 mr-2"}),"Delete Memory"]})}),W&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("p",{className:"text-red-600",children:"Are you sure you want to delete this memory?"}),s.jsx("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl rounded-lg p-3",children:s.jsxs("p",{className:"text-sm font-medium text-white",children:['"',W.title,'"']})}),s.jsx("p",{className:"text-sm text-red-600 font-semibold",children:"This Cannot be Undone"})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[s.jsx(T,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white",variant:"outline",onClick:()=>{P(!1),G(null)},"data-testid":"button-cancel-delete",children:"Cancel"}),s.jsxs(T,{variant:"destructive",onClick:()=>{Ie.mutate(W.id),P(!1),G(null)},disabled:Ie.isPending,"data-testid":"button-confirm-delete",children:[s.jsx(As,{className:"h-4 w-4 mr-1"}),Ie.isPending?"Deleting...":"Delete Memory"]})]})]})]})}),s.jsx(sr,{open:L,onOpenChange:_,children:s.jsxs(Hs,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl max-w-7xl w-[95vw] sm:w-[90vw] lg:max-w-6xl max-h-[85vh] sm:max-h-[80vh] overflow-hidden mx-auto",children:[s.jsx(Os,{children:s.jsxs(Ls,{className:"text-white text-xl",children:["All Pending Memories (",Ft.length,")"]})}),s.jsx("div",{className:"overflow-y-auto max-h-[60vh] pr-2 sm:pr-4",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:Ft.map(I=>s.jsx("div",{className:"relative group",children:s.jsx(ge,{className:"bg-white/5 backdrop-blur-lg border border-white/10 hover:bg-white/10 transition-all duration-200",children:s.jsxs(be,{className:"p-3",children:[s.jsx("div",{className:"relative mb-3 rounded-lg overflow-hidden bg-black/20",children:I.mediaType==="image"?I.imageUrl?s.jsx(Lc,{src:I.imageUrl,alt:I.title||"Memory image",title:I.title,category:I.category,onImageClick:()=>{x(I),C(!0)},className:"w-full aspect-video object-cover cursor-pointer hover:opacity-90 transition-opacity"}):s.jsx("div",{className:"aspect-video flex items-center justify-center",children:s.jsx(da,{className:"h-8 w-8 text-blue-400"})}):I.videoUrl?s.jsxs("video",{className:"w-full aspect-video object-cover cursor-pointer",preload:"metadata",onClick:()=>{x(I),C(!0)},children:[s.jsx("source",{src:I.videoUrl,type:"video/mp4"}),s.jsx("source",{src:I.videoUrl,type:"video/webm"}),s.jsx("source",{src:I.videoUrl,type:"video/ogg"})]}):s.jsx("div",{className:"aspect-video flex items-center justify-center",children:s.jsx(FileVideo,{className:"h-8 w-8 text-purple-400"})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-white font-medium text-sm truncate",children:I.title||"Untitled Memory"}),s.jsxs("div",{className:"flex items-center text-gray-300 text-xs",children:[s.jsx(yr,{className:"h-3 w-3 mr-1"}),s.jsx("span",{children:new Date(I.createdAt).toLocaleDateString()})]}),I.submittedBy&&s.jsxs("div",{className:"text-gray-400 text-xs",children:["Submitted by: ",I.submittedBy]})]}),s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsxs(T,{size:"sm",variant:"default",className:"flex-1 bg-green-600 hover:bg-green-700 text-white text-xs",onClick:()=>wt.mutate(I.id),disabled:wt.isPending||Ge.isPending,"data-testid":`button-quick-approve-${I.id}`,children:[wt.isPending?s.jsx(qr,{className:"h-3 w-3 mr-1 animate-spin"}):s.jsx(js,{className:"h-3 w-3 mr-1"}),"Approve"]}),s.jsxs(T,{size:"sm",variant:"destructive",className:"flex-1 text-xs",onClick:()=>Ge.mutate(I.id),disabled:wt.isPending||Ge.isPending,"data-testid":`button-quick-deny-${I.id}`,children:[Ge.isPending?s.jsx(qr,{className:"h-3 w-3 mr-1 animate-spin"}):s.jsx(el,{className:"h-3 w-3 mr-1"}),"Deny"]})]})]})})},I.id))})})]})})]})}function FD({schoolId:e,year:t}){const{toast:r}=ks(),[n,a]=d.useState(null),[i,o]=d.useState(!1),{data:l=[],isLoading:c}=Ze({queryKey:["/api/public-upload-links/school",e,t],enabled:!!e&&!!t,queryFn:async()=>{const h=JSON.parse(localStorage.getItem("user")||"{}"),p=await fetch(`/api/public-upload-links/school/${e}/${t}`,{headers:{Authorization:`Bearer ${h.id}`}});if(!p.ok)throw new Error("Failed to fetch upload links");return p.json()}}),u=nt({mutationFn:async h=>{const p=JSON.parse(localStorage.getItem("user")||"{}"),y=await fetch(`/api/public-upload-links/${h}`,{method:"DELETE",headers:{Authorization:`Bearer ${p.id}`}});if(!y.ok)throw new Error("Failed to delete link");return y.json()},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/public-upload-links/school",e,t]}),r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Link deleted",description:"Upload link has been deleted successfully."})}}),m=h=>{navigator.clipboard.writeText(h).then(()=>{r({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Copied!",description:"Link has been copied to clipboard."})})};return!e||!t?s.jsx("p",{className:"text-yellow-200 text-sm",children:"Please ensure you have a school and year selected to manage upload links."}):c?s.jsx("p",{className:"text-blue-100 text-sm",children:"Loading existing upload links..."}):l.length===0?s.jsx("p",{className:"text-blue-100 text-sm",children:"No public upload links created yet. Generate your first link above to see it here."}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-blue-100 text-sm mb-4",children:"Manage your existing public upload links. You can view details, copy links, and activate/deactivate them."}),l.map(h=>{const p=new Date>new Date(h.expiresAt),y=`Upload Code: ${h.linkCode}`;return s.jsx("div",{className:"bg-white/5 border border-white/20 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs("span",{className:"text-white font-medium",children:["Code: ",h.linkCode]}),s.jsx(T,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-blue-300 hover:text-white",onClick:()=>m(h.linkCode),"data-testid":`button-copy-code-${h.id}`,children:s.jsx(Hi,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("p",{className:"text-blue-100",children:[s.jsx(yr,{className:"h-3 w-3 inline mr-1"}),"Category: ",s.jsx("span",{className:"capitalize",children:h.category})]}),s.jsxs("p",{className:"text-blue-100",children:[s.jsx(qr,{className:"h-3 w-3 inline mr-1"}),"Expires: ",new Date(h.expiresAt).toLocaleString()]}),s.jsxs("p",{className:"text-blue-100",children:["Uploads: ",h.currentUploads]}),s.jsx("div",{className:"flex items-center gap-2 mt-2",children:s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs ${p?"bg-red-500/20 text-red-200":h.isActive?"bg-green-500/20 text-green-200":"bg-gray-500/20 text-gray-200"}`,children:p?"Expired":h.isActive?"Active":"Inactive"})})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsx(xe,{value:y,readOnly:!0,className:"bg-white/10 text-white text-xs border-white/20 flex-1"}),s.jsxs(T,{size:"sm",variant:"outline",onClick:()=>m(h.linkCode),"data-testid":`button-copy-code-${h.id}`,children:[s.jsx(Hi,{className:"h-3 w-3 mr-1"}),"Copy Code"]})]})]}),s.jsx("div",{className:"flex flex-col gap-2 ml-4",children:s.jsx(T,{size:"sm",variant:"destructive",onClick:()=>{a(h.id),o(!0)},disabled:u.isPending,"data-testid":`button-delete-${h.id}`,children:s.jsx(Pt,{className:"h-3 w-3"})})})]})},h.id)}),s.jsx(Hl,{open:i,onOpenChange:o,children:s.jsxs(lo,{"data-testid":"dialog-delete-link-confirm",className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(co,{className:"text-white",children:[s.jsx(ho,{children:"Delete Upload Link"}),s.jsx(mo,{className:"text-gray-100/80",children:"Are you sure you want to delete this upload code? This action cannot be undone. Any users with this code will no longer be able to upload photos."})]}),s.jsxs(uo,{children:[s.jsx(po,{"data-testid":"button-cancel-delete",className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white",children:"Cancel"}),s.jsx(fo,{"data-testid":"button-confirm-delete",onClick:()=>{n&&(u.mutate(n),o(!1),a(null))},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}const OD=va({title:Wt().min(1,"Title is required"),description:Wt().optional(),uploadedBy:Wt().min(1,"Your name is required"),file:ym(File).refine(e=>e.size<=20*1024*1024,"File must be less than 20MB")});va({uploadedBy:Wt().min(1,"Your name is required"),files:Y3(va({file:ym(File),title:Wt().min(1,"Title is required"),description:Wt().optional(),id:Wt()})).min(1,"At least one file is required").refine(e=>e.reduce((r,n)=>r+n.file.size,0)<=10*1024*1024,"Total file size must not exceed 10MB")});function zv(){const[e,t]=Ad("/guest-upload/:code?"),r=t==null?void 0:t.code,[n,a]=d.useState(null),[i,o]=d.useState(""),[l,c]=d.useState(null),[u,m]=d.useState(null),[h,p]=d.useState(!1),[y,N]=d.useState(""),[f,j]=d.useState(""),[b,x]=d.useState(!1),[w,C]=d.useState(!1),[S,M]=d.useState("single"),[A,R]=d.useState(""),[z,$]=d.useState([]),[W,G]=d.useState(""),[X,P]=d.useState(!1),[L,_]=d.useState(!1),{toast:V}=ks();d.useEffect(()=>{(()=>{try{const me=localStorage.getItem("user");if(me&&JSON.parse(me).userType==="viewer"){const at=r?`/viewer-dashboard?tab=memory_upload&code=${r}`:"/viewer-dashboard?tab=memory_upload";window.location.href=at;return}}catch(me){console.error("Error checking user for redirect:",me)}})()},[r]);const E=cl({resolver:ul(OD),defaultValues:{title:"",description:"",uploadedBy:""}}),Y=async ie=>{if(ie){C(!0),m(null);try{const Ae=!!localStorage.getItem("user");let at=`/api/public-upload-links/${ie}`;!Ae&&A&&(at+=`?verificationCode=${A}`);const lt=await fetch(at);if(!lt.ok){const F=await lt.json();m(F.message||"Invalid upload code"),x(!1),Ae||R("");return}const it=await lt.json();c(it),j(ie),x(!0),V({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Code verified!",description:"You can now upload your photos."})}catch{m("Failed to validate upload code"),j(""),x(!1),localStorage.getItem("user")||R("")}finally{C(!1)}}},Z=ie=>{if(ie.preventDefault(),!!!localStorage.getItem("user")&&A!=="1234"){m("Please enter the correct verification code");return}y.trim()&&Y(y.trim())},ne=()=>{try{return!!localStorage.getItem("user")}catch{return!1}},oe=ie=>{var Ae;const me=(Ae=ie.target.files)==null?void 0:Ae[0];if(me){a(me);const at=URL.createObjectURL(me);o(at),E.setValue("file",me)}},pe=()=>{a(null),i&&(URL.revokeObjectURL(i),o("")),E.setValue("file",void 0)},he=ie=>{const me=Array.from(ie.target.files||[]),Ae=l?`${Ne(l.category)} ${l.year}`:"Memory",at=me.map(g=>({file:g,title:Ae,description:"",id:Math.random().toString(36).substr(2,9)})),lt=z.reduce((g,D)=>g+D.file.size,0),it=at.reduce((g,D)=>g+D.file.size,0);if(lt+it>10*1024*1024){V({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"File size limit exceeded",description:"Total file size cannot exceed 10MB",variant:"destructive"});return}$(g=>[...g,...at]),ie.target.value=""},B=ie=>{$(me=>me.filter(Ae=>Ae.id!==ie))},K=(ie,me,Ae)=>{$(at=>at.map(lt=>lt.id===ie?{...lt,[me]:Ae}:lt))},re=()=>z.reduce((ie,me)=>ie+me.file.size,0),ye=ie=>(ie/(1024*1024)).toFixed(2),Q=nt({mutationFn:async ie=>{if(!f)throw new Error("No verified upload code provided");const me=new FormData;me.append("memoryFile",ie.file),me.append("title",ie.title),me.append("description",ie.description||""),me.append("uploadedBy",ie.uploadedBy),!!localStorage.getItem("user")||me.append("verificationCode",A);const lt=await fetch(`/api/public-uploads/${f}`,{method:"POST",body:me});if(!lt.ok){const it=await lt.json();throw new Error(it.message||"Upload failed")}return lt.json()},onMutate:()=>{P(!0)},onSuccess:ie=>{p(!0),P(!1),V({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Upload successful",description:"Your photo has been submitted and is pending approval."}),E.reset(),pe()},onError:ie=>{P(!1),V({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Upload failed",description:ie instanceof Error?ie.message:"Please try again.",variant:"destructive"})}}),te=nt({mutationFn:async()=>{if(!f)throw new Error("No verified upload code provided");if(z.length===0)throw new Error("No files selected");if(!W.trim())throw new Error("Uploader name is required");if(z.filter(Ae=>!Ae.title.trim()).length>0)throw new Error("All files must have titles");const me=[];for(const Ae of z){const at=new FormData;at.append("memoryFile",Ae.file),at.append("title",Ae.title),at.append("description",Ae.description||""),at.append("uploadedBy",W),!!localStorage.getItem("user")||at.append("verificationCode",A);const F=await fetch(`/api/public-uploads/${f}`,{method:"POST",body:at});if(!F.ok){const D=await F.json();throw new Error(`Failed to upload ${Ae.title}: ${D.message}`)}const g=await F.json();me.push(g)}return me},onMutate:()=>{_(!0)},onSuccess:ie=>{p(!0),_(!1),V({title:"Upload successful",description:`${z.length} files have been submitted and are pending approval.`}),$([]),G("")},onError:ie=>{_(!1),V({title:"Upload failed",description:ie instanceof Error?ie.message:"Please try again.",variant:"destructive"})}}),ve=ie=>{X||Q.isPending||Q.mutate(ie)},we=()=>{L||te.isPending||te.mutate()},Ne=ie=>({graduation:"Graduation",sports:"Sports",arts:"Arts",field_trips:"Field Trips",academic:"Academic"})[ie]||ie;return b?h?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:s.jsx(ge,{className:"w-full max-w-md bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"text-center py-8",children:[s.jsx(bn,{className:"h-12 w-12 text-green-400 mx-auto mb-4"}),s.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:"Upload Successful!"}),s.jsx("p",{className:"text-blue-100 mb-4",children:"Your photo has been submitted and is pending approval by the school."}),s.jsx(T,{variant:"outline",onClick:()=>{p(!1),$([]),G(""),M("single")},className:"text-white border-white/50 hover:bg-white/10 hover:text-white bg-white/10","data-testid":"button-upload-another",children:"Upload Another"}),s.jsxs("p",{className:"text-sm text-blue-200 mt-4",children:["want to access your school memories and yearbooks?"," ",s.jsx(tb,{href:"/viewer-signup","data-testid":"link-create-account",children:s.jsx("span",{className:"text-blue-300 hover:text-white underline cursor-pointer transition-colors",children:"create an account"})})]})]})})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-20 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-20 animate-float-delayed"})]})}),s.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-2xl",children:[s.jsx(ge,{className:"mb-6 bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(et,{className:"text-center",children:[s.jsxs(tt,{className:"flex items-center justify-center text-white text-2xl",children:[s.jsx(la,{className:"h-6 w-6 mr-2"}),"Upload to Yearbook"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-blue-100",children:["Category: ",s.jsx("span",{className:"font-medium text-white",children:l?Ne(l.category):"Loading..."})]}),s.jsxs("p",{className:"text-blue-100",children:["Year: ",s.jsx("span",{className:"font-medium text-white",children:l?l.year:"Loading..."})]}),s.jsx("p",{className:"text-sm text-blue-200",children:"Share your memories! Your uploads will be reviewed by the school before appearing in the yearbook."})]})]})}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{children:s.jsxs(tt,{className:"flex items-center text-white",children:[s.jsx(is,{className:"h-5 w-5 mr-2"}),"Upload Photos"]})}),s.jsx(be,{children:s.jsxs(Ih,{value:S,onValueChange:M,className:"mb-6",children:[s.jsxs(pd,{className:"grid w-full grid-cols-2 bg-white/5 border border-white/20",children:[s.jsx(Hr,{value:"single",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-white/70","data-testid":"tab-single-upload",children:"Single Upload"}),s.jsx(Hr,{value:"multiple",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-white/70","data-testid":"tab-multiple-upload",children:"Multiple Upload"})]}),s.jsx(hn,{value:"single",className:"mt-6",children:s.jsx(dl,{...E,children:s.jsxs("form",{onSubmit:E.handleSubmit(ve),className:"space-y-6",children:[s.jsx("div",{className:"border-2 border-dashed border-white/30 bg-white/5 backdrop-blur-lg rounded-lg p-6",children:n?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(da,{className:"h-8 w-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:n.name}),s.jsxs("p",{className:"text-sm text-blue-100",children:[(n.size/(1024*1024)).toFixed(2)," MB"]})]})]}),s.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:pe,"data-testid":"button-remove-guest-file",children:s.jsx(Pt,{className:"h-4 w-4"})})]}),n.type.startsWith("image/")&&s.jsx("img",{src:i,alt:"Preview",className:"max-h-48 rounded-lg mx-auto"}),n.type.startsWith("video/")&&s.jsx("video",{src:i,controls:!0,className:"max-h-48 rounded-lg mx-auto"})]}):s.jsxs("div",{className:"text-center",children:[s.jsx(is,{className:"h-12 w-12 text-blue-200 mx-auto mb-4"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[s.jsx("span",{className:"text-lg font-medium text-white",children:"Choose photo"}),s.jsx("br",{}),s.jsx("span",{className:"text-sm text-blue-100",children:"Click to select a file (Max 20MB)"})]}),s.jsx("input",{id:"file-upload",type:"file",accept:"image/*",onChange:oe,className:"hidden","data-testid":"input-guest-file"})]}),s.jsx("p",{className:"text-xs text-blue-100",children:"Supported formats: JPG, PNG, MP4, MOV, etc."})]})}),s.jsx(fs,{control:E.control,name:"uploadedBy",render:({field:ie})=>s.jsxs(rs,{children:[s.jsx(qt,{className:"text-white",children:"Your Full Name"}),s.jsx(qt,{className:"text-red-500",children:" *"}),s.jsx(ns,{children:s.jsx(xe,{placeholder:"",className:"bg-white/10 backdrop-blur-lg text-white placeholder-white/60 border-white/20 focus-visible:ring-white/30 focus-visible:ring-offset-0",...ie,"data-testid":"input-uploaded-by"})}),s.jsx(as,{})]})}),s.jsx(fs,{control:E.control,name:"title",render:({field:ie})=>s.jsxs(rs,{children:[s.jsx(qt,{className:"text-white",children:"Title"}),s.jsx(qt,{className:"text-red-500",children:" *"}),s.jsx(ns,{children:s.jsx(xe,{placeholder:"",className:"bg-white/10 backdrop-blur-lg text-white placeholder-white/60 border-white/20 focus-visible:ring-white/30 focus-visible:ring-offset-0",...ie,"data-testid":"input-guest-title"})}),s.jsx(as,{})]})}),s.jsx(fs,{control:E.control,name:"description",render:({field:ie})=>s.jsxs(rs,{children:[s.jsx(qt,{className:"text-white",children:"Description (Optional)"}),s.jsx(ns,{children:s.jsx(zd,{placeholder:"",className:"resize-none bg-white/10 backdrop-blur-lg text-white placeholder-white/60 border-white/20 focus-visible:ring-white/30 focus-visible:ring-offset-0",rows:3,...ie,"data-testid":"textarea-guest-description"})}),s.jsx(as,{})]})}),s.jsx("div",{className:"flex justify-center",children:s.jsx(T,{type:"submit",disabled:Q.isPending||X||!b||!f,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 backdrop-blur-lg border border-blue-200 shadow-2xl transition-all hover:bg-white/15 hover:scale-105 hover:shadow-blue-500/50 hover:shadow-lg duration-200 px-8","data-testid":"button-submit-guest-upload",children:Q.isPending||X?"Uploading...":b?"Upload":"Verify upload code first"})})]})})}),s.jsx(hn,{value:"multiple",className:"mt-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-white font-medium",children:["Your Full Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(xe,{placeholder:"",value:W,onChange:ie=>G(ie.target.value),className:"mt-2 bg-white/10 backdrop-blur-lg text-white placeholder-white/60 border-white/20 focus-visible:ring-white/30 focus-visible:ring-offset-0","data-testid":"input-multiple-uploader-name"})]}),s.jsx("div",{className:"border-2 border-dashed border-white/30 bg-white/5 backdrop-blur-lg rounded-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(is,{className:"h-12 w-12 text-blue-200 mx-auto mb-4"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{htmlFor:"multiple-file-upload",className:"cursor-pointer",children:[s.jsx("span",{className:"text-lg font-medium text-white",children:"Add photos"}),s.jsx("br",{}),s.jsx("span",{className:"text-sm text-blue-100",children:"Click to select multiple files (Total max 10MB)"})]}),s.jsx("input",{id:"multiple-file-upload",type:"file",accept:"image/*",onChange:he,className:"hidden",multiple:!0,"data-testid":"input-multiple-files"})]}),s.jsxs("p",{className:"text-xs text-blue-100",children:["Total size: ",ye(re())," MB / 10 MB"]})]})}),z.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-white font-medium",children:["Selected Files (",z.length,")"]}),z.map(ie=>s.jsx(ge,{className:"bg-white/5 border-white/10",children:s.jsx(be,{className:"p-4",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:URL.createObjectURL(ie.file),alt:"Preview",className:"w-16 h-16 object-cover rounded-lg border border-white/20"}),s.jsx(da,{className:"absolute -bottom-1 -right-1 h-4 w-4 text-blue-600 bg-white rounded-full p-0.5"})]})}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:ie.file.name}),s.jsxs("p",{className:"text-sm text-blue-100",children:[ye(ie.file.size)," MB"]})]}),s.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:()=>B(ie.id),"data-testid":`button-remove-file-${ie.id}`,children:s.jsx(Pt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-white text-sm",children:["Title ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(xe,{placeholder:"Enter title",value:ie.title,onChange:me=>K(ie.id,"title",me.target.value),className:"mt-1 bg-white/10 backdrop-blur-lg text-white placeholder-white/60 border-white/20 focus-visible:ring-white/30 focus-visible:ring-offset-0","data-testid":`input-title-${ie.id}`})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-white text-sm",children:"Description (Optional)"}),s.jsx(xe,{placeholder:"",value:ie.description,onChange:me=>K(ie.id,"description",me.target.value),className:"mt-1 bg-white/10 backdrop-blur-lg text-white placeholder-white/60 border-white/20 focus-visible:ring-white/30 focus-visible:ring-offset-0","data-testid":`input-description-${ie.id}`})]})]})]})]})})},ie.id))]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(T,{onClick:we,disabled:te.isPending||L||!b||!f||z.length===0||!W.trim()||z.some(ie=>!ie.title.trim())||re()>10*1024*1024,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 backdrop-blur-lg border border-blue-200 shadow-2xl transition-all hover:bg-white/15 hover:scale-105 hover:shadow-blue-500/50 hover:shadow-lg duration-200 px-8","data-testid":"button-submit-multiple-upload",children:te.isPending||L?"Uploading...":b?z.length===0?"Select files first":W.trim()?z.some(ie=>!ie.title.trim())?"Add titles to all files":re()>10*1024*1024?"File size exceeds 10MB":`Upload ${z.length} Memories`:"Enter your name":"Verify upload code first"})})]})})]})})]}),s.jsx(ge,{className:"mt-6 bg-white/5 backdrop-blur-lg border border-white/10 shadow-xl",children:s.jsx(be,{className:"pt-6",children:s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("p",{className:"text-sm text-blue-200",children:"Your upload will be reviewed by the school administration"}),s.jsx("p",{className:"text-sm text-blue-200",children:"Only approved photos will appear in the memories section"}),s.jsx("p",{className:"text-sm text-blue-200",children:"Thank you for contributing to the school's memories!"})]})})})]})})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:s.jsxs(ge,{className:"w-full max-w-md bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"text-center",children:[s.jsxs(tt,{className:"flex items-center justify-center text-white text-2xl",children:[s.jsx(is,{className:"h-6 w-6 mr-2"}),"Enter Upload Code"]}),s.jsx("p",{className:"text-blue-100",children:"Please enter the upload code provided by your school to access the upload form."})]}),s.jsxs(be,{children:[s.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[s.jsx("div",{children:s.jsx(xe,{type:"text",placeholder:"XXXX-XXXX-XXXX-XXXX",value:y,onChange:ie=>{let me=ie.target.value.replace(/[^A-Za-z0-9]/g,"").toUpperCase().slice(0,16);me.length>4&&me.length<=8?me=me.slice(0,4)+"-"+me.slice(4):me.length>8&&me.length<=12?me=me.slice(0,4)+"-"+me.slice(4,8)+"-"+me.slice(8):me.length>12&&(me=me.slice(0,4)+"-"+me.slice(4,8)+"-"+me.slice(8,12)+"-"+me.slice(12)),N(me)},className:"bg-white/10 backdrop-blur-lg text-white placeholder-white/60 border-white/20 focus-visible:ring-white/30 focus-visible:ring-offset-0 placeholder:text-white",disabled:w,"data-testid":"input-upload-code",maxLength:19})}),!ne()&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-blue-100 mb-2",children:"Verification Code"}),s.jsx(xe,{type:"text",placeholder:"Enter 1234 to continue",value:A,onChange:ie=>R(ie.target.value),className:"bg-white/10 backdrop-blur-lg text-white placeholder:text-gray-100 border-white/20 focus-visible:ring-white/30 focus-visible:ring-offset-0",disabled:w,"data-testid":"input-verification-code",maxLength:4}),s.jsx("p",{className:"text-xs text-blue-200 mt-1",children:`Enter "1234" to verify you're human`})]}),u&&s.jsx("div",{className:"text-red-400 text-sm text-center bg-red-400/10 p-3 rounded-lg border border-red-400/20",children:u}),s.jsx(T,{type:"submit",disabled:!y.trim()||w,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 backdrop-blur-lg border border-blue-200 shadow-2xl transition-all hover:bg-white/15 hover:scale-105 hover:shadow-blue-500/50 hover:shadow-lg duration-200","data-testid":"button-verify-code",children:w?"Verifying...":"Verify Code"})]}),s.jsxs("div",{className:"mt-6 text-center",children:[s.jsx("p",{className:"text-sm text-blue-200",children:"Don't have an upload code? Contact your school administration."}),s.jsxs("p",{className:"text-sm text-blue-200 mt-2",children:["Have an account?"," ",s.jsx(tb,{href:"/","data-testid":"link-login",children:s.jsx("span",{className:"text-blue-300 hover:text-white underline cursor-pointer transition-colors",children:"Login"})})]})]})]})]})})}function Uv(){const[,e]=us();return d.useEffect(()=>{const t=localStorage.getItem("user");if(t)try{if(JSON.parse(t).userType==="viewer"){e("/viewer-dashboard?tab=memory_upload");return}}catch(r){console.error("Error parsing user data:",r)}e("/guest-upload")},[e]),s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-white",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{children:"Redirecting to memory upload..."})]})})}function LD(){var X;const[,e]=us(),[t,r]=d.useState(null),[n,a]=d.useState(!1),[i,o]=d.useState(!1),l=Fx(),[c,u]=d.useState(()=>{const P=localStorage.getItem("alumni-request-form");return P?JSON.parse(P):{selectedSchool:"",firstName:"",middleName:"",lastName:"",noNameChange:!1,admissionYear:"",graduationYear:"",didNotGraduate:!1,postHeld:"",studentName:"",studentAdmissionYear:"",additionalInfo:""}}),{data:m=[]}=Ze({queryKey:["/api/alumni-badges",t==null?void 0:t.id],enabled:!!t}),p=(()=>{if(!t||!t.userType)return"Unknown";const P=m.filter(_=>_.status==="verified"),L=m.length;switch(t.userType.toLowerCase()){case"student":return"Student";case"viewer":return L>0?`Alumni(${P.length})`:"Viewer";case"school":return"School Admin";case"super_admin":return"Super Admin";default:return"Unknown"}})(),{toast:y}=ks(),{data:N=[]}=Ze({queryKey:["/api/schools"],enabled:!!t}),{data:f=[]}=Ze({queryKey:["/api/notifications",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!(t!=null&&t.id))return[];const P=await fetch(`/api/notifications/${t.id}`);if(!P.ok)throw new Error("Failed to fetch notifications");return P.json()},refetchInterval:3e4}),j=$n,b=N.find(P=>P.id===c.selectedSchool),x=(b==null?void 0:b.yearFounded)||1980,w=Array.from({length:j-x+1},(P,L)=>(j-L).toString());d.useEffect(()=>{const P=localStorage.getItem("user");if(!P){e("/");return}r(JSON.parse(P))},[e]),d.useEffect(()=>{const L=new URLSearchParams(window.location.search).get("school");L&&N.length>0&&N.some(V=>V.id===L)&&c.selectedSchool!==L&&z("selectedSchool",L)},[N]);const C=()=>{localStorage.removeItem("user"),e("/")},S=()=>{e("/viewer-dashboard")},M=nt({mutationFn:async P=>{await rt("PATCH",`/api/notifications/${P}/read`)},onSuccess:()=>{l.invalidateQueries({queryKey:["/api/notifications",t==null?void 0:t.id]})}}),A=P=>{M.mutate(P)},R=f.filter(P=>!P.isRead).length,z=(P,L)=>{let _={...c,[P]:L};P==="selectedSchool"&&(_={..._,admissionYear:"",graduationYear:"",didNotGraduate:!1,studentAdmissionYear:""}),P==="didNotGraduate"&&L===!0&&(_={..._,graduationYear:"did-not-graduate"}),P==="graduationYear"&&L!=="did-not-graduate"&&(_={..._,didNotGraduate:!1}),u(_),localStorage.setItem("alumni-request-form",JSON.stringify(_))},$=nt({mutationFn:async P=>await rt("POST","/api/alumni-requests",P),onMutate:async P=>{var E;await l.cancelQueries({queryKey:["/api/alumni-badges",t==null?void 0:t.id]}),await l.cancelQueries({queryKey:["/api/notifications",t==null?void 0:t.id]});const L=l.getQueryData(["/api/alumni-badges",t==null?void 0:t.id]),_=l.getQueryData(["/api/notifications",t==null?void 0:t.id]),V={id:`temp-${Date.now()}`,userId:t==null?void 0:t.id,school:((E=N.find(Y=>Y.id===P.schoolId))==null?void 0:E.name)||"Unknown School",fullName:P.fullName,graduationYear:P.graduationYear,admissionYear:P.admissionYear,status:"pending"};return l.setQueryData(["/api/alumni-badges",t==null?void 0:t.id],(Y=[])=>[...Y,V]),y({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Request Submitted",description:"Your alumni status request has been submitted successfully. You will receive a response within 3-5 business days."}),localStorage.removeItem("alumni-request-form"),setTimeout(()=>e("/viewer-dashboard"),1e3),{previousBadges:L,previousNotifications:_,optimisticBadge:V}},onError:(P,L,_)=>{l.setQueryData(["/api/alumni-badges",t==null?void 0:t.id],(_==null?void 0:_.previousBadges)||[]),l.setQueryData(["/api/notifications",t==null?void 0:t.id],(_==null?void 0:_.previousNotifications)||[]),y({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Submission Failed",description:P.message||"Unknown error occurred. Please try again.",variant:"destructive"})},onSuccess:()=>{l.invalidateQueries({queryKey:["/api/alumni-badges",t==null?void 0:t.id]}),l.invalidateQueries({queryKey:["/api/notifications",t==null?void 0:t.id]})}}),W=()=>{if(!c.selectedSchool||!c.admissionYear||!c.graduationYear&&!c.didNotGraduate){y({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const P=N.find(_=>_.id===c.selectedSchool);P&&console.log("Submitting request for school:",P.name);const L={userId:t==null?void 0:t.id,schoolId:c.selectedSchool,fullName:t==null?void 0:t.fullName,admissionYear:c.admissionYear,graduationYear:c.graduationYear,postHeld:c.postHeld||null,studentName:c.studentName||null,studentAdmissionYear:c.studentAdmissionYear||null,additionalInfo:c.additionalInfo||null,status:"pending"};$.mutate(L)},G=((X=N.find(P=>P.id===c.selectedSchool))==null?void 0:X.name)||"this school";return t?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-20 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-20 animate-float-delayed"})]})}),s.jsxs("div",{className:"relative z-10 min-h-screen",children:[s.jsxs("header",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-2xl relative",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-2 left-10 w-8 h-8 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-3 right-20 w-6 h-6 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-2 left-20 w-5 h-5 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-1 right-10 w-4 h-4 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"mx-auto px-2 sm:px-4 lg:px-8 xl:px-12 2xl:px-16 relative z-10",children:s.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(il,{className:"text-white text-xs sm:text-sm"})}),s.jsx("h1",{className:"ml-2 sm:ml-3 text-sm sm:text-xl font-semibold text-white truncate",children:"REQUEST ALUMNI STATUS"})]}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-4 flex-shrink-0",children:[s.jsx("div",{className:"sm:hidden relative",children:p==="Alumni"?s.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:m.filter(P=>P.status==="verified").length}):s.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full"})}),s.jsxs("div",{className:`hidden sm:block px-2 sm:px-3 py-1 rounded-full text-xs font-medium ${p.startsWith("Alumni")?"bg-green-500/20 text-green-200 border border-green-400/30":"bg-blue-500/20 text-blue-200 border border-blue-400/30"}`,children:[s.jsx("span",{className:"hidden md:inline",children:"Account Status: "}),p]}),s.jsx("div",{className:"relative",children:s.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>a(!n),className:"relative text-white hover:bg-white/20","data-testid":"button-notifications",children:[s.jsx(Yn,{className:"h-5 w-5"}),R>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:R})]})}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-white hidden xs:block",children:[s.jsx("span",{className:"hidden sm:inline",children:t.fullName}),s.jsx("span",{className:"sm:hidden",children:t.fullName.split(" ")[0]})]}),s.jsx("div",{className:"relative",children:s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>o(!i),className:"text-white hover:bg-white/20 p-2 bg-white/10 rounded-lg border border-white/20 ml-3","data-testid":"button-hamburger-menu",children:s.jsx(Jr,{className:"h-5 w-5"})})})]})]})})]}),n&&s.jsxs("div",{className:"notification-dropdown fixed top-16 right-16 w-72 sm:w-80 max-w-[calc(100vw-2rem)] bg-white/30 backdrop-blur-lg rounded-lg shadow-xl border border-white/20 z-[999999]",children:[s.jsx("div",{className:"p-4 border-b border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>a(!1),children:s.jsx(Pt,{className:"h-4 w-4 text-white hover:text-red-500"})})]})}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:f.length===0?s.jsx("div",{className:"p-4 text-center text-white/70",children:"No notifications yet"}):f.map(P=>s.jsx("div",{className:`p-4 border-b border-white/20 hover:bg-white/10 cursor-pointer ${P.isRead?"":"bg-blue-500/20"}`,onClick:()=>{P.isRead||A(P.id)},"data-testid":`notification-${P.id}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${P.isRead?"bg-gray-300":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-white",children:P.title}),s.jsx("p",{className:"text-sm text-white/80 mt-1",children:P.message}),s.jsx("p",{className:"text-xs text-white/60 mt-2",children:new Date(P.createdAt||"").toLocaleDateString()})]})]})},P.id))})]}),i&&s.jsx("div",{className:"hamburger-dropdown fixed top-16 right-4 w-48 bg-blue-500/40 backdrop-blur-lg border border-white/20 rounded-lg shadow-xl z-[999999]",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{o(!1),e("/viewer-dashboard")},"data-testid":"menu-home",children:[s.jsx(Xr,{className:"h-4 w-4 mr-3"}),"Home"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{o(!1),e("/viewer-settings")},"data-testid":"menu-settings",children:[s.jsx(Rs,{className:"h-4 w-4 mr-3"}),"Settings"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{o(!1),e("/cart")},"data-testid":"menu-cart",children:[s.jsx(xs,{className:"h-4 w-4 mr-3"}),"Cart"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm hover:bg-red-500/40 transition-colors text-red-500",onClick:()=>{o(!1),C()},"data-testid":"menu-logout",children:[s.jsx(Cn,{className:"h-4 w-4 mr-3"}),"Logout"]})]})}),s.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-8",children:[s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsx("h2",{className:"text-xl sm:text-3xl font-bold text-white",children:"Request Alumni Status"}),s.jsx("p",{className:"text-sm sm:text-base text-white/80 mt-2",children:"Please provide the following information to verify your alumni status"})]}),s.jsx("div",{className:"mb-6 sm:mb-8",children:s.jsxs(T,{onClick:S,variant:"outline",className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm px-3 sm:px-4 bg-white/10 backdrop-blur-lg border border-white/20 shadow-xl text-white hover:bg-white/20 hover:text-white",children:[s.jsx(zs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{children:"Back to Dashboard"})]})}),s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-4 sm:p-8",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[s.jsx(rr,{className:"h-5 w-5 text-green-600"}),s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Alumni Verification Form"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs(ue,{className:"block text-sm font-medium text-white mb-2",children:["Select School ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx(d6,{schools:N,value:c.selectedSchool,onValueChange:P=>z("selectedSchool",P),placeholder:"Search for the school you attended...",className:"w-full"})]}),s.jsxs("div",{className:"space-y-4 border-t border-white/20 pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Name Information"}),s.jsx("p",{className:"text-sm text-white/80",children:"If your name has changed since graduation (e.g., due to marriage), provide your name as it was during school."}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs(ue,{className:"block text-sm font-medium text-white mb-2",children:["First Name ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx(xe,{type:"text",placeholder:"First name",value:c.firstName,onChange:P=>z("firstName",P.target.value),disabled:c.noNameChange,className:`bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20 ${c.noNameChange?"opacity-50":""}`,"data-testid":"input-first-name"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"block text-sm font-medium text-white mb-2",children:"Middle Name"}),s.jsx(xe,{type:"text",placeholder:"Middle name (if any)",value:c.middleName,onChange:P=>z("middleName",P.target.value),disabled:c.noNameChange,className:`bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20 ${c.noNameChange?"opacity-50":""}`,"data-testid":"input-middle-name"})]}),s.jsxs("div",{children:[s.jsxs(ue,{className:"block text-sm font-medium text-white mb-2",children:["Last Name ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx(xe,{type:"text",placeholder:"Last name",value:c.lastName,onChange:P=>z("lastName",P.target.value),disabled:c.noNameChange,className:`bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20 ${c.noNameChange?"opacity-50":""}`,"data-testid":"input-last-name"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"noNameChange",checked:c.noNameChange,onChange:P=>{const L=P.target.checked;L&&(z("firstName",(t==null?void 0:t.firstName)||""),z("middleName",(t==null?void 0:t.middleName)||""),z("lastName",(t==null?void 0:t.lastName)||"")),z("noNameChange",L)},className:"rounded border-gray-300"}),s.jsx(ue,{htmlFor:"noNameChange",className:"text-sm text-white",children:"I have not had any name change since graduation"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[s.jsxs("div",{children:[s.jsxs(ue,{className:"block text-sm font-medium text-white mb-2",children:["Admission Year ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsxs(nr,{value:c.admissionYear,onValueChange:P=>z("admissionYear",P),disabled:!c.selectedSchool,children:[s.jsx(Ys,{className:"w-full bg-white/10 backdrop-blur-lg border border-white/20 text-white focus:border-white/40 focus:ring-white/20","data-testid":"select-admission-year",children:s.jsx(ar,{className:"placeholder:text-white",placeholder:c.selectedSchool?"Select admission year":"Select school first"})}),s.jsx(Ws,{className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 text-white",children:w.map(P=>s.jsx(Nt,{value:P.toString(),children:P},P))})]})]}),s.jsxs("div",{children:[s.jsxs(ue,{className:"block text-sm font-medium text-white mb-2",children:["Graduation Year ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsxs(nr,{value:c.didNotGraduate?"":c.graduationYear,onValueChange:P=>z("graduationYear",P),disabled:!c.selectedSchool||c.didNotGraduate,children:[s.jsx(Ys,{className:"w-full bg-white/10 backdrop-blur-lg border border-white/20 text-white focus:border-white/40 focus:ring-white/20","data-testid":"select-graduation-year",children:s.jsx(ar,{placeholder:c.selectedSchool?c.didNotGraduate?"Graduation year not applicable":"Select graduation year":"Select school first"})}),s.jsx(Ws,{className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 text-white",children:w.map(P=>s.jsx(Nt,{value:P.toString(),children:P},P))})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-3",children:[s.jsx(hg,{id:"did-not-graduate",checked:c.didNotGraduate,onCheckedChange:P=>z("didNotGraduate",P===!0),disabled:!c.selectedSchool}),s.jsxs("label",{htmlFor:"did-not-graduate",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer text-white",children:["I did not graduate from ",G]})]})]})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"block text-sm font-medium text-white mb-2",children:"Post Held (Optional)"}),s.jsx(xe,{type:"text",placeholder:"e.g., Head Boy, Class Captain, Sports Captain, etc.",value:c.postHeld,onChange:P=>z("postHeld",P.target.value),className:"w-full bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-post-held"})]}),s.jsxs("div",{className:"bg-white/5 backdrop-blur-lg border border-white/10 p-4 sm:p-6 rounded-lg",children:[s.jsx("h4",{className:"text-md font-medium text-white mb-4",children:"Student Reference (Optional)"}),s.jsx("p",{className:"text-sm text-white/80 mb-4",children:"Providing a student reference can help us verify your attendance at the school."}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[s.jsxs("div",{children:[s.jsx(ue,{className:"block text-sm font-medium text-white mb-2",children:"Name of Student You Remember"}),s.jsx(xe,{type:"text",placeholder:"Full name of a fellow student",value:c.studentName,onChange:P=>z("studentName",P.target.value),className:"w-full bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-student-name"})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"block text-sm font-medium text-white mb-2",children:"Their Admission Year"}),s.jsxs(nr,{value:c.studentAdmissionYear,onValueChange:P=>z("studentAdmissionYear",P),disabled:!c.selectedSchool||!c.studentName.trim(),children:[s.jsx(Ys,{className:"w-full bg-white/10 backdrop-blur-lg border border-white/20 text-white focus:border-white/40 focus:ring-white/20","data-testid":"select-student-admission-year",children:s.jsx(ar,{placeholder:c.selectedSchool?c.studentName.trim()?"Select their admission year":"Enter student name first":"Select school first"})}),s.jsx(Ws,{className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 text-white",children:w.map(P=>s.jsx(Nt,{value:P.toString(),children:P},P))})]})]})]})]}),s.jsxs("div",{children:[s.jsx(ue,{className:"block text-sm font-medium text-white mb-2",children:"Additional Information (Optional)"}),s.jsx(zd,{placeholder:"Any additional information that might help verify your attendance (e.g., house you belonged to, favorite teacher, memorable events, etc.)",value:c.additionalInfo,onChange:P=>z("additionalInfo",P.target.value),className:"w-full h-24 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"textarea-additional-info"})]}),s.jsx("div",{className:"pt-6 border-t border-gray-200",children:s.jsxs("div",{className:"flex flex-col gap-4 justify-between",children:[s.jsxs("div",{className:"text-sm text-white",children:[s.jsx("p",{children:"* Required fields"}),s.jsx("p",{children:"Your request will be reviewed within 3-5 business days."})]}),s.jsxs(T,{onClick:W,disabled:$.isPending,className:"bg-blue-500 hover:bg-blue-600 flex items-center justify-center space-x-2 px-6 sm:px-8 py-2 sm:py-3 w-full sm:w-auto disabled:opacity-50","data-testid":"button-submit-alumni-request",children:[s.jsx(D4,{className:"h-4 w-4"}),s.jsx("span",{children:$.isPending?"Submitting...":"Submit Request"})]})]})})]})]})})]})]})]}):null}var l5=["PageUp","PageDown"],c5=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],d5={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ac="Slider",[P0,$D,zD]=om(ac),[u5]=cr(ac,[zD]),[UD,Lm]=u5(ac),h5=d.forwardRef((e,t)=>{const{name:r,min:n=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:m,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:y=!1,form:N,...f}=e,j=d.useRef(new Set),b=d.useRef(0),w=o==="horizontal"?VD:BD,[C=[],S]=qn({prop:m,defaultProp:u,onChange:W=>{var X;(X=[...j.current][b.current])==null||X.focus(),h(W)}}),M=d.useRef(C);function A(W){const G=KD(C,W);$(W,G)}function R(W){$(W,b.current)}function z(){const W=M.current[b.current];C[b.current]!==W&&p(C)}function $(W,G,{commit:X}={commit:!1}){const P=XD(i),L=JD(Math.round((W-n)/i)*i+n,P),_=_h(L,[n,a]);S((V=[])=>{const E=YD(V,_,G);if(ZD(E,c*i)){b.current=E.indexOf(_);const Y=String(E)!==String(V);return Y&&X&&p(E),Y?E:V}else return V})}return s.jsx(UD,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:a,valueIndexToChangeRef:b,thumbs:j.current,values:C,orientation:o,form:N,children:s.jsx(P0.Provider,{scope:e.__scopeSlider,children:s.jsx(P0.Slot,{scope:e.__scopeSlider,children:s.jsx(w,{"aria-disabled":l,"data-disabled":l?"":void 0,...f,ref:t,onPointerDown:We(f.onPointerDown,()=>{l||(M.current=C)}),min:n,max:a,inverted:y,onSlideStart:l?void 0:A,onSlideMove:l?void 0:R,onSlideEnd:l?void 0:z,onHomeKeyDown:()=>!l&&$(n,0,{commit:!0}),onEndKeyDown:()=>!l&&$(a,C.length-1,{commit:!0}),onStepKeyDown:({event:W,direction:G})=>{if(!l){const L=l5.includes(W.key)||W.shiftKey&&c5.includes(W.key)?10:1,_=b.current,V=C[_],E=i*L*G;$(V+E,_,{commit:!0})}}})})})})});h5.displayName=ac;var[m5,f5]=u5(ac,{startEdge:"left",endEdge:"right",size:"width",direction:1}),VD=d.forwardRef((e,t)=>{const{min:r,max:n,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...m}=e,[h,p]=d.useState(null),y=xt(t,w=>p(w)),N=d.useRef(void 0),f=Ld(a),j=f==="ltr",b=j&&!i||!j&&i;function x(w){const C=N.current||h.getBoundingClientRect(),S=[0,C.width],A=Fg(S,b?[r,n]:[n,r]);return N.current=C,A(w-C.left)}return s.jsx(m5,{scope:e.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:s.jsx(p5,{dir:f,"data-orientation":"horizontal",...m,ref:y,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const C=x(w.clientX);o==null||o(C)},onSlideMove:w=>{const C=x(w.clientX);l==null||l(C)},onSlideEnd:()=>{N.current=void 0,c==null||c()},onStepKeyDown:w=>{const S=d5[b?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:S?-1:1})}})})}),BD=d.forwardRef((e,t)=>{const{min:r,max:n,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,m=d.useRef(null),h=xt(t,m),p=d.useRef(void 0),y=!a;function N(f){const j=p.current||m.current.getBoundingClientRect(),b=[0,j.height],w=Fg(b,y?[n,r]:[r,n]);return p.current=j,w(f-j.top)}return s.jsx(m5,{scope:e.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:s.jsx(p5,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:f=>{const j=N(f.clientY);i==null||i(j)},onSlideMove:f=>{const j=N(f.clientY);o==null||o(j)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:f=>{const b=d5[y?"from-bottom":"from-top"].includes(f.key);c==null||c({event:f,direction:b?-1:1})}})})}),p5=d.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=e,m=Lm(ac,r);return s.jsx(Xe.span,{...u,ref:t,onKeyDown:We(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):l5.concat(c5).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:We(e.onPointerDown,h=>{const p=h.target;p.setPointerCapture(h.pointerId),h.preventDefault(),m.thumbs.has(p)?p.focus():n(h)}),onPointerMove:We(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:We(e.onPointerUp,h=>{const p=h.target;p.hasPointerCapture(h.pointerId)&&(p.releasePointerCapture(h.pointerId),i(h))})})}),x5="SliderTrack",g5=d.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=Lm(x5,r);return s.jsx(Xe.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:t})});g5.displayName=x5;var E0="SliderRange",b5=d.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=Lm(E0,r),i=f5(E0,r),o=d.useRef(null),l=xt(t,o),c=a.values.length,u=a.values.map(p=>y5(p,a.min,a.max)),m=c>1?Math.min(...u):0,h=100-Math.max(...u);return s.jsx(Xe.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:l,style:{...e.style,[i.startEdge]:m+"%",[i.endEdge]:h+"%"}})});b5.displayName=E0;var T0="SliderThumb",v5=d.forwardRef((e,t)=>{const r=$D(e.__scopeSlider),[n,a]=d.useState(null),i=xt(t,l=>a(l)),o=d.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(qD,{...e,ref:i,index:o})}),qD=d.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:a,...i}=e,o=Lm(T0,r),l=f5(T0,r),[c,u]=d.useState(null),m=xt(t,x=>u(x)),h=c?o.form||!!c.closest("form"):!0,p=Id(c),y=o.values[n],N=y===void 0?0:y5(y,o.min,o.max),f=WD(n,o.values.length),j=p==null?void 0:p[l.size],b=j?GD(j,N,l.direction):0;return d.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${N}% + ${b}px)`},children:[s.jsx(P0.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(Xe.span,{role:"slider","aria-label":e["aria-label"]||f,"aria-valuemin":o.min,"aria-valuenow":y,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:m,style:y===void 0?{display:"none"}:e.style,onFocus:We(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),h&&s.jsx(w5,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:y},n)]})});v5.displayName=T0;var HD="RadioBubbleInput",w5=d.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const a=d.useRef(null),i=xt(a,n),o=Od(t);return d.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&m){const h=new Event("input",{bubbles:!0});m.call(l,t),l.dispatchEvent(h)}},[o,t]),s.jsx(Xe.input,{style:{display:"none"},...r,ref:i,defaultValue:t})});w5.displayName=HD;function YD(e=[],t,r){const n=[...e];return n[r]=t,n.sort((a,i)=>a-i)}function y5(e,t,r){const i=100/(r-t)*(e-t);return _h(i,[0,100])}function WD(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function KD(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),n=Math.min(...r);return r.indexOf(n)}function GD(e,t,r){const n=e/2,i=Fg([0,50],[0,n]);return(n-i(t)*r)*r}function QD(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function ZD(e,t){if(t>0){const r=QD(e);return Math.min(...r)>=t}return!0}function Fg(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function XD(e){return(String(e).split(".")[1]||"").length}function JD(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var N5=h5,eI=g5,tI=b5,sI=v5;const j5=d.forwardRef(({className:e,...t},r)=>s.jsxs(N5,{ref:r,className:$e("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(eI,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(tI,{className:"absolute h-full bg-primary"})}),s.jsx(sI,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));j5.displayName=N5.displayName;const Yt=300,vu=200;function rI({isOpen:e,onClose:t,imageFile:r,onSave:n}){const a=d.useRef(null),i=d.useRef(null),[o,l]=d.useState(null),[c,u]=d.useState(1),[m,h]=d.useState({x:0,y:0}),[p,y]=d.useState(!1),[N,f]=d.useState({x:0,y:0}),[j,b]=d.useState(null),[x,w]=d.useState(!1);d.useEffect(()=>{if(!r)return;const P=new Image;P.onload=()=>{if(P.width<vu||P.height<vu){b(`Image is too small. Minimum size is ${vu}x${vu} pixels.`),l(null);return}b(null),l(P);const _=500,V=Math.min(_/P.width,_/P.height),E=P.width*V,Y=P.height*V,oe=(Math.max(Yt/E,Yt/Y)+4)/2;u(oe),h({x:0,y:0})},P.onerror=()=>{b("Failed to load image. Please try a different image."),l(null)};const L=URL.createObjectURL(r);return P.src=L,()=>URL.revokeObjectURL(L)},[r]);const C=d.useCallback(()=>{const P=a.current,L=i.current;if(!P||!L||!o)return;const _=P.getContext("2d"),V=L.getContext("2d");if(!_||!V)return;const E=500,Y=Math.min(E/o.width,E/o.height),Z=o.width*Y,ne=o.height*Y;P.width=Z,P.height=ne,_.clearRect(0,0,Z,ne);const oe=Z*c,pe=ne*c,he=(Z-Yt)/2,B=(ne-Yt)/2,K=he+Yt/2,re=B+Yt/2,ye=Math.max(0,(oe-Yt)/2),Q=Math.max(0,(pe-Yt)/2),te=Math.max(-ye,Math.min(ye,m.x)),ve=Math.max(-Q,Math.min(Q,m.y)),we=K-oe/2+te,Ne=re-pe/2+ve;_.drawImage(o,we,Ne,oe,pe),_.fillStyle="rgba(0, 0, 0, 0.5)",_.fillRect(0,0,Z,ne),_.save(),_.beginPath();const ie=he+Yt/2,me=B+Yt/2,Ae=Yt/2;_.arc(ie,me,Ae,0,2*Math.PI),_.clip(),_.clearRect(he,B,Yt,Yt),_.drawImage(o,we,Ne,oe,pe),_.restore(),_.strokeStyle="#ffffff",_.lineWidth=2,_.beginPath(),_.arc(ie,me,Ae,0,2*Math.PI),_.stroke(),_.fillStyle="#ffffff";const at=3;[0,Math.PI/2,Math.PI,3*Math.PI/2].forEach(it=>{const F=ie+Math.cos(it)*(Ae-10),g=me+Math.sin(it)*(Ae-10);_.beginPath(),_.arc(F,g,at,0,2*Math.PI),_.fill()}),L.width=100,L.height=100,V.clearRect(0,0,100,100),V.save(),V.beginPath(),V.arc(50,50,50,0,2*Math.PI),V.clip(),V.drawImage(P,he,B,Yt,Yt,0,0,100,100),V.restore(),V.strokeStyle="#ffffff",V.lineWidth=2,V.beginPath(),V.arc(50,50,49,0,2*Math.PI),V.stroke()},[o,c,m]);d.useEffect(()=>{C()},[C]);const S=o?(()=>{const L=Math.min(500/o.width,500/o.height),_=o.width*L,V=o.height*L;return Math.max(Yt/_,Yt/V)})():1,M=4,A=P=>{o&&(y(!0),f({x:P.clientX-m.x,y:P.clientY-m.y}))},R=P=>{if(!p||!o)return;const L=P.clientX-N.x,_=P.clientY-N.y,V=500,E=Math.min(V/o.width,V/o.height),Y=o.width*E,Z=o.height*E,ne=Y*c,oe=Z*c,pe=Math.max(0,(ne-Yt)/2),he=Math.max(0,(oe-Yt)/2),B=Math.max(-pe,Math.min(pe,L)),K=Math.max(-he,Math.min(he,_));h({x:B,y:K})},z=()=>{y(!1)},$=P=>{if(!o)return;const L=P[0],_=500,V=Math.min(_/o.width,_/o.height),E=o.width*V,Y=o.height*V,Z=E*L,ne=Y*L,oe=Math.max(0,(Z-Yt)/2),pe=Math.max(0,(ne-Yt)/2),he=Math.max(-oe,Math.min(oe,m.x)),B=Math.max(-pe,Math.min(pe,m.y));u(L),h({x:he,y:B})},W=()=>{if(!o)return;const P=Math.min(c+.2,M);$([P])},G=()=>{if(!o)return;const P=Math.max(c-.2,S);$([P])},X=async()=>{if(!(!o||!a.current)){w(!0);try{const P=document.createElement("canvas"),L=P.getContext("2d");if(!L)return;const _=1200;P.width=_,P.height=_;const V=Math.min(500/o.width,500/o.height),E=o.width*V,Y=o.height*V,Z=E*c,ne=Y*c,oe=E/2,pe=Y/2,he=oe+m.x,B=pe+m.y,K=he-Z/2,re=B-ne/2,ye=(E-Yt)/2,Q=(Y-Yt)/2,te=ye-K,ve=Q-re,we=te*(o.width/Z),Ne=ve*(o.height/ne),ie=Yt*(o.width/Z);L.save(),L.beginPath(),L.arc(_/2,_/2,_/2,0,2*Math.PI),L.clip(),L.drawImage(o,we,Ne,ie,ie,0,0,_,_),L.restore(),P.toBlob(me=>{me&&(n(me),t())},"image/jpeg",.9)}catch(P){console.error("Error creating crop:",P),b("Failed to crop image. Please try again.")}finally{w(!1)}}};return s.jsx(sr,{open:e,onOpenChange:t,children:s.jsxs(Hs,{className:"max-w-2xl bg-gray-900 border-gray-700 text-white","aria-describedby":"crop-dialog-description",children:[s.jsxs(Os,{children:[s.jsx(Ls,{className:"text-white",children:"Crop Logo Image"}),s.jsx(ao,{id:"crop-dialog-description",className:"text-gray-300",children:"Adjust the position and zoom of your logo to create a square crop. Use the controls below to position your image perfectly."})]}),s.jsx("div",{className:"space-y-4",children:j?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-red-400 mb-4",children:j}),s.jsx(T,{onClick:t,variant:"outline",className:"border-gray-600 text-white hover:bg-gray-800",children:"Try Different Image"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"relative border border-gray-600 rounded-lg overflow-hidden bg-gray-800 flex items-center justify-center",style:{minHeight:"400px"},children:o?s.jsx("canvas",{ref:a,className:"cursor-move",onMouseDown:A,onMouseMove:R,onMouseUp:z,onMouseLeave:z,style:{maxWidth:"100%",maxHeight:"400px"}}):s.jsx("div",{className:"text-gray-400",children:"Loading image..."})})}),s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Preview"}),s.jsx("div",{className:"border border-gray-600 rounded-lg overflow-hidden",children:s.jsx("canvas",{ref:i,className:"block"})})]})]}),o&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(T,{onClick:G,disabled:c<=S,variant:"outline",size:"icon",className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white disabled:opacity-30 h-9 w-9","data-testid":"button-zoom-out",children:s.jsx(hi,{className:"h-4 w-4"})}),s.jsx(j5,{value:[c],onValueChange:$,min:S,max:M,step:.1,className:"flex-1 [&_[role=slider]]:bg-white [&_[role=slider]]:border-white","data-testid":"slider-zoom"}),s.jsx(T,{onClick:W,disabled:c>=M,variant:"outline",size:"icon",className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white disabled:opacity-30 h-9 w-9","data-testid":"button-zoom-in",children:s.jsx(ui,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Drag to reposition • Zoom out to fit more, zoom in for details • Circular area will be saved as logo"})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsxs(T,{onClick:t,variant:"outline",className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl text-white","data-testid":"button-cancel-crop",children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsxs(T,{onClick:X,disabled:!o||x,className:"bg-blue-600 hover:bg-blue-700 text-white","data-testid":"button-save-logo",children:[s.jsx(eS,{className:"h-4 w-4 mr-2"}),x?"Saving...":"Save Logo"]})]})]})})]})})}function nI(){var ee;const[,e]=us(),[t,r]=d.useState(null),[n,a]=d.useState("profile"),[i,o]=d.useState(!1),[l,c]=d.useState(!1),[u,m]=d.useState(!1),{toast:h}=ks(),{userCurrency:p,setUserCurrency:y,formatPrice:N,convertPrice:f}=yi(),[j,b]=d.useState(""),[x,w]=d.useState(""),[C,S]=d.useState(""),[M,A]=d.useState(""),[R,z]=d.useState(!1),[$,W]=d.useState(""),[G,X]=d.useState(!1),[P,L]=d.useState(""),[_,V]=d.useState(!1),E=d.useRef(null),[Y,Z]=d.useState({email:"",username:"",schoolName:"",website:"",address:"",state:"",currentPassword:"",newPassword:"",confirmPassword:""}),[ne,oe]=d.useState(!1),[pe,he]=d.useState(!1),[B,K]=d.useState(!1),[re,ye]=d.useState(!1),[Q,te]=d.useState(null),[ve,we]=d.useState({email:"",username:"",schoolName:"",website:"",address:"",state:"",currentPassword:"",newPassword:"",confirmPassword:""}),[Ne,ie]=d.useState(2026),[me,Ae]=d.useState(10),[at,lt]=d.useState(!1),[it,F]=d.useState(""),[g,D]=d.useState(!1),[J,ce]=d.useState([]),[le,Re]=d.useState(null),[He,Ye]=d.useState(null),[fe,Ue]=d.useState(!1),[ot,Dt]=d.useState(!1),[Ft,zt]=d.useState(null),At=async O=>{if(!(!(Te!=null&&Te.id)||!(t!=null&&t.id)))try{const k=new FormData;k.append("schoolLogo",O,"logo.jpg");const se=await(await fetch(`/api/schools/${Te.id}/logo`,{method:"POST",headers:{Authorization:`Bearer ${t.id}`},body:k})).json();if(se.school)ke.invalidateQueries({queryKey:["/api/schools",t.id]}),h({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Logo updated successfully",description:"Your school logo has been saved."});else throw new Error(se.message||"Upload failed")}catch(k){console.error("Logo upload failed:",k),h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Upload failed",description:"Failed to save logo. Please try again.",variant:"destructive"})}};d.useEffect(()=>{const O=localStorage.getItem("user");if(!O){e("/");return}const k=JSON.parse(O);r(k),Z(ae=>({...ae,email:k.email||"",username:k.username||"",schoolName:k.firstName||"",website:"",address:"",state:""})),new URLSearchParams(window.location.search).get("tab")==="revenue"&&a("revenue")},[e]);const{data:Te}=Ze({queryKey:["/api/schools",t==null?void 0:t.schoolId],enabled:!!(t!=null&&t.schoolId)}),{data:Jt=[]}=Ze({queryKey:["/api/notifications",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!(t!=null&&t.id))return[];const O=await fetch(`/api/notifications/${t.id}`);if(!O.ok)throw new Error("Failed to fetch notifications");return O.json()},refetchInterval:3e4}),de=Jt.filter(O=>!O.isRead).length,H=nt({mutationFn:async O=>{await rt("PATCH",`/api/notifications/${O}/read`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",t==null?void 0:t.id]})}}),Je=O=>{H.mutate(O)},wt=nt({mutationFn:async()=>{t!=null&&t.id&&await rt("DELETE",`/api/notifications/user/${t.id}/clear-all`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",t==null?void 0:t.id]}),h({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"All notifications cleared",description:"Your notification history has been cleared."})}}),Ge=()=>{wt.mutate()},ut=O=>{if(!O)return"";const U=new Date().getTime()-new Date(O).getTime(),se=Math.floor(U/1e3),ae=Math.floor(se/60),Ee=Math.floor(ae/60),Fe=Math.floor(Ee/24);return se<60?"Just now":ae<60?`${ae} minute${ae>1?"s":""} ago`:Ee<24?`${Ee} hour${Ee>1?"s":""} ago`:Fe<7?`${Fe} day${Fe>1?"s":""} ago`:new Date(O).toLocaleDateString()};d.useEffect(()=>{Te&&Z(O=>({...O,website:Te.website||"",address:Te.address||"",state:Te.state||""}))},[Te]);const{data:Ie}=Ze({queryKey:["/api/banks"]});d.useEffect(()=>{function O(k){E.current&&!E.current.contains(k.target)&&z(!1)}return document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[]);const{data:Rt,isLoading:Ve}=Ze({queryKey:["/api/yearbook-codes/school",t==null?void 0:t.schoolId],enabled:!!(t!=null&&t.schoolId)&&n==="codes"}),{data:vt=[],isLoading:I}=Ze({queryKey:["/api/schools",Te==null?void 0:Te.id,"payment-history"],enabled:!!(Te!=null&&Te.id)&&!!(t!=null&&t.id)&&n==="payments"}),{data:Pe=[],isLoading:Me}=Ze({queryKey:["/api/schools",Te==null?void 0:Te.id,"sales-history"],enabled:!!(Te!=null&&Te.id)&&!!(t!=null&&t.id)&&n==="payments"}),{data:Be=[],isLoading:gt}=Ze({queryKey:["/api/users",t==null?void 0:t.id,"login-activity"],enabled:!!(t!=null&&t.id)&&n==="security"}),{data:ht,isLoading:Ds}=Ze({queryKey:["/api/users",t==null?void 0:t.id,"recent-login"],enabled:!!(t!=null&&t.id)&&n==="security"}),Nr=()=>s.jsx("div",{className:"space-y-4 sm:space-y-6 max-w-4xl",children:s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{className:"p-4 sm:p-6",children:s.jsx(tt,{className:"text-lg sm:text-xl text-white",children:"Display Preferences"})}),s.jsxs(be,{className:"space-y-4 sm:space-y-6 p-4 sm:p-6 pt-0",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ue,{htmlFor:"currency-preference",className:"text-sm font-medium text-white","data-testid":"label-currency-preference",children:"Preferred Currency Display"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(nr,{value:p,onValueChange:O=>y(O),"data-testid":"select-currency",children:[s.jsx(Ys,{className:"w-full bg-white/10 backdrop-blur-lg border border-white/20 text-white",children:s.jsx(ar,{placeholder:"Select currency"})}),s.jsxs(Ws,{className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 text-white",children:[s.jsx(Nt,{value:"USD",className:"text-white hover:bg-white/20","data-testid":"option-usd",children:"USD ($) - US Dollar"}),s.jsx(Nt,{value:"NGN",className:"text-white hover:bg-white/20","data-testid":"option-ngn",children:"NGN (₦) - Nigerian Naira"})]})]}),s.jsx("p",{className:"text-xs text-white/70",children:"Choose how prices are displayed throughout the application. All transactions are processed in USD."})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Price Preview"}),s.jsxs("div",{className:"bg-white/5 backdrop-blur-lg border border-white/20 rounded-lg p-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-white/80",children:"School Year Access:"}),s.jsx("span",{className:"font-medium text-white",children:N(16.99)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-white/80",children:"Viewer Year Access:"}),s.jsx("span",{className:"font-medium text-white",children:N(6.99)})]}),s.jsx("p",{className:"text-xs text-white/60 mt-2",children:p==="NGN"?"Prices converted from USD at current exchange rate":"Base prices in USD"})]})]})]})]})}),Gs=()=>{var k,U,se;const O=(Te==null?void 0:Te.paystackSubaccountCode)&&(Te==null?void 0:Te.subaccountStatus)==="active";return s.jsx("div",{className:"space-y-4 sm:space-y-6 max-w-4xl",children:O&&!_?s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{className:"p-4 sm:p-6",children:s.jsxs(tt,{className:"flex items-center text-green-400",children:[s.jsx(bn,{className:"h-5 w-5 mr-2"}),"Revenue Sharing Active"]})}),s.jsx(be,{className:"p-4 sm:p-6 pt-0",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-green-500/20 backdrop-blur-lg border border-green-400/30 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium text-green-100 mb-2",children:"Your revenue sharing is successfully configured!"}),s.jsxs("div",{className:"text-sm text-green-200 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Revenue Share:"})," You receive ",(Te==null?void 0:Te.revenueSharePercentage)||80,"% of all yearbook sales"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Bank Account:"})," ****",(k=Te==null?void 0:Te.bankAccountNumber)==null?void 0:k.slice(-4)]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Status:"})," Active and ready to receive payments"]})]})]}),s.jsxs("div",{className:"flex items-start space-x-3 text-sm text-white/70",children:[s.jsx(L7,{className:"h-4 w-4 mt-1 text-blue-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"How it works:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 mt-1",children:[s.jsx("li",{children:"When viewers purchase yearbooks, 80% goes directly to your bank account"}),s.jsx("li",{children:"Payments are processed automatically through Paystack"}),s.jsx("li",{children:"You'll receive settlements according to Paystack's schedule"})]})]})]}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsxs(T,{onClick:wo,variant:"outline",className:"w-full sm:w-auto text-black hover:bg-white/20 backdrop-blur-lg border border-white/20 hover:text-white","data-testid":"button-change-account",children:[s.jsx(zr,{className:"h-4 w-4 mr-2"}),"Change Bank Account"]}),s.jsx("p",{className:"text-xs text-white/60 mt-2",children:"Need to update your bank account? Click above to change your payment details."})]})]})})]}):s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"p-4 sm:p-6",children:[s.jsxs(tt,{className:"flex items-center text-white",children:[s.jsx(tl,{className:"h-5 w-5 mr-2"}),_?"Change Bank Account":"Set Up Revenue Sharing"]}),s.jsx("p",{className:"text-sm text-white/70",children:_?"Update your bank account details for receiving revenue payments.":"Configure your bank account to automatically receive 80% of yearbook sales revenue."}),_&&s.jsx("div",{className:"flex items-center space-x-2 mt-2",children:s.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>V(!1),"data-testid":"button-cancel-change",children:[s.jsx(Pt,{className:"h-4 w-4 mr-1"}),"Cancel"]})})]}),s.jsxs(be,{className:"p-4 sm:p-6 pt-0",children:[s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"bg-blue-500/20 backdrop-blur-lg border border-blue-400/30 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(id,{className:"h-5 w-5 text-blue-400 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-200",children:[s.jsx("p",{className:"font-medium mb-1 text-white",children:"Revenue Split Details:"}),s.jsxs("ul",{className:"space-y-1",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Your school receives:"})," 80% of every yearbook sale"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Platform fee:"})," 20% (covers processing, hosting, and maintenance)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Payment processor:"})," Paystack (secure and reliable)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Settlement:"})," Automatic transfer to your bank account"]})]})]})]})})}),s.jsxs("form",{onSubmit:Pn,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"Select Bank"}),s.jsx(ue,{className:"text-sm font-medium text-red-500",children:" *"}),s.jsxs("div",{className:"relative mt-1",ref:E,children:[s.jsxs("div",{className:"flex items-center w-full px-3 py-2 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20 rounded-md cursor-pointer hover:border-white/40",onClick:()=>z(!R),"data-testid":"select-bank",children:[s.jsx(ds,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("input",{type:"text",value:C,onChange:ae=>S(ae.target.value),placeholder:"Search for your bank...",className:"flex-1 outline-none bg-transparent",onFocus:()=>z(!0)})]}),R&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-blue-700/100 backdrop-blur-lg border border-white/20 text-white max-h-60 overflow-auto",children:((se=(U=Ie==null?void 0:Ie.data)==null?void 0:U.filter(ae=>ae.name.toLowerCase().includes(C.toLowerCase())))==null?void 0:se.map(ae=>s.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-white",onMouseDown:Ee=>{Ee.preventDefault(),w(ae.code),A(ae.name),S(ae.name),z(!1)},"data-testid":`bank-option-${ae.code}`,children:ae.name},ae.code)))||[]})]})]}),s.jsxs("div",{children:[s.jsx(ue,{htmlFor:"accountNumber",className:"text-white","data-testid":"label-account-number",children:"Account Number"}),s.jsx(xe,{id:"accountNumber",type:"text",value:j,onChange:ae=>b(ae.target.value.replace(/\D/g,"")),placeholder:"Enter your 10-digit account number",maxLength:10,className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50","data-testid":"input-account-number"}),j&&x&&s.jsx("div",{className:"mt-2",children:G?s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[s.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full"}),s.jsx("span",{children:"Verifying account..."})]}):$?s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-200 bg-green-500/20 backdrop-blur-lg border border-green-400/30 rounded-md p-2",children:[s.jsx(bn,{className:"h-4 w-4"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Account Holder:"})," ",$]})]}):P?s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-red-200 bg-red-500/20 backdrop-blur-lg border border-red-400/30 rounded-md p-2",children:[s.jsx(id,{className:"h-4 w-4"}),s.jsx("span",{children:P})]}):null}),s.jsx("p",{className:"text-xs text-white/60 mt-1",children:$?"Account verified! You can proceed with the setup.":"This will be verified with your bank in real-time."})]})]}),s.jsx(T,{type:"submit",disabled:(_?tn.isPending:Kn.isPending)||!j||!x||!$,className:"w-full","data-testid":_?"button-update-account":"button-setup-revenue-sharing",children:_?tn.isPending?"Updating Account...":"Update Bank Account":Kn.isPending?"Setting up...":"Set Up Revenue Sharing"})]}),s.jsx("div",{className:"mt-6 text-xs text-gray-500",children:s.jsx("p",{children:"By setting up revenue sharing, you agree to receive payments through Paystack. Your bank details will be securely stored and used only for payment processing."})})]})]})})},Fr=()=>{Yl(e)},Sn=()=>{localStorage.removeItem("user"),e("/")},vo=async(O,k)=>{if(!O||O.length!==10||!k){W(""),L("");return}X(!0),L("");try{const se=await(await rt("POST","/api/banks/verify-preview",{accountNumber:O,bankCode:k})).json();se.status?(W(se.data.account_name),L("")):(W(""),L(se.message||"Unable to verify account"))}catch{W(""),L("Error verifying account. Please try again.")}finally{X(!1)}},Kn=nt({mutationFn:async O=>(await rt("POST",`/api/schools/${t==null?void 0:t.schoolId}/create-subaccount`,O)).json(),onSuccess:O=>{O.status?(h({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Revenue sharing setup successful!",description:`Your account is now set up to receive 80% of yearbook sales. Account holder: ${O.data.account_holder_name}`}),ke.invalidateQueries({queryKey:["/api/schools",t==null?void 0:t.schoolId]}),b(""),w(""),W(""),L("")):h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Setup failed",description:O.message||"Failed to set up revenue sharing. Please try again.",variant:"destructive"})},onError:O=>{h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Error",description:O.message||"An error occurred while setting up revenue sharing.",variant:"destructive"})}}),tn=nt({mutationFn:async O=>(await rt("POST",`/api/schools/${t==null?void 0:t.schoolId}/update-account`,O)).json(),onSuccess:O=>{O.status?(h({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Bank account updated successfully!",description:`Your new account (${O.data.account_holder_name}) is now set up to receive payments.`}),ke.invalidateQueries({queryKey:["/api/schools",t==null?void 0:t.schoolId]}),b(""),w(""),W(""),L(""),V(!1)):h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Update failed",description:O.message||"Failed to update bank account. Please try again.",variant:"destructive"})},onError:O=>{h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Error",description:O.message||"An error occurred while updating bank account.",variant:"destructive"})}});Le.useEffect(()=>{const O=setTimeout(()=>{j&&x&&vo(j,x)},500);return()=>clearTimeout(O)},[j,x]);const Pn=O=>{if(O.preventDefault(),!j||!x){h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Missing information",description:"Please provide both bank account number and select a bank.",variant:"destructive"});return}if(!$){h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Account verification required",description:"Please wait for account verification to complete.",variant:"destructive"});return}_?tn.mutate({bankAccountNumber:j,bankCode:x}):Kn.mutate({bankAccountNumber:j,bankCode:x})},wo=()=>{V(!0),b(""),w(""),W(""),L("")},ja=nt({mutationFn:async O=>{if(!t)throw new Error("No user found");return(await rt("PATCH",`/api/users/${t.id}`,O)).json()},onSuccess:O=>{localStorage.setItem("user",JSON.stringify(O)),r(O),Z(k=>({...k,email:O.email||"",username:O.username||"",schoolName:O.schoolName||"",website:O.website||"",address:O.address||"",state:O.state||""})),h({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Profile updated",description:"Your profile has been successfully updated."}),te(null),ye(!1)},onError:O=>{h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Update failed",description:O.message||"Failed to update profile",variant:"destructive"}),ye(!1)}}),Or=O=>{if(!t)return;const k=ve[O];if(!["website","address","state"].includes(O)&&!k.trim()){h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Invalid input",description:"Field cannot be empty",variant:"destructive"});return}if(ye(!0),["website","address","state"].includes(O)){if(!(Te!=null&&Te.id)){h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Error",description:"School information not found",variant:"destructive"}),ye(!1);return}(async()=>{try{await rt("PATCH",`/api/schools/${Te.id}`,{[O]:k||null}),Z(se=>({...se,[O]:k})),ke.invalidateQueries({queryKey:["/api/schools",t==null?void 0:t.schoolId]}),h({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Updated successfully",description:`${O.charAt(0).toUpperCase()+O.slice(1)} has been updated`}),te(null)}catch(se){h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Update failed",description:se.message||`Failed to update ${O}`,variant:"destructive"})}finally{ye(!1)}})()}else ja.mutate({[O]:k})},sn=O=>{te(null),we(k=>({...k,[O]:Y[O]}))},rn=O=>{te(O),we(k=>({...k,[O]:Y[O]}))},Ci=()=>s.jsxs("div",{className:"space-y-4 sm:space-y-6 max-w-4xl",children:[s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20",children:[s.jsx(et,{className:"p-4 sm:p-6",children:s.jsx(tt,{className:"text-lg sm:text-xl text-white",children:"Account Information"})}),s.jsxs(be,{className:"space-y-4 sm:space-y-6 p-4 sm:p-6 pt-0",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ue,{htmlFor:"schoolName","data-testid":"label-school-name",className:"text-sm font-medium text-white",children:"School Name"}),s.jsx("div",{className:"flex items-center gap-2",children:Q==="schoolName"?s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"schoolName",value:ve.schoolName,onChange:O=>we(k=>({...k,schoolName:O.target.value})),className:"flex-1 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-school-name-edit"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>Or("schoolName"),disabled:re,"data-testid":"button-save-school-name",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(js,{className:"h-4 w-4"})}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>sn("schoolName"),disabled:re,"data-testid":"button-cancel-school-name",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(Pt,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"schoolName",value:Y.schoolName,readOnly:!0,className:"flex-1 bg-gray-50 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-school-name"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>rn("schoolName"),"data-testid":"button-edit-school-name",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 touch-manipulation bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(zr,{className:"h-4 w-4"})})]})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ue,{htmlFor:"username","data-testid":"label-username",className:"text-sm font-medium text-white",children:"Username"}),s.jsx("div",{className:"flex items-center gap-2",children:Q==="username"?s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"username",value:ve.username,onChange:O=>we(k=>({...k,username:O.target.value})),className:"flex-1 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-username-edit"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>Or("username"),disabled:re,"data-testid":"button-save-username",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(js,{className:"h-4 w-4"})}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>sn("username"),disabled:re,"data-testid":"button-cancel-username",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(Pt,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"username",value:Y.username,readOnly:!0,className:"flex-1 bg-gray-50 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-username"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>rn("username"),"data-testid":"button-edit-username",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 touch-manipulation bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(zr,{className:"h-4 w-4"})})]})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ue,{className:"text-sm font-medium text-white",children:"School Logo"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center flex-shrink-0 overflow-hidden",children:Te!=null&&Te.logo?s.jsx("img",{src:Te.logo.startsWith("/")?Te.logo:`/${Te.logo}`,alt:"School logo",className:"w-full h-full object-cover",style:{aspectRatio:"1 / 1"}}):s.jsx(is,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:O=>{var U;const k=(U=O.target.files)==null?void 0:U[0];k&&(zt(k),Dt(!0),O.target.value="")},className:"w-full text-sm text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-white/10 file:text-white hover:file:bg-white/20 cursor-pointer","data-testid":"input-logo-upload"}),s.jsx("p",{className:"text-xs text-white/70 mt-1",children:"Upload any image. You'll be able to crop and adjust it before saving."})]})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ue,{htmlFor:"email","data-testid":"label-email",className:"text-sm font-medium text-white",children:"Email"}),s.jsx("div",{className:"flex items-center gap-2",children:Q==="email"?s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"email",type:"email",value:ve.email,onChange:O=>we(k=>({...k,email:O.target.value})),className:"flex-1 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-email-edit"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>Or("email"),disabled:re,"data-testid":"button-save-email",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(js,{className:"h-4 w-4"})}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>sn("email"),disabled:re,"data-testid":"button-cancel-email",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(Pt,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"email",type:"email",value:Y.email,readOnly:!0,className:"flex-1 bg-gray-50 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-email"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>rn("email"),"data-testid":"button-edit-email",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 touch-manipulation bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(zr,{className:"h-4 w-4"})})]})})]})]})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20",children:[s.jsxs(et,{className:"p-4 sm:p-6",children:[s.jsx(tt,{className:"text-lg sm:text-xl text-white",children:"School Information"}),s.jsx("p",{className:"text-sm text-blue-50",children:"Basic school information (contact support to modify)"})]}),s.jsx(be,{className:"space-y-4 p-4 sm:p-6 pt-0",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ue,{htmlFor:"yearFounded",className:"text-sm font-medium text-blue-50",children:"Year Founded"}),s.jsx(xe,{id:"yearFounded",value:(Te==null?void 0:Te.yearFounded)||"",readOnly:!0,className:"bg-gray-50 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-year-founded"})]}),s.jsxs("div",{children:[s.jsx(ue,{htmlFor:"country",className:"text-sm font-medium text-blue-50",children:"Country"}),s.jsx(xe,{id:"country",value:(Te==null?void 0:Te.country)||"",readOnly:!0,className:"bg-gray-50 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-country"})]}),s.jsxs("div",{children:[s.jsx(ue,{htmlFor:"city",className:"text-sm font-medium text-blue-50",children:"City"}),s.jsx(xe,{id:"city",value:(Te==null?void 0:Te.city)||"",readOnly:!0,className:"bg-gray-50 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-city"})]}),s.jsxs("div",{children:[s.jsx(ue,{htmlFor:"phoneNumber",className:"text-sm font-medium text-blue-50",children:"Phone Number"}),s.jsx(xe,{id:"phoneNumber",value:(Te==null?void 0:Te.phoneNumber)||"",readOnly:!0,className:"bg-gray-50 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-phone-number"})]})]})})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20",children:[s.jsxs(et,{className:"p-4 sm:p-6",children:[s.jsx(tt,{className:"text-lg sm:text-xl text-white",children:"Additional Information"}),s.jsx("p",{className:"text-sm text-blue-50",children:"Update optional school information"})]}),s.jsxs(be,{className:"space-y-4 p-4 sm:p-6 pt-0",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ue,{htmlFor:"website","data-testid":"label-website",className:"text-sm font-medium text-white",children:"School Website (Optional)"}),s.jsx("div",{className:"flex items-center gap-2",children:Q==="website"?s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"website",type:"url",value:ve.website||"",onChange:O=>we(k=>({...k,website:O.target.value})),className:"flex-1 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",placeholder:"https://www.yourschool.com","data-testid":"input-website-edit"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>Or("website"),disabled:re,"data-testid":"button-save-website",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(js,{className:"h-4 w-4"})}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>sn("website"),disabled:re,"data-testid":"button-cancel-website",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(Pt,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"website",value:(Te==null?void 0:Te.website)||"Not provided",readOnly:!0,className:"flex-1 bg-gray-50 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-website"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>rn("website"),"data-testid":"button-edit-website",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 touch-manipulation bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(zr,{className:"h-4 w-4"})})]})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ue,{htmlFor:"address","data-testid":"label-address",className:"text-sm font-medium text-white",children:"School Address (Optional)"}),s.jsx("div",{className:"flex items-start gap-2",children:Q==="address"?s.jsxs(s.Fragment,{children:[s.jsx("textarea",{id:"address",value:ve.address||"",onChange:O=>we(k=>({...k,address:O.target.value})),className:"flex-1 min-h-[80px] p-2 border rounded-md text-sm resize-none bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",placeholder:"Enter school address","data-testid":"textarea-address-edit"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>Or("address"),disabled:re,"data-testid":"button-save-address",className:"h-10 w-10 flex-shrink-0 mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(js,{className:"h-4 w-4"})}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>sn("address"),disabled:re,"data-testid":"button-cancel-address",className:"h-10 w-10 flex-shrink-0 mt-1 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(Pt,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("textarea",{id:"address",value:(Te==null?void 0:Te.address)||"Not provided",readOnly:!0,className:"flex-1 min-h-[80px] p-2 border rounded-md text-sm bg-gray-50 resize-none bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"textarea-address"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>rn("address"),"data-testid":"button-edit-address",className:"h-10 w-10 flex-shrink-0 mt-1 touch-manipulation bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(zr,{className:"h-4 w-4"})})]})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ue,{htmlFor:"state","data-testid":"label-state",className:"text-sm font-medium text-white",children:"State/Province (Optional)"}),s.jsx("div",{className:"flex items-center gap-2",children:Q==="state"?s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"state",value:ve.state||"",onChange:O=>we(k=>({...k,state:O.target.value})),className:"flex-1 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",placeholder:"Enter state or province","data-testid":"input-state-edit"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>Or("state"),disabled:re,"data-testid":"button-save-state",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(js,{className:"h-4 w-4"})}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>sn("state"),disabled:re,"data-testid":"button-cancel-state",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(Pt,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"state",value:(Te==null?void 0:Te.state)||"Not provided",readOnly:!0,className:"flex-1 bg-gray-50 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20","data-testid":"input-state"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>rn("state"),"data-testid":"button-edit-state",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 touch-manipulation bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",children:s.jsx(zr,{className:"h-4 w-4"})})]})})]})]})]})]}),yo=async()=>{if(t!=null&&t.schoolId){D(!0);try{const k=await(await rt("POST","/api/yearbook-codes/create",{schoolId:t.schoolId,year:Ne,count:me})).json();if(k.codes)ce(k.codes),h({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Codes Generated!",description:`Successfully generated ${me} yearbook codes for ${Ne}`}),ke.invalidateQueries({queryKey:["/api/yearbook-codes/school",t.schoolId]});else throw new Error(k.message||"Failed to generate codes")}catch(O){h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Generation Failed",description:O.message||"Failed to generate codes",variant:"destructive"})}finally{D(!1)}}},Ca=async O=>{try{await navigator.clipboard.writeText(O),h({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Copied!",description:`Code ${O} copied to clipboard`})}catch{h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Copy Failed",description:"Could not copy code to clipboard",variant:"destructive"})}},No=async()=>{if(!(!le||!(t!=null&&t.id))){Ue(!0);try{await rt("DELETE",`/api/yearbook-codes/${le.id}`),h({title:"Code deleted",description:`Code ${le.code} has been deleted`}),ke.invalidateQueries({queryKey:[`/api/yearbook-codes/school/${t.schoolId}`]}),Re(null)}catch{h({title:"Failed to delete code",description:"Could not delete the code. Please try again.",variant:"destructive"})}finally{Ue(!1)}}},jo=async()=>{if(!(!He||!(t!=null&&t.id)||!(t!=null&&t.schoolId))){Ue(!0);try{await rt("DELETE",`/api/yearbook-codes/school/${t.schoolId}/year/${He}`),h({title:"All codes deleted",description:`All codes for year ${He} have been deleted`}),ke.invalidateQueries({queryKey:[`/api/yearbook-codes/school/${t.schoolId}`]}),Ye(null)}catch{h({title:"Failed to delete codes",description:"Could not delete the codes. Please try again.",variant:"destructive"})}finally{Ue(!1)}}},Co=()=>{const O=(U=[],se="amount")=>(U==null?void 0:U.reduce((ae,Ee)=>ae+(Ee[se]||0),0))||0,k=(U,se)=>se==="NGN"?p==="USD"?N(U/1650,"USD"):N(U,"NGN"):N(f(U));return s.jsxs("div",{className:"space-y-4 sm:space-y-6 max-w-6xl",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{className:"p-4 sm:p-6",children:s.jsxs(tt,{className:"text-lg flex items-center text-white",children:[s.jsx(Nc,{className:"h-5 w-5 mr-2 text-red-400"}),"Total Purchases"]})}),s.jsxs(be,{className:"p-4 sm:p-6 pt-0",children:[s.jsx("div",{className:"text-3xl font-bold text-white",children:N(f(O(vt||[])))}),s.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Total amount spent on yearbook access"})]})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{className:"p-4 sm:p-6",children:s.jsxs(tt,{className:"text-lg flex items-center text-white",children:[s.jsx(Nc,{className:"h-5 w-5 mr-2 text-green-400"}),"Total Sales"]})}),s.jsxs(be,{className:"p-4 sm:p-6 pt-0",children:[s.jsx("div",{className:"text-3xl font-bold text-white",children:(()=>{var ae;const U=O(Pe||[]),se=(ae=Pe==null?void 0:Pe[0])==null?void 0:ae.currency;return k(U,se)})()}),s.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Revenue earned from viewer purchases"})]})]})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"p-4 sm:p-6",children:[s.jsxs(tt,{className:"text-lg sm:text-xl flex items-center text-white",children:[s.jsx(Ga,{className:"h-5 w-5 mr-2 text-red-400"}),"Purchase History"]}),s.jsx("p",{className:"text-sm text-white/70",children:"Your yearbook access purchases"})]}),s.jsx(be,{className:"p-4 sm:p-6 pt-0",children:I?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Oa,{className:"h-6 w-6 animate-spin text-white"})}):vt&&vt.length>0?s.jsx("div",{className:"space-y-3",children:vt.map(U=>s.jsx("div",{className:"bg-white/5 backdrop-blur-lg border border-white/20 rounded-lg p-4",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-white",children:U.description}),s.jsx("div",{className:"text-sm text-white/60 mt-1",children:new Date(U.date).toLocaleDateString()}),U.reference&&s.jsxs("div",{className:"text-xs text-white/50 mt-1",children:["Ref: ",U.reference]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"font-bold text-red-400",children:["-",N(f(U.amount))]})})]})},U.id))}):s.jsxs("div",{className:"text-center py-8 text-white/60",children:[s.jsx(Ga,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No purchase history"})]})})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"p-4 sm:p-6",children:[s.jsxs(tt,{className:"text-lg sm:text-xl flex items-center text-white",children:[s.jsx(Nc,{className:"h-5 w-5 mr-2 text-green-400"}),"Sales History"]}),s.jsx("p",{className:"text-sm text-white/70",children:"Revenue from viewer purchases"})]}),s.jsx(be,{className:"p-4 sm:p-6 pt-0",children:Me?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Oa,{className:"h-6 w-6 animate-spin text-white"})}):Pe&&Pe.length>0?s.jsx("div",{className:"space-y-3",children:Pe.map(U=>s.jsx("div",{className:"bg-white/5 backdrop-blur-lg border border-white/20 rounded-lg p-4",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-white",children:U.description}),s.jsx("div",{className:"text-sm text-white/60 mt-1",children:new Date(U.date).toLocaleDateString()}),U.buyerEmail&&s.jsxs("div",{className:"text-xs text-white/50 mt-1",children:["Buyer: ",U.buyerEmail]}),U.reference&&s.jsxs("div",{className:"text-xs text-white/50 mt-1",children:["Ref: ",U.reference]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-green-400",children:["+",k(U.amount,U.currency)]}),s.jsxs("div",{className:"text-xs text-white/50 mt-1",children:["Total: ",k(U.totalAmount,U.currency)]})]})]})},U.id))}):s.jsxs("div",{className:"text-center py-8 text-white/60",children:[s.jsx(Nc,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No sales history"})]})})]})]})},ko=()=>s.jsxs("div",{className:"space-y-4 sm:space-y-6 max-w-4xl",children:[s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"p-4 sm:p-6",children:[s.jsxs(tt,{className:"text-lg sm:text-xl flex items-center text-white",children:[s.jsx(na,{className:"h-5 w-5 mr-2"}),"Generate Yearbook Access Codes"]}),s.jsx("p",{className:"text-sm text-white/70",children:"Create access codes that allow viewers to unlock yearbooks without payment. Perfect for alumni events, school promotions, or special access."})]}),s.jsxs(be,{className:"space-y-4 sm:space-y-6 p-4 sm:p-6 pt-0",children:[s.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ue,{htmlFor:"year-select",className:"text-sm font-medium text-white",children:"Yearbook Year"}),s.jsxs(nr,{value:Ne.toString(),onValueChange:O=>ie(parseInt(O)),children:[s.jsx(Ys,{className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white","data-testid":"select-yearbook-year",children:s.jsx(ar,{placeholder:"Select year"})}),s.jsx(Ws,{className:"bg-white/10 backdrop-blur-lg border border-white/20",children:[2026,2025,2024,2023,2022,2021,2020].map(O=>s.jsx(Nt,{value:O.toString(),className:"text-white hover:bg-white/20",children:O},O))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ue,{htmlFor:"code-count",className:"text-sm font-medium text-white",children:"Number of Codes"}),s.jsxs(nr,{value:at?"custom":me.toString(),onValueChange:O=>{O==="custom"?(lt(!0),F("")):(lt(!1),Ae(parseInt(O)))},children:[s.jsx(Ys,{className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white","data-testid":"select-code-count",children:s.jsx(ar,{placeholder:"Select count"})}),s.jsxs(Ws,{className:"bg-white/10 backdrop-blur-lg border border-white/20",children:[[5,10,25,50,100].map(O=>s.jsxs(Nt,{value:O.toString(),className:"text-white hover:bg-white/20",children:[O," codes"]},O)),s.jsx(Nt,{value:"custom",className:"text-white hover:bg-white/20",children:"Custom amount"})]})]}),at&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ue,{htmlFor:"custom-code-count",className:"text-sm font-medium text-white",children:"Enter custom amount (1-100)"}),s.jsx(xe,{id:"custom-code-count",type:"number",min:"1",max:"100",value:it,onChange:O=>{const k=O.target.value;F(k);const U=parseInt(k);U>=1&&U<=100&&Ae(U)},placeholder:"Enter number (1-100)",className:"bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50","data-testid":"input-custom-code-count"})]})]})]}),s.jsxs(T,{onClick:yo,disabled:g,className:"w-full sm:w-auto text-white hover:bg-white/20 backdrop-blur-lg border border-white/20 hover:text-white bg-green-500/60","data-testid":"button-generate-codes",children:[g?s.jsx(Oa,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(na,{className:"h-4 w-4 mr-2"}),g?"Generating...":`Generate ${me} Codes`]}),J.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-medium text-white",children:["Generated Codes (",J.length,")"]}),s.jsxs(T,{className:"text-black hover:bg-white/20 backdrop-blur-lg border border-white/20 hover:text-white",variant:"outline",size:"sm",onClick:()=>{const O=J.map(k=>k.code).join(`
`);Ca(O)},children:[s.jsx(Hi,{className:"h-4 w-4 mr-1"}),"Copy All"]})]}),s.jsx("div",{className:"grid gap-3 max-h-96 overflow-y-auto",children:J.map(O=>s.jsxs("div",{className:"flex items-center justify-between bg-white/5 backdrop-blur-lg border border-white/20 rounded-lg p-4",children:[s.jsx("code",{className:"font-mono text-base font-bold text-blue-300","data-testid":`code-${O.id||O.code}`,children:O.code}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>Ca(O.code),"data-testid":`button-copy-${O.id||O.code}`,children:s.jsx(Hi,{className:"h-4 w-4 text-white"})})]},O.id||O.code))})]})]})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"p-4 sm:p-6",children:[s.jsx(tt,{className:"text-lg sm:text-xl text-white",children:"Previously Generated Codes"}),s.jsx("p",{className:"text-sm text-white/70",children:"View and manage all previously generated access codes for your school."})]}),s.jsx(be,{className:"p-4 sm:p-6 pt-0",children:Ve?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(Oa,{className:"h-6 w-6 animate-spin mr-2 text-white"}),s.jsx("span",{className:"text-white",children:"Loading codes..."})]}):Rt&&Rt.length>0?s.jsx("div",{className:"space-y-4",children:Object.entries(Rt.reduce((O,k)=>(O[k.year]||(O[k.year]=[]),O[k.year].push(k),O),{})).map(([O,k])=>s.jsxs("div",{className:"bg-white/5 backdrop-blur-lg border border-white/20 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-medium text-white",children:["Year ",O]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm text-white/60",children:[k.filter(U=>U.isUsed).length,"/",k.length," used"]}),s.jsxs(T,{variant:"destructive",size:"sm",onClick:()=>Ye(parseInt(O)),"data-testid":`button-delete-all-${O}`,children:[s.jsx(As,{className:"h-4 w-4 mr-1"}),"Delete All"]})]})]}),s.jsx("div",{className:"grid gap-3 max-h-96 overflow-y-auto",children:k.map(U=>s.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg ${U.isUsed?"bg-red-500/20 backdrop-blur-lg border border-red-400/30":"bg-green-500/20 backdrop-blur-lg border border-green-400/30"}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("code",{className:"font-mono text-base font-bold text-white",children:U.code}),s.jsx("span",{className:`text-xs px-2 py-1 rounded ${U.isUsed?"bg-red-500/30 text-red-200":"bg-green-500/30 text-green-200"}`,children:U.isUsed?"Used":"Available"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!U.isUsed&&s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>Ca(U.code),"data-testid":`button-copy-${U.id}`,children:s.jsx(Hi,{className:"h-4 w-4 text-white"})}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>Re(U),"data-testid":`button-delete-${U.id}`,children:s.jsx(As,{className:"h-4 w-4 text-red-400"})})]})]},U.id))})]},O))}):s.jsxs("div",{className:"text-center py-8 text-white/60",children:[s.jsx(na,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No codes generated yet"}),s.jsx("p",{className:"text-sm",children:"Generate some codes above to get started"})]})})]})]}),So=()=>s.jsxs("div",{className:"space-y-4 sm:space-y-6 max-w-6xl",children:[ht&&s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{className:"p-4 sm:p-6",children:s.jsxs(tt,{className:"text-lg sm:text-xl flex items-center text-white",children:[s.jsx(On,{className:"h-5 w-5 mr-2 text-green-400"}),"Most Recent Login"]})}),s.jsx(be,{className:"p-4 sm:p-6 pt-0",children:s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-white/70 text-sm",children:[s.jsx(I4,{className:"h-4 w-4 mr-2"}),s.jsxs("span",{children:["Device: ",ht.deviceType||"Unknown"," - ",ht.browser||"Unknown"]})]}),s.jsxs("div",{className:"flex items-center text-white/70 text-sm",children:[s.jsx(rl,{className:"h-4 w-4 mr-2"}),s.jsxs("span",{children:["OS: ",ht.os||"Unknown"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-white/70 text-sm",children:[s.jsx(Fl,{className:"h-4 w-4 mr-2"}),s.jsxs("span",{children:["Location: ",ht.city||ht.country||"Unknown"]})]}),s.jsxs("div",{className:"flex items-center text-white/70 text-sm",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:new Date(ht.createdAt).toLocaleString()})]})]})]})})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"p-4 sm:p-6",children:[s.jsxs(tt,{className:"text-lg sm:text-xl flex items-center text-white",children:[s.jsx(qr,{className:"h-5 w-5 mr-2 text-blue-400"}),"Login Activity"]}),s.jsx("p",{className:"text-sm text-white/70 mt-2",children:"Review your recent login history and security activity"})]}),s.jsx(be,{className:"p-4 sm:p-6 pt-0",children:gt?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Oa,{className:"h-6 w-6 animate-spin text-white"})}):Be&&Be.length>0?s.jsx("div",{className:"max-h-96 overflow-y-auto pr-2 space-y-3",children:Be.map((O,k)=>s.jsx("div",{className:"bg-white/5 backdrop-blur-lg border border-white/20 rounded-lg p-4",children:s.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-2",children:[s.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs ${O.loginStatus==="success"?"bg-green-500/20 text-green-200":"bg-red-500/20 text-red-200"}`,children:O.loginStatus==="success"?"Successful":"Failed"}),O.failureReason&&s.jsxs("span",{className:"text-xs text-red-300",children:["(",O.failureReason,")"]})]}),s.jsxs("div",{className:"text-white/80 text-sm",children:[O.browser," on ",O.os," - ",O.deviceType]}),s.jsxs("div",{className:"text-white/60 text-xs",children:[O.city||O.country||"Unknown location"," • ",O.ipAddress]})]}),s.jsx("div",{className:"text-white/60 text-xs whitespace-nowrap",children:new Date(O.createdAt).toLocaleString()})]})},O.id||k))}):s.jsxs("div",{className:"text-center py-8 text-white/60",children:[s.jsx(On,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No login activity recorded"})]})})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{className:"p-4 sm:p-6",children:s.jsxs(tt,{className:"text-lg sm:text-xl flex items-center text-white",children:[s.jsx(Rs,{className:"h-5 w-5 mr-2 text-purple-400"}),"Security Settings"]})}),s.jsx(be,{className:"p-4 sm:p-6 pt-0",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[s.jsx("h3",{className:"text-white font-medium mb-2",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-white/60 text-sm mb-3",children:"Add an extra layer of security to your account"}),s.jsx(T,{variant:"outline",size:"sm",className:"text-white border-white/20",disabled:!0,children:"Coming Soon"})]}),s.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[s.jsx("h3",{className:"text-white font-medium mb-2",children:"Change School Code"}),s.jsx("p",{className:"text-white/60 text-sm mb-3",children:"Update your school access code"}),s.jsx(T,{variant:"outline",size:"sm",className:"text-white border-white/20",disabled:!0,children:"Coming Soon"})]})]})})]})]}),ki=()=>{switch(n){case"profile":return Ci();case"display":return Nr();case"revenue":return Gs();case"payments":return Co();case"codes":return ko();case"security":return So();default:return Ci()}};return t?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-20 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-20 animate-float-delayed"})]})}),s.jsx("div",{className:"sticky top-0 z-50 bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-2xl relative",children:s.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 relative z-10",children:[s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 min-w-0 flex-1",children:[s.jsx(T,{variant:"ghost",size:"icon",onClick:Fr,className:"text-white hover:bg-white/20 flex-shrink-0","data-testid":"button-back",children:s.jsx(_s,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),s.jsx(T,{variant:"ghost",size:"icon",onClick:()=>c(!l),className:"text-white hover:bg-white/20 lg:hidden flex-shrink-0","data-testid":"button-sidebar-toggle",children:s.jsx(Jr,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),s.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-white truncate",children:"School Settings"})]}),s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-white truncate max-w-24 sm:max-w-none","data-testid":"text-user-name",children:[s.jsx("span",{className:"hidden sm:inline",children:t.fullName||t.username}),s.jsx("span",{className:"sm:hidden",children:(ee=t.fullName||t.username)==null?void 0:ee.split(" ")[0]})]}),s.jsx("div",{className:"relative",children:s.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>m(!u),className:"relative text-white hover:bg-white/20","data-testid":"button-notifications",children:[s.jsx(Yn,{className:"h-5 w-5"}),de>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:de})]})}),s.jsxs("div",{className:"relative",children:[s.jsx(T,{variant:"ghost",size:"icon",onClick:()=>o(!i),className:"text-white hover:bg-white/20 w-8 h-8 sm:w-10 sm:h-10","data-testid":"button-hamburger-menu",children:s.jsx(Jr,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),i&&s.jsx("div",{className:"hamburger-dropdown fixed top-16 right-4 w-48 bg-blue-600/70 backdrop-blur-lg border border-white/20 rounded-lg shadow-xl z-[999999]",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("button",{className:"flex items-center w-full px-3 sm:px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{o(!1),e("/school-dashboard")},"data-testid":"menu-home",children:[s.jsx(Xr,{className:"h-4 w-4 mr-2 sm:mr-3"}),"Home"]}),s.jsxs("button",{className:"flex items-center w-full px-3 sm:px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{o(!1),e("/school-settings")},"data-testid":"menu-settings",children:[s.jsx(Rs,{className:"h-4 w-4 mr-2 sm:mr-3"}),"Settings"]}),s.jsxs("button",{className:"flex items-center w-full px-3 sm:px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{o(!1),o5(e,"/cart")},"data-testid":"menu-cart",children:[s.jsx(xs,{className:"h-4 w-4 mr-2 sm:mr-3"}),"Cart"]}),s.jsx("div",{className:"border-t border-gray-100"}),s.jsxs("button",{className:"flex items-center w-full px-3 sm:px-4 py-2 text-sm text-red-500 hover:bg-red-500/40 transition-colors",onClick:()=>{o(!1),Sn()},"data-testid":"menu-logout",children:[s.jsx(Cn,{className:"h-4 w-4 mr-2 sm:mr-3"}),"Logout"]})]})})]})]})]})}),u&&s.jsxs("div",{className:"notification-dropdown fixed top-16 right-16 w-72 sm:w-80 max-w-[calc(100vw-2rem)] bg-blue-600/60 backdrop-blur-lg rounded-lg shadow-xl border border-white/20 z-[999999]",children:[s.jsx("div",{className:"p-4 border-b border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"}),s.jsxs("div",{className:"flex items-center gap-2",children:[Jt.length>0&&s.jsx(T,{variant:"ghost",size:"sm",onClick:Ge,className:"text-white/80 hover:text-white text-xs","data-testid":"button-clear-all-notifications",children:"Clear All"}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>m(!1),"data-testid":"button-close-notifications",children:s.jsx(Pt,{className:"h-4 w-4 text-white hover:text-red-500"})})]})]})}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:Jt.length===0?s.jsx("div",{className:"p-4 text-center text-white/70",children:"No notifications yet"}):Jt.map(O=>s.jsx("div",{className:`p-4 border-b border-white/20 hover:bg-white/10 cursor-pointer transition-colors ${O.isRead?"":"bg-blue-500/20"}`,onClick:()=>{O.isRead||Je(O.id)},"data-testid":`notification-${O.id}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${O.isRead?"bg-gray-300":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-white",children:O.title}),s.jsx("p",{className:"text-sm text-white/80 mt-1",children:O.message}),s.jsx("p",{className:"text-xs text-white/60 mt-2",children:ut(O.createdAt)})]})]})},O.id))})]}),l&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>c(!1)}),s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"hidden lg:block w-64 min-h-screen bg-white/10 backdrop-blur-lg border-r border-white/20 shadow-xl",children:s.jsx("div",{className:"p-4",children:s.jsxs("nav",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>a("profile"),className:`flex items-center w-full px-3 py-2 text-left text-white hover:text-blue-300 rounded-md bg-blue-500/20 backdrop-blur-lg  shadow-2xl cursor-pointer transition-all hover:bg-white/15 hover:border-blue-400 hover:shadow-lg transition-all duration-200 ${n==="profile"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,"data-testid":"tab-profile",children:[s.jsx(to,{className:"h-4 w-4 mr-2"}),"School Profile"]}),s.jsxs("button",{onClick:()=>a("display"),className:`flex items-center w-full px-3 py-2 text-left text-white hover:text-blue-300 rounded-md bg-blue-500/20 backdrop-blur-lg shadow-2xl cursor-pointer transition-all hover:bg-white/15 hover:border-blue-400  hover:shadow-lg transition-all duration-200 ${n==="display"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,"data-testid":"tab-display",children:[s.jsx(rl,{className:"h-4 w-4 mr-2"}),"Display Preferences"]}),s.jsxs("button",{onClick:()=>a("revenue"),className:`flex items-center w-full px-3 py-2 text-left text-white hover:text-blue-300 rounded-md bg-blue-500/20 backdrop-blur-lg shadow-2xl cursor-pointer transition-all hover:bg-white/15  hover:border-blue-400 hover:shadow-lg  transition-all duration-200 ${n==="revenue"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,"data-testid":"tab-revenue",children:[s.jsx(tl,{className:"h-4 w-4 mr-2"}),"Revenue Settings"]}),s.jsxs("button",{onClick:()=>a("payments"),className:`flex items-center w-full px-3 py-2 text-left text-white hover:text-blue-300 rounded-md bg-blue-500/20 backdrop-blur-lg shadow-2xl cursor-pointer transition-all hover:bg-white/15  hover:border-blue-400 hover:shadow-lg  transition-all duration-200 ${n==="payments"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,"data-testid":"tab-payments",children:[s.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Payment & Sales History"]}),s.jsxs("button",{onClick:()=>a("codes"),className:`flex items-center w-full px-3 py-2 text-left text-white hover:text-blue-300 rounded-md bg-blue-500/20 backdrop-blur-lg shadow-2xl cursor-pointer transition-all hover:bg-white/15  hover:border-blue-400 hover:shadow-lg  transition-all duration-200 ${n==="codes"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,"data-testid":"tab-codes",children:[s.jsx(na,{className:"h-4 w-4 mr-2"}),"Create Codes"]}),s.jsxs("button",{onClick:()=>a("security"),className:`flex items-center w-full px-3 py-2 text-left text-white hover:text-blue-300 rounded-md bg-blue-500/20 backdrop-blur-lg shadow-2xl cursor-pointer transition-all hover:bg-white/15  hover:border-blue-400 hover:shadow-lg  transition-all duration-200 ${n==="security"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,"data-testid":"tab-security",children:[s.jsx(On,{className:"h-4 w-4 mr-2"}),"Security"]})]})})}),s.jsx("div",{className:`fixed top-0 left-0 h-full w-64 bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl z-50 transform transition-transform duration-300 ease-in-out lg:hidden ${l?"translate-x-0":"-translate-x-full"}`,children:s.jsx("div",{className:"p-4 pt-20",children:s.jsxs("nav",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>{a("profile"),c(!1)},className:`flex items-center w-full px-3 py-3 text-left rounded-md transition-all duration-200 touch-manipulation ${n==="profile"?"bg-blue-500/30 text-white backdrop-blur-lg shadow-lg":"text-white/70 hover:text-white hover:bg-white/10 backdrop-blur-sm"}`,"data-testid":"tab-profile-mobile",children:[s.jsx(to,{className:"h-5 w-5 mr-3"}),"School Profile"]}),s.jsxs("button",{onClick:()=>{a("display"),c(!1)},className:`flex items-center w-full px-3 py-3 text-left rounded-md transition-all duration-200 touch-manipulation ${n==="display"?"bg-blue-500/30 text-white backdrop-blur-lg shadow-lg":"text-white/70 hover:text-white hover:bg-white/10 backdrop-blur-sm"}`,"data-testid":"tab-display-mobile",children:[s.jsx(rl,{className:"h-5 w-5 mr-3"}),"Display Preferences"]}),s.jsxs("button",{onClick:()=>{a("revenue"),c(!1)},className:`flex items-center w-full px-3 py-3 text-left rounded-md transition-all duration-200 touch-manipulation ${n==="revenue"?"bg-blue-500/30 text-white backdrop-blur-lg shadow-lg":"text-white/70 hover:text-white hover:bg-white/10 backdrop-blur-sm"}`,"data-testid":"tab-revenue-mobile",children:[s.jsx(tl,{className:"h-5 w-5 mr-3"}),"Revenue Settings"]}),s.jsxs("button",{onClick:()=>{a("payments"),c(!1)},className:`flex items-center w-full px-3 py-3 text-left rounded-md transition-all duration-200 touch-manipulation ${n==="payments"?"bg-blue-500/30 text-white backdrop-blur-lg shadow-lg":"text-white/70 hover:text-white hover:bg-white/10 backdrop-blur-sm"}`,"data-testid":"tab-payments-mobile",children:[s.jsx(Ga,{className:"h-5 w-5 mr-3"}),"Payment & Sales History"]}),s.jsxs("button",{onClick:()=>{a("codes"),c(!1)},className:`flex items-center w-full px-3 py-3 text-left rounded-md transition-all duration-200 touch-manipulation ${n==="codes"?"bg-blue-500/30 text-white backdrop-blur-lg shadow-lg":"text-white/70 hover:text-white hover:bg-white/10 backdrop-blur-sm"}`,"data-testid":"tab-codes-mobile",children:[s.jsx(na,{className:"h-5 w-5 mr-3"}),"Create Codes"]}),s.jsxs("button",{onClick:()=>{a("security"),c(!1)},className:`flex items-center w-full px-3 py-3 text-left rounded-md transition-all duration-200 touch-manipulation ${n==="security"?"bg-blue-500/30 text-white backdrop-blur-lg shadow-lg":"text-white/70 hover:text-white hover:bg-white/10 backdrop-blur-sm"}`,"data-testid":"tab-security-mobile",children:[s.jsx(On,{className:"h-5 w-5 mr-3"}),"Security"]})]})})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("div",{className:"p-4 sm:p-6",children:ki()})})]}),s.jsx(rI,{isOpen:ot,onClose:()=>{Dt(!1),zt(null)},imageFile:Ft,onSave:At}),s.jsx(Hl,{open:!!le,onOpenChange:O=>!O&&Re(null),children:s.jsxs(lo,{className:"bg-slate-900 border-white/20",children:[s.jsxs(co,{children:[s.jsx(ho,{className:"text-white",children:"Are you sure you want to delete this access code?"}),s.jsxs(mo,{className:"text-white/70",children:["This action cannot be undone. Code ",s.jsx("span",{className:"font-mono font-bold text-blue-300",children:le==null?void 0:le.code})," will be permanently deleted."]})]}),s.jsxs(uo,{children:[s.jsx(po,{className:"bg-white/10 text-white border-white/20 hover:bg-white/20",disabled:fe,children:"Cancel"}),s.jsx(fo,{onClick:No,disabled:fe,className:"bg-red-600 text-white hover:bg-red-700",children:fe?"Deleting...":"Delete Code"})]})]})}),s.jsx(Hl,{open:!!He,onOpenChange:O=>!O&&Ye(null),children:s.jsxs(lo,{className:"bg-slate-900 border-white/20",children:[s.jsxs(co,{children:[s.jsx(ho,{className:"text-white",children:"Are you sure you want to delete all access codes?"}),s.jsxs(mo,{className:"text-white/70",children:["This action cannot be undone. All codes for year ",s.jsx("span",{className:"font-bold text-blue-300",children:He})," will be permanently deleted."]})]}),s.jsxs(uo,{children:[s.jsx(po,{className:"bg-white/10 text-white border-white/20 hover:bg-white/20",disabled:fe,children:"Cancel"}),s.jsx(fo,{onClick:jo,disabled:fe,className:"bg-red-600 text-white hover:bg-red-700",children:fe?"Deleting...":"Delete All Codes"})]})]})})]}):null}function aI(){const[,e]=us(),[t,r]=d.useState(null),[n,a]=d.useState("profile"),[i,o]=d.useState(!1),[l,c]=d.useState(!1),[u,m]=d.useState(!1),{toast:h}=ks(),{userCurrency:p,setUserCurrency:y,formatPrice:N}=yi(),[f,j]=d.useState({email:"",username:"",fullName:"",currentPassword:"",newPassword:"",confirmPassword:""}),[b,x]=d.useState(!1),[w,C]=d.useState(!1),[S,M]=d.useState(!1),[A,R]=d.useState(!1),[z,$]=d.useState(""),[W,G]=d.useState(!1),[X,P]=d.useState(null),[L,_]=d.useState({email:"",username:"",fullName:"",currentPassword:"",newPassword:"",confirmPassword:""}),{data:V=[]}=Ze({queryKey:["/api/alumni-badges",t==null?void 0:t.id],enabled:!!t}),{data:E=[]}=Ze({queryKey:["/api/notifications",t==null?void 0:t.id],enabled:!!t}),Y=E.filter(D=>!D.isRead).length,{data:Z=[],isLoading:ne}=Ze({queryKey:["/api/payment-history",t==null?void 0:t.id],enabled:!!t}),{data:oe=[],isLoading:pe}=Ze({queryKey:["/api/users",t==null?void 0:t.id,"login-activity"],enabled:!!(t!=null&&t.id)&&n==="security"}),{data:he,isLoading:B}=Ze({queryKey:["/api/users",t==null?void 0:t.id,"recent-login"],enabled:!!(t!=null&&t.id)&&n==="security"}),K=nt({mutationFn:async D=>{await rt("PATCH",`/api/notifications/${D}`,{isRead:!0})},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",t==null?void 0:t.id]})}}),re=D=>{K.mutate(D)},Q=(()=>{if(!t||!t.userType)return"Unknown";const D=V.filter(ce=>ce.status==="verified"),J=V.length;switch(t.userType.toLowerCase()){case"student":return"Student";case"viewer":return J>0?`Alumni(${D.length})`:"Viewer";case"school":return"School Admin";case"super_admin":return"Super Admin";default:return"Unknown"}})();d.useEffect(()=>{const D=localStorage.getItem("user");if(!D){e("/");return}const J=JSON.parse(D);r(J),j(ce=>({...ce,email:J.email||"",username:J.username||"",fullName:J.fullName||""}))},[e]);const te=()=>{e("/viewer-dashboard")},ve=()=>{localStorage.removeItem("user"),e("/")},we=nt({mutationFn:async D=>{if(!t)throw new Error("No user found");return(await rt("PATCH",`/api/users/${t.id}`,D)).json()},onSuccess:D=>{localStorage.setItem("user",JSON.stringify(D)),r(D),j(J=>({...J,email:D.email||"",username:D.username||"",fullName:D.fullName||""})),h({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Profile updated",description:"Your profile has been successfully updated."}),P(null),R(!1)},onError:D=>{h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Update failed",description:D.message||"Failed to update profile",variant:"destructive"}),R(!1)}}),Ne=D=>{if(!t)return;const J=L[D];if(!J.trim()){h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Invalid input",description:"Field cannot be empty",variant:"destructive"});return}R(!0),we.mutate({[D]:J})},ie=D=>{P(null),_(J=>({...J,[D]:f[D]}))},me=D=>{P(D),_(J=>({...J,[D]:f[D]}))},Ae=()=>s.jsxs("div",{className:"space-y-4 sm:space-y-6 max-w-4xl",children:[s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{className:"p-4 sm:p-6",children:s.jsx(tt,{className:"text-lg sm:text-xl text-white",children:"Personal Information"})}),s.jsxs(be,{className:"space-y-4 sm:space-y-6 p-4 sm:p-6 pt-0",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ue,{htmlFor:"fullName","data-testid":"label-full-name",className:"text-sm font-medium text-white",children:"Full Name"}),s.jsx("div",{className:"flex items-center gap-2",children:X==="fullName"?s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"fullName",value:L.fullName,onChange:D=>_(J=>({...J,fullName:D.target.value})),className:"flex-1 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60","data-testid":"input-full-name-edit"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>Ne("fullName"),disabled:A,"data-testid":"button-save-full-name",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0",children:s.jsx(js,{className:"h-4 w-4"})}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>ie("fullName"),disabled:A,"data-testid":"button-cancel-full-name",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0",children:s.jsx(Pt,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"fullName",value:f.fullName,readOnly:!0,className:"flex-1 bg-white/5 backdrop-blur-lg border border-white/20 text-white/70 h-10 sm:h-11","data-testid":"input-full-name"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>me("fullName"),"data-testid":"button-edit-full-name",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 touch-manipulation",children:s.jsx(zr,{className:"h-4 w-4"})})]})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ue,{htmlFor:"username","data-testid":"label-username",className:"text-sm font-medium text-white",children:"Username"}),s.jsx("div",{className:"flex items-center gap-2",children:X==="username"?s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"username",value:L.username,onChange:D=>_(J=>({...J,username:D.target.value})),className:"flex-1 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60","data-testid":"input-username-edit"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>Ne("username"),disabled:A,"data-testid":"button-save-username",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0",children:s.jsx(js,{className:"h-4 w-4"})}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>ie("username"),disabled:A,"data-testid":"button-cancel-username",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0",children:s.jsx(Pt,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"username",value:f.username,readOnly:!0,className:"flex-1 bg-white/5 backdrop-blur-lg border border-white/20 text-white/70 h-10 sm:h-11","data-testid":"input-username"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>me("username"),"data-testid":"button-edit-username",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 touch-manipulation",children:s.jsx(zr,{className:"h-4 w-4"})})]})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ue,{htmlFor:"email","data-testid":"label-email",className:"text-sm font-medium text-white",children:"Email"}),s.jsx("div",{className:"flex items-center gap-2",children:X==="email"?s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"email",type:"email",value:L.email,onChange:D=>_(J=>({...J,email:D.target.value})),className:"flex-1 h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/60","data-testid":"input-email-edit"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>Ne("email"),disabled:A,"data-testid":"button-save-email",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0",children:s.jsx(js,{className:"h-4 w-4"})}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>ie("email"),disabled:A,"data-testid":"button-cancel-email",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0",children:s.jsx(Pt,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(xe,{id:"email",type:"email",value:f.email,readOnly:!0,className:"flex-1 bg-white/5 backdrop-blur-lg border border-white/20 text-white/70 h-10 sm:h-11","data-testid":"input-email"}),s.jsx(T,{size:"icon",variant:"ghost",onClick:()=>me("email"),"data-testid":"button-edit-email",className:"h-10 w-10 sm:h-11 sm:w-11 flex-shrink-0 touch-manipulation",children:s.jsx(zr,{className:"h-4 w-4"})})]})})]})]})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{className:"p-4 sm:p-6",children:s.jsx(tt,{className:"text-lg sm:text-xl text-white",children:"Currency Preference"})}),s.jsx(be,{className:"p-4 sm:p-6 pt-0",children:s.jsxs("div",{className:"grid gap-3",children:[s.jsx(ue,{htmlFor:"currency",className:"text-sm font-medium text-white",children:"Preferred Currency"}),s.jsxs(nr,{value:p,onValueChange:D=>y(D),children:[s.jsx(Ys,{className:"h-10 sm:h-11 bg-white/10 backdrop-blur-lg border border-white/20 text-white",children:s.jsx(ar,{})}),s.jsxs(Ws,{className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 text-white",children:[s.jsx(Nt,{value:"USD",children:"USD ($)"}),s.jsx(Nt,{value:"NGN",children:"NGN (₦)"})]})]}),s.jsx("p",{className:"text-xs sm:text-sm text-white/70",children:"Prices will be displayed in your preferred currency."})]})})]})]}),at=async()=>{if(!z.trim()||!t){h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Invalid Input",description:"Please enter a valid code",variant:"destructive"});return}G(!0);try{const J=await(await rt("POST","/api/yearbook-codes/redeem",{code:z.trim().toUpperCase(),userId:t.id})).json();J.success?(h({className:"bg-green-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Code Redeemed!",description:`Successfully unlocked ${J.year} yearbook access`}),$(""),ke.invalidateQueries({queryKey:["/api/yearbook-access"]})):h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Redemption Failed",description:J.message||"Invalid or expired code",variant:"destructive"})}catch(D){h({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Redemption Failed",description:D.message||"Failed to redeem code",variant:"destructive"})}finally{G(!1)}},lt=()=>s.jsx("div",{className:"space-y-4 sm:space-y-6 max-w-2xl",children:s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"p-4 sm:p-6",children:[s.jsxs(tt,{className:"text-lg sm:text-xl text-white flex items-center",children:[s.jsx(na,{className:"h-5 w-5 mr-2"}),"Unlock Yearbook Access"]}),s.jsx("p",{className:"text-sm text-white/70",children:"Enter a 12-digit access code to unlock a specific yearbook year."})]}),s.jsx(be,{className:"p-4 sm:p-6 pt-0",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ue,{htmlFor:"access-code",className:"text-sm font-medium text-white",children:"Access Code"}),s.jsx(xe,{id:"access-code",value:z,onChange:D=>{let J=D.target.value.replace(/[^A-Za-z0-9]/g,"").toUpperCase().slice(0,12);J.length>4&&J.length<=8?J=J.slice(0,4)+"-"+J.slice(4):J.length>8&&(J=J.slice(0,4)+"-"+J.slice(4,8)+"-"+J.slice(8)),$(J)},placeholder:"XXXX-XXXX-XXXX",className:"h-12 text-center font-mono text-lg bg-white/10 backdrop-blur-lg border border-white/20 text-white placeholder:text-white/50 focus:border-white/40 focus:ring-white/20",maxLength:14,"data-testid":"input-access-code"}),s.jsx("p",{className:"text-xs text-white/60",children:"Enter the 12-digit code provided by your school to unlock yearbook access."})]}),s.jsx(T,{onClick:at,disabled:W||z.length<14,className:"w-full h-12 text-base font-medium","data-testid":"button-redeem-code",children:W?s.jsxs(s.Fragment,{children:[s.jsx(Oa,{className:"h-4 w-4 mr-2 animate-spin"}),"Redeeming Code..."]}):s.jsxs(s.Fragment,{children:[s.jsx(na,{className:"h-4 w-4 mr-2"}),"Unlock Yearbook"]})}),s.jsxs("div",{className:"bg-blue-50/10 border border-blue-200/20 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium text-white mb-2",children:"How it works:"}),s.jsxs("ul",{className:"text-sm text-white/70 space-y-1",children:[s.jsx("li",{children:"• Get a 12-digit access code from your school"}),s.jsx("li",{children:"• Enter the code above to unlock specific yearbook years"}),s.jsx("li",{children:"• Each code can only be used once"}),s.jsx("li",{children:"• You cannot redeem codes for years you already have access to"})]})]})]})})]})}),it=()=>s.jsx("div",{className:"space-y-4 sm:space-y-6 max-w-4xl",children:s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"p-4 sm:p-6",children:[s.jsxs(tt,{className:"text-lg sm:text-xl text-white flex items-center",children:[s.jsx(Ga,{className:"h-5 w-5 mr-2"}),"Payment History"]}),s.jsx("p",{className:"text-sm text-white/70",children:"View all your yearbook purchases and payment records."})]}),s.jsx(be,{className:"p-4 sm:p-6 pt-0",children:ne?s.jsx("div",{className:"text-center py-8 text-white/70",children:"Loading payment history..."}):Z.length===0?s.jsxs("div",{className:"text-center py-8 text-white/70",children:[s.jsx(Ga,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),s.jsx("p",{children:"No payment history found."}),s.jsx("p",{className:"text-sm mt-1",children:"Your paid yearbook purchases will appear here."})]}):s.jsx("div",{className:"space-y-3",children:Z.map(D=>s.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-lg p-4 hover:bg-white/10 transition-colors","data-testid":`payment-item-${D.id}`,children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-white font-medium text-base","data-testid":`text-school-${D.id}`,children:D.schoolName}),s.jsxs("p",{className:"text-white/60 text-sm","data-testid":`text-year-${D.id}`,children:["Year: ",D.year]}),D.purchaseDate&&s.jsxs("p",{className:"text-white/50 text-xs mt-1","data-testid":`text-date-${D.id}`,children:["Purchased: ",new Date(D.purchaseDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),s.jsxs("div",{className:"flex flex-col items-start sm:items-end gap-1",children:[s.jsx("span",{className:"text-white font-semibold text-lg","data-testid":`text-price-${D.id}`,children:N(parseFloat(D.price||"0"))}),D.paymentReference&&s.jsxs("span",{className:"text-white/40 text-xs font-mono","data-testid":`text-reference-${D.id}`,children:["Ref: ",D.paymentReference.slice(0,12),"..."]})]})]})},D.id))})})]})}),F=()=>s.jsxs("div",{className:"space-y-4 sm:space-y-6 max-w-6xl",children:[he&&s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{className:"p-4 sm:p-6",children:s.jsxs(tt,{className:"text-lg sm:text-xl flex items-center text-white",children:[s.jsx(On,{className:"h-5 w-5 mr-2 text-green-400"}),"Most Recent Login"]})}),s.jsx(be,{className:"p-4 sm:p-6 pt-0",children:s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-white/70 text-sm",children:[s.jsx(I4,{className:"h-4 w-4 mr-2"}),s.jsxs("span",{children:["Device: ",he.deviceType||"Unknown"," - ",he.browser||"Unknown"]})]}),s.jsxs("div",{className:"flex items-center text-white/70 text-sm",children:[s.jsx(rl,{className:"h-4 w-4 mr-2"}),s.jsxs("span",{children:["OS: ",he.os||"Unknown"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-white/70 text-sm",children:[s.jsx(Fl,{className:"h-4 w-4 mr-2"}),s.jsxs("span",{children:["Location: ",he.city||he.country||"Unknown"]})]}),s.jsxs("div",{className:"flex items-center text-white/70 text-sm",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:new Date(he.createdAt).toLocaleString()})]})]})]})})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsxs(et,{className:"p-4 sm:p-6",children:[s.jsxs(tt,{className:"text-lg sm:text-xl flex items-center text-white",children:[s.jsx(qr,{className:"h-5 w-5 mr-2 text-blue-400"}),"Login Activity"]}),s.jsx("p",{className:"text-sm text-white/70 mt-2",children:"Review your recent login history and security activity"})]}),s.jsx(be,{className:"p-4 sm:p-6 pt-0",children:pe?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Oa,{className:"h-6 w-6 animate-spin text-white"})}):oe&&oe.length>0?s.jsx("div",{className:"max-h-96 overflow-y-auto pr-2 space-y-3",children:oe.map((D,J)=>s.jsx("div",{className:"bg-white/5 backdrop-blur-lg border border-white/20 rounded-lg p-4",children:s.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-2",children:[s.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs ${D.loginStatus==="success"?"bg-green-500/20 text-green-200":"bg-red-500/20 text-red-200"}`,children:D.loginStatus==="success"?"Successful":"Failed"}),D.failureReason&&s.jsxs("span",{className:"text-xs text-red-300",children:["(",D.failureReason,")"]})]}),s.jsxs("div",{className:"text-white/80 text-sm",children:[D.browser," on ",D.os," - ",D.deviceType]}),s.jsxs("div",{className:"text-white/60 text-xs",children:[D.city||D.country||"Unknown location"," • ",D.ipAddress]})]}),s.jsx("div",{className:"text-white/60 text-xs whitespace-nowrap",children:new Date(D.createdAt).toLocaleString()})]})},D.id||J))}):s.jsxs("div",{className:"text-center py-8 text-white/60",children:[s.jsx(On,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No login activity recorded"})]})})]}),s.jsxs(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:[s.jsx(et,{className:"p-4 sm:p-6",children:s.jsxs(tt,{className:"text-lg sm:text-xl flex items-center text-white",children:[s.jsx(Rs,{className:"h-5 w-5 mr-2 text-purple-400"}),"Security Settings"]})}),s.jsx(be,{className:"p-4 sm:p-6 pt-0",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[s.jsx("h3",{className:"text-white font-medium mb-2",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-white/60 text-sm mb-3",children:"Add an extra layer of security to your account"}),s.jsx(T,{variant:"outline",size:"sm",className:"text-white border-white/20",disabled:!0,children:"Coming Soon"})]})})})]})]}),g=()=>{switch(n){case"profile":return Ae();case"unlock":return lt();case"payments":return it();case"security":return F();default:return Ae()}};return d.useEffect(()=>{const D=J=>{if(i){const ce=J.target;!ce.closest('[data-testid="button-hamburger-menu"]')&&!ce.closest(".hamburger-dropdown")&&o(!1)}};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[i]),t?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-20 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-20 animate-float-delayed"})]})}),s.jsxs("div",{className:"relative z-10 min-h-screen",children:[s.jsxs("header",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-2xl relative",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-2 left-10 w-8 h-8 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-3 right-20 w-6 h-6 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-2 left-20 w-5 h-5 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-1 right-10 w-4 h-4 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"mx-auto px-2 sm:px-4 lg:px-8 xl:px-12 2xl:px-16 relative z-10",children:s.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx(T,{variant:"ghost",size:"icon",onClick:te,className:"text-white hover:bg-white/20 flex-shrink-0 mr-2","data-testid":"button-back",children:s.jsx(_s,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),s.jsx(T,{variant:"ghost",size:"icon",onClick:()=>c(!l),className:"text-white hover:bg-white/20 lg:hidden flex-shrink-0 mr-2","data-testid":"button-sidebar-toggle",children:s.jsx(Jr,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(Rs,{className:"text-white text-xs sm:text-sm"})}),s.jsx("h1",{className:"ml-2 sm:ml-3 text-sm sm:text-xl font-semibold text-white truncate",children:"Settings"})]}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-4 flex-shrink-0",children:[s.jsx("div",{className:"sm:hidden relative",children:Q==="Alumni"?s.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:V.filter(D=>D.status==="verified").length}):s.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full"})}),s.jsxs("div",{className:`hidden sm:block px-2 sm:px-3 py-1 rounded-full text-xs font-medium ${Q.startsWith("Alumni")?"bg-green-500/20 text-green-200 border border-green-400/30":"bg-blue-500/20 text-blue-200 border border-blue-400/30"}`,children:[s.jsx("span",{className:"hidden md:inline",children:"Account Status: "}),Q]}),s.jsx("div",{className:"relative",children:s.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>m(!u),className:"relative text-white hover:bg-white/20","data-testid":"button-notifications",children:[s.jsx(Yn,{className:"h-5 w-5"}),Y>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:Y})]})}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-white hidden xs:block",children:[s.jsx("span",{className:"hidden sm:inline",children:t.fullName}),s.jsx("span",{className:"sm:hidden",children:t.fullName.split(" ")[0]})]}),s.jsx("div",{className:"relative",children:s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>o(!i),className:"text-white hover:bg-white/20 p-2 bg-white/10 rounded-lg border border-white/20 ml-3","data-testid":"button-hamburger-menu",children:s.jsx(Jr,{className:"h-5 w-5"})})})]})]})})]}),u&&s.jsxs("div",{className:"notification-dropdown fixed top-16 right-16 w-72 sm:w-80 max-w-[calc(100vw-2rem)] bg-blue-600/60 backdrop-blur-lg rounded-lg shadow-xl border border-white/20 z-[999999]",children:[s.jsx("div",{className:"p-4 border-b border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>m(!1),children:s.jsx(Pt,{className:"h-4 w-4 text-white hover:text-red-500"})})]})}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:E.length===0?s.jsx("div",{className:"p-4 text-center text-white/70",children:"No notifications yet"}):E.map(D=>s.jsx("div",{className:`p-4 border-b border-white/20 hover:bg-white/10 cursor-pointer ${D.isRead?"":"bg-blue-500/20"}`,onClick:()=>{D.isRead||re(D.id)},"data-testid":`notification-${D.id}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${D.isRead?"bg-gray-300":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-white",children:D.title}),s.jsx("p",{className:"text-sm text-white/80 mt-1",children:D.message}),s.jsx("p",{className:"text-xs text-white/60 mt-2",children:new Date(D.createdAt||"").toLocaleDateString()})]})]})},D.id))})]}),i&&s.jsx("div",{className:"hamburger-dropdown fixed top-16 right-4 w-48 bg-blue-600/60 backdrop-blur-lg border border-white/20 rounded-lg shadow-xl z-[999999]",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{o(!1),e("/viewer-dashboard")},"data-testid":"menu-home",children:[s.jsx(Xr,{className:"h-4 w-4 mr-3"}),"Home"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{o(!1),e("/viewer-settings")},"data-testid":"menu-settings",children:[s.jsx(Rs,{className:"h-4 w-4 mr-3"}),"Settings"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{o(!1),e("/cart")},"data-testid":"menu-cart",children:[s.jsx(xs,{className:"h-4 w-4 mr-3"}),"Cart"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm hover:bg-red-500/40 transition-colors text-red-500",onClick:()=>{o(!1),ve()},"data-testid":"menu-logout",children:[s.jsx(Cn,{className:"h-4 w-4 mr-3"}),"Logout"]})]})}),l&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>c(!1)}),s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"hidden lg:block w-64 min-h-screen bg-white/10 backdrop-blur-lg border-r border-white/20",children:s.jsx("div",{className:"p-4",children:s.jsxs("nav",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>a("profile"),className:`flex items-center w-full px-3 py-2 text-left rounded-md transition-colors ${n==="profile"?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"data-testid":"tab-profile",children:[s.jsx(to,{className:"h-4 w-4 mr-2"}),"Profile"]}),s.jsxs("button",{onClick:()=>a("unlock"),className:`flex items-center w-full px-3 py-2 text-left rounded-md transition-colors ${n==="unlock"?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"data-testid":"tab-unlock",children:[s.jsx(na,{className:"h-4 w-4 mr-2"}),"Unlock Year"]}),s.jsxs("button",{onClick:()=>a("payments"),className:`flex items-center w-full px-3 py-2 text-left rounded-md transition-colors ${n==="payments"?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"data-testid":"tab-payments",children:[s.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Payment History"]}),s.jsxs("button",{onClick:()=>a("security"),className:`flex items-center w-full px-3 py-2 text-left rounded-md transition-colors ${n==="security"?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"data-testid":"tab-security",children:[s.jsx(On,{className:"h-4 w-4 mr-2"}),"Security"]})]})})}),s.jsx("div",{className:`fixed top-0 left-0 h-full w-64 bg-white/10 backdrop-blur-lg border-r border-white/20 z-50 transform transition-transform duration-300 ease-in-out lg:hidden ${l?"translate-x-0":"-translate-x-full"}`,children:s.jsx("div",{className:"p-4 pt-20",children:s.jsxs("nav",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>{a("profile"),c(!1)},className:`flex items-center w-full px-3 py-3 text-left rounded-md transition-colors touch-manipulation ${n==="profile"?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"data-testid":"tab-profile-mobile",children:[s.jsx(to,{className:"h-5 w-5 mr-3"}),"Profile"]}),s.jsxs("button",{onClick:()=>{a("unlock"),c(!1)},className:`flex items-center w-full px-3 py-3 text-left rounded-md transition-colors touch-manipulation ${n==="unlock"?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"data-testid":"tab-unlock-mobile",children:[s.jsx(na,{className:"h-5 w-5 mr-3"}),"Unlock Year"]}),s.jsxs("button",{onClick:()=>{a("payments"),c(!1)},className:`flex items-center w-full px-3 py-3 text-left rounded-md transition-colors touch-manipulation ${n==="payments"?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"data-testid":"tab-payments-mobile",children:[s.jsx(Ga,{className:"h-5 w-5 mr-3"}),"Payment History"]}),s.jsxs("button",{onClick:()=>{a("security"),c(!1)},className:`flex items-center w-full px-3 py-3 text-left rounded-md transition-colors touch-manipulation ${n==="security"?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"data-testid":"tab-security-mobile",children:[s.jsx(On,{className:"h-5 w-5 mr-3"}),"Security"]})]})})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("div",{className:"p-4 sm:p-6",children:g()})})]})]})]}):null}var Gt=function(){return Gt=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Gt.apply(this,arguments)};function C5(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Vv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vv(Object(r),!0).forEach(function(n){P5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xo(e){return xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xo(e)}function k5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S5(e,t,r){return t&&Bv(e.prototype,t),r&&Bv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function P5(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A0(e,t){if(e==null)return{};var r,n,a=function(o,l){if(o==null)return{};var c,u,m={},h=Object.keys(o);for(u=0;u<h.length;u++)c=h[u],l.indexOf(c)>=0||(m[c]=o[c]);return m}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function iI(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var i,o,l=[],c=!0,u=!1;try{for(a=a.call(r);!(c=(i=a.next()).done)&&(l.push(i.value),!n||l.length!==n);c=!0);}catch(m){u=!0,o=m}finally{try{c||a.return==null||a.return()}finally{if(u)throw o}}return l}}(e,t)||E5(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oI(e){return function(t){if(Array.isArray(t))return R0(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||E5(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function E5(e,t){if(e){if(typeof e=="string")return R0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R0(e,t):void 0}}function R0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Og={cookieTestUrl:"https://legacy-staging.paystack.co/test-iframe/start.html",publishableKey:"uFmz/uE/SDT6GupOrSEXIZXGByjQ0zFkPyc9LqKHFqnTI0WPN3JS5kQPo/j9or0TOXlqMQj2lzHn/UGsQT4XeQ==",publicKey:`-----BEGIN PUBLIC KEY-----\r
MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALhZs/7hP0g0+hrqTq0hFyGVxgco0NMx\r
ZD8nPS6ihxap0yNFjzdyUuZED6P4/aK9Ezl5ajEI9pcx5/1BrEE+F3kCAwEAAQ==\r
-----END PUBLIC KEY-----`,applePayVersion:6,applePayValidateSessionPath:"applepay/validate-session/",applePayChargePath:"applepay/charge"};ss(ss({},Og),{},{checkoutUrl:"http://localhost:8081/",paymentBaseUrl:"https://legacy-staging.paystack.co/",paystackApiUrl:"https://studio-api.paystack.co/",siteUrl:"https://paystack.com",pusherKey:"1c7b262ee18455815893",pusherUrl:"http://localhost:8081/static/vendor/pusher.min.js"});var lI=ss(ss({},Og),{},{checkoutUrl:"https://checkout-studio.paystack.com/",paymentBaseUrl:"https://legacy-staging.paystack.co/",paystackApiUrl:"https://studio-api.paystack.co/",siteUrl:"https://beta.paystack.com",pusherKey:"1c7b262ee18455815893",pusherUrl:"https://checkout-studio.paystack.com/static/vendor/pusher.min.js"}),fr={production:ss(ss({},Og),{},{checkoutUrl:"https://checkout.paystack.com/",paymentBaseUrl:"https://standard.paystack.co/",paystackApiUrl:"https://api.paystack.co/",siteUrl:"https://paystack.com",pusherKey:"8e4b9b7ca3418bd5cdc8",pusherUrl:"https://checkout.paystack.com/static/vendor/pusher.min.js"})}.production||lI;function T5(e,t){var r=[];return Object.keys(e).forEach(function(n){var a=t?"".concat(t,"[").concat(n,"]"):n,i=e[a];r.push(i!==null&&(typeof v>"u"?"undefined":xo(v))==="object"?T5(i,a):"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(i)))}),r.join("&")}function Io(){return document.currentScript||(e=document.getElementsByTagName("script"))[e.length-1];var e}function qv(){var e=[],t=Io();if(t){var r=Array.prototype.slice.call(t.attributes);e=Object.keys(r).filter(function(n){var a=r[n].nodeName;return a&&a.indexOf("data")>-1}).map(function(n){return r[n].nodeName})}return e}var A5=`
  <svg id="inline-button-wordmark--white" width="137" height="13" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M.037 5.095l1.075-.135c-.011-.774-.025-1.944-.013-2.149C1.19 1.364 2.38.134 3.81.013 3.9.006 3.99.002 4.077 0a2.947 2.947 0 0 1 2.046.76c.574.509.95 1.26 1.008 2.007.015.192.01 1.491.01 2.257l1.096.163L8.2 11.44 4.093 12 0 11.346l.037-6.251zm4.106-.514l1.724.256c-.007-.933-.05-2.295-.26-2.654-.319-.545-.846-.867-1.443-.88h-.063c-.607.008-1.138.322-1.458.864-.222.378-.266 1.66-.265 2.637l1.765-.223zM18.228 10.108c-.576 0-1.064-.072-1.464-.216a2.864 2.864 0 0 1-.972-.6 2.552 2.552 0 0 1-.588-.864 4.067 4.067 0 0 1-.252-1.044h1.008c.032.256.088.5.168.732.08.224.204.424.372.6.168.168.388.304.66.408.28.096.636.144 1.068.144.28 0 .536-.036.768-.108.24-.08.448-.192.624-.336.176-.144.312-.316.408-.516.104-.2.156-.42.156-.66 0-.24-.032-.448-.096-.624a1.02 1.02 0 0 0-.336-.468 1.885 1.885 0 0 0-.636-.324 6.4 6.4 0 0 0-1.008-.228 8.79 8.79 0 0 1-1.212-.276 3.246 3.246 0 0 1-.9-.432 1.982 1.982 0 0 1-.564-.672c-.128-.272-.192-.6-.192-.984 0-.328.068-.632.204-.912.136-.288.324-.536.564-.744.248-.208.54-.372.876-.492.336-.12.708-.18 1.116-.18.864 0 1.548.204 2.052.612.512.4.812.984.9 1.752h-.936c-.104-.544-.316-.932-.636-1.164-.32-.24-.78-.36-1.38-.36-.592 0-1.04.132-1.344.396a1.255 1.255 0 0 0-.444.996c0 .208.024.396.072.564.056.16.156.3.3.42.152.12.36.228.624.324a6.72 6.72 0 0 0 1.068.228c.48.072.9.168 1.26.288.36.12.664.276.912.468s.432.428.552.708c.128.28.192.624.192 1.032 0 .36-.076.696-.228 1.008a2.472 2.472 0 0 1-.612.804c-.264.224-.58.4-.948.528-.36.128-.752.192-1.176.192zM25.355 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM32.091 10.108c-.44 0-.848-.072-1.224-.216a3.054 3.054 0 0 1-.972-.636 3.12 3.12 0 0 1-.648-1.008 3.626 3.626 0 0 1-.228-1.32v-.096c0-.48.08-.916.24-1.308.16-.4.376-.74.648-1.02.28-.28.604-.496.972-.648.376-.16.772-.24 1.188-.24.328 0 .644.04.948.12.312.08.588.208.828.384.248.168.456.392.624.672.168.28.276.62.324 1.02h-.984c-.08-.496-.284-.848-.612-1.056-.32-.208-.696-.312-1.128-.312a1.93 1.93 0 0 0-.804.168c-.24.112-.452.272-.636.48a2.23 2.23 0 0 0-.42.744 2.991 2.991 0 0 0-.156.996v.096c0 .776.188 1.364.564 1.764.384.392.88.588 1.488.588.224 0 .436-.032.636-.096a1.651 1.651 0 0 0 .96-.768c.112-.192.18-.416.204-.672h.924a2.595 2.595 0 0 1-.276.948 2.386 2.386 0 0 1-.576.744c-.24.208-.52.372-.84.492-.32.12-.668.18-1.044.18zM38.335 10.108a2.83 2.83 0 0 1-.876-.132 1.724 1.724 0 0 1-.684-.42 2.145 2.145 0 0 1-.456-.756c-.112-.304-.168-.672-.168-1.104V3.724h.996v3.924c0 .552.116.956.348 1.212.24.256.608.384 1.104.384.224 0 .44-.036.648-.108.208-.072.392-.18.552-.324.16-.144.288-.324.384-.54.096-.216.144-.464.144-.744V3.724h.996V10h-.996v-.996c-.144.296-.388.556-.732.78-.336.216-.756.324-1.26.324zM43.216 3.724h.996v1.128c.2-.352.452-.64.756-.864.312-.232.748-.356 1.308-.372v.936a4.461 4.461 0 0 0-.852.12 1.647 1.647 0 0 0-.66.324 1.472 1.472 0 0 0-.408.612c-.096.248-.144.564-.144.948V10h-.996V3.724zM50 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM56.496 10.108c-.408 0-.788-.068-1.14-.204a2.683 2.683 0 0 1-.9-.612 3.01 3.01 0 0 1-.588-.984 4.01 4.01 0 0 1-.204-1.32v-.096c0-.48.072-.92.216-1.32.144-.4.344-.744.6-1.032.256-.296.564-.524.924-.684.36-.16.756-.24 1.188-.24.528 0 .956.112 1.284.336.328.216.584.476.768.78V.724h.996V10h-.996V8.92c-.088.152-.208.3-.36.444a2.792 2.792 0 0 1-.516.384 2.874 2.874 0 0 1-.6.252c-.216.072-.44.108-.672.108zm.108-.828c.288 0 .56-.048.816-.144.256-.096.476-.24.66-.432.184-.2.328-.448.432-.744.112-.304.168-.656.168-1.056v-.096c0-.808-.18-1.404-.54-1.788-.352-.384-.836-.576-1.452-.576-.624 0-1.112.208-1.464.624-.352.416-.528 1.008-.528 1.776v.096c0 .392.048.736.144 1.032.104.296.24.54.408.732.176.192.38.336.612.432.232.096.48.144.744.144zM67.712 10.108c-.512 0-.948-.112-1.308-.336a2.38 2.38 0 0 1-.816-.804V10h-.996V.724h.996V4.78a1.92 1.92 0 0 1 .348-.432c.152-.144.32-.268.504-.372.192-.112.396-.2.612-.264.216-.064.436-.096.66-.096.408 0 .788.072 1.14.216.352.144.652.352.9.624.256.272.456.604.6.996.144.392.216.832.216 1.32v.096c0 .48-.068.92-.204 1.32a3.103 3.103 0 0 1-.576 1.02 2.583 2.583 0 0 1-.9.672 2.937 2.937 0 0 1-1.176.228zm-.096-.828c.624 0 1.1-.2 1.428-.6.328-.408.492-.996.492-1.764V6.82c0-.4-.052-.748-.156-1.044a2.095 2.095 0 0 0-.42-.732 1.53 1.53 0 0 0-.612-.444 1.798 1.798 0 0 0-.744-.156c-.288 0-.56.048-.816.144a1.71 1.71 0 0 0-.648.444c-.184.192-.328.44-.432.744a3.152 3.152 0 0 0-.156 1.044v.096c0 .8.192 1.396.576 1.788.384.384.88.576 1.488.576zM73.63 9.352l-2.46-5.628h1.068l1.92 4.5 1.74-4.5h1.02l-3.468 8.46h-1.008l1.188-2.832zM87.127 3.669A3.138 3.138 0 0 0 86.1 2.95a3.09 3.09 0 0 0-1.228-.25c-.448 0-.848.086-1.187.26a2.199 2.199 0 0 0-.662.497v-.191a.387.387 0 0 0-.214-.348.323.323 0 0 0-.14-.03h-1.315a.314.314 0 0 0-.254.116.377.377 0 0 0-.1.262v8.97c0 .1.034.188.1.258a.34.34 0 0 0 .254.103h1.341a.342.342 0 0 0 .244-.103.336.336 0 0 0 .11-.259v-3.06c.178.202.417.357.702.464.35.134.72.203 1.093.203.43 0 .848-.082 1.242-.248a3.124 3.124 0 0 0 1.04-.724c.305-.326.545-.709.707-1.128a3.93 3.93 0 0 0 .263-1.477c0-.54-.086-1.037-.263-1.477a3.387 3.387 0 0 0-.706-1.12zm-1.204 3.24c-.073.19-.18.362-.315.51a1.415 1.415 0 0 1-1.065.466c-.2.001-.4-.04-.584-.12a1.484 1.484 0 0 1-.49-.346 1.593 1.593 0 0 1-.32-.51 1.738 1.738 0 0 1-.115-.63c0-.224.04-.435.115-.631a1.532 1.532 0 0 1 .804-.846c.185-.086.386-.13.59-.129.215 0 .414.044.593.13.177.083.338.199.474.341a1.622 1.622 0 0 1 .425 1.135c0 .225-.037.436-.112.63zM95.298 2.89h-1.33a.339.339 0 0 0-.246.11.384.384 0 0 0-.108.266v.166a1.856 1.856 0 0 0-.602-.472 2.525 2.525 0 0 0-1.166-.258 3.227 3.227 0 0 0-2.284.964 3.554 3.554 0 0 0-.734 1.123 3.827 3.827 0 0 0-.275 1.477c0 .54.092 1.037.275 1.477.184.434.427.817.728 1.128a3.146 3.146 0 0 0 2.277.973c.437 0 .834-.088 1.173-.259.25-.13.456-.287.608-.471v.177a.34.34 0 0 0 .11.259.341.341 0 0 0 .244.104h1.33a.324.324 0 0 0 .25-.105.349.349 0 0 0 .102-.258V3.267a.377.377 0 0 0-.1-.262.325.325 0 0 0-.252-.115zM93.502 6.9a1.55 1.55 0 0 1-.312.511c-.136.143-.296.26-.473.344-.178.085-.38.129-.596.129-.207 0-.407-.044-.59-.13a1.501 1.501 0 0 1-.791-.855 1.766 1.766 0 0 1-.112-.62c0-.225.038-.436.112-.632.075-.193.181-.364.314-.504.137-.143.3-.26.478-.342.182-.085.382-.129.59-.129.215 0 .417.044.595.13.178.085.338.2.473.341a1.623 1.623 0 0 1 .424 1.135c0 .215-.037.424-.112.622zM108.567 6.094a2.265 2.265 0 0 0-.654-.402c-.247-.101-.509-.181-.785-.235l-1.014-.204c-.26-.05-.441-.117-.543-.203a.328.328 0 0 1-.136-.264c0-.11.063-.2.189-.282.137-.086.329-.13.566-.13.26 0 .518.053.757.157.243.106.471.226.67.36.295.187.546.162.727-.053l.487-.57a.543.543 0 0 0 .152-.357c0-.128-.064-.245-.185-.351-.207-.184-.533-.378-.971-.568-.437-.192-.987-.29-1.637-.29-.427 0-.82.058-1.168.172-.35.116-.65.276-.893.474-.245.204-.438.44-.57.713a2 2 0 0 0-.198.875c0 .56.167 1.017.496 1.358.328.333.766.56 1.304.67l1.054.232c.3.062.528.132.675.21.129.067.19.163.19.297 0 .12-.061.227-.188.324-.133.104-.342.155-.622.155a1.83 1.83 0 0 1-.831-.19 3.056 3.056 0 0 1-.678-.458.995.995 0 0 0-.307-.17c-.126-.037-.268.003-.431.13l-.583.461c-.169.145-.24.32-.209.522.029.194.19.394.491.62.269.193.614.368 1.029.518.415.151.901.229 1.453.229.444 0 .854-.058 1.215-.172.362-.119.681-.278.941-.48a2.056 2.056 0 0 0 .819-1.663c0-.319-.053-.6-.165-.836a1.843 1.843 0 0 0-.447-.6zM114.383 7.73a.363.363 0 0 0-.295-.192.55.55 0 0 0-.343.113c-.095.062-.198.11-.306.141a.75.75 0 0 1-.426.013.43.43 0 0 1-.181-.093.554.554 0 0 1-.143-.204.92.92 0 0 1-.059-.362v-2.46h1.731c.099 0 .188-.04.266-.117a.368.368 0 0 0 .112-.26V3.268a.369.369 0 0 0-.115-.268.38.38 0 0 0-.263-.109h-1.732V1.216a.354.354 0 0 0-.108-.27.347.347 0 0 0-.243-.104h-1.344a.36.36 0 0 0-.34.226.371.371 0 0 0-.027.148V2.89h-.767a.324.324 0 0 0-.255.115.385.385 0 0 0-.098.262V4.31a.4.4 0 0 0 .212.346c.044.021.092.032.14.03h.768v2.925c0 .39.069.726.2 1.003.132.274.305.504.514.676.217.178.465.31.731.388.27.084.551.126.833.126.385 0 .75-.061 1.094-.18a2.13 2.13 0 0 0 .861-.552c.152-.181.17-.381.046-.581l-.463-.76zM121.672 2.89h-1.329a.339.339 0 0 0-.244.11.39.39 0 0 0-.08.122.394.394 0 0 0-.027.144v.166a1.906 1.906 0 0 0-.605-.472c-.335-.173-.726-.258-1.168-.258-.42 0-.834.083-1.226.249a3.24 3.24 0 0 0-1.055.715 3.528 3.528 0 0 0-.734 1.123 3.79 3.79 0 0 0-.276 1.477c0 .54.092 1.037.275 1.477.184.434.428.817.729 1.128a3.138 3.138 0 0 0 2.273.973 2.59 2.59 0 0 0 1.175-.259c.255-.13.457-.287.612-.471v.177a.34.34 0 0 0 .108.259.343.343 0 0 0 .243.104h1.329a.335.335 0 0 0 .252-.105.364.364 0 0 0 .102-.258V3.267a.38.38 0 0 0-.1-.262.332.332 0 0 0-.115-.087.311.311 0 0 0-.139-.028zM119.876 6.9a1.534 1.534 0 0 1-.786.855 1.362 1.362 0 0 1-.594.129c-.207 0-.405-.044-.588-.13a1.516 1.516 0 0 1-.792-.855 1.757 1.757 0 0 1-.113-.62c0-.225.037-.436.112-.632.073-.187.179-.358.314-.504.138-.143.3-.26.479-.342.184-.086.385-.13.588-.129.217 0 .415.044.594.13.181.085.34.2.472.341.134.143.24.313.314.504a1.73 1.73 0 0 1 0 1.253zM128.978 7.64l-.763-.593c-.146-.118-.284-.15-.404-.1a.742.742 0 0 0-.279.205 2.527 2.527 0 0 1-.583.535c-.192.122-.444.183-.742.183-.219 0-.42-.04-.6-.122a1.423 1.423 0 0 1-.469-.342 1.575 1.575 0 0 1-.308-.51 1.751 1.751 0 0 1-.106-.617c0-.228.034-.438.106-.632.07-.192.173-.363.308-.503.135-.144.295-.26.472-.342.187-.088.391-.132.597-.13.298 0 .547.064.742.187.198.126.396.306.584.534.078.092.17.16.278.206.122.048.259.016.401-.101l.762-.594a.53.53 0 0 0 .201-.269.437.437 0 0 0-.034-.365 3.329 3.329 0 0 0-1.18-1.127c-.504-.291-1.108-.441-1.784-.441a3.519 3.519 0 0 0-2.51 1.033c-.322.322-.576.71-.747 1.137a3.68 3.68 0 0 0-.273 1.407c0 .495.093.968.273 1.402.173.424.427.808.747 1.128a3.527 3.527 0 0 0 2.51 1.034c.676 0 1.28-.149 1.784-.444a3.286 3.286 0 0 0 1.182-1.13.411.411 0 0 0 .055-.173.415.415 0 0 0-.023-.182.624.624 0 0 0-.197-.273zM136.06 9.045l-2.104-3.143 1.801-2.415c.094-.139.119-.272.075-.397-.031-.09-.116-.2-.334-.2h-1.425a.52.52 0 0 0-.234.058.482.482 0 0 0-.209.205L132.191 5.2h-.349V.363a.37.37 0 0 0-.099-.26.352.352 0 0 0-.253-.103h-1.332a.37.37 0 0 0-.337.22.346.346 0 0 0-.027.143V9.29c0 .103.038.193.11.259a.353.353 0 0 0 .254.104h1.333a.328.328 0 0 0 .251-.105.346.346 0 0 0 .075-.119.333.333 0 0 0 .024-.14V6.927h.386l1.571 2.446c.112.187.267.281.46.281h1.491c.226 0 .32-.11.358-.202.054-.13.038-.262-.047-.406zM102.863 2.89h-1.489a.389.389 0 0 0-.298.122.544.544 0 0 0-.13.249l-1.099 4.167h-.268l-1.182-4.167a.66.66 0 0 0-.113-.247.329.329 0 0 0-.264-.124h-1.544c-.199 0-.325.066-.372.193a.588.588 0 0 0-.002.37l1.887 5.865c.03.093.08.17.145.232a.388.388 0 0 0 .281.104h.798l-.066.19-.19.547a.872.872 0 0 1-.29.426.7.7 0 0 1-.442.148.956.956 0 0 1-.4-.09 1.842 1.842 0 0 1-.35-.209.62.62 0 0 0-.335-.115h-.016c-.13 0-.243.074-.334.216l-.474.708c-.193.304-.086.504.039.615.234.224.528.399.875.524.344.125.723.186 1.126.186.682 0 1.252-.187 1.689-.565.435-.376.756-.887.952-1.524l2.188-7.258c.05-.155.05-.284.005-.389-.037-.08-.125-.174-.327-.174z" fill="#ffffff"/>
  </svg>
`,cI=`
<svg id="inline-button-wordmark--grey" width="166" height="16" viewBox="0 0 166 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path
  d="M0.564068 6.26985L1.86515 6.10375C1.85184 5.15143 1.83489 3.71187 1.84942 3.45964C1.95955 1.67927 3.39982 0.16589 5.13056 0.0170127C5.23949 0.00839996 5.34842 0.0034784 5.45371 0.00101762C6.36645 -0.0209585 7.25272 0.313716 7.93 0.936113C8.62472 1.56238 9.07979 2.4864 9.14999 3.4055C9.16815 3.64174 9.1621 5.24002 9.1621 6.18249L10.4886 6.38305L10.4438 14.0767L5.47308 14.7657L0.519287 13.961L0.564068 6.26985ZM5.53359 5.63743L7.62016 5.95241C7.61169 4.80446 7.55965 3.12867 7.30548 2.68696C6.91939 2.0164 6.28156 1.62021 5.55901 1.60421H5.48276C4.7481 1.61406 4.10543 2.0004 3.71813 2.66727C3.44944 3.13236 3.39619 4.70972 3.3974 5.91181L5.53359 5.63743ZM22.5808 12.4378C21.8836 12.4378 21.293 12.3492 20.8089 12.172C20.372 12.0088 19.9719 11.7577 19.6325 11.4338C19.3256 11.1331 19.0833 10.7712 18.9208 10.3707C18.7637 9.95815 18.6612 9.52621 18.6158 9.08621H19.8358C19.8745 9.40119 19.9423 9.70141 20.0391 9.98686C20.136 10.2625 20.286 10.5085 20.4894 10.7251C20.6927 10.9318 20.959 11.0991 21.2882 11.2271C21.6271 11.3452 22.0579 11.4043 22.5808 11.4043C22.9197 11.4043 23.2295 11.36 23.5103 11.2714C23.8008 11.173 24.0525 11.0351 24.2655 10.858C24.4785 10.6808 24.6431 10.4692 24.7593 10.2231C24.8852 9.97701 24.9481 9.70633 24.9481 9.41103C24.9481 9.11574 24.9094 8.85982 24.8319 8.64327C24.7536 8.41559 24.6125 8.21568 24.4253 8.06745C24.196 7.88594 23.9347 7.75064 23.6555 7.6688C23.257 7.54201 22.849 7.4482 22.4355 7.38828C21.9393 7.31041 21.4491 7.19693 20.9686 7.04869C20.5808 6.92967 20.2133 6.75038 19.8794 6.51716C19.5939 6.29685 19.3607 6.01432 19.1968 5.69034C19.0418 5.35567 18.9644 4.9521 18.9644 4.47963C18.9644 4.07607 19.0467 3.70203 19.2113 3.35752C19.3759 3.00317 19.6034 2.69803 19.8939 2.44211C20.194 2.18619 20.5475 1.98441 20.9541 1.83676C21.3608 1.68911 21.811 1.61529 22.3048 1.61529C23.3505 1.61529 24.1784 1.86629 24.7884 2.36829C25.4081 2.86044 25.7711 3.57899 25.8777 4.52393H24.7448C24.6189 3.8546 24.3624 3.37721 23.9751 3.09176C23.5878 2.79646 23.031 2.64882 22.3048 2.64882C21.5883 2.64882 21.0461 2.81123 20.6782 3.13605C20.5037 3.28606 20.3648 3.47417 20.2717 3.68635C20.1787 3.89853 20.1339 4.12931 20.1408 4.36152C20.1408 4.61744 20.1698 4.84875 20.2279 5.05546C20.2957 5.25232 20.4167 5.42457 20.591 5.57222C20.775 5.71987 21.0267 5.85275 21.3463 5.97087C21.7689 6.09987 22.2012 6.19369 22.6389 6.25139C23.2198 6.33998 23.7281 6.4581 24.1639 6.60575C24.5996 6.75339 24.9675 6.94533 25.2677 7.18157C25.5678 7.4178 25.7905 7.70818 25.9358 8.05268C26.0907 8.39719 26.1681 8.82045 26.1681 9.32245C26.1681 9.76539 26.0761 10.1788 25.8922 10.5627C25.7149 10.9408 25.4627 11.2775 25.1515 11.5519C24.8319 11.8275 24.4495 12.0441 24.0041 12.2016C23.5684 12.359 23.094 12.4378 22.5808 12.4378ZM31.2066 12.4378C30.6741 12.4378 30.1803 12.3443 29.7252 12.1573C29.2906 11.9775 28.8956 11.7115 28.5633 11.3747C28.2268 11.0185 27.965 10.5966 27.7936 10.1345C27.6136 9.61796 27.5251 9.07309 27.5321 8.52515V8.40704C27.5321 7.82629 27.6193 7.29476 27.7936 6.81245C27.9679 6.3203 28.2099 5.90196 28.5198 5.55746C28.8393 5.2031 29.2169 4.93242 29.6526 4.7454C30.0883 4.54854 30.5676 4.45011 31.0905 4.45011C31.5262 4.45011 31.9473 4.52393 32.354 4.67158C32.7704 4.80938 33.1383 5.03085 33.4578 5.33599C33.7773 5.64112 34.0291 6.03977 34.213 6.53192C34.4067 7.01424 34.5035 7.5999 34.5035 8.28892V8.68756H28.7812C28.8102 9.57345 29.0281 10.2526 29.4348 10.7251C29.8414 11.1877 30.4369 11.419 31.2212 11.419C32.4121 11.419 33.085 10.9712 33.24 10.0754H34.4454C34.3099 10.8531 33.9516 11.4436 33.3707 11.8472C32.7897 12.2409 32.0684 12.4378 31.2066 12.4378ZM33.269 7.69833C33.2109 6.90104 32.9882 6.33014 32.6009 5.98563C32.2233 5.64112 31.7198 5.46887 31.0905 5.46887C30.4708 5.46887 29.9624 5.67065 29.5655 6.07422C29.1782 6.46794 28.9313 7.00932 28.8248 7.69833H33.269ZM39.3593 12.4378C38.8267 12.4378 38.3329 12.3492 37.8779 12.172C37.4401 11.9901 37.0407 11.7245 36.7014 11.3895C36.3636 11.0315 36.0973 10.6103 35.9172 10.1493C35.7268 9.63002 35.6332 9.07925 35.6412 8.52515V8.40704C35.6412 7.81645 35.738 7.28 35.9317 6.79769C36.1253 6.30553 36.3868 5.8872 36.716 5.54269C37.0548 5.19818 37.447 4.93242 37.8924 4.7454C38.3475 4.54854 38.8267 4.45011 39.3302 4.45011C39.7272 4.45011 40.1097 4.49932 40.4776 4.59775C40.8552 4.69618 41.1893 4.85367 41.4797 5.07022C41.7799 5.27693 42.0316 5.55253 42.235 5.89704C42.4383 6.24155 42.569 6.65988 42.6271 7.15204H41.4362C41.3393 6.54177 41.0924 6.10867 40.6955 5.85275C40.3082 5.59683 39.8531 5.46887 39.3302 5.46887C38.995 5.46599 38.6632 5.53649 38.3571 5.67557C38.0667 5.81338 37.8101 6.01024 37.5874 6.26616C37.3615 6.53514 37.1889 6.84598 37.0791 7.18157C36.9484 7.57626 36.8845 7.99063 36.8902 8.40704V8.52515C36.8902 9.47994 37.1178 10.2034 37.5729 10.6956C38.0376 11.1779 38.6379 11.419 39.3738 11.419C39.6449 11.419 39.9015 11.3797 40.1436 11.3009C40.6361 11.1497 41.0523 10.8113 41.3055 10.356C41.441 10.1197 41.5233 9.84413 41.5524 9.52915H42.6707C42.6338 9.9361 42.5204 10.3321 42.3366 10.6956C42.1663 11.0447 41.9293 11.3559 41.6395 11.611C41.349 11.8669 41.0101 12.0687 40.6228 12.2163C40.2355 12.364 39.8144 12.4378 39.3593 12.4378ZM46.9164 12.4378C46.5568 12.4406 46.199 12.3858 45.8562 12.2754C45.5441 12.1717 45.2605 11.9947 45.0284 11.7586C44.7829 11.4908 44.595 11.1741 44.4765 10.8284C44.3409 10.4544 44.2731 10.0016 44.2731 9.47009V4.58299H45.4786V9.41103C45.4786 10.0902 45.619 10.5873 45.8998 10.9023C46.1903 11.2172 46.6356 11.3747 47.236 11.3747C47.5071 11.3747 47.7685 11.3304 48.0202 11.2419C48.272 11.1533 48.4947 11.0204 48.6883 10.8432C48.882 10.666 49.0369 10.4446 49.1531 10.1788C49.2693 9.91303 49.3274 9.6079 49.3274 9.26339V4.58299H50.5328V12.3049H49.3274V11.0794C49.1531 11.4436 48.8578 11.7635 48.4414 12.0391C48.0348 12.3049 47.5264 12.4378 46.9164 12.4378ZM52.8239 4.58299H54.0294V5.97087C54.2715 5.53777 54.5765 5.18342 54.9444 4.90781C55.322 4.62236 55.8497 4.46979 56.5275 4.45011V5.60175C56.1799 5.61707 55.8346 5.66652 55.4963 5.7494C55.2039 5.81939 54.9308 5.95567 54.6975 6.14804C54.4729 6.35252 54.303 6.6116 54.2037 6.90104C54.0875 7.20618 54.0294 7.59498 54.0294 8.06745V12.3049H52.8239V4.58299ZM61.0347 12.4378C60.5021 12.4378 60.0083 12.3443 59.5533 12.1573C59.1186 11.9775 58.7236 11.7115 58.3914 11.3747C58.0549 11.0185 57.793 10.5966 57.6216 10.1345C57.4416 9.61796 57.3531 9.07309 57.3602 8.52515V8.40704C57.3602 7.82629 57.4473 7.29476 57.6216 6.81245C57.7959 6.3203 58.038 5.90196 58.3478 5.55746C58.6673 5.2031 59.0449 4.93242 59.4806 4.7454C59.9164 4.54854 60.3956 4.45011 60.9185 4.45011C61.3542 4.45011 61.7754 4.52393 62.1821 4.67158C62.5984 4.80938 62.9663 5.03085 63.2859 5.33599C63.6054 5.64112 63.8571 6.03977 64.0411 6.53192C64.2347 7.01424 64.3316 7.5999 64.3316 8.28892V8.68756H58.6092C58.6383 9.57345 58.8561 10.2526 59.2628 10.7251C59.6695 11.1877 60.2649 11.419 61.0492 11.419C62.2401 11.419 62.9131 10.9712 63.068 10.0754H64.2735C64.1379 10.8531 63.7797 11.4436 63.1987 11.8472C62.6178 12.2409 61.8964 12.4378 61.0347 12.4378ZM63.097 7.69833C63.0389 6.90104 62.8162 6.33014 62.429 5.98563C62.0513 5.64112 61.5478 5.46887 60.9185 5.46887C60.2988 5.46887 59.7905 5.67065 59.3935 6.07422C59.0062 6.46794 58.7593 7.00932 58.6528 7.69833H63.097ZM68.8968 12.4378C68.403 12.4378 67.9431 12.3541 67.5171 12.1868C67.1072 12.0141 66.7365 11.7578 66.4278 11.4338C66.1165 11.0803 65.8749 10.6693 65.7161 10.2231C65.5451 9.69956 65.4617 9.15057 65.4692 8.59898V8.48086C65.4692 7.89027 65.5564 7.3489 65.7307 6.85675C65.905 6.36459 66.147 5.94134 66.4569 5.58698C66.7667 5.22279 67.1395 4.94226 67.5752 4.7454C68.0109 4.54854 68.4902 4.45011 69.013 4.45011C69.6521 4.45011 70.1701 4.58791 70.5671 4.86352C70.964 5.12928 71.2739 5.44918 71.4966 5.82322V0.891819H72.702V12.3049H71.4966V10.9761C71.3901 11.1631 71.2448 11.3452 71.0609 11.5224C70.8713 11.7038 70.6617 11.8623 70.4363 11.9949C70.2066 12.1258 69.963 12.2298 69.7102 12.3049C69.4487 12.3935 69.1776 12.4378 68.8968 12.4378ZM69.0275 11.419C69.3761 11.419 69.7053 11.36 70.0152 11.2419C70.325 11.1237 70.5913 10.9466 70.814 10.7103C71.0367 10.4642 71.2109 10.1591 71.3368 9.79492C71.4724 9.42088 71.5401 8.98778 71.5401 8.49562V8.37751C71.5401 7.38335 71.3223 6.65004 70.8866 6.17757C70.4606 5.7051 69.8748 5.46887 69.1292 5.46887C68.374 5.46887 67.7834 5.72479 67.3573 6.23663C66.9313 6.74847 66.7183 7.47686 66.7183 8.4218V8.53992C66.7183 9.02223 66.7764 9.44549 66.8926 9.80968C67.0184 10.1739 67.183 10.4741 67.3864 10.7103C67.5994 10.9466 67.8463 11.1237 68.1271 11.2419C68.4079 11.36 68.708 11.419 69.0275 11.419ZM82.4716 12.4378C81.852 12.4378 81.3243 12.3 80.8886 12.0244C80.485 11.7813 80.146 11.4417 79.901 11.0351V12.3049H78.6955V0.891819H79.901V5.88228C80.0153 5.68531 80.1572 5.50626 80.3221 5.35075C80.5061 5.17357 80.7094 5.02101 80.9321 4.89305C81.1645 4.75524 81.4114 4.64697 81.6729 4.56822C81.9343 4.48948 82.2005 4.45011 82.4716 4.45011C82.9655 4.45011 83.4254 4.53869 83.8514 4.71587C84.2774 4.89305 84.6405 5.14897 84.9407 5.48363C85.2505 5.8183 85.4926 6.22679 85.6669 6.7091C85.8411 7.19141 85.9283 7.73278 85.9283 8.33321V8.45133C85.9283 9.04192 85.846 9.58329 85.6814 10.0754C85.5295 10.535 85.2929 10.9609 84.9843 11.3304C84.6852 11.6839 84.3133 11.9662 83.895 12.1573C83.4445 12.3492 82.96 12.4447 82.4716 12.4378ZM82.3555 11.419C83.1107 11.419 83.6868 11.173 84.0838 10.6808C84.4808 10.1788 84.6793 9.45533 84.6793 8.51039V8.39227C84.6793 7.90012 84.6163 7.47194 84.4904 7.10775C84.3829 6.77559 84.2099 6.46915 83.9821 6.2071C83.7841 5.96487 83.5294 5.77704 83.2414 5.66081C82.9581 5.53232 82.6511 5.46687 82.3409 5.46887C81.9924 5.46887 81.6632 5.52793 81.3533 5.64604C81.0537 5.7638 80.7852 5.95084 80.569 6.19234C80.3464 6.42857 80.1721 6.73371 80.0462 7.10775C79.9127 7.52209 79.8488 7.95635 79.8574 8.39227V8.51039C79.8574 9.4947 80.0898 10.228 80.5545 10.7103C81.0193 11.1828 81.6196 11.419 82.3555 11.419ZM89.6342 11.5076L86.6569 4.58299H87.9495L90.2733 10.1197L92.3792 4.58299H93.6137L89.4164 14.9921H88.1964L89.6342 11.5076ZM105.97 4.51532C105.618 4.13844 105.195 3.83755 104.727 3.63067C104.257 3.42601 103.751 3.32132 103.241 3.32307C102.698 3.32307 102.214 3.42888 101.804 3.64297C101.501 3.7934 101.229 4.00091 101.003 4.25447V4.01947C101.003 3.93064 100.979 3.84347 100.933 3.76781C100.888 3.69214 100.822 3.631 100.744 3.59129C100.691 3.56626 100.633 3.55364 100.574 3.55438H98.9827C98.9241 3.55245 98.8658 3.56433 98.8125 3.58909C98.7592 3.61385 98.7122 3.65082 98.6753 3.69711C98.5956 3.78474 98.5523 3.90019 98.5542 4.01947V15.0561C98.5542 15.1791 98.5954 15.2874 98.6753 15.3735C98.715 15.4152 98.7629 15.4479 98.8158 15.4698C98.8688 15.4916 98.9256 15.502 98.9827 15.5002H100.606C100.661 15.5001 100.715 15.4889 100.766 15.4671C100.817 15.4453 100.863 15.4135 100.901 15.3735C100.945 15.3333 100.979 15.284 101.002 15.229C101.025 15.174 101.036 15.1146 101.034 15.0548V11.2898C101.25 11.5384 101.539 11.7291 101.884 11.8607C102.307 12.0256 102.755 12.1105 103.207 12.1105C103.727 12.1105 104.233 12.0096 104.71 11.8054C105.185 11.599 105.613 11.2958 105.969 10.9146C106.338 10.5135 106.628 10.0422 106.824 9.52669C107.044 8.94733 107.152 8.33033 107.143 7.70941C107.143 7.045 107.038 6.43349 106.824 5.89212C106.631 5.38011 106.341 4.91182 105.97 4.51409V4.51532ZM104.513 8.50178C104.424 8.73555 104.295 8.94718 104.131 9.12928C103.969 9.31219 103.77 9.45789 103.547 9.55674C103.325 9.65558 103.085 9.70531 102.842 9.70264C102.6 9.70387 102.358 9.65342 102.136 9.55499C101.911 9.4556 101.71 9.31074 101.542 9.12928C101.375 8.94704 101.244 8.73407 101.155 8.50178C101.062 8.25439 101.015 7.99155 101.016 7.72663C101.016 7.45102 101.064 7.19141 101.155 6.95026C101.332 6.48635 101.682 6.1122 102.128 5.90935C102.352 5.80353 102.595 5.7494 102.842 5.75063C103.103 5.75063 103.343 5.80476 103.56 5.91058C103.774 6.0127 103.969 6.15542 104.134 6.33014C104.476 6.71058 104.661 7.21105 104.648 7.72663C104.648 8.00347 104.603 8.26308 104.513 8.50178ZM115.859 3.55684H114.249C114.193 3.55751 114.138 3.56987 114.087 3.59315C114.036 3.61643 113.99 3.65013 113.952 3.69219C113.868 3.78 113.821 3.8973 113.821 4.01947V4.22371C113.62 3.9808 113.372 3.78302 113.092 3.64297C112.654 3.42397 112.17 3.31511 111.681 3.32553C111.166 3.32821 110.657 3.43439 110.183 3.63795C109.708 3.84151 109.278 4.13843 108.917 4.51162C108.537 4.91069 108.236 5.37962 108.029 5.89335C107.801 6.47081 107.687 7.08847 107.696 7.71064C107.696 8.37505 107.807 8.98655 108.029 9.52792C108.251 10.0619 108.545 10.5331 108.91 10.9158C109.265 11.2945 109.693 11.5958 110.167 11.8016C110.641 12.0074 111.15 12.1133 111.665 12.113C112.194 12.113 112.675 12.0047 113.085 11.7943C113.388 11.6343 113.637 11.4412 113.821 11.2148V11.4326C113.82 11.4923 113.831 11.5516 113.854 11.6066C113.877 11.6615 113.911 11.7109 113.954 11.7512C113.993 11.7915 114.038 11.8236 114.089 11.8456C114.14 11.8676 114.194 11.879 114.249 11.8792H115.859C115.916 11.8812 115.972 11.8706 116.024 11.8483C116.077 11.826 116.124 11.7925 116.162 11.75C116.203 11.7085 116.235 11.6589 116.256 11.6043C116.277 11.5497 116.287 11.4912 116.285 11.4326V4.0207C116.287 3.90142 116.244 3.78597 116.164 3.69834C116.127 3.65337 116.08 3.61736 116.027 3.5929C115.975 3.56844 115.917 3.55613 115.859 3.55684ZM113.685 8.4907C113.601 8.72324 113.473 8.9368 113.308 9.11943C113.143 9.29538 112.95 9.43933 112.735 9.54269C112.52 9.64727 112.275 9.70141 112.014 9.70141C111.764 9.70141 111.521 9.64727 111.3 9.54146C111.079 9.4398 110.881 9.29437 110.717 9.11372C110.552 8.93306 110.425 8.72082 110.343 8.48947C110.253 8.24551 110.207 7.98712 110.207 7.72663C110.207 7.44979 110.253 7.19018 110.343 6.94903C110.433 6.71156 110.562 6.50116 110.723 6.32891C110.888 6.15296 111.086 6.00901 111.301 5.90812C111.521 5.80353 111.764 5.7494 112.015 5.7494C112.275 5.7494 112.52 5.80353 112.735 5.90935C112.951 6.01393 113.144 6.15542 113.308 6.32891C113.65 6.70961 113.834 7.21001 113.821 7.7254C113.821 7.98993 113.776 8.24709 113.685 8.4907ZM131.919 7.49901C131.685 7.28955 131.417 7.12228 131.127 7.00439C130.828 6.88012 130.511 6.78169 130.177 6.71525L128.95 6.46425C128.635 6.40273 128.416 6.3203 128.293 6.21448C128.242 6.17732 128.201 6.12853 128.172 6.07209C128.144 6.01565 128.128 5.95315 128.128 5.88966C128.128 5.75432 128.204 5.64358 128.357 5.54269C128.523 5.43688 128.755 5.38274 129.042 5.38274C129.357 5.38274 129.669 5.44795 129.958 5.57591C130.252 5.70633 130.528 5.85398 130.769 6.01885C131.126 6.24893 131.43 6.21817 131.649 5.95364L132.238 5.25232C132.351 5.13393 132.416 4.97752 132.422 4.81307C132.422 4.65558 132.345 4.51162 132.198 4.3812C131.948 4.15481 131.553 3.91612 131.023 3.68234C130.494 3.44611 129.829 3.32553 129.042 3.32553C128.525 3.32553 128.049 3.39689 127.628 3.53716C127.205 3.67988 126.842 3.87674 126.547 4.12036C126.251 4.37136 126.017 4.66173 125.858 4.99763C125.699 5.33341 125.617 5.70154 125.618 6.07422C125.618 6.76324 125.82 7.32552 126.218 7.74509C126.615 8.15481 127.145 8.43411 127.796 8.56945L129.072 8.8549C129.435 8.93118 129.711 9.01731 129.889 9.11328C130.045 9.19572 130.119 9.31383 130.119 9.47871C130.119 9.62635 130.045 9.758 129.892 9.87735C129.731 10.0053 129.478 10.0681 129.139 10.0681C128.79 10.0717 128.445 9.99161 128.133 9.83429C127.836 9.68469 127.56 9.49515 127.312 9.27077C127.202 9.17922 127.076 9.1084 126.941 9.0616C126.788 9.01608 126.616 9.0653 126.419 9.22155L125.714 9.78876C125.509 9.96717 125.423 10.1825 125.461 10.431C125.496 10.6697 125.691 10.9158 126.055 11.1939C126.38 11.4313 126.798 11.6467 127.3 11.8312C127.803 12.017 128.391 12.113 129.059 12.113C129.596 12.113 130.092 12.0416 130.529 11.9013C130.967 11.7549 131.354 11.5593 131.668 11.3108C131.98 11.0724 132.231 10.7631 132.404 10.4077C132.576 10.0523 132.663 9.66076 132.659 9.26462C132.659 8.87212 132.595 8.52638 132.46 8.23601C132.331 7.95492 132.147 7.70366 131.919 7.49778V7.49901ZM138.958 9.51193C138.923 9.445 138.872 9.3882 138.809 9.34687C138.747 9.30555 138.675 9.28105 138.601 9.27569C138.451 9.27322 138.305 9.3222 138.186 9.41473C138.071 9.49101 137.946 9.55007 137.815 9.58821C137.649 9.64412 137.47 9.64967 137.3 9.60421C137.219 9.58443 137.144 9.54519 137.081 9.48978C137.005 9.42056 136.946 9.33472 136.908 9.23878C136.855 9.09669 136.83 8.94521 136.836 8.79338V5.76662H138.931C139.051 5.76662 139.159 5.71741 139.253 5.62267C139.295 5.58108 139.329 5.5314 139.352 5.4765C139.376 5.42159 139.388 5.36254 139.389 5.30276V4.02193C139.389 3.96024 139.377 3.89918 139.353 3.84249C139.329 3.78579 139.294 3.73465 139.25 3.69219C139.165 3.60724 139.05 3.55916 138.931 3.55807H136.835V1.49717C136.838 1.43555 136.827 1.37406 136.805 1.31679C136.782 1.25952 136.748 1.20777 136.704 1.16497C136.627 1.08454 136.521 1.03854 136.41 1.03701H134.784C134.695 1.03555 134.609 1.06135 134.535 1.11101C134.462 1.16066 134.405 1.23182 134.372 1.31507C134.349 1.37287 134.338 1.43484 134.339 1.49717V3.55684H133.411C133.353 3.55549 133.294 3.5675 133.241 3.59199C133.188 3.61647 133.14 3.65281 133.102 3.69834C133.025 3.78687 132.982 3.90193 132.984 4.0207V5.304C132.985 5.39177 133.01 5.47753 133.055 5.55238C133.1 5.62724 133.164 5.68846 133.24 5.72971C133.294 5.75555 133.352 5.76908 133.41 5.76662H134.339V9.36551C134.339 9.84536 134.423 10.2588 134.581 10.5996C134.741 10.9367 134.951 11.2197 135.204 11.4313C135.466 11.6503 135.766 11.8128 136.088 11.9087C136.415 12.0121 136.755 12.0638 137.096 12.0638C137.562 12.0638 138.004 11.9887 138.421 11.8423C138.817 11.7053 139.175 11.4722 139.463 11.1631C139.647 10.9404 139.668 10.6943 139.518 10.4483L138.958 9.51316V9.51193ZM147.78 3.55684H146.171C146.116 3.55785 146.061 3.57036 146.01 3.59363C145.959 3.6169 145.914 3.65043 145.876 3.69219C145.835 3.73558 145.802 3.78651 145.779 3.84229C145.758 3.89876 145.746 3.95885 145.747 4.01947V4.22371C145.544 3.98167 145.295 3.78409 145.014 3.64297C144.609 3.43011 144.136 3.32553 143.601 3.32553C143.092 3.32553 142.591 3.42765 142.117 3.6319C141.638 3.83631 141.204 4.13534 140.84 4.51162C140.46 4.9102 140.158 5.37925 139.952 5.89335C139.722 6.47038 139.608 7.08828 139.618 7.71064C139.618 8.37505 139.729 8.98655 139.95 9.52792C140.173 10.0619 140.468 10.5331 140.833 10.9158C141.188 11.2943 141.614 11.5956 142.087 11.8014C142.56 12.0072 143.069 12.1132 143.584 12.113C144.076 12.1217 144.563 12.0125 145.006 11.7943C145.314 11.6343 145.559 11.4412 145.747 11.2148V11.4326C145.745 11.4921 145.756 11.5513 145.778 11.6062C145.801 11.6612 145.834 11.7106 145.877 11.7512C145.916 11.7913 145.961 11.8232 146.012 11.8452C146.062 11.8671 146.116 11.8787 146.171 11.8792H147.78C147.837 11.8806 147.893 11.8699 147.946 11.8476C147.998 11.8254 148.046 11.7921 148.085 11.75C148.166 11.6649 148.21 11.5508 148.208 11.4326V4.0207C148.21 3.90149 148.167 3.78617 148.087 3.69834C148.049 3.65272 148.002 3.61618 147.948 3.59129C147.895 3.56679 147.838 3.555 147.78 3.55684ZM145.606 8.4907C145.437 8.95456 145.095 9.33232 144.655 9.54269C144.43 9.64997 144.184 9.70423 143.936 9.70141C143.685 9.70141 143.446 9.64727 143.224 9.54146C143.004 9.43906 142.806 9.2934 142.642 9.11285C142.477 8.9323 142.349 8.72044 142.266 8.48947C142.175 8.24565 142.129 7.98721 142.129 7.72663C142.129 7.44979 142.174 7.19018 142.264 6.94903C142.353 6.71894 142.481 6.50855 142.645 6.32891C142.812 6.15296 143.008 6.00901 143.224 5.90812C143.447 5.8023 143.69 5.74817 143.936 5.7494C144.199 5.7494 144.438 5.80353 144.655 5.90935C144.874 6.01393 145.066 6.15542 145.226 6.32891C145.388 6.50486 145.517 6.71402 145.606 6.94903C145.796 7.44486 145.796 7.99486 145.606 8.4907ZM156.622 9.40119L155.699 8.67157C155.522 8.52638 155.355 8.48701 155.21 8.54853C155.079 8.60436 154.964 8.69079 154.872 8.80076C154.673 9.05649 154.434 9.27863 154.167 9.45902C153.934 9.60913 153.629 9.68418 153.269 9.68418C153.004 9.68418 152.76 9.63496 152.542 9.53407C152.327 9.43495 152.134 9.2917 151.975 9.11328C151.812 8.93013 151.686 8.71715 151.602 8.48578C151.515 8.24262 151.471 7.98546 151.474 7.72663C151.474 7.4461 151.515 7.18772 151.602 6.94903C151.687 6.71279 151.811 6.50239 151.975 6.33014C152.138 6.15296 152.332 6.01024 152.546 5.90935C152.772 5.80107 153.019 5.74694 153.269 5.7494C153.629 5.7494 153.931 5.82814 154.167 5.97948C154.406 6.13451 154.646 6.35598 154.873 6.63651C154.968 6.7497 155.079 6.83337 155.21 6.88997C155.358 6.94903 155.523 6.90965 155.695 6.7657L156.618 6.03485C156.732 5.95424 156.817 5.83809 156.861 5.70387C156.886 5.63045 156.896 5.55227 156.889 5.47473C156.882 5.39719 156.858 5.32214 156.82 5.25478C156.464 4.67928 155.973 4.20275 155.391 3.86813C154.781 3.51009 154.05 3.32553 153.232 3.32553C152.668 3.32238 152.109 3.43311 151.588 3.65129C151.066 3.86947 150.593 4.19076 150.194 4.59652C149.805 4.99271 149.497 5.4701 149.29 5.99547C149.07 6.54494 148.957 7.13314 148.96 7.72663C148.96 8.33567 149.072 8.91765 149.29 9.45164C149.5 9.97332 149.807 10.4458 150.194 10.8395C150.593 11.2451 151.067 11.5663 151.588 11.7846C152.11 12.003 152.668 12.1142 153.232 12.1117C154.05 12.1117 154.781 11.9284 155.391 11.5654C155.976 11.232 156.468 10.7537 156.822 10.1751C156.86 10.1101 156.882 10.0374 156.889 9.96225C156.896 9.88643 156.886 9.80992 156.861 9.73832C156.813 9.60626 156.731 9.49007 156.622 9.40242V9.40119ZM165.194 11.1299L162.647 7.26277L164.827 4.29138C164.941 4.12036 164.971 3.95672 164.918 3.80292C164.88 3.69219 164.777 3.55684 164.514 3.55684H162.789C162.69 3.55775 162.593 3.58219 162.506 3.62821C162.398 3.68359 162.309 3.77173 162.253 3.88043L160.511 6.39904H160.089V0.447649C160.091 0.329229 160.048 0.214475 159.969 0.127748C159.929 0.0869473 159.881 0.0547186 159.828 0.0329554C159.776 0.0111921 159.719 0.000333517 159.663 0.00101762H158.051C157.964 0.00131009 157.88 0.0270233 157.807 0.0750545C157.735 0.123086 157.678 0.191382 157.643 0.271703C157.62 0.327334 157.608 0.387308 157.61 0.447649V11.4313C157.61 11.5581 157.656 11.6688 157.743 11.75C157.783 11.7911 157.831 11.8236 157.884 11.8456C157.937 11.8676 157.993 11.8786 158.051 11.878H159.664C159.721 11.8798 159.777 11.8692 159.83 11.8469C159.882 11.8246 159.929 11.7912 159.968 11.7488C160.007 11.7068 160.038 11.657 160.058 11.6024C160.08 11.5477 160.09 11.489 160.087 11.4301V8.52392H160.555L162.456 11.5335C162.592 11.7635 162.779 11.8792 163.013 11.8792H164.817C165.091 11.8792 165.205 11.7439 165.251 11.6307C165.316 11.4707 165.297 11.3083 165.194 11.1311V11.1299ZM125.015 3.55684H123.213C123.146 3.55424 123.079 3.56628 123.017 3.59218C122.954 3.61807 122.898 3.6572 122.852 3.70695C122.774 3.79331 122.72 3.89895 122.695 4.01332L121.365 9.14035H121.041L119.61 4.01332C119.586 3.90347 119.539 3.79998 119.473 3.70941C119.435 3.66072 119.386 3.62162 119.331 3.59516C119.276 3.5687 119.215 3.55559 119.154 3.55684H117.285C117.044 3.55684 116.892 3.63805 116.835 3.79431C116.786 3.94184 116.785 4.10149 116.832 4.24955L119.116 11.4658C119.152 11.5802 119.213 11.675 119.292 11.7512C119.337 11.7944 119.391 11.828 119.449 11.8499C119.507 11.8719 119.57 11.8818 119.632 11.8792H120.598L120.518 12.113L120.288 12.786C120.225 12.9927 120.103 13.1754 119.937 13.3101C119.784 13.4312 119.595 13.4954 119.402 13.4922C119.234 13.4914 119.069 13.4536 118.918 13.3815C118.768 13.312 118.625 13.2257 118.494 13.1243C118.375 13.0381 118.234 12.9889 118.089 12.9829H118.069C117.912 12.9829 117.775 13.0739 117.665 13.2486L117.091 14.1197C116.858 14.4938 116.987 14.7399 117.139 14.8764C117.422 15.152 117.778 15.3673 118.198 15.5211C118.614 15.6749 119.073 15.75 119.56 15.75C120.386 15.75 121.076 15.5199 121.605 15.0548C122.131 14.5922 122.52 13.9635 122.757 13.1797L125.405 4.24955C125.465 4.05884 125.465 3.90012 125.411 3.77093C125.366 3.6725 125.26 3.55684 125.015 3.55684Z"
  fill="#838383"
/>
</svg>
`,dI=`
  <button type="button" id="apple-pay-close-button">
    <svg width="10" height="9" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M5.572 4.033L8.89.71a.4.4 0 0 0-.566-.566L5.003 3.459 1.681.145a.4.4 0 0 0-.566.566L4.44 4.033
      1.115 7.354a.398.398 0 0 0 0 .566.4.4 0 0 0 .566 0l3.322-3.33 3.322 3.33a.4.4 0 0 0 .566-.566L5.57 4.033z"
        fill="white"
      />
    </svg>
  </button>
`,uI=`
<svg width="74" height="19" viewBox="0 0 74 19" fill="none" xmlns="http://www.w3.org/2000/svg" id="vault-logo">
  <g clip-path="url(#clip0_9910_9664)">
    <path
      d="M32.1273 15.8163H28.9432C28.6448 15.8163 28.4481 15.6622 28.3497 15.3507L25.1886 6.20188C25.1165 6.01825 25.1296 5.85101 25.2214 5.70345C25.3132 5.55589 25.451 5.48047 25.6346 5.48047H27.9693C28.2513 5.48047 28.435 5.63787 28.5202 5.94611L30.6648 12.9077L32.5536 5.94611C32.6388 5.63459 32.829 5.48047 33.1274 5.48047H35.4195C35.6031 5.48047 35.7441 5.55589 35.8425 5.70345C35.9409 5.85101 35.954 6.01825 35.8851 6.20188L32.7241 15.3507C32.6257 15.6622 32.4257 15.8163 32.1305 15.8163H32.1273Z"
      fill="#343C43" />
    <path
      d="M37.6361 14.5842C36.6097 13.5644 36.0981 12.2495 36.0981 10.6362C36.0981 9.02283 36.6097 7.71118 37.6361 6.69792C38.6624 5.68795 39.8757 5.17969 41.2759 5.17969C41.9416 5.17969 42.5384 5.31085 43.0696 5.57318C43.6008 5.83551 43.9943 6.16998 44.2468 6.57988V5.94373C44.2468 5.81584 44.2927 5.70763 44.3845 5.61581C44.4763 5.524 44.578 5.47809 44.6927 5.47809H46.8373C46.9652 5.47809 47.0701 5.524 47.1554 5.61581C47.2406 5.70763 47.2833 5.81584 47.2833 5.94373V15.3679C47.2833 15.4958 47.2406 15.6008 47.1554 15.686C47.0701 15.7713 46.9652 15.8139 46.8373 15.8139H44.6927C44.578 15.8139 44.4763 15.7713 44.3845 15.686C44.2927 15.6008 44.2468 15.4958 44.2468 15.3679V14.7088C43.991 15.1187 43.6008 15.4565 43.0696 15.7155C42.5384 15.9779 41.935 16.109 41.2562 16.109C39.8691 16.109 38.6624 15.6008 37.6361 14.581V14.5842ZM39.9151 8.79985C39.433 9.31795 39.1936 9.93443 39.1936 10.6558C39.1936 11.3772 39.433 11.997 39.9151 12.5118C40.3971 13.0299 40.9972 13.2857 41.7186 13.2857C42.44 13.2857 43.0401 13.0266 43.5221 12.5118C44.0041 11.997 44.2435 11.3772 44.2435 10.6558C44.2435 9.93443 44.0041 9.31467 43.5221 8.79985C43.0401 8.28502 42.44 8.02597 41.7186 8.02597C40.9972 8.02597 40.3938 8.28502 39.9151 8.79985Z"
      fill="#343C43" />
    <path
      d="M51.6315 5.9016V11.2302C51.6315 11.9385 51.8086 12.4959 52.1627 12.9058C52.5169 13.3157 53.0415 13.5223 53.7334 13.5223C54.4253 13.5223 54.9401 13.319 55.3139 12.9058C55.6878 12.4959 55.878 11.9516 55.878 11.2728V5.9016C55.878 5.78683 55.9239 5.68845 56.0157 5.60319C56.1075 5.51794 56.2092 5.47531 56.3239 5.47531H58.4685C58.6095 5.47531 58.7242 5.52122 58.8095 5.61303C58.8948 5.70485 58.9374 5.81306 58.9374 5.94094V15.3652C58.9374 15.4931 58.8948 15.598 58.8095 15.6832C58.7242 15.7685 58.6128 15.8111 58.4685 15.8111H56.3239C56.196 15.8111 56.0911 15.7718 56.0058 15.6931C55.9206 15.6144 55.878 15.5127 55.878 15.3848V14.7257C55.1139 15.6472 54.081 16.1062 52.7792 16.1062C51.4774 16.1062 50.4707 15.7062 49.7132 14.9061C48.9557 14.106 48.5786 13.0501 48.5786 11.7319V5.89504C48.5786 5.78027 48.6278 5.68189 48.7262 5.59664C48.8246 5.51138 48.9295 5.46875 49.0442 5.46875H51.1658C51.2937 5.46875 51.4019 5.51138 51.4938 5.59664C51.5856 5.68189 51.6315 5.78027 51.6315 5.89504V5.9016Z"
      fill="#343C43" />
    <path
      d="M62.9872 15.8148C62.0658 15.8148 61.387 15.582 60.9509 15.113C60.5115 14.6474 60.2917 14.0178 60.2917 13.2243V1.42267C60.2917 1.29478 60.3344 1.18657 60.4196 1.09475C60.5049 1.00294 60.6164 0.957031 60.7607 0.957031H62.8823C63.0233 0.957031 63.138 1.00294 63.2233 1.09475C63.3085 1.18657 63.3512 1.29478 63.3512 1.42267V12.6078C63.3512 12.8045 63.4069 12.9652 63.5217 13.0865C63.6332 13.2079 63.7906 13.2669 63.9873 13.2669H64.6464C64.9448 13.2669 65.0924 13.4144 65.0924 13.7129V15.2409C65.0924 15.6246 64.8956 15.8148 64.4989 15.8148H62.9905H62.9872Z"
      fill="#343C43" />
    <path
      d="M66.722 12.7378V8.04861H65.3644C65.2365 8.04861 65.1316 8.00271 65.0463 7.91089C64.9611 7.81907 64.9185 7.71086 64.9185 7.58298V5.94997C64.9185 5.82208 64.9611 5.71387 65.0463 5.62206C65.1316 5.53024 65.2365 5.48433 65.3644 5.48433H66.722V2.74626C66.722 2.60526 66.7679 2.49049 66.8597 2.40523C66.9515 2.31997 67.0597 2.27734 67.1876 2.27734H69.3518C69.4666 2.27734 69.5683 2.31997 69.6601 2.40523C69.7519 2.49049 69.7978 2.60198 69.7978 2.74626V5.48433H72.7064C72.8343 5.48433 72.9458 5.53024 73.0474 5.62206C73.1458 5.71387 73.195 5.82208 73.195 5.94997V7.58298C73.195 7.69775 73.1458 7.80268 73.0474 7.90105C72.949 7.99943 72.8343 8.04861 72.7064 8.04861H69.7978V12.0164C69.7978 12.4689 69.9027 12.7804 70.1159 12.9509C70.329 13.1214 70.5684 13.2067 70.8373 13.2067C71.1193 13.2067 71.4308 13.1083 71.7718 12.9083C72.1555 12.6689 72.4441 12.6951 72.6408 12.9935L73.3852 14.1806C73.5557 14.4495 73.5327 14.7052 73.3229 14.9446C72.6146 15.6792 71.5948 16.0497 70.2667 16.0497C69.2764 16.0497 68.437 15.7742 67.7516 15.2234C67.0663 14.6725 66.722 13.8428 66.722 12.741V12.7378Z"
      fill="#343C43" />
    <path
      d="M15.2266 0H4.43496C2.26089 0 0.5 1.76089 0.5 3.93496V14.7266C0.5 16.9006 2.26089 18.6615 4.43496 18.6615H15.2266C17.4006 18.6615 19.1615 16.9006 19.1615 14.7266V3.93496C19.1615 1.76089 17.4006 0 15.2266 0ZM15.079 12.2312L12.1442 14.6118C11.9114 14.8086 11.5507 14.6807 11.4949 14.379L10.8161 11.8934C10.7702 11.6934 10.8489 11.4868 11.0096 11.3589C11.4425 11.0113 11.7179 10.4801 11.7179 9.8833C11.7179 8.44048 10.098 7.37476 8.5765 8.40113C8.48468 8.46344 8.40598 8.54214 8.34368 8.63723C7.63539 9.68983 7.92723 10.7883 8.65192 11.3655C8.8126 11.4934 8.88474 11.6967 8.84211 11.8967L8.22891 14.3823C8.17317 14.6839 7.81246 14.8118 7.57964 14.6151L4.57924 12.2344C4.47431 12.1262 4.41856 11.9787 4.4284 11.8278L4.77271 6.69271C4.78582 6.49268 4.91371 6.31561 5.09734 6.23691L9.41924 4.03661C9.68157 3.9284 9.97341 3.9284 10.2357 4.03661L14.5576 6.23691C14.7445 6.31561 14.8691 6.49268 14.8855 6.69271L15.2299 11.8278C15.2397 11.9787 15.1839 12.1262 15.079 12.2344V12.2312Z"
      fill="#343C43" />
  </g>
  <defs>
    <clipPath id="clip0_9910_9664">
      <rect width="73" height="18.6615" fill="white" transform="translate(0.5)" />
    </clipPath>
  </defs>
</svg>
`,Lf={height:"50px",width:"auto",borderRadius:"3px",padding:"10px",locale:"en",type:"pay"},Hv=function(e){return e&&xo(e)==="object"?Object.keys(Lf).reduce(function(t,r){return ss(ss({},t),{},P5({},r,e[r]||Lf[r]))},{}):Lf},hI=`
  .pre-checkout-modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100vw;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.75);
    transition: all 0.2s ease;
  }

  .pre-checkout-modal.show {
    display: block;
  }

  .pre-checkout-modal__content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    margin-left: auto;
    margin-right: auto;
    background-color: #fefefe;
    padding: 20px;
    padding-bottom: max(30px, env(safe-area-inset-bottom));
    width: 100%;
    border-radius: 6px 6px 0 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 350px;

    box-sizing: border-box;
    transform: translateY(238px);
    transition: transform 0.3s cubic-bezier(.16,.81,.32,1);
  }

  .modal-wrapper {
    width: 100%;
  }

  .payment-info {
    position: relative;
    padding-bottom: 15px;
    border-bottom: solid 1px whitesmoke;
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    width: 100%;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
  }

  .customer-email {
    color: #737373;
    font-size: 13px;
    line-height: 16px;
  }

  .customer-info {
    flex: 1;
    text-align: right;
  }

  .merchant-logo {
    display: flex;
    align-items: center;
    height: 30px;
  }
  .transaction-amount {
    margin-top: 5px;
    font-size: 13px;
    line-height: 16px;
    color: #737373;
  }

  .amount {
    color: #29b263;
    font-weight: bold;
  }

  @media only screen and (min-width: 500px) {
    .pre-checkout-modal__content {
      bottom: 0;
      top: 0;
      margin: auto;
      border-radius: 6px;
      height: fit-content;
    }
  }

  .pre-checkout-modal__content.show {
    transform: translateY(0);
    margin: 0 auto;
    margin-top: 100px;
  }

  .pre-checkout-modal__content > * {
    margin-top: 0;
    margin-bottom: 40px;
  }
  .pre-checkout-modal__content > *:last-child {
    margin-bottom: 0;
  }

  .pre-checkout-modal__content svg {
    margin: auto;
    width: 100%;
  }

  #inline-button-wordmark--white {
    position: absolute;
    bottom: -50px;
    margin: auto;
    left: 0;
    right: 0;
    width: fit-content;
  }

  #inline-button-wordmark--grey {
    display: none;
  }

  .pre-checkout-modal__content #apple-pay-mark--light {
    margin-bottom: 16px;
  }

  .pre-checkout-modal p {
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
    color: #4E4E4E;
    line-height: 140%;
    font-size: 14px;
    font-weight: 500;
    margin: 0;
    padding: 0 20px;
    text-align: center;
    letter-spacing: -0.3px;
  }

  .pre-checkout-modal button {
    height: 42px;
    width: 100%;
    
    box-sizing: border-box;
    border-radius: 3px;
    font-size: 14px;
    line-height: 24px;
    cursor: pointer;
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
  }

  .pre-checkout-modal .open-paystack-pop-button {
    background: #FAFAFA;
    border: 1px solid #F2F3F3;
    color: #4E4E4E;
    font-weight: 500;
  }

  .pre-checkout-modal .open-paystack-pop-button:hover, 
  .pre-checkout-modal .open-paystack-pop-button:active, 
  .pre-checkout-modal .open-paystack-pop-button:focus {
    background: #F2F3F3;
  }

  .pre-checkout-modal .pay-with-vault-button {
    font-weight: 700;
    background: #44b669;
    background: linear-gradient(to bottom, #44b669 0%, #40ad57 100%);
    border: solid 1px #49a861;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
    outline: none;
    color: white;
    transition: all 300ms;
  }

  .pre-checkout-modal .vault-instruction {
    color: #2f3d4d;
    font-size: 14px;
    letter-spacing: normal;
    line-height: 1.4;
    margin: 0 auto 24px;
    padding: 0;
  }
  .vault-logo-container {
    width: 74px;
    height: 20px;
    margin: 0 auto 24px
  }
  .vault-logo-container img {
    height: 100%;
    width: 100%;
    border-radius: 8px;
  }
  .vault-divider {
    margin-bottom: 16px;
    margin-top: 24px;
    position: relative;
  }
  .vault-divider__container {
    align-items: center;
    bottom: 0;
    display: flex;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
  }
  .vault-divider__line {
    border: 1px dashed #ccced0;
    width: 100%;
  }
  .vault-divider__text-container {
    display: flex;
    justify-content: center;
    position: relative;
  }
  .vault-divider__text {
    background-color: #fff;
    color: #999da1;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: -.3px;
    line-height: 19.6px;
    margin-bottom: 2px;
    padding: 0 8px;
  }

  #payment-request-button {
    width: 100%;
    height: fit-content;
    margin: 24px 0 16px 0;
  }

  #paystackpop-button {
    padding: 0 16px;
  }

  #apple-pay-close-button {
    position: absolute;
    text-align: center;
    top: 0;
    right: -26px;
    height: 16px;
    width: 16px;
    padding: 0;
    display: inline-block;
    z-index: 3;
    border-radius: 50%;
    background: transparent;
    transition: all 300ms;
    outline: none;
    cursor: pointer;
    border: none;
  }

  #apple-pay-close-button svg {
    width: initial;
  }
  
  #apple-pay-close-button:hover {
    background-color: #e22b28;
  }

  @media only screen and (max-width: 500px) {
    .pre-checkout-modal__content {
      max-width: 500px;
      border-radius: 0;
      padding-bottom: 0;
    }

    .modal-wrapper {
      padding: 0;
    }

    .vault-logo-container {
      width: 74px;
      height: 20px;
    }

    #inline-button-wordmark--white {
      display: none
    }
    
    #inline-button-wordmark--grey {
      display: block;
      width: 100%;
      margin: 16px 0;
      height: 13px;
    }

    #apple-pay-close-button {
      display: none;
    }
  }
`,Yv=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Number(parseFloat(e/100).toFixed(2))},Wv={headers:{accept:"application/json, text/plain, */*","accept-language":"en-GB,en-US;q=0.9,en;q=0.8","content-type":"application/x-www-form-urlencoded","sec-ch-ua-mobile":"?0","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"cross-site"},referrerPolicy:"no-referrer-when-downgrade",method:"POST",mode:"cors",credentials:"omit"};function Kv(e){return Object.keys(e).reduce(function(t,r){var n=encodeURIComponent(r),a=encodeURIComponent(e[r]),i="".concat(n,"=").concat(a);return[].concat(oI(t),[i])},[]).join("&")}var mI=function(e){return{biannually:"BIANNUAL PLAN",annually:"ANNUAL PLAN"}[e]||"".concat(e.toUpperCase()," PLAN")},R5=function(){try{return window.location&&window.location.protocol==="https:"&&window.ApplePaySession&&window.ApplePaySession.supportsVersion(fr.applePayVersion)}catch{return!1}},M0=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R5()&&e.includes("apple_pay")};function fI(){var e=0;return Array.from(document.querySelectorAll("body *")).forEach(function(t){var r=window.getComputedStyle(t),n=parseFloat(r.zIndex);!Number.isNaN(n)&&n>e&&(e=n)}),e}function $f(e){var t=document.createElement("iframe");return t.setAttribute("frameBorder","0"),t.setAttribute("allowtransparency","true"),t.id=e,t.style.display="none",t}function Yu(e){return e.querySelector("apple-pay-button")||e.querySelector("#apple-pay-button")}function wu(e){return document.querySelector("#".concat(e))}function Gv(e,t,r){var n=t.channels,a=n===void 0?[]:n,i=t.styles,o=i===void 0?{}:i,l={applePay:!1};return new Promise(function(c,u){if(e)if(M0(a)){if(Yu(e))return l.applePay=!0,void c(l);(function(m,h){return new Promise(function(p,y){var N=document.createElement("script");N.src=m,N.addEventListener("load",function(){p(!0)}),N.addEventListener("error",function(){N.remove(),y(!1)}),h?h.appendChild(N):document.head.appendChild(N)})})("https://applepay.cdn-apple.com/jsapi/v1.1.0/apple-pay-sdk.js",e).then(function(){if(r&&r!==1077497&&window&&!Array.isArray(window.webpackJsonp))throw new Error("Incorrect data type for 'webpackJsonp', expected array, got ".concat(xo(window.webpackJsonp),". Switching to fallback apple pay button"));(function(m,h){var p=h.styles,y=h.theme,N=document.createElement("style"),f=function(b){var x=b.height,w=b.width,C=b.borderRadius,S=b.padding;return`
  apple-pay-button {
    --apple-pay-button-width: `.concat(w,`;
    --apple-pay-button-height: `).concat(x,`;
    --apple-pay-button-border-radius: `).concat(C,`;
    --apple-pay-button-padding: `).concat(S,`;
    --apple-pay-button-box-sizing: border-box;
    width: `).concat(w,`;
  }
`)}(p);N.type="text/css",N.styleSheet?N.styleSheet.cssText=f:N.appendChild(document.createTextNode(f)),m.appendChild(N);var j=document.createElement("apple-pay-button");j.setAttribute("buttonstyle",y==="light"?"white":"black"),j.setAttribute("type",p.type),j.setAttribute("locale",p.locale),m.appendChild(j)})(e,{styles:Hv(o.applePay),theme:o.theme}),l.applePay=!0,c(l)}).catch(function(){(function(m,h){var p=h.styles,y=h.theme,N=document.createElement("style"),f=function(x){var w=x.height,C=x.width,S=x.borderRadius,M=x.padding,A=x.type,R=x.locale;return`
  @supports (-webkit-appearance: -apple-pay-button) { 
    .apple-pay-button {
        display: inline-block;
        -webkit-appearance: -apple-pay-button;
        width: `.concat(C,`;
        height: `).concat(w,`;
        border-radius: `).concat(S,`;
        padding: `).concat(M,`;
        -apple-pay-button-type: `).concat(A,`;
        -webkit-locale: `).concat(R,`;
    }
    .apple-pay-button-black {
        -apple-pay-button-style: black;
    }
    .apple-pay-button-white {
        -apple-pay-button-style: white;
    }
    .apple-pay-button-white-with-line {
        -apple-pay-button-style: white-outline;
    }
  }

  @supports not (-webkit-appearance: -apple-pay-button) {
    .apple-pay-button {
        display: inline-block;
        background-size: 100% 60%;
        background-repeat: no-repeat;
        background-position: 50% 50%;
        border-radius: 5px;
        padding: 0px;
        box-sizing: border-box;
        min-width: 200px;
        min-height: 32px;
        max-height: 64px;
    }
    .apple-pay-button-black {
        background-image: -webkit-named-image(apple-pay-logo-white);
        background-color: black;
    }
    .apple-pay-button-white {
        background-image: -webkit-named-image(apple-pay-logo-black);
        background-color: white;
    }
    .apple-pay-button-white-with-line {
        background-image: -webkit-named-image(apple-pay-logo-black);
        background-color: white;
        border: .5px solid black;
    }
  }
`)}(p);N.type="text/css",N.styleSheet?N.styleSheet.cssText=f:N.appendChild(document.createTextNode(f)),m.appendChild(N);var j=document.createElement("button");j.classList.add("apple-pay-button",y==="light"?"apple-pay-button-white":"apple-pay-button-black"),j.id="apple-pay-button";var b=document.createElement("span");b.classList.add("logo"),j.appendChild(b),m.appendChild(j)})(e,{styles:Hv(o.applePay),theme:o.theme}),l.applePay=!0,c(l)})}else u("No wallet payment method is available on this device");else u("Container to mount elements was not provided")})}function pI(e){for(;e.firstChild;)e.removeChild(e.firstChild)}var M5="payment-request-button",_5="paystackpop-button",D5="pay-with-vault-button";function I5(e){var t=document.createElement("button");return t.id=_5,t.className="open-paystack-pop-button",t.innerText=e,t}function Qv(e){return e.querySelector("#".concat(_5))}function F5(){var e=document.createElement("div");return e.id=M5,e}function zf(e){return e.querySelector("#".concat(M5))}function xI(){var e=document.createElement("button");return e.className="pay-with-vault-button",e.id=D5,e.innerText="Pay with Vault",e}function gI(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=document.createElement("div");r.className="vault-logo-container",r.innerHTML=uI,e.appendChild(r);var n=document.createElement("p");n.id="instruction",n.className="vault-instruction",n.innerHTML="Access your saved cards and bank details for faster, more secure payments",e.appendChild(n);var a=xI();e.appendChild(a);var i=document.createElement("div");if(i.className="vault-divider",i.innerHTML='<div id="vault-divider" class="vault-divider__container"><div class="vault-divider__line"></div></div><div class="vault-divider__text-container"><span class="vault-divider__text">or</span></div>',e.appendChild(i),t.canPayWithApplePay){var o=F5();e.appendChild(o)}var l=I5("Use other payment methods");e.appendChild(l)}function bI(e){var t=document.createElement("div");t.innerHTML=`
  <svg width="51" height="32" viewBox="0 0 51 32" fill="none" xmlns="http://www.w3.org/2000/svg" id="apple-pay-mark--light">
    <g>
    <path d="M46.0162 0H4.98386C4.81297 0 4.64177 0 4.47118 0.000996555C4.32698 0.00202331 4.18311 0.00362383 4.03925 0.00754966C3.72548 0.0160355 3.40903 0.0345472 3.09919 0.0902335C2.7844 0.146886 2.49148 0.239294 2.20571 0.384791C1.92477 0.52766 1.66757 0.71453 1.44468 0.937516C1.22169 1.1605 1.03482 1.41728 0.891977 1.69852C0.74645 1.98429 0.653982 2.27731 0.597722 2.59234C0.541737 2.90227 0.523101 3.21866 0.514645 3.53209C0.51078 3.67596 0.509122 3.81982 0.508183 3.96366C0.507186 4.13461 0.507519 4.30545 0.507519 4.4767V27.5236C0.507519 27.6949 0.507186 27.8654 0.508183 28.0367C0.509122 28.1805 0.51078 28.3244 0.514645 28.4683C0.523101 28.7814 0.541737 29.0978 0.597722 29.4077C0.653982 29.7228 0.74645 30.0157 0.891977 30.3015C1.03482 30.5827 1.22169 30.8399 1.44468 31.0625C1.66757 31.2859 1.92477 31.4727 2.20571 31.6152C2.49148 31.7611 2.7844 31.8535 3.09919 31.9102C3.40903 31.9655 3.72548 31.9843 4.03925 31.9928C4.18311 31.9961 4.32698 31.998 4.47118 31.9987C4.64177 32 4.81297 32 4.98386 32H46.0162C46.1868 32 46.358 32 46.5286 31.9987C46.6724 31.998 46.8163 31.9961 46.9608 31.9928C47.2739 31.9843 47.5903 31.9655 47.9009 31.9102C48.2153 31.8535 48.5083 31.7611 48.7941 31.6152C49.0753 31.4727 49.3317 31.2859 49.5551 31.0625C49.7777 30.8399 49.9646 30.5827 50.1078 30.3015C50.2537 30.0157 50.346 29.7228 50.402 29.4077C50.458 29.0978 50.4762 28.7814 50.4847 28.4683C50.4886 28.3244 50.4906 28.1805 50.4912 28.0367C50.4925 27.8654 50.4926 27.6949 50.4926 27.5236V4.4767C50.4926 4.30545 50.4925 4.13461 50.4912 3.96366C50.4906 3.81982 50.4886 3.67596 50.4847 3.53209C50.4762 3.21866 50.458 2.90227 50.402 2.59234C50.346 2.27731 50.2537 1.98429 50.1078 1.69852C49.9646 1.41728 49.7777 1.1605 49.5551 0.937516C49.3317 0.71453 49.0753 0.52766 48.7941 0.384791C48.5083 0.239294 48.2153 0.146886 47.9009 0.0902335C47.5903 0.0345472 47.2739 0.0160355 46.9608 0.00754966C46.8163 0.00362383 46.6724 0.00202331 46.5286 0.000996555C46.358 0 46.1868 0 46.0162 0Z" fill="black"/>
    <path d="M46.0162 1.06662L46.521 1.06759C46.6577 1.06855 46.7945 1.07003 46.932 1.07378C47.1711 1.08024 47.4509 1.09319 47.7117 1.13994C47.9384 1.18077 48.1285 1.24286 48.311 1.33575C48.4911 1.42728 48.6562 1.54723 48.8003 1.69113C48.9449 1.83599 49.065 2.0013 49.1578 2.18343C49.2501 2.36447 49.3118 2.55369 49.3524 2.78205C49.3991 3.04001 49.412 3.32055 49.4185 3.56121C49.4222 3.69704 49.424 3.83287 49.4247 3.97194C49.426 4.14012 49.4259 4.3082 49.4259 4.47671V27.5236C49.4259 27.6921 49.426 27.8599 49.4246 28.0317C49.424 28.1675 49.4222 28.3033 49.4185 28.4394C49.4119 28.6797 49.3991 28.9601 49.3519 29.2211C49.3118 29.4463 49.2502 29.6356 49.1573 29.8175C49.0648 29.9992 48.9449 30.1643 48.8009 30.3083C48.656 30.4532 48.4915 30.5728 48.3092 30.6652C48.1281 30.7576 47.9383 30.8197 47.7138 30.8601C47.4477 30.9075 47.1562 30.9205 46.9367 30.9265C46.7986 30.9296 46.6611 30.9315 46.5203 30.9321C46.3525 30.9334 46.1841 30.9334 46.0162 30.9334H4.98386C4.98162 30.9334 4.97945 30.9334 4.97718 30.9334C4.81127 30.9334 4.64503 30.9334 4.4761 30.9321C4.33836 30.9315 4.20093 30.9296 4.06805 30.9266C3.8435 30.9205 3.55181 30.9075 3.2879 30.8604C3.06151 30.8197 2.87171 30.7576 2.68822 30.664C2.50766 30.5724 2.34329 30.453 2.19831 30.3077C2.05444 30.1641 1.93488 29.9995 1.84245 29.8176C1.74992 29.6358 1.68801 29.446 1.64731 29.218C1.60025 28.9576 1.58733 28.6783 1.58087 28.4396C1.57718 28.303 1.57564 28.1664 1.57476 28.0305L1.5741 27.6295L1.57413 27.5236V4.47671L1.5741 4.37083L1.57473 3.97067C1.57564 3.83402 1.57718 3.6974 1.58087 3.56088C1.58733 3.32197 1.60025 3.04258 1.64769 2.77991C1.68804 2.55405 1.74992 2.36422 1.84293 2.18155C1.93464 2.001 2.05441 1.83617 2.19903 1.69158C2.34308 1.54747 2.50799 1.42767 2.6897 1.33527C2.87122 1.24283 3.06138 1.18077 3.28778 1.14003C3.54864 1.09316 3.82861 1.08024 4.06839 1.07375C4.20507 1.07003 4.34174 1.06855 4.4774 1.06762L4.98386 1.06662H46.0162Z" fill="white"/>
    <path d="M14.1531 10.7629C14.5811 10.2276 14.8715 9.50886 14.7949 8.77435C14.1684 8.80551 13.4038 9.18768 12.9612 9.72342C12.5638 10.1822 12.212 10.9311 12.3037 11.6348C13.007 11.6958 13.7097 11.2832 14.1531 10.7629Z" fill="black"/>
    <path d="M14.7869 11.7722C13.7655 11.7114 12.8972 12.3519 12.4094 12.3519C11.9214 12.3519 11.1745 11.8029 10.3667 11.8177C9.31521 11.8331 8.33959 12.4276 7.80602 13.3731C6.70857 15.2646 7.51641 18.0704 8.58362 19.611C9.10188 20.3731 9.72648 21.2123 10.5495 21.1822C11.3271 21.1517 11.6319 20.6787 12.5771 20.6787C13.5216 20.6787 13.7961 21.1822 14.6192 21.1669C15.4729 21.1516 16.0065 20.4044 16.5248 19.6415C17.1193 18.7727 17.3627 17.9338 17.378 17.8877C17.3627 17.8725 15.732 17.2469 15.7169 15.3711C15.7015 13.8004 16.9972 13.0534 17.0581 13.007C16.3265 11.9249 15.1832 11.8029 14.7869 11.7722Z" fill="black"/>
    <path d="M23.68 9.64661C25.8999 9.64661 27.4457 11.1768 27.4457 13.4046C27.4457 15.6404 25.8681 17.1786 23.6244 17.1786H21.1665V21.0872H19.3907V9.64661H23.68V9.64661ZM21.1665 15.688H23.2041C24.7502 15.688 25.6302 14.8556 25.6302 13.4126C25.6302 11.9697 24.7502 11.1451 23.2121 11.1451H21.1665V15.688Z" fill="black"/>
    <path d="M27.9097 18.7167C27.9097 17.2578 29.0276 16.3619 31.0098 16.2509L33.293 16.1162V15.474C33.293 14.5464 32.6666 13.9914 31.6203 13.9914C30.629 13.9914 30.0106 14.467 29.8601 15.2124H28.2428C28.3379 13.7059 29.6222 12.5959 31.6836 12.5959C33.7053 12.5959 34.9976 13.6663 34.9976 15.3392V21.0872H33.3563V19.7156H33.3169C32.8333 20.6433 31.7787 21.2299 30.6847 21.2299C29.0514 21.2299 27.9097 20.2151 27.9097 18.7167ZM33.293 17.9635V17.3055L31.2395 17.4323C30.2167 17.5037 29.6381 17.9556 29.6381 18.6691C29.6381 19.3985 30.2406 19.8742 31.1603 19.8742C32.3574 19.8742 33.293 19.0496 33.293 17.9635Z" fill="black"/>
    <path d="M36.547 24.1556V22.768C36.6736 22.7997 36.959 22.7997 37.1018 22.7997C37.8946 22.7997 38.3228 22.4668 38.5843 21.6105C38.5843 21.5946 38.7351 21.1031 38.7351 21.0952L35.7224 12.7466H37.5774L39.6866 19.5333H39.7181L41.8273 12.7466H43.6349L40.5109 21.5232C39.7976 23.5451 38.973 24.1952 37.2447 24.1952C37.1018 24.1952 36.6736 24.1793 36.547 24.1556Z" fill="black"/>
    </g>
    <defs>
    <clipPath id="clip0">
    <rect width="49.9851" height="32" fill="white" transform="translate(0.507462)"/>
    </clipPath>
    </defs>
  </svg>
`,e.appendChild(t);var r=document.createElement("p");r.id="apple-pay-description",r.innerHTML="Pay with Apple Pay to complete your purchase without filling a form",e.appendChild(r);var n=F5();e.appendChild(n);var a=I5("More payment options");e.appendChild(a)}var yu=[{value:"key",required:!0,types:["string"]},{value:"amount",required:!0,or:["plan","planCode"],types:["string","number"]},{value:"currency",required:!1,types:["string"]},{value:"email",required:!0,or:["customerCode"],types:["string"]},{value:"label",required:!1,types:["string"]},{value:"firstName",required:!1,types:["string"]},{value:"lastName",required:!1,types:["string"]},{value:"reference",required:!1,types:["string"]},{value:"phone",required:!1,types:["string"]},{value:"customerCode",required:!1,override:"email",types:["string"]},{value:"channels",required:!1,types:["array"]},{value:"paymentRequest",required:!1,types:["string","number"]},{value:"paymentPage",required:!1,types:["string"]},{value:"hash",required:!1,types:["string"]},{value:"container",required:!1,types:["string"]},{value:"metadata",required:!1,types:["object"]},{value:"subaccountCode",required:!1,types:["string"]},{value:"bearer",required:!1,types:["string"]},{value:"transactionCharge",required:!1,types:["string","number"]},{value:"planCode",required:!1,override:"amount",types:["string"]},{value:"subscriptionCount",required:!1,types:["number"]},{value:"planInterval",required:!1,types:["string"]},{value:"subscriptionLimit",required:!1,types:["number"]},{value:"subscriptionStartDate",required:!1,types:["string"]},{value:"accessCode",required:!1,types:["string"]},{value:"onError",required:!1,types:["function"]},{value:"onLoad",required:!1,types:["function"]},{value:"onSuccess",required:!1,types:["function"]},{value:"onCancel",required:!1,types:["function"]},{value:"callback",required:!1,types:["function"]},{value:"onClose",required:!1,types:["function"]},{value:"onBankTransferConfirmationPending",required:!1,types:["function"]},{value:"firstname",required:!1,types:["string"]},{value:"lastname",required:!1,types:["string"]},{value:"customer_code",required:!1,types:["string"]},{value:"payment_request",required:!1,types:["string","number"]},{value:"subaccount",required:!1,types:["string"]},{value:"transaction_charge",required:!1,types:["number","string"]},{value:"plan",required:!1,types:["string"]},{value:"quantity",required:!1,types:["number"]},{value:"interval",required:!1,types:["string"]},{value:"invoice_limit",required:!1,types:["number","string"]},{value:"start_date",required:!1,types:["string"]},{value:"payment_page",required:!1,types:["number","string"]},{value:"order_id",required:!1,types:["number"]},{value:"ref",required:!1,types:["string"]},{value:"card",required:!1,types:["string"]},{value:"bank",required:!1,types:["string"]},{value:"split",required:!1,types:["object"]},{value:"split_code",required:!1,types:["string"]},{value:"transaction_type",required:!1,types:["string"]},{value:"subscription",required:!1,types:["number"]},{value:"language",required:!1,types:["string"]},{value:"connect_account",required:!1,types:["string"]},{value:"connect_split",required:!1,types:["array"]}];function vI(e){var t,r=ss({},e);return r.metadata=e.metadata||{},r.metadata.referrer=(t=window.location.href)&&t.length>500?t.split("?")[0]:t,r.metadata=JSON.stringify(r.metadata),r.mode="popup",e.split&&typeof e.split!="string"&&(r.split=JSON.stringify(r.split)),r.card!==void 0&&["false",!1].indexOf(r.card)>-1&&(r.channels=["bank"],delete r.card),r.bank!==void 0&&["false",!1].indexOf(r.bank)>-1&&(r.channels=["card"],delete r.bank),[{to:"firstname",from:"firstName"},{to:"lastname",from:"lastName"},{to:"customer_code",from:"customerCode"},{to:"payment_request",from:"paymentRequest"},{to:"subaccount",from:"subaccountCode"},{to:"transaction_charge",from:"transactionCharge"},{to:"plan",from:"planCode"},{to:"quantity",from:"subscriptionCount"},{to:"interval",from:"planInterval"},{to:"invoice_limit",from:"subscriptionLimit"},{to:"start_date",from:"subscriptionStartDate"},{to:"ref",from:"reference"}].forEach(function(n){r[n.from]&&(r[n.to]=r[n.from],delete r[n.from])}),Object.values(e).forEach(function(n,a){if(typeof n=="function"){var i=Object.keys(e)[a];delete r[i]}}),r}var wI=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"],O5=window&&window.navigator&&(window.navigator.platform||window.navigator.userAgentData&&window.navigator.userAgentData.platform),L5=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.platform,r=e.userAgent,n=r===void 0?window&&window.navigator&&window.navigator.userAgent:r,a=t||O5;return wI.includes(a)||n.includes("Mac")&&"ontouchend"in document},yI=function(e,t,r){var n="".concat(fr.paystackApiUrl,"transaction/update_log/").concat(e),a={Authorization:"Bearer ".concat(t)};return fetch(n,{method:"POST",body:JSON.stringify({payload:JSON.stringify(r)}),headers:a})},NI=function(e,t){var r="".concat(fr.paystackApiUrl,"transaction/set_ip/").concat(e),n={Authorization:"Bearer ".concat(t)};return fetch(r,{method:"POST",headers:n})},jI={initializeLog:function(e){var t=e||{},r=t.attempts,n=t.authentication,a=t.errors,i=t.history;this.log={start_time:Math.round(Date.now()/1e3),time_spent:0,attempts:r||0,authentication:n,errors:a||0,success:!1,mobile:L5(),input:[],history:i||[]}},getTimeSpent:function(){var e=Math.round(Date.now()/1e3);return this.log.time_spent=e-this.log.start_time,this.log.time_spent},logAPIResponse:function(e,t){switch(e.status){case"success":return this.logApiSuccess(t);case"failed":return this.logApiError(e.message);default:return!1}},logValidationResponse:function(e){return this.log.history.push({type:"action",message:e,time:this.getTimeSpent()}),this.saveLog()},logAttempt:function(e){var t="Attempted to pay";return e&&(t+=" with ".concat(e)),this.log.attempts+=1,this.log.history.push({type:"action",message:t,time:this.getTimeSpent()}),this.saveLog()},logApiError:function(e){var t="Error";return e&&(t+=": ".concat(e)),this.log.errors+=1,this.log.history.push({type:"error",message:t,time:this.getTimeSpent()}),this.saveLog()},logApiSuccess:function(e){var t="Successfully paid";return e&&(t+=" with ".concat(e)),this.log.success=!0,this.log.history.push({type:"success",message:t,time:this.getTimeSpent()}),this.saveLog()},saveLog:function(){try{if(this.response)return yI(this.id,this.response.merchant_key,this.log)}catch{}},saveIpAddress:function(){try{if(this.response)return NI(this.id,this.response.merchant_key)}catch{}}},CI=["language","connect_account"],kI={requestInline:function(){var e=this,t=this.urlParameters,r=t.language,n=t.connect_account,a=A0(t,CI),i=ss({"Content-Type":"application/json"},r&&{"Accept-Language":r});return(this.accessCode?fetch(new URL("transaction/verify_access_code/".concat(this.accessCode),fr.paystackApiUrl).toString(),{headers:i}):fetch(new URL("/checkout/request_inline",fr.paystackApiUrl).toString(),{method:"POST",body:JSON.stringify(a),headers:ss(ss({},i),n&&{"x-connect-account":n})})).then(function(o){return o.json()}).then(function(o){if(o.status===!1)throw new Error(o.message);return e.response=o.data,e.id=o.data.id,e.status=o.data.transaction_status,e.accessCode=o.data.access_code,e.log=null,Object.assign(e,jI),e.initializeLog(o.data.log),e.saveIpAddress(),o.data})}},Uf=function(){function e(t){k5(this,e),function(u){function m(N,f){this.message=N,this.issues=f||[]}if(!u||xo(u)!=="object")throw new m("Transaction parameters should be a non-empty object");var h=u;if("accessCode"in h)return{accessCode:h.accessCode};Object.keys(h).forEach(function(N){yu.find(function(f){return f.value===N})!==void 0||delete h[N]});var p=Object.keys(h),y=[];if(yu.filter(function(N){return N.required}).forEach(function(N){var f=!h[N.value],j=N.or?N.or.some(function(b){return h[b]}):null;f&&!j&&y.push({message:"Required parameter missing: ".concat(N.value)})}),p.forEach(function(N){var f=h[N],j=yu.find(function(x){return x.value===N}),b=xo(f);b==="object"&&Array.isArray(f)&&(b="array"),j.types.indexOf(b)<=-1&&y.push({message:"Invalid parameter type: ".concat(N),validTypes:j.types})}),p.forEach(function(N){var f=yu.find(function(j){return j.value===N});f.override&&delete h[f.override]}),y.length)throw new m("Invalid transaction parameters",y)}(t),this.parameters=t,this.urlParameters=vI(t),this.id=null,this.status=null,this.accessCode=t.accessCode||null,this.authorizationUrl=null,this.errors=[],this.response=null,this.isActive=!0;var r=t.onError,n=t.onLoad,a=t.onSuccess,i=t.onCancel,o=t.callback,l=t.onClose,c=t.onBankTransferConfirmationPending;this.callbacks={onError:r,onLoad:n,onSuccess:a,onCancel:i,onBankTransferConfirmationPending:c},this.deprecatedCallbacks={callback:o,onClose:l},Object.assign(this,kI)}return S5(e,[{key:"onSetupError",value:function(t){this.logError(t),this.callbacks.onError&&this.callbacks.onError(t)}},{key:"onLoad",value:function(t){var r=t.id,n=t.customer,a=t.accessCode;Object.assign(this,{id:r,customer:n,accessCode:a}),this.authorizationUrl="".concat(fr.checkoutUrl).concat(a),this.callbacks.onLoad&&this.callbacks.onLoad({id:r,customer:n,accessCode:a})}},{key:"onSuccess",value:function(t){this.isActive=!1,this.response=t,this.status=t.status,this.callbacks.onSuccess&&this.callbacks.onSuccess(t),this.deprecatedCallbacks.callback&&this.deprecatedCallbacks.callback(t)}},{key:"setStatus",value:function(t){this.status=t}},{key:"onCancel",value:function(){this.callbacks.onCancel&&this.callbacks.onCancel(),this.deprecatedCallbacks.onClose&&this.deprecatedCallbacks.onClose()}},{key:"cancel",value:function(){this.isActive=!1,this.onCancel()}},{key:"onBankTransferConfirmationPending",value:function(){this.cancel(),this.callbacks.onBankTransferConfirmationPending&&this.callbacks.onBankTransferConfirmationPending()}},{key:"logError",value:function(t){this.errors.push(t)}}]),e}(),Lg=console?console.warn||console.log:function(){};function Zv(e,t,r){Lg('"'.concat(e,'" has been deprecated, please use "').concat(t,'". ').concat(r))}var ft,SI=["preload","inlineTransaction"],PI=["container","styles","onElementsMount"];function Vf(e,t){if(!e.length)return null;var r=e.filter(function(n){var a,i,o,l,c=!n.status||n.status==="abandoned",u=(a=n.parameters,i=t,o=Object.keys(a).sort().join("")===Object.keys(i).sort().join(""),l=Object.values(a).sort().join("")===Object.values(i).sort().join(""),o&&l);return c&&u});return r.length?r[r.length-1]:null}function Xv(e){var t=e.checkoutIframe,r=e.urlParameters;t&&r&&t.contentWindow.postMessage({type:"inline:url",path:"newTransaction",params:r},"*")}var EI="trackCheckoutClosed",Jv="trackPaymentError",TI="trackPaymentAttempt",AI="trackPaymentCompletion";function Bf(e){throw Lg(e),new Error(e)}var ew,tw,$5=function(){function e(t){var r,n;k5(this,e),this.id=function(){for(var a="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<5;o+=1)a+=i.charAt(Math.floor(Math.random()*i.length));return a}(),this.transactions=[],this.isOpen=!1,this.isLoaded=!1,this.isDeprecatedApi=t&&t.isDeprecatedApi,t&&t.isEmbed?this.isEmbed=!0:t&&t.isPaymentRequest&&(t.container&&wu(t.container)||Bf("A container is required to mount the payment request button"),this.paymentRequestContainer=wu(t.container),this.paymentRequestTransaction=null),this.preCheckoutModal=null,this.backgroundIframe=function(a){var i=$f("inline-background-".concat(a));i.style.cssText=`
  z-index: 999999999999999;
  background: transparent;
  background: rgba(0, 0, 0, 0.75);    
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  transition: opacity 0.3s;
  -webkit-transition: opacity 0.3s;
  visibility: hidden;
  display: none;
`,document.body.appendChild(i);var o=i.contentWindow.document;return o.open(),o.write(`
  <!DOCTYPE html>
  <html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Paystack Popup Loader</title>
    <style>
      .app-loader {
        margin: 200px 0;
        text-align: center;
        color: white;
      }      
      @keyframes app-loader__spinner {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @-webkit-keyframes app-loader__spinner {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      .app-loader__spinner {
        position: relative;
        display: inline-block;
      }
      .app-loader__spinner div {
        left: 95px;
        top: 35px;
        position: absolute;
        -webkit-animation: app-loader__spinner linear 1s infinite;
        animation: app-loader__spinner linear 1s infinite;
        background: white;
        width: 10px;
        height: 30px;
        border-radius: 40%;
        -webkit-transform-origin: 5px 65px;
        transform-origin: 5px 65px;
      }
      .app-loader__spinner div:nth-child(1) {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
        -webkit-animation-delay: -0.916666666666667s;
        animation-delay: -0.916666666666667s;
      }
      .app-loader__spinner div:nth-child(2) {
        -webkit-transform: rotate(30deg);
        transform: rotate(30deg);
        -webkit-animation-delay: -0.833333333333333s;
        animation-delay: -0.833333333333333s;
      }
      .app-loader__spinner div:nth-child(3) {
        -webkit-transform: rotate(60deg);
        transform: rotate(60deg);
        -webkit-animation-delay: -0.75s;
        animation-delay: -0.75s;
      }
      .app-loader__spinner div:nth-child(4) {
        -webkit-transform: rotate(90deg);
        transform: rotate(90deg);
        -webkit-animation-delay: -0.666666666666667s;
        animation-delay: -0.666666666666667s;
      }
      .app-loader__spinner div:nth-child(5) {
        -webkit-transform: rotate(120deg);
        transform: rotate(120deg);
        -webkit-animation-delay: -0.583333333333333s;
        animation-delay: -0.583333333333333s;
      }
      .app-loader__spinner div:nth-child(6) {
        -webkit-transform: rotate(150deg);
        transform: rotate(150deg);
        -webkit-animation-delay: -0.5s;
        animation-delay: -0.5s;
      }
      .app-loader__spinner div:nth-child(7) {
        -webkit-transform: rotate(180deg);
        transform: rotate(180deg);
        -webkit-animation-delay: -0.416666666666667s;
        animation-delay: -0.416666666666667s;
      }
      .app-loader__spinner div:nth-child(8) {
        -webkit-transform: rotate(210deg);
        transform: rotate(210deg);
        -webkit-animation-delay: -0.333333333333333s;
        animation-delay: -0.333333333333333s;
      }
      .app-loader__spinner div:nth-child(9) {
        -webkit-transform: rotate(240deg);
        transform: rotate(240deg);
        -webkit-animation-delay: -0.25s;
        animation-delay: -0.25s;
      }
      .app-loader__spinner div:nth-child(10) {
        -webkit-transform: rotate(270deg);
        transform: rotate(270deg);
        -webkit-animation-delay: -0.166666666666667s;
        animation-delay: -0.166666666666667s;
      }
      .app-loader__spinner div:nth-child(11) {
        -webkit-transform: rotate(300deg);
        transform: rotate(300deg);
        -webkit-animation-delay: -0.083333333333333s;
        animation-delay: -0.083333333333333s;
      }
      .app-loader__spinner div:nth-child(12) {
        -webkit-transform: rotate(330deg);
        transform: rotate(330deg);
        -webkit-animation-delay: 0s;
        animation-delay: 0s;
      }
      .app-loader__spinner {
        width: 40px;
        height: 40px;
        -webkit-transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);
        transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);
      }
    </style>
  </head>

  <body>
    <div id="app-loader" class="app-loader">
      <div id="spinner" class="app-loader__spinner">
        <div></div><div></div><div></div><div></div><div></div><div></div><div>
        </div><div></div><div></div><div></div><div></div><div></div>
      </div>
    </div>
  </body>

  </html>
`),o.close(),i}(this.id),this.checkoutIframe=(r=this.id,(n=$f("inline-checkout-".concat(r))).src="".concat(fr.checkoutUrl,"popup"),n.style.cssText=`
  z-index: 999999999999999;
  background: transparent;
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  visibility: hidden;
  display: none;
  height: 100%;
`,n.setAttribute("allowpaymentrequest","true"),n.setAttribute("allow","payment; clipboard-read; clipboard-write"),document.body.appendChild(n),n),this.registerListeners()}return S5(e,[{key:"registerListeners",value:function(){var t=this;window.addEventListener("message",function(r){var n="".concat(r.origin,"/")===fr.checkoutUrl,a=t.checkoutIframe&&t.checkoutIframe.contentWindow===r.source,i=t.isEmbed;n||a?t.respondToEvent(r):i&&t.respondToEmbedEvents(r)})}},{key:"sendAnalyticsEventToCheckout",value:function(t,r){this.checkoutIframe.contentWindow.postMessage({type:"analytics",action:t,params:r},"*")}},{key:"checkout",value:function(t){this.activeTransaction()&&this.activeTransaction().cancel(),ft=this;var r=Vf(this.transactions,t)||new Uf(t);return new Promise(function(n,a){r.requestInline().then(function(i){var o=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=c.platform,m=c.userAgent,h=m===void 0?window&&window.navigator&&window.navigator.userAgent:m,p=u||O5,y=h&&!!h.match(/Version\/[\d.]+.*Safari/),N=p&&/(Mac)/i.test(p);return L5()||N&&y}()&&M0(i.channels),l=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=!!c.custom_filters&&c.custom_filters.recurring,m=c.plan_details,h=u||m,p=!!c.link_config&&c.link_config.enabled&&c.link_config.has_payment_instruments;return!h&&p}(i);l||o?(ft.preloadTransaction({inlineTransaction:r}),ft.preCheckoutModal=function(c,u){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=document.querySelector("#pre-checkout-modal-".concat(c));if(h){if(Qv(h)&&zf(h))return h;h.remove()}var p=document.createElement("div");p.classList.add("pre-checkout-modal"),p.id="pre-checkout-modal-".concat(c),p.style.zIndex=fI()+1;var y=document.createElement("div");y.classList.add("pre-checkout-modal__content"),p.appendChild(y);var N=u||{},f=N.merchant_logo,j=N.merchant_name,b=N.email,x=N.amount,w=N.currency,C=N.label,S=new Intl.NumberFormat("en",{style:"currency",currency:w,currencyDisplay:"code",maximumFractionDigits:2,minimumFractionDigits:0}).format(x/100),M=document.createElement("div");M.classList.add("payment-info"),M.innerHTML='<img class="merchant-logo" src="'.concat(f,'" alt="').concat(j,` Logo">
    <div class="customer-info">
      <div class="customer-email">`).concat(C||b,`</div>
      <div class="transaction-amount">Pay <span class="amount">`).concat(S,`</span></div>
    </div>`),y.appendChild(M),y.innerHTML+=dI;var A=document.createElement("div");A.classList.add("modal-wrapper"),m.canPayWithVault?gI(A,{canPayWithApplePay:m.canPayWithApplePay}):bI(A),A.innerHTML=A.innerHTML+A5+cI,y.appendChild(A);var R=document.createElement("style");return R.textContent=hI,document.body.appendChild(R),document.body.appendChild(p),p}(ft.id,i,{canPayWithVault:l,canPayWithApplePay:o}),o?(ft.paymentRequestContainer=zf(ft.preCheckoutModal),Gv(ft.paymentRequestContainer,{channels:i.channels,styles:{applePay:{width:"100%",type:"pay",height:"42px",padding:"15px",borderRadius:"5px"}}},i.merchant_id).then(function(){ft.registerPaymentRequestEventListeners(),ft.openPreCheckoutModal()}).catch(function(){l?(zf(ft.preCheckoutModal).remove(),ft.openPreCheckoutModal()):(ft.closePreCheckoutModal(),ft.animateCheckoutIn())}).finally(function(){n(r)})):(ft.openPreCheckoutModal(),n(r))):(ft.newTransaction({inlineTransaction:r}),n(r))}).catch(function(i){r.onSetupError({status:!1,message:i.message}),a(i)})})}},{key:"openPreCheckoutModal",value:function(){var t;this.registerPreCheckoutModalEventListeners(),t=this.preCheckoutModal,new Promise(function(r,n){try{var a=t.querySelector(".pre-checkout-modal__content");t.classList.add("show"),setTimeout(function(){a.classList.add("show"),r(!0)},50)}catch(i){n(i)}})}},{key:"registerPreCheckoutModalEventListeners",value:function(){var t,r=this,n=!1,a=this.activeTransaction();document.addEventListener("touchstart",function(c){c.preventDefault(),n||(n=!0,t=setTimeout(function(){n=!1},125))},!0),document.addEventListener("touchend",function(c){c.target&&c.target.isSameNode(ft.preCheckoutModal)&&n&&(clearTimeout(t),ft.closePreCheckoutModal(),a&&a.cancel()),n=!1},!0);var i=Qv(this.preCheckoutModal),o=this.preCheckoutModal.querySelector("#".concat(D5));i.onclick=function(){r.closePreCheckoutModal(),r.animateCheckoutIn()},o&&(o.onclick=function(){r.closePreCheckoutModal(),r.animateCheckoutIn(),r.checkoutIframe.contentWindow.postMessage({type:"inline:pay-with-vault"},"*")});var l=function(c){return c.querySelector("#apple-pay-close-button")}(this.preCheckoutModal);l.onclick=function(){r.sendAnalyticsEventToCheckout(EI),r.closePreCheckoutModalAndCancelTransaction()}}},{key:"closePreCheckoutModal",value:function(t){var r;this.preCheckoutModal&&(t==="failed"?(r=this.preCheckoutModal)&&(r.querySelector("#apple-pay-mark--light").innerHTML=`<svg width="50" height="30" viewBox="0 0 21 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="error-icon">
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="error" fill-rule="nonzero">
            <path d="M9.14672,0.47855 L0.14829,15.47855 C-0.0403320234,15.7872042 -0.0475647902,16.1736607 0.129375884,16.4891566 C0.306316558,16.8046526 0.639843999,16.9999993 1.00157,17 L19.43546,17 C19.797186,16.9999993 20.1307134,16.8046526 20.3076541,16.4891566 C20.4845948,16.1736607 20.477362,15.7872042 20.28874,15.47855 L10.85328,0.47855 C10.671624,0.181297031 10.3483651,3.00996351e-06 10,3.00996351e-06 C9.6516349,3.00996351e-06 9.32837603,0.181297031 9.14672,0.47855 Z" id="Shape" fill="#FFAA22"></path>
            <rect id="Rectangle-path" fill="#FFFFFF" x="9" y="6" width="2" height="5"></rect>
            <rect id="Rectangle-path" fill="#FFFFFF" x="9" y="12" width="2" height="2"></rect>
        </g>
    </g>
</svg>`,r.querySelector("#apple-pay-description").textContent="An error occurred while paying with Apple Pay. Please try again or use another payment method."):(function(n){n&&(n.querySelector(".pre-checkout-modal__content").classList.remove("show"),n.classList.remove("show"))}(this.preCheckoutModal),this.preCheckoutModal.remove(),this.preCheckoutModal=null))}},{key:"closePreCheckoutModalAndCancelTransaction",value:function(){this.preCheckoutModal&&(this.cancelTransaction(),this.checkoutIframe&&this.checkoutIframe.contentWindow&&this.checkoutIframe.contentWindow.postMessage("close","*"),this.closePreCheckoutModal())}},{key:"newTransaction",value:function(t){var r,n=t.preload,a=t.inlineTransaction,i=A0(t,SI),o=this.paymentRequestContainer&&Yu(this.paymentRequestContainer);this.activeTransaction()&&!o&&this.activeTransaction().cancel();var l=Vf(this.transactions,a?a.parameters:i),c=l||a||new Uf(i);return l?(c.isActive=!0,r={accessCode:c.accessCode}):(r=c.accessCode?{accessCode:c.accessCode}:c.urlParameters,this.transactions.push(c)),this.isDeprecatedApi||this.open(r,n),c}},{key:"preloadTransaction",value:function(t){var r=this;return this.newTransaction(ss(ss({},t),{},{preload:!0})),function(){return r.animateCheckoutIn()}}},{key:"paymentRequest",value:function(t){var r=t.container,n=t.styles,a=t.onElementsMount,i=A0(t,PI);return ft=this,new Promise(function(o,l){var c=document.querySelector("#".concat(t.loadPaystackCheckoutButton));if(R5()){ft.activeTransaction()&&ft.activeTransaction().cancel(),r&&wu(r)||Bf("A container is required to mount the payment request button"),ft.paymentRequestContainer=wu(r);var u=Vf(ft.transactions,i),m=u||new Uf(i);m.requestInline().then(function(y){Gv(ft.paymentRequestContainer,{channels:y.channels,styles:n},y.merchant_id).then(function(N){a&&a(N)}).catch(function(){a&&a(null)}).finally(function(){if(u?m.isActive=!0:ft.transactions.push(m),ft.registerPaymentRequestEventListeners(),c){var N=ft.preloadTransaction({inlineTransaction:m});c.onclick=N}o(m)})}).catch(function(y){m.onSetupError({status:!1,message:y.message}),l(y)})}else{if(t&&t.loadPaystackCheckoutButton)if(c){var h=ft.preloadTransaction(i);c.onclick=h}else Lg("This device does not support any payment request wallet options. Please consult our documentation at https://developers.paystack.co/docs/paystack-inline to see how to load alternative payment options using 'loadPaystackCheckoutButton'");a&&a(null);var p=ft.activeTransaction();o(p)}})}},{key:"registerApplePayEventListener",value:function(){var t=this;Yu(this.paymentRequestContainer).onclick=function(){return t.startApplePay()}}},{key:"registerPaymentRequestEventListeners",value:function(){var t=this.activeTransaction();t&&M0(t.response.channels)?this.registerApplePayEventListener():pI(this.paymentRequestContainer)}},{key:"startApplePay",value:function(){var t,r,n,a,i,o=this,l="apple pay",c=this.activeTransaction();if(c){var u={channel:"apple_pay",paymentMethod:l,currency:c.currency,amount:c.amount},m={channel:"apple_pay",currency:c.currency,amount:c.amount,timeSpent:c.getTimeSpent()};try{c.logAttempt(l),this.sendAnalyticsEventToCheckout(TI,u);var h=(t={currency:c.response.currency,amount:c.response.amount,merchantName:c.response.merchant_name,interval:c.response.plan_details&&c.response.plan_details.interval},r=t.currency,n=t.amount,a=t.merchantName,i=t.interval,ss({countryCode:"NG",currencyCode:r,merchantCapabilities:["supports3DS","supportsCredit","supportsDebit"],supportedNetworks:["visa","masterCard"],requiredBillingContactFields:["postalAddress","name","phone","email"],total:{label:"".concat(a," - Paystack"),type:"final",amount:String(Yv(n))}},typeof i=="string"&&i.trim()!==""&&{lineItems:[{label:mI(i),amount:String(Yv(n))}]})),p=new window.ApplePaySession(fr.applePayVersion,h);p.onvalidatemerchant=function(y){var N=function(f){var j=f.transactionId,b=f.validationURL,x=f.merchantName,w=f.domainName,C=w===void 0?window&&window.location&&window.location.hostname:w,S="".concat(fr.paymentBaseUrl).concat(fr.applePayValidateSessionPath),M=Kv({transaction:j,sessionUrl:b,displayName:x,domainName:C});return fetch(S,ss(ss({},Wv),{},{body:M})).then(function(A){return A.json()})}({validationURL:y.validationURL,transactionId:c.id,merchantName:c.response.merchant_name});N.then(function(f){f.status!=="success"?c.onSetupError(f):p.completeMerchantValidation(f.data),c.logValidationResponse(f.message)}).catch(function(f){c.onSetupError(f)})},p.oncancel=function(){ft.preCheckoutModal||c.onCancel()},p.onpaymentauthorized=function(y){var N=y.payment,f=function(j){var b=j.transactionId,x=j.payment,w="".concat(fr.paymentBaseUrl).concat(fr.applePayChargePath),C=Kv({transaction:b,paymentObject:JSON.stringify(x)});return fetch(w,ss(ss({},Wv),{},{body:C})).then(function(S){return S.json()})}({transactionId:c.id,payment:N});f.then(function(j){c.logAPIResponse(j,l),j.status==="success"?(p.completePayment(p.STATUS_SUCCESS),c.onSuccess(j),o.sendAnalyticsEventToCheckout(AI,m)):(p.completePayment(p.STATUS_FAILURE),c.onSetupError(j),o.sendAnalyticsEventToCheckout(Jv,{channel:"apple_pay",message:j&&j.message||"Transaction attempt failed"})),ft.closePreCheckoutModal(j.status)}).catch(function(j){p.completePayment(p.STATUS_FAILURE),c.onSetupError(j),o.sendAnalyticsEventToCheckout(Jv,{channel:"apple_pay",message:j&&j.message||"Error occurred"}),ft.closePreCheckoutModal("failed")})},p.begin()}catch(y){c.onSetupError(y)}}else Bf("Could not initiate apple pay transaction")}},{key:"resumeTransaction",value:function(t){return this.newTransaction({accessCode:t})}},{key:"activeTransaction",value:function(){var t=this.transactions.filter(function(n){return n.isActive}),r=t.length?t[t.length-1]:null;return r}},{key:"cancelTransaction",value:function(t){var r=this.transactions.find(function(n){return n.id===t})||this.activeTransaction();r&&(r.cancel(),this.close())}},{key:"respondToEvent",value:function(t){if(t){var r,n,a=this.activeTransaction();try{var i=t.data||t.message,o=i.event,l=i.data;if(o)switch(o){case"loaded:checkout":this.isLoaded=!0,a&&Xv({checkoutIframe:this.checkoutIframe,urlParameters:a.urlParameters});break;case"loaded:transaction":r=this.backgroundIframe,(n=r.contentWindow.document)&&(n.getElementById("app-loader").style.display="none"),a.onLoad(l);break;case"error":l.type==="setup"?a.onSetupError(l):a.logError(l);break;case"cancel":case"close":this.close();var c=l&&l.status;c&&a.setStatus(c),!(this.paymentRequestContainer&&Yu(this.paymentRequestContainer)&&!this.preCheckoutModal)&&(a.isActive=!1),a.onCancel();break;case"transfer:pending":this.close();var u=l&&l.status;u&&a.setStatus(u),a.onBankTransferConfirmationPending();break;case"success":this.close(),a.onSuccess(l)}}catch{}}}},{key:"respondToEmbedEvents",value:function(t){var r,n,a=this.activeTransaction(),i=t.data||t.message;if(i&&(typeof i=="string"||i instanceof String)){var o={action:n=(r=i)&&typeof r=="string"?r.split(" ")[0]:null,data:n?r.split(" ").slice(2).join(" "):null};o&&o.action==="PaystackClose"&&o.data&&a.onSuccess(i),o.action==="PaystackTLSClose"&&a.cancel()}}},{key:"animateCheckoutIn",value:function(){var t,r=this;if(!this.isOpen){var n=this.checkoutIframe,a=this.backgroundIframe;(t={checkoutIframe:n,backgroundIframe:a},new Promise(function(i,o){t||o("No dom element provided");var l=t.checkoutIframe,c=t.backgroundIframe;l&&c||o("No dom element provided"),l.style.display="",l.style.visibility="visible",c.style.display="",c.style.visibility="visible",i()})).then(function(){r.checkoutIframe.contentWindow.postMessage("render","*")}),this.isOpen=!0}}},{key:"open",value:function(t,r){t&&(Xv({checkoutIframe:this.checkoutIframe,urlParameters:t}),r||this.animateCheckoutIn())}},{key:"close",value:function(){var t=this;if(this.isOpen){var r,n=this.checkoutIframe,a=this.backgroundIframe;(r={checkoutIframe:n,backgroundIframe:a},new Promise(function(i,o){r||o("No dom element provided");var l=r.checkoutIframe,c=r.backgroundIframe;l&&c||o("No dom element provided"),c.style.opacity=0,l.style.display="none",l.style.visibility="hidden",setTimeout(function(){c.style.display="none",c.style.visibility="hidden",c.style.opacity=1,i()},300)})).then(function(){t.checkoutIframe.contentWindow.postMessage("close","*")}),this.isOpen=!1}}},{key:"isLoaded",value:function(){return this.isLoaded}}],[{key:"setup",value:function(t){var r=t&&t.container;ft||(ft=new e({isDeprecatedApi:!0,isEmbed:r})),Zv("PaystackPop.setup()","new PaystackPop()","Please consult our documentation at https://developers.paystack.co/docs/paystack-inline");var n=ft.newTransaction(t,"deprecated"),a=n.urlParameters;if(r){var i="".concat(fr.siteUrl,"/assets/payment/production/inline.html?").concat(T5(a)),o=function(l,c){var u=$f("embed-checkout-".concat(l));return u.style.cssText=`
  background: transparent;
  background: rgba(0,0,0,0);
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  nmargin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  visibility: hidden;
  display: none;
`,u.src=c,u.id=l,u.name=l,u}(ft.id,i);(function(l,c){var u=document.getElementById(l);u.innerHTML="",u.removeAttribute("style"),u.className="paystack-embed-container",u.style.position="relative",u.style.width="100%",u.appendChild(c)})(t.container,o),o.onload=function(){var l;o.contentWindow.postMessage("PaystackOpen ".concat(ft.id),"*"),l=o,new Promise(function(c,u){l||u("No dom element provided"),l.style.display="",l.style.visibility="visible",c()})}}else n.openIframe=function(){Zv("openIframe","open","Please consult our documentation at https://developers.paystack.co/docs/paystack-inline"),ft.open(a)};return n}}]),e}();if(ew=qv().length>0,tw=Io()&&Io().parentElement.tagName==="FORM",ew&&tw){var qf,Si=function(){var e={},t=Io();return qv().forEach(function(r){var n=t.getAttribute(r),a=r.split("data-")[1].replace(/-([a-z])/g,function(i){return i[1].toUpperCase()});e[a]=n}),function(r){if(r.buttonId&&!document.getElementById(r.buttonId))throw new Error("Please make sure the buttonId is an element available in the DOM");var n=ss({},r);n.buttonText=r.buttonText||"Pay",n.buttonVariant="normal",n.buttonWordmarkVariant="normal";var a=["normal","light"];return r.buttonVariant&&a.indexOf(r.buttonVariant)>-1&&(n.buttonVariant=r.buttonVariant),r.buttonWordmarkVariant&&a.indexOf(r.buttonWordmarkVariant)>-1&&(n.buttonWordmarkVariant=r.buttonWordmarkVariant),n}(e)}(),sw=Io().parentElement;ft||(ft=new $5),function(e){var t;if(e.id)(t=document.getElementById(e.id)).setAttribute("data-inline-id",e.id);else{var r=document.createElement("div");r.id="inline-button-".concat(e.inlineId),r.innerHTML=function(n){var a,i,o={normal:`
  <svg id="inline-button-wordmark" width="137" height="13" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M.037 5.095l1.075-.135c-.011-.774-.025-1.944-.013-2.149C1.19 1.364 2.38.134 3.81.013 3.9.006 3.99.002 4.077 0a2.947 2.947 0 0 1 2.046.76c.574.509.95 1.26 1.008 2.007.015.192.01 1.491.01 2.257l1.096.163L8.2 11.44 4.093 12 0 11.346l.037-6.251zm4.106-.514l1.724.256c-.007-.933-.05-2.295-.26-2.654-.319-.545-.846-.867-1.443-.88h-.063c-.607.008-1.138.322-1.458.864-.222.378-.266 1.66-.265 2.637l1.765-.223zM18.228 10.108c-.576 0-1.064-.072-1.464-.216a2.864 2.864 0 0 1-.972-.6 2.552 2.552 0 0 1-.588-.864 4.067 4.067 0 0 1-.252-1.044h1.008c.032.256.088.5.168.732.08.224.204.424.372.6.168.168.388.304.66.408.28.096.636.144 1.068.144.28 0 .536-.036.768-.108.24-.08.448-.192.624-.336.176-.144.312-.316.408-.516.104-.2.156-.42.156-.66 0-.24-.032-.448-.096-.624a1.02 1.02 0 0 0-.336-.468 1.885 1.885 0 0 0-.636-.324 6.4 6.4 0 0 0-1.008-.228 8.79 8.79 0 0 1-1.212-.276 3.246 3.246 0 0 1-.9-.432 1.982 1.982 0 0 1-.564-.672c-.128-.272-.192-.6-.192-.984 0-.328.068-.632.204-.912.136-.288.324-.536.564-.744.248-.208.54-.372.876-.492.336-.12.708-.18 1.116-.18.864 0 1.548.204 2.052.612.512.4.812.984.9 1.752h-.936c-.104-.544-.316-.932-.636-1.164-.32-.24-.78-.36-1.38-.36-.592 0-1.04.132-1.344.396a1.255 1.255 0 0 0-.444.996c0 .208.024.396.072.564.056.16.156.3.3.42.152.12.36.228.624.324a6.72 6.72 0 0 0 1.068.228c.48.072.9.168 1.26.288.36.12.664.276.912.468s.432.428.552.708c.128.28.192.624.192 1.032 0 .36-.076.696-.228 1.008a2.472 2.472 0 0 1-.612.804c-.264.224-.58.4-.948.528-.36.128-.752.192-1.176.192zM25.355 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM32.091 10.108c-.44 0-.848-.072-1.224-.216a3.054 3.054 0 0 1-.972-.636 3.12 3.12 0 0 1-.648-1.008 3.626 3.626 0 0 1-.228-1.32v-.096c0-.48.08-.916.24-1.308.16-.4.376-.74.648-1.02.28-.28.604-.496.972-.648.376-.16.772-.24 1.188-.24.328 0 .644.04.948.12.312.08.588.208.828.384.248.168.456.392.624.672.168.28.276.62.324 1.02h-.984c-.08-.496-.284-.848-.612-1.056-.32-.208-.696-.312-1.128-.312a1.93 1.93 0 0 0-.804.168c-.24.112-.452.272-.636.48a2.23 2.23 0 0 0-.42.744 2.991 2.991 0 0 0-.156.996v.096c0 .776.188 1.364.564 1.764.384.392.88.588 1.488.588.224 0 .436-.032.636-.096a1.651 1.651 0 0 0 .96-.768c.112-.192.18-.416.204-.672h.924a2.595 2.595 0 0 1-.276.948 2.386 2.386 0 0 1-.576.744c-.24.208-.52.372-.84.492-.32.12-.668.18-1.044.18zM38.335 10.108a2.83 2.83 0 0 1-.876-.132 1.724 1.724 0 0 1-.684-.42 2.145 2.145 0 0 1-.456-.756c-.112-.304-.168-.672-.168-1.104V3.724h.996v3.924c0 .552.116.956.348 1.212.24.256.608.384 1.104.384.224 0 .44-.036.648-.108.208-.072.392-.18.552-.324.16-.144.288-.324.384-.54.096-.216.144-.464.144-.744V3.724h.996V10h-.996v-.996c-.144.296-.388.556-.732.78-.336.216-.756.324-1.26.324zM43.216 3.724h.996v1.128c.2-.352.452-.64.756-.864.312-.232.748-.356 1.308-.372v.936a4.461 4.461 0 0 0-.852.12 1.647 1.647 0 0 0-.66.324 1.472 1.472 0 0 0-.408.612c-.096.248-.144.564-.144.948V10h-.996V3.724zM50 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM56.496 10.108c-.408 0-.788-.068-1.14-.204a2.683 2.683 0 0 1-.9-.612 3.01 3.01 0 0 1-.588-.984 4.01 4.01 0 0 1-.204-1.32v-.096c0-.48.072-.92.216-1.32.144-.4.344-.744.6-1.032.256-.296.564-.524.924-.684.36-.16.756-.24 1.188-.24.528 0 .956.112 1.284.336.328.216.584.476.768.78V.724h.996V10h-.996V8.92c-.088.152-.208.3-.36.444a2.792 2.792 0 0 1-.516.384 2.874 2.874 0 0 1-.6.252c-.216.072-.44.108-.672.108zm.108-.828c.288 0 .56-.048.816-.144.256-.096.476-.24.66-.432.184-.2.328-.448.432-.744.112-.304.168-.656.168-1.056v-.096c0-.808-.18-1.404-.54-1.788-.352-.384-.836-.576-1.452-.576-.624 0-1.112.208-1.464.624-.352.416-.528 1.008-.528 1.776v.096c0 .392.048.736.144 1.032.104.296.24.54.408.732.176.192.38.336.612.432.232.096.48.144.744.144zM67.712 10.108c-.512 0-.948-.112-1.308-.336a2.38 2.38 0 0 1-.816-.804V10h-.996V.724h.996V4.78a1.92 1.92 0 0 1 .348-.432c.152-.144.32-.268.504-.372.192-.112.396-.2.612-.264.216-.064.436-.096.66-.096.408 0 .788.072 1.14.216.352.144.652.352.9.624.256.272.456.604.6.996.144.392.216.832.216 1.32v.096c0 .48-.068.92-.204 1.32a3.103 3.103 0 0 1-.576 1.02 2.583 2.583 0 0 1-.9.672 2.937 2.937 0 0 1-1.176.228zm-.096-.828c.624 0 1.1-.2 1.428-.6.328-.408.492-.996.492-1.764V6.82c0-.4-.052-.748-.156-1.044a2.095 2.095 0 0 0-.42-.732 1.53 1.53 0 0 0-.612-.444 1.798 1.798 0 0 0-.744-.156c-.288 0-.56.048-.816.144a1.71 1.71 0 0 0-.648.444c-.184.192-.328.44-.432.744a3.152 3.152 0 0 0-.156 1.044v.096c0 .8.192 1.396.576 1.788.384.384.88.576 1.488.576zM73.63 9.352l-2.46-5.628h1.068l1.92 4.5 1.74-4.5h1.02l-3.468 8.46h-1.008l1.188-2.832zM87.127 3.669A3.138 3.138 0 0 0 86.1 2.95a3.09 3.09 0 0 0-1.228-.25c-.448 0-.848.086-1.187.26a2.199 2.199 0 0 0-.662.497v-.191a.387.387 0 0 0-.214-.348.323.323 0 0 0-.14-.03h-1.315a.314.314 0 0 0-.254.116.377.377 0 0 0-.1.262v8.97c0 .1.034.188.1.258a.34.34 0 0 0 .254.103h1.341a.342.342 0 0 0 .244-.103.336.336 0 0 0 .11-.259v-3.06c.178.202.417.357.702.464.35.134.72.203 1.093.203.43 0 .848-.082 1.242-.248a3.124 3.124 0 0 0 1.04-.724c.305-.326.545-.709.707-1.128a3.93 3.93 0 0 0 .263-1.477c0-.54-.086-1.037-.263-1.477a3.387 3.387 0 0 0-.706-1.12zm-1.204 3.24c-.073.19-.18.362-.315.51a1.415 1.415 0 0 1-1.065.466c-.2.001-.4-.04-.584-.12a1.484 1.484 0 0 1-.49-.346 1.593 1.593 0 0 1-.32-.51 1.738 1.738 0 0 1-.115-.63c0-.224.04-.435.115-.631a1.532 1.532 0 0 1 .804-.846c.185-.086.386-.13.59-.129.215 0 .414.044.593.13.177.083.338.199.474.341a1.622 1.622 0 0 1 .425 1.135c0 .225-.037.436-.112.63zM95.298 2.89h-1.33a.339.339 0 0 0-.246.11.384.384 0 0 0-.108.266v.166a1.856 1.856 0 0 0-.602-.472 2.525 2.525 0 0 0-1.166-.258 3.227 3.227 0 0 0-2.284.964 3.554 3.554 0 0 0-.734 1.123 3.827 3.827 0 0 0-.275 1.477c0 .54.092 1.037.275 1.477.184.434.427.817.728 1.128a3.146 3.146 0 0 0 2.277.973c.437 0 .834-.088 1.173-.259.25-.13.456-.287.608-.471v.177a.34.34 0 0 0 .11.259.341.341 0 0 0 .244.104h1.33a.324.324 0 0 0 .25-.105.349.349 0 0 0 .102-.258V3.267a.377.377 0 0 0-.1-.262.325.325 0 0 0-.252-.115zM93.502 6.9a1.55 1.55 0 0 1-.312.511c-.136.143-.296.26-.473.344-.178.085-.38.129-.596.129-.207 0-.407-.044-.59-.13a1.501 1.501 0 0 1-.791-.855 1.766 1.766 0 0 1-.112-.62c0-.225.038-.436.112-.632.075-.193.181-.364.314-.504.137-.143.3-.26.478-.342.182-.085.382-.129.59-.129.215 0 .417.044.595.13.178.085.338.2.473.341a1.623 1.623 0 0 1 .424 1.135c0 .215-.037.424-.112.622zM108.567 6.094a2.265 2.265 0 0 0-.654-.402c-.247-.101-.509-.181-.785-.235l-1.014-.204c-.26-.05-.441-.117-.543-.203a.328.328 0 0 1-.136-.264c0-.11.063-.2.189-.282.137-.086.329-.13.566-.13.26 0 .518.053.757.157.243.106.471.226.67.36.295.187.546.162.727-.053l.487-.57a.543.543 0 0 0 .152-.357c0-.128-.064-.245-.185-.351-.207-.184-.533-.378-.971-.568-.437-.192-.987-.29-1.637-.29-.427 0-.82.058-1.168.172-.35.116-.65.276-.893.474-.245.204-.438.44-.57.713a2 2 0 0 0-.198.875c0 .56.167 1.017.496 1.358.328.333.766.56 1.304.67l1.054.232c.3.062.528.132.675.21.129.067.19.163.19.297 0 .12-.061.227-.188.324-.133.104-.342.155-.622.155a1.83 1.83 0 0 1-.831-.19 3.056 3.056 0 0 1-.678-.458.995.995 0 0 0-.307-.17c-.126-.037-.268.003-.431.13l-.583.461c-.169.145-.24.32-.209.522.029.194.19.394.491.62.269.193.614.368 1.029.518.415.151.901.229 1.453.229.444 0 .854-.058 1.215-.172.362-.119.681-.278.941-.48a2.056 2.056 0 0 0 .819-1.663c0-.319-.053-.6-.165-.836a1.843 1.843 0 0 0-.447-.6zM114.383 7.73a.363.363 0 0 0-.295-.192.55.55 0 0 0-.343.113c-.095.062-.198.11-.306.141a.75.75 0 0 1-.426.013.43.43 0 0 1-.181-.093.554.554 0 0 1-.143-.204.92.92 0 0 1-.059-.362v-2.46h1.731c.099 0 .188-.04.266-.117a.368.368 0 0 0 .112-.26V3.268a.369.369 0 0 0-.115-.268.38.38 0 0 0-.263-.109h-1.732V1.216a.354.354 0 0 0-.108-.27.347.347 0 0 0-.243-.104h-1.344a.36.36 0 0 0-.34.226.371.371 0 0 0-.027.148V2.89h-.767a.324.324 0 0 0-.255.115.385.385 0 0 0-.098.262V4.31a.4.4 0 0 0 .212.346c.044.021.092.032.14.03h.768v2.925c0 .39.069.726.2 1.003.132.274.305.504.514.676.217.178.465.31.731.388.27.084.551.126.833.126.385 0 .75-.061 1.094-.18a2.13 2.13 0 0 0 .861-.552c.152-.181.17-.381.046-.581l-.463-.76zM121.672 2.89h-1.329a.339.339 0 0 0-.244.11.39.39 0 0 0-.08.122.394.394 0 0 0-.027.144v.166a1.906 1.906 0 0 0-.605-.472c-.335-.173-.726-.258-1.168-.258-.42 0-.834.083-1.226.249a3.24 3.24 0 0 0-1.055.715 3.528 3.528 0 0 0-.734 1.123 3.79 3.79 0 0 0-.276 1.477c0 .54.092 1.037.275 1.477.184.434.428.817.729 1.128a3.138 3.138 0 0 0 2.273.973 2.59 2.59 0 0 0 1.175-.259c.255-.13.457-.287.612-.471v.177a.34.34 0 0 0 .108.259.343.343 0 0 0 .243.104h1.329a.335.335 0 0 0 .252-.105.364.364 0 0 0 .102-.258V3.267a.38.38 0 0 0-.1-.262.332.332 0 0 0-.115-.087.311.311 0 0 0-.139-.028zM119.876 6.9a1.534 1.534 0 0 1-.786.855 1.362 1.362 0 0 1-.594.129c-.207 0-.405-.044-.588-.13a1.516 1.516 0 0 1-.792-.855 1.757 1.757 0 0 1-.113-.62c0-.225.037-.436.112-.632.073-.187.179-.358.314-.504.138-.143.3-.26.479-.342.184-.086.385-.13.588-.129.217 0 .415.044.594.13.181.085.34.2.472.341.134.143.24.313.314.504a1.73 1.73 0 0 1 0 1.253zM128.978 7.64l-.763-.593c-.146-.118-.284-.15-.404-.1a.742.742 0 0 0-.279.205 2.527 2.527 0 0 1-.583.535c-.192.122-.444.183-.742.183-.219 0-.42-.04-.6-.122a1.423 1.423 0 0 1-.469-.342 1.575 1.575 0 0 1-.308-.51 1.751 1.751 0 0 1-.106-.617c0-.228.034-.438.106-.632.07-.192.173-.363.308-.503.135-.144.295-.26.472-.342.187-.088.391-.132.597-.13.298 0 .547.064.742.187.198.126.396.306.584.534.078.092.17.16.278.206.122.048.259.016.401-.101l.762-.594a.53.53 0 0 0 .201-.269.437.437 0 0 0-.034-.365 3.329 3.329 0 0 0-1.18-1.127c-.504-.291-1.108-.441-1.784-.441a3.519 3.519 0 0 0-2.51 1.033c-.322.322-.576.71-.747 1.137a3.68 3.68 0 0 0-.273 1.407c0 .495.093.968.273 1.402.173.424.427.808.747 1.128a3.527 3.527 0 0 0 2.51 1.034c.676 0 1.28-.149 1.784-.444a3.286 3.286 0 0 0 1.182-1.13.411.411 0 0 0 .055-.173.415.415 0 0 0-.023-.182.624.624 0 0 0-.197-.273zM136.06 9.045l-2.104-3.143 1.801-2.415c.094-.139.119-.272.075-.397-.031-.09-.116-.2-.334-.2h-1.425a.52.52 0 0 0-.234.058.482.482 0 0 0-.209.205L132.191 5.2h-.349V.363a.37.37 0 0 0-.099-.26.352.352 0 0 0-.253-.103h-1.332a.37.37 0 0 0-.337.22.346.346 0 0 0-.027.143V9.29c0 .103.038.193.11.259a.353.353 0 0 0 .254.104h1.333a.328.328 0 0 0 .251-.105.346.346 0 0 0 .075-.119.333.333 0 0 0 .024-.14V6.927h.386l1.571 2.446c.112.187.267.281.46.281h1.491c.226 0 .32-.11.358-.202.054-.13.038-.262-.047-.406zM102.863 2.89h-1.489a.389.389 0 0 0-.298.122.544.544 0 0 0-.13.249l-1.099 4.167h-.268l-1.182-4.167a.66.66 0 0 0-.113-.247.329.329 0 0 0-.264-.124h-1.544c-.199 0-.325.066-.372.193a.588.588 0 0 0-.002.37l1.887 5.865c.03.093.08.17.145.232a.388.388 0 0 0 .281.104h.798l-.066.19-.19.547a.872.872 0 0 1-.29.426.7.7 0 0 1-.442.148.956.956 0 0 1-.4-.09 1.842 1.842 0 0 1-.35-.209.62.62 0 0 0-.335-.115h-.016c-.13 0-.243.074-.334.216l-.474.708c-.193.304-.086.504.039.615.234.224.528.399.875.524.344.125.723.186 1.126.186.682 0 1.252-.187 1.689-.565.435-.376.756-.887.952-1.524l2.188-7.258c.05-.155.05-.284.005-.389-.037-.08-.125-.174-.327-.174z" fill="#011B33"/>
    </svg>`,light:A5};return`
    <style>
      #inline-button-`.concat(n.inlineId,` {
        position: relative;
        text-align: center;
        display: inline-block;
      }
      #inline-button-`).concat(n.inlineId,`__trigger {
        `).concat((a=n.variant||"normal",i={normal:`
    background: linear-gradient(180deg,#44b669 0,#40ad57);
    text-shadow: 1px 1px 1px rgba(0,0,0,.1);
    color: #ffffff;
  `,light:`
    background: white;
    text-shadow: none;
    color: #011b33;
  `},"".concat(`
    box-sizing: border-box;
    display: inline-block;
    line-height: 1;
    white-space: nowrap;
    margin: 0 0 10px;
    text-align: center;
    -webkit-appearance: none;
    outline: none;
    font-size: 14px;
    font-weight: 600;
    border-radius: 6px;
    cursor: pointer;
    padding: 16px 24px;
    box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.15);
    transition: all .3s ease;
    border: none;
    min-width: 190px;
  `).concat(i[a])),`
      }
      #inline-button-`).concat(n.inlineId,`__trigger:hover {
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
      }
      #inline-button-`).concat(n.inlineId,`__trigger:active {
        transform: translateY(3px);
      }
    </style>
    <button id="inline-button-`).concat(n.inlineId,'__trigger" data-inline-id="').concat(n.inlineId,'">').concat(n.text||"Pay"," ").concat(n.currency||"NGN"," ").concat(n.amount,`</button>
    <div id="inline-button-`).concat(n.inlineId,`__wordmark">
      `).concat(o[n.wordmarkVariant||"normal"],`
    </div>
  `)}(e),e.parent.parentNode.insertBefore(r,e.parent.nextSibling),t=iI(r.getElementsByTagName("button"),1)[0]}return t}({inlineId:ft.id,amount:Si.amount/100,currency:Si.currency,id:Si.buttonId,text:Si.buttonText,variant:Si.buttonVariant,wordmarkVariant:Si.buttonWordmarkVariant,parent:Io()}).addEventListener("click",function(e){e.preventDefault(),qf?ft.resumeTransaction(qf.accessCode):qf=ft.newTransaction(ss(ss({},Si),{},{onSuccess:function(t){var r,n,a,i,o,l;r={type:"hidden",name:"reference",value:t.reference,parent:sw},n=r.type,a=r.value,i=r.name,o=r.parent,(l=document.createElement("input")).type=n,l.value=a,l.name=i,o.appendChild(l),sw.submit()}}))})}var RI=function(e){var t=new $5;t.newTransaction(e)};function MI(e){function t(r){var n=r.config,a=r.onSuccess,i=r.onClose,o=Gt(Gt({},e),n),l=o.publicKey,c=o.firstname,u=o.lastname,m=o.phone,h=o.email,p=o.amount,y=o.reference,N=o.metadata,f=o.currency,j=f===void 0?"NGN":f,b=o.channels,x=o.label,w=o.plan,C=o.quantity,S=o.subaccount,M=o.transaction_charge,A=o.bearer,R=o.split,z=o.split_code,$=o.connect_account,W=o.connect_split,G=o.onBankTransferConfirmationPending,X=Gt(Gt(Gt(Gt(Gt(Gt(Gt(Gt(Gt(Gt(Gt(Gt(Gt(Gt(Gt(Gt(Gt(Gt({onSuccess:a||function(){return null},onCancel:i||function(){return null},key:l,email:h,amount:p},c&&{firstname:c}),u&&{lastname:u}),m&&{phone:m}),y&&{ref:y}),j&&{currency:j}),b&&{channels:b}),N&&{metadata:N}),x&&{label:x}),G&&{onBankTransferConfirmationPending:G}),S&&{subaccount:S}),M&&{transaction_charge:M}),A&&{bearer:A}),R&&{split:R}),z&&{split_code:z}),w&&{plan:w}),C&&{quantity:C}),W&&{connect_split:W}),$&&{connect_account:$});RI(X)}return t}var z5=d.createContext({config:{},initializePayment:function(){return null},onSuccess:function(){return null},onClose:function(){return null}}),_I=function(e){var t=e.children,r=e.onSuccess,n=e.onClose,a=C5(e,["children","onSuccess","onClose"]),i=MI(a);return Le.createElement(z5.Provider,{value:{config:a,initializePayment:i,onSuccess:r,onClose:n}},t)},DI=function(e){var t=e.children,r=e.ref,n=d.useContext(z5),a=n.config,i=n.initializePayment,o=n.onSuccess,l=n.onClose,c=function(){return i({config:a,onSuccess:o,onClose:l})};return t({initializePayment:c,ref:r})};d.forwardRef(function(e,t){var r=e.children,n=e.onSuccess,a=e.onClose,i=C5(e,["children","onSuccess","onClose"]),o=n||function(){return null},l=a||function(){return null};return Le.createElement(_I,Gt({},i,{onSuccess:o,onClose:l}),Le.createElement(DI,{ref:t},r))});var II="Separator",rw="horizontal",FI=["horizontal","vertical"],U5=d.forwardRef((e,t)=>{const{decorative:r,orientation:n=rw,...a}=e,i=OI(n)?n:rw,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(Xe.div,{"data-orientation":i,...l,...a,ref:t})});U5.displayName=II;function OI(e){return FI.includes(e)}var V5=U5;const B5=d.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>s.jsx(V5,{ref:a,decorative:r,orientation:t,className:$e("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));B5.displayName=V5.displayName;function LI({cartItems:e,total:t,userType:r,onContinueShopping:n}){const[a,i]=d.useState(!1),[o,l]=d.useState(!1),[c,u]=d.useState(!1),[m,h]=d.useState(""),[p,y]=d.useState(1650),[N,f]=d.useState(!0),[j,b]=d.useState(null),[x,w]=d.useState(!1),{toast:C}=ks(),{convertPrice:S,formatPrice:M,userCurrency:A}=yi(),R=JSON.parse(localStorage.getItem("user")||"{}"),[z,$]=d.useState(null);d.useEffect(()=>{(async()=>{if(R.userType==="school"&&R.schoolId)try{const oe=await rt("GET",`/api/schools/${R.schoolId}`);if(oe.ok){const pe=await oe.json();$(pe)}}catch(oe){console.error("Failed to fetch school data:",oe)}})()},[R.userType,R.schoolId]);const W=()=>{if(R.userType==="school"){const ne=R.phoneNumber||(z==null?void 0:z.phoneNumber)||"";return{firstName:"",lastName:"",customerName:(z==null?void 0:z.name)||"Loading...",phone:ne,email:R.email||""}}else return{firstName:R.firstName||"",lastName:R.lastName||"",customerName:`${R.firstName||""} ${R.lastName||""}`.trim(),phone:R.phoneNumber||"",email:R.email||""}},G=()=>t,X=()=>G();d.useEffect(()=>{const ne=async()=>{f(!0);try{const pe=await U4();y(pe)}catch(pe){console.error("Failed to fetch exchange rate:",pe),C({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Exchange rate error",description:"Using approximate exchange rate. Please refresh if needed.",variant:"destructive"})}finally{f(!1)}},oe=localStorage.getItem("lastPaymentReference");oe&&b(oe),ne()},[C]);const P=X(),L=OS(P,p),_=ne=>{if(!ne)return"";const oe=ne.replace(/[\s\-\(\)\.]/g,"");let pe=oe.startsWith("+")?oe.substring(1):oe;if(pe.startsWith("234")&&pe.length>=13)return pe;if(oe.startsWith("+234")&&oe.length>=14)return oe;if(pe.startsWith("0")&&pe.length>=10)return"+234"+pe.substring(1);if(/^[789]/.test(pe)&&pe.length>=9)return"+234"+pe;if(pe.length>=10){const he=pe.slice(-10);if(/^[789]/.test(he))return"+234"+he}return console.warn("Phone number format not recognized:",ne,"-> cleaned:",oe),oe},V=W();new Date().getTime().toString(),V.email,V.firstName,V.lastName,_(V.phone);const E=async()=>{const ne=W();if(!ne.email){C({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Email required",description:"Please enter your email address to proceed with payment.",variant:"destructive"});return}if(!ne.phone){C({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Phone number required",description:"Phone number is required to proceed with payment.",variant:"destructive"});return}if(R.userType!=="school"&&(!ne.firstName||!ne.lastName)){C({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Name required",description:"Your name information is required to proceed with payment.",variant:"destructive"});return}l(!0);try{const oe={email:ne.email,firstName:R.userType==="school"?ne.customerName:ne.firstName,lastName:R.userType==="school"?"":ne.lastName,phone:_(ne.phone),amount:L,cartItems:e,userId:R.id},he=await(await rt("POST","/api/payments/initialize",oe)).json();if(he.status)b(he.data.reference),localStorage.setItem("lastPaymentReference",he.data.reference),window.location.href=he.data.authorization_url;else throw new Error(he.message||"Payment initialization failed")}catch(oe){console.error("Payment initialization error:",oe),C({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Payment failed",description:oe.message||"Failed to initialize payment. Please try again.",variant:"destructive"})}finally{l(!1)}},Y=async()=>{const ne=j||localStorage.getItem("lastPaymentReference");if(!ne){C({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"No payment reference found",description:"Please make a payment first.",variant:"destructive"});return}w(!0),C({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Checking payment... ⏳",description:"Verifying your payment with Paystack..."});try{const oe=await rt("GET",`/api/payments/verify/${ne}`),pe=await oe.json();if(oe.ok&&pe.status!==!1)C({className:"bg-green-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Payment verified",description:"Your purchase is complete! Updating your library..."}),localStorage.removeItem("lastPaymentReference"),b(null),u(!0),ke.invalidateQueries({queryKey:["/api/cart"]}),ke.invalidateQueries({queryKey:["/api/year-purchases"]}),ke.invalidateQueries({queryKey:["/api/viewer-purchases"]}),setTimeout(()=>{window.location.reload()},2e3);else{const he=(pe==null?void 0:pe.message)||oe.statusText||"Payment verification failed";C({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Verification failed ❌",description:he.includes("not found")?"Payment may still be processing. Please wait a moment and try again.":he,variant:"destructive"})}}catch(oe){console.error("Payment verification error:",oe),C({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Network error ⚠️",description:`Failed to connect to payment service: ${oe.message}. Please check your internet connection and try again.`,variant:"destructive"})}finally{setTimeout(()=>w(!1),500)}},Z=async()=>{const ne=W();if(!ne.email||!ne.phone){C({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Missing information",description:"Email and phone number are required for demo activation.",variant:"destructive"});return}if(R.userType!=="school"&&(!ne.firstName||!ne.lastName)){C({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Name required",description:"Your name information is required for demo activation.",variant:"destructive"});return}l(!0),C({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Processing payment... 💳",description:"Activating your yearbook access..."}),setTimeout(()=>{u(!0),C({title:"Demo Payment Successful! 🎉",description:`Demo activation completed for ${M(S(P))}. Your yearbooks are now available!`}),setTimeout(()=>{i(!1),u(!1),l(!1),window.location.reload()},2500)},1200)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:s.jsxs(T,{onClick:()=>i(!0),className:"flex-1 bg-green-500/20 backdrop-blur-lg border border-green-200 shadow-2xl cursor-pointer transition-all hover:bg-green-310 hover:scale-105 hover:border-green-400 hover:shadow-green-500/50 hover:shadow-lg hover:scale-105 transition-all duration-200 hover:text-green-600",size:"lg","data-testid":"button-checkout",children:[s.jsx(xs,{className:"h-4 w-4 mr-2"}),"Proceed to Checkout"]})}),s.jsx(sr,{open:a,onOpenChange:i,children:s.jsx(Hs,{className:`max-w-2xl max-h-[90vh] overflow-y-auto bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl
`,"data-testid":"checkout-dialog",children:c?s.jsxs("div",{className:"text-center space-y-4 py-8",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(bn,{className:"h-8 w-8 text-green-600"})}),s.jsxs(Os,{children:[s.jsx(Ls,{className:"text-green-800 text-xl",children:"Order Complete!"}),s.jsx(ao,{className:"text-gray-600",children:"Thank you for your purchase. You now have access to all yearbook content."})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(X7,{className:"h-4 w-4"}),s.jsx("span",{children:"Order confirmed"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(tS,{className:"h-4 w-4"}),s.jsx("span",{children:"Digital delivery"})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Os,{children:[s.jsxs(Ls,{className:"flex items-center space-x-2 text-white",children:[s.jsx(tl,{className:"h-5 w-5"}),s.jsx("span",{children:"Checkout"})]}),s.jsxs(ao,{className:"text-blue-50",children:["Complete your purchase for ",e.length," yearbook",e.length>1?"s":""]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Order Summary"}),s.jsx(ge,{className:`bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl
`,children:s.jsxs(be,{className:"p-4 space-y-3",children:[e.map((ne,oe)=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-white",children:[ne.year," Yearbook"]}),s.jsx("p",{className:"text-sm text-blue-50",children:"Digital Access"})]}),s.jsx("span",{className:"font-semibold text-white",children:M(S(parseFloat(ne.price||"0")))})]},ne.id)),s.jsx(B5,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-lg font-semibold text-white",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:M(S(P))})]}),A==="NGN"&&s.jsx("div",{className:"flex justify-between text-sm text-gray-600",children:s.jsx("div",{className:"flex items-center space-x-1"})})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Customer Details"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:`bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl
 rounded-lg p-4 text-blue-50`,children:[s.jsx("h4",{className:"font-medium text-white mb-3",children:"Customer Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[R.userType==="school"?s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Organization:"})," ",W().customerName]}):s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Name:"})," ",W().customerName]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Email:"})," ",W().email]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Phone:"})," ",W().phone]})]}),s.jsx("p",{className:"text-xs text-white/50 mt-2",children:"To change this information, please update your account settings."})]}),s.jsxs("div",{className:`bg-blue-500/30 backdrop-blur-lg border border-white/20 shadow-2xl
 rounded-lg p-4`,children:[s.jsx("h4",{className:"font-medium text-blue-50 mb-2",children:"Secure Payment with Paystack"}),s.jsxs("ul",{className:"text-sm text-blue-50 space-y-1",children:[s.jsx("li",{children:"• Your payment is processed securely by Paystack"}),s.jsx("li",{children:"• We accept Visa, Mastercard, and local bank transfers"}),s.jsx("li",{children:"• All transactions are encrypted and secure"}),s.jsx("li",{children:"• You'll be redirected to complete your payment"})]})]})]})]})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx(T,{variant:"outline",onClick:()=>i(!1),disabled:o||x,className:"flex-1","data-testid":"button-cancel-checkout",children:"Cancel"}),j&&s.jsx(T,{onClick:Y,disabled:x||o,variant:"outline",className:"flex-1 border-orange-300 text-orange-700 hover:bg-orange-50","data-testid":"button-check-payment",children:x?s.jsxs(s.Fragment,{children:[s.jsx(xr,{className:"h-4 w-4 mr-2 animate-spin"}),"Checking..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Oa,{className:"h-4 w-4 mr-2"}),"Check Payment"]})}),s.jsx(T,{onClick:Z,disabled:o||N||x,className:"flex-1 bg-blue-600 hover:bg-blue-700","data-testid":"button-demo-activate",children:o?s.jsxs(s.Fragment,{children:[s.jsx(xr,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(bn,{className:"h-4 w-4 mr-2"}),"Demo Activate"]})}),s.jsx(T,{onClick:E,disabled:o||N||x,className:"flex-1 bg-green-600 hover:bg-green-700","data-testid":"button-process-payment",children:o?s.jsxs(s.Fragment,{children:[s.jsx(xr,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):N?s.jsxs(s.Fragment,{children:[s.jsx(xr,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading rate..."]}):s.jsxs(s.Fragment,{children:[s.jsx(tl,{className:"h-4 w-4 mr-2"}),"Pay ",M(S(P))]})})]}),s.jsx("p",{className:"text-xs text-gray-500 text-center",children:"* Secure payment processing powered by Paystack"})]})})})]})}function $I(){const[,e]=us(),[t,r]=d.useState(null),[n,a]=d.useState(!1),[i,o]=d.useState(!1),{toast:l}=ks(),{convertPrice:c,formatPrice:u}=yi(),{data:m=[],isLoading:h}=Ze({queryKey:["/api/cart",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!(t!=null&&t.id))return[];const L=await fetch(`/api/cart/${t.id}`);if(!L.ok)throw new Error("Failed to fetch cart items");return L.json()}}),{data:p=[]}=Ze({queryKey:["/api/schools"],queryFn:async()=>{const L=await fetch("/api/schools");if(!L.ok)throw new Error("Failed to fetch schools");return L.json()}}),{data:y=[]}=Ze({queryKey:["/api/notifications",t==null?void 0:t.id],enabled:!!t&&(t==null?void 0:t.userType)!=="school"}),{data:N=[]}=Ze({queryKey:["/api/alumni-badges",t==null?void 0:t.id],enabled:!!t&&(t==null?void 0:t.userType)==="viewer"}),f=y.filter(L=>!L.isRead).length,j=nt({mutationFn:async()=>{t!=null&&t.id&&await rt("DELETE",`/api/notifications/user/${t.id}/clear-all`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",t==null?void 0:t.id]}),l({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"All notifications cleared",description:"Your notification history has been cleared."})}}),b=()=>{j.mutate()},x=nt({mutationFn:async L=>{await rt("PATCH",`/api/notifications/${L}/read`)},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/notifications",t==null?void 0:t.id]})}}),w=L=>{x.mutate(L)},C=L=>{if(!L)return"";const V=new Date().getTime()-new Date(L).getTime(),E=Math.floor(V/1e3),Y=Math.floor(E/60),Z=Math.floor(Y/60),ne=Math.floor(Z/24);return E<60?"Just now":Y<60?`${Y} minute${Y>1?"s":""} ago`:Z<24?`${Z} hour${Z>1?"s":""} ago`:ne<7?`${ne} day${ne>1?"s":""} ago`:new Date(L).toLocaleDateString()},M=(()=>{if(!t||!t.userType)return"Unknown";const L=N.filter(V=>V.status==="verified"),_=N.length;switch(t.userType.toLowerCase()){case"viewer":return _>0?`Alumni(${L.length})`:"Viewer";case"school":return"School Admin";case"super_admin":return"Super Admin";default:return"Unknown"}})(),A=nt({mutationFn:async L=>{await rt("DELETE",`/api/cart/${L}`)},onMutate:async L=>{await ke.cancelQueries({queryKey:["/api/cart",t==null?void 0:t.id]});const _=ke.getQueryData(["/api/cart",t==null?void 0:t.id]);return ke.setQueryData(["/api/cart",t==null?void 0:t.id],(V=[])=>V.filter(E=>E.id!==L)),l({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Item removed",description:"Yearbook has been removed from your cart."}),{previousCartItems:_,removedItemId:L}},onError:(L,_,V)=>{ke.setQueryData(["/api/cart",t==null?void 0:t.id],(V==null?void 0:V.previousCartItems)||[]),l({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Failed to remove item",description:"Something went wrong. Please try again.",variant:"destructive"})},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/cart",t==null?void 0:t.id]})}}),R=nt({mutationFn:async()=>{await rt("DELETE",`/api/cart/clear/${t==null?void 0:t.id}`)},onMutate:async()=>{await ke.cancelQueries({queryKey:["/api/cart",t==null?void 0:t.id]});const L=ke.getQueryData(["/api/cart",t==null?void 0:t.id]);return ke.setQueryData(["/api/cart",t==null?void 0:t.id],[]),l({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Cart cleared",description:"All items have been removed from your cart."}),{previousCartItems:L}},onError:(L,_,V)=>{ke.setQueryData(["/api/cart",t==null?void 0:t.id],(V==null?void 0:V.previousCartItems)||[]),l({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Failed to clear cart",description:"Something went wrong. Please try again.",variant:"destructive"})},onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/cart",t==null?void 0:t.id]})}});d.useEffect(()=>{const L=_=>{if(n){const V=_.target;!V.closest('[data-testid="button-hamburger-menu"]')&&!V.closest(".hamburger-dropdown")&&a(!1)}};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[n]),d.useEffect(()=>{const L=localStorage.getItem("user");if(!L){e("/");return}const _=JSON.parse(L);r(_);const V=new URLSearchParams(window.location.search),E=V.get("payment"),Y=V.get("reference");E==="success"&&Y?(l({className:"bg-green-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Payment successful",description:"Your payment has been processed successfully. Updating your library..."}),ke.invalidateQueries({queryKey:["/api/cart",t==null?void 0:t.id]}),ke.invalidateQueries({queryKey:["/api/year-purchases"]}),ke.invalidateQueries({queryKey:["/api/viewer-purchases"]}),localStorage.removeItem("lastPaymentReference"),window.history.replaceState({},document.title,window.location.pathname),setTimeout(()=>{l({className:"bg-blue-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Library updated",description:"Your new yearbooks are now available in your library."})},1500)):E==="failed"&&Y&&(l({className:"bg-red-600/60 backdrop-blur-lg border border-white/20 shadow-2xl text-white",title:"Payment failed ❌",description:`Your payment could not be processed. Reference: ${Y}. Please try again or contact support.`,variant:"destructive"}),window.history.replaceState({},document.title,window.location.pathname))},[e,l]);const z=L=>{A.mutate(L)},$=()=>{m.length!==0&&R.mutate()},W=()=>{(t==null?void 0:t.userType)==="school"?Yl(e):e("/viewer-dashboard")},G=()=>{(t==null?void 0:t.userType)==="school"?e("/school-dashboard"):e("/yearbook-finder")},X=()=>m.reduce((L,_)=>L+parseFloat(_.price||"0"),0),P=L=>{const _=p.find(V=>V.id===L);return(_==null?void 0:_.name)||"Unknown School"};return t?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute top-60 right-40 w-24 h-24 bg-white rounded-full opacity-20 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-40 left-40 w-20 h-20 bg-white rounded-full opacity-20 animate-float"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-white rounded-full opacity-20 animate-float-delayed"})]})}),s.jsxs("div",{className:"relative z-10 min-h-screen",children:[s.jsxs("header",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20 shadow-2xl relative",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full",children:[s.jsx("div",{className:"absolute top-2 left-10 w-8 h-8 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute top-3 right-20 w-6 h-6 bg-white rounded-full opacity-5 animate-float-delayed"}),s.jsx("div",{className:"absolute bottom-2 left-20 w-5 h-5 bg-white rounded-full opacity-5 animate-float"}),s.jsx("div",{className:"absolute bottom-1 right-10 w-4 h-4 bg-white rounded-full opacity-5 animate-float-delayed"})]})}),s.jsx("div",{className:"mx-auto px-2 sm:px-4 lg:px-8 xl:px-12 2xl:px-16 relative z-10",children:s.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx(T,{variant:"ghost",size:"icon",onClick:W,className:"text-white hover:bg-white/20 flex-shrink-0 mr-2","data-testid":"button-back",children:s.jsx(_s,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(xs,{className:"text-white text-xs sm:text-sm"})}),s.jsx("h1",{className:"ml-2 sm:ml-3 text-sm sm:text-xl font-semibold text-white truncate",children:"Shopping Cart"})]}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-4 flex-shrink-0",children:[(t==null?void 0:t.userType)==="viewer"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"sm:hidden relative",children:M==="Alumni"?s.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:N.filter(L=>L.status==="verified").length}):s.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full"})}),s.jsxs("div",{className:`hidden sm:block px-2 sm:px-3 py-1 rounded-full text-xs font-medium ${M.startsWith("Alumni")?"bg-green-500/20 text-green-200 border border-green-400/30":"bg-blue-500/20 text-blue-200 border border-blue-400/30"}`,children:[s.jsx("span",{className:"hidden md:inline",children:"Account Status: "}),M]}),s.jsx("div",{className:"relative",children:s.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>o(!i),className:"relative text-white hover:bg-white/20","data-testid":"button-notifications",children:[s.jsx(Yn,{className:"h-5 w-5"}),f>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:f})]})}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-white hidden xs:block",children:[s.jsx("span",{className:"hidden sm:inline",children:(t==null?void 0:t.fullName)||"User"}),s.jsx("span",{className:"sm:hidden",children:((t==null?void 0:t.fullName)||"User").split(" ")[0]})]})]}),s.jsx("div",{className:"relative",children:s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>a(!n),className:"text-white hover:bg-white/20 p-2 bg-white/10 rounded-lg border border-white/20 ml-3","data-testid":"button-hamburger-menu",children:s.jsx(Jr,{className:"h-5 w-5"})})})]})]})})]}),i&&s.jsxs("div",{className:"notification-dropdown fixed top-16 right-16 w-72 sm:w-80 max-w-[calc(100vw-2rem)] bg-blue-600/60 backdrop-blur-lg rounded-lg shadow-xl border border-white/20 z-[999999]",children:[s.jsx("div",{className:"p-4 border-b border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"}),s.jsxs("div",{className:"flex items-center gap-2",children:[y.length>0&&s.jsx(T,{variant:"ghost",size:"sm",onClick:b,className:"text-white/80 hover:text-white text-xs","data-testid":"button-clear-all-notifications",children:"Clear All"}),s.jsx(T,{variant:"ghost",size:"sm",onClick:()=>o(!1),"data-testid":"button-close-notifications",children:s.jsx(Pt,{className:"h-4 w-4 text-white hover:text-red-500"})})]})]})}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:y.length===0?s.jsx("div",{className:"p-4 text-center text-white/70",children:"No notifications yet"}):y.map(L=>s.jsx("div",{className:`p-4 border-b border-white/20 hover:bg-white/10 cursor-pointer transition-colors ${L.isRead?"":"bg-blue-500/20"}`,onClick:()=>{L.isRead||w(L.id)},"data-testid":`notification-${L.id}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${L.isRead?"bg-gray-300":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-white",children:L.title}),s.jsx("p",{className:"text-sm text-white/80 mt-1",children:L.message}),s.jsx("p",{className:"text-xs text-white/60 mt-2",children:C(L.createdAt)})]})]})},L.id))})]}),n&&s.jsx("div",{className:"hamburger-dropdown fixed top-16 right-4 w-48 bg-blue-600/70 backdrop-blur-lg border border-white/20 rounded-lg shadow-xl z-[999999]",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{a(!1),(t==null?void 0:t.userType)==="school"?e("/school-dashboard"):e("/viewer-dashboard")},"data-testid":"menu-home",children:[s.jsx(Xr,{className:"h-4 w-4 mr-3"}),"Home"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{a(!1),(t==null?void 0:t.userType)==="school"?e("/school-settings"):e("/viewer-settings")},"data-testid":"menu-settings",children:[s.jsx(Rs,{className:"h-4 w-4 mr-3"}),"Settings"]}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>{a(!1),o5(e,"/cart")},"data-testid":"menu-cart",children:[s.jsx(xs,{className:"h-4 w-4 mr-3"}),"Cart"]}),s.jsx("div",{className:"border-t border-gray-100"}),s.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-red-500 hover:bg-red-500/40 transition-colors",onClick:()=>{a(!1),localStorage.removeItem("user"),e("/")},"data-testid":"menu-logout",children:[s.jsx(Cn,{className:"h-4 w-4 mr-3"}),"Logout"]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-8",children:s.jsx(ge,{className:"bg-white/10 backdrop-blur-lg border border-white/20 shadow-2xl",children:s.jsxs(be,{className:"p-3 sm:p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6",children:[s.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-white mb-2 sm:mb-0",children:["Your Cart (",m.length," items)"]}),m.length>0&&s.jsxs(T,{onClick:$,variant:"outline",className:"bg-red-500/10 backdrop-blur-lg border border-red-400/20 text-red-300 hover:text-red-200 hover:bg-red-500/20 shadow-lg",size:"sm","data-testid":"button-clear-cart",children:[s.jsx(As,{className:"h-4 w-4 mr-1"}),"Clear Cart"]})]}),h?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto"}),s.jsx("p",{className:"mt-2 text-white/70",children:"Loading cart items..."})]}):m.length===0?s.jsxs("div",{className:"text-center py-8 sm:py-12",children:[s.jsx(xs,{className:"mx-auto h-12 w-12 text-white/60 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Your cart is empty"}),s.jsx("p",{className:"text-white/70 mb-6",children:"Add some yearbooks to your cart to get started!"}),s.jsxs(T,{onClick:G,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700  backdrop-blur-lg border border-blue-200 shadow-2xl cursor-pointer transition-all hover:bg-white/15 hover:scale-105  hover:shadow-blue-500/50 hover:shadow-lg hover:scale-105 transition-all duration-200","data-testid":"button-continue-shopping",children:[s.jsx(Gr,{className:"h-4 w-4 mr-2"}),(t==null?void 0:t.userType)==="school"?"Go to Dashboard":"Find Yearbooks"]})]}):s.jsxs("div",{className:"space-y-4",children:[m.map(L=>s.jsx("div",{className:"bg-white/5 backdrop-blur-lg border border-white/10 rounded-lg p-3 sm:p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[s.jsxs("h3",{className:"font-medium text-white text-sm sm:text-base",children:[P(L.schoolId)," - ",L.year]}),s.jsx("p",{className:"text-white/70 text-xs sm:text-sm mt-1",children:"Yearbook Purchase"})]}),s.jsxs("div",{className:"flex items-center justify-between sm:justify-end sm:space-x-4",children:[s.jsx("span",{className:"text-lg sm:text-xl font-semibold text-white",children:u(c(parseFloat(L.price||"0")))}),s.jsx(T,{onClick:()=>z(L.id),variant:"outline",size:"sm",className:"bg-red-500/10 backdrop-blur-lg border border-red-400/20 text-red-300 hover:text-red-200 hover:bg-red-500/20 ml-4","data-testid":`button-remove-${L.id}`,children:s.jsx(As,{className:"h-4 w-4"})})]})]})},L.id)),s.jsxs("div",{className:"border-t border-white/20 pt-4 mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("span",{className:"text-lg font-semibold text-white",children:"Total"}),s.jsx("span",{className:"text-2xl font-bold text-white",children:u(c(X()))})]}),s.jsx(LI,{cartItems:m,total:X(),userType:(t==null?void 0:t.userType)||"viewer",onContinueShopping:G})]}),s.jsx("div",{className:"mt-6 pt-4 border-t border-white/20",children:s.jsxs(T,{onClick:G,variant:"outline",className:"w-full bg-yellow-500/20 backdrop-blur-lg border border-yellow-200 shadow-2xl cursor-pointer transition-all hover:bg-yellow-310 hover:scale-105 hover:border hover:text-yellow-600 text-yellow-50 hover:shadow-yellow-500/50 hover:shadow-lg hover:scale-105 transition-all duration-200","data-testid":"button-continue-shopping-footer",children:[s.jsx(Gr,{className:"h-4 w-4 mr-2"}),(t==null?void 0:t.userType)==="school"?"Back to Dashboard":"Continue Shopping"]})})]})]})})})]})]}):null}function zI(){return s.jsxs(sk,{children:[s.jsx(Ut,{path:"/",component:Fb}),s.jsx(Ut,{path:"/login",component:Fb}),s.jsx(Ut,{path:"/signup",component:LT}),s.jsx(Ut,{path:"/school-signup",component:zT}),s.jsx(Ut,{path:"/viewer-signup",component:HT}),s.jsx(Ut,{path:"/verify-email",component:YT}),s.jsx(Ut,{path:"/school-dashboard",component:bR}),s.jsx(Ut,{path:"/viewer-dashboard",component:vM}),s.jsx(Ut,{path:"/super-admin-dashboard",component:_6}),s.jsx(Ut,{path:"/super-admin",component:AM}),s.jsx(Ut,{path:"/yearbook-manage/:year",component:SD}),s.jsx(Ut,{path:"/yearbook-preview/:year",component:ED}),s.jsx(Ut,{path:"/yearbook-viewer/:year",component:TD}),s.jsx(Ut,{path:"/yearbook/:schoolId/:year",component:AD}),s.jsx(Ut,{path:"/yearbook-finder",component:RD}),s.jsx(Ut,{path:"/photos-memories-manage",component:ID}),s.jsx(Ut,{path:"/guest-upload/:code?",component:zv}),s.jsx(Ut,{path:"/guest-upload",component:zv}),s.jsx(Ut,{path:"/memory-upload/:token?",component:Uv}),s.jsx(Ut,{path:"/memory-upload",component:Uv}),s.jsx(Ut,{path:"/request-alumni-status",component:LD}),s.jsx(Ut,{path:"/school-settings",component:nI}),s.jsx(Ut,{path:"/viewer-settings",component:aI}),s.jsx(Ut,{path:"/cart",component:$I}),s.jsx(Ut,{component:ME})]})}function UI(){return s.jsx(Sk,{client:ke,children:s.jsx(TE,{children:s.jsx(AE,{children:s.jsxs(SE,{children:[s.jsx(US,{}),s.jsx(zI,{})]})})})})}Ey(document.getElementById("root")).render(s.jsx(UI,{}));
